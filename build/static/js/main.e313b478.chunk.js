(this.webpackJsonpfrontend=this.webpackJsonpfrontend||[]).push([[0],{1089:function(e,a,t){},1090:function(e,a,t){},1095:function(e,a,t){"use strict";t.r(a);var n=t(0),o=t.n(n),r=t(45),i=t.n(r),l=t(1258),s=t(1108),c=t(737),d=t(742),m=t(1292),u=t(467),p=t(43),g=t(1313),f=t(125),b=t(1147),E=t(1146);class h extends o.a.Component{constructor(e){super(e),this.handleReset=()=>{this.setState({hasError:!1,error:null,errorInfo:null}),window.location.reload()},this.state={hasError:!1,error:null,errorInfo:null}}static getDerivedStateFromError(e){return{hasError:!0}}componentDidCatch(e,a){this.setState({error:e,errorInfo:a}),console.error("Erro capturado pelo ErrorBoundary:",e,a)}render(){return this.state.hasError?o.a.createElement(g.a,{display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",minHeight:"100vh",p:3,textAlign:"center",bgcolor:"#f5f5f5"},o.a.createElement(E.a,{size:64,color:"#f44336"}),o.a.createElement(f.a,{variant:"h4",color:"error",gutterBottom:!0},"Ops! Algo deu errado"),o.a.createElement(f.a,{variant:"body1",color:"textSecondary",paragraph:!0},"Desculpe pelo inconveniente. Ocorreu um erro inesperado."),o.a.createElement(b.a,{variant:"contained",color:"primary",onClick:this.handleReset,style:{marginTop:16}},"Tentar Novamente")):this.props.children}}var x=h,y=t(4);class v extends o.a.Component{constructor(e){super(e),this.state={hasError:!1}}static getDerivedStateFromError(e){return{hasError:!0}}componentDidCatch(e,a){console.error("Erro no Toast:",e,a)}render(){return this.state.hasError?null:o.a.createElement(y.Toaster,{position:"top-right",toastOptions:{style:{background:"#fff",color:"#333",boxShadow:"0 4px 12px rgba(0, 0, 0, 0.15)",borderRadius:"8px",padding:"16px"},success:{style:{background:"#4caf50",color:"#fff"}},error:{style:{background:"#f44336",color:"#fff"}}}})}}var C=v,k=t(27),S=t(73),N=t(35),w=t.n(N),I=t(401),A=t(741);class T{constructor(e){this.socketManager=e,this.rawSocket=e.currentSocket,this.callbacks=[],this.joins=[],this.rawSocket.on("connect",()=>{var e;if((null===(e=this.rawSocket.io.opts.query)||void 0===e?void 0:e.r)&&!this.rawSocket.recovered){const e=()=>{for(const e of this.joins)console.debug("refreshing join",e),this.rawSocket.emit("join"+e.event,...e.params);this.rawSocket.off("ready",e)};for(const a of this.callbacks)this.rawSocket.off(a.event,a.callback),this.rawSocket.on(a.event,a.callback);this.rawSocket.on("ready",e)}})}on(e,a){return"ready"===e||"connect"===e?this.socketManager.onReady(a):(this.callbacks.push({event:e,callback:a}),this.rawSocket.on(e,a))}off(e,a){const t=this.callbacks.findIndex(t=>t.event===e&&t.callback===a);return this.callbacks.splice(t,1),this.rawSocket.off(e,a)}emit(e){for(var a=arguments.length,t=new Array(a>1?a-1:0),n=1;n<a;n++)t[n-1]=arguments[n];return e.startsWith("join")&&(this.joins.push({event:e.substring(4),params:t}),console.log("Joining",{event:e.substring(4),params:t})),this.rawSocket.emit(e,...t)}disconnect(){for(const e of this.joins)this.rawSocket.emit("leave"+e.event,...e.params);this.joins=[];for(const e of this.callbacks)this.rawSocket.off(e.event,e.callback);this.callbacks=[]}}class D{on(){}off(){}emit(){}disconnect(){}}const O={currentCompanyId:-1,currentUserId:-1,currentSocket:null,socketReady:!1,getSocket:function(e){var a=this;let t=null;if(localStorage.getItem("userId")&&(t=localStorage.getItem("userId")),!e&&!this.currentSocket)return new D;if(e&&"string"!==typeof e&&(e=""+e),e!==this.currentCompanyId||t!==this.currentUserId){this.currentSocket&&(console.warn("closing old socket - company or user changed"),this.currentSocket.removeAllListeners(),this.currentSocket.disconnect(),this.currentSocket=null,this.currentCompanyId=null,this.currentUserId=null);let n=JSON.parse(localStorage.getItem("token"));if(!n)return new D;if(Object(I.a)(n))return console.warn("Expired token, reload after refresh"),setTimeout(()=>{window.location.reload()},1e3),new D;this.currentCompanyId=e,this.currentUserId=t,this.currentSocket=Object(A.a)("http://localhost:8080",{transports:["websocket"],pingTimeout:18e3,pingInterval:18e3,query:{token:n}}),this.currentSocket.io.on("reconnect_attempt",()=>{this.currentSocket.io.opts.query.r=1,n=JSON.parse(localStorage.getItem("token")),Object(I.a)(n)?(console.warn("Refreshing"),window.location.reload()):(console.warn("Using new token"),this.currentSocket.io.opts.query.token=n)}),this.currentSocket.on("disconnect",e=>{if(console.warn("socket disconnected because: "+e),e.startsWith("io server disconnect")){if(console.warn("tryng to reconnect",this.currentSocket),n=JSON.parse(localStorage.getItem("token")),Object(I.a)(n))return console.warn("Expired token - refreshing"),void window.location.reload();console.warn("Reconnecting using refreshed token"),this.currentSocket.io.opts.query.token=n,this.currentSocket.io.opts.query.r=1,this.currentSocket.connect()}}),this.currentSocket.on("connect",(function(){for(var e=arguments.length,a=new Array(e),t=0;t<e;t++)a[t]=arguments[t];console.warn("socket connected",a)})),this.currentSocket.onAny((function(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),o=1;o<t;o++)n[o-1]=arguments[o];console.debug("Event: ",{socket:a.currentSocket,event:e,args:n})})),this.onReady(()=>{this.socketReady=!0})}return new T(this)},onReady:function(e){this.socketReady?e():this.currentSocket.once("ready",()=>{e()})},onConnect:function(e){this.onReady(e)}},j=Object(n.createContext)(),R=e=>{let{children:a}=e;return o.a.createElement(j.Provider,{value:O},a)};var F=t(1311);const M=F.a.create({baseURL:"http://localhost:8080",withCredentials:!0}),P=F.a.create({baseURL:"http://localhost:8080"});var B=M,z=t(466),W=t(639);const L={pt:{translations:{signup:{title:"Cadastre-se",toasts:{success:"Usu\xe1rio criado com sucesso! Fa\xe7a seu login!!!.",fail:"Erro ao criar usu\xe1rio. Verifique os dados informados."},form:{name:"Nome",email:"Email",password:"Senha"},buttons:{submit:"Cadastrar",login:"J\xe1 tem uma conta? Entre!"}},login:{title:"Login",form:{email:"Email",password:"Senha"},buttons:{submit:"Entrar",register:"Registre-se, agora mesmo!"}},plans:{form:{name:"Nome",users:"Usu\xe1rios",connections:"Conex\xf5es",campaigns:"Campanhas",schedules:"Agendamentos",enabled:"Habilitadas",disabled:"Desabilitadas",clear:"Cancelar",delete:"Excluir",save:"Salvar",yes:"Sim",no:"N\xe3o",money:"R$"}},companies:{title:"Cadastrar Empresa",form:{name:"Nome da Empresa",plan:"Plano",token:"Token",submit:"Cadastrar",success:"Empresa criada com sucesso!"}},auth:{toasts:{success:"Login efetuado com sucesso!"},token:"Token"},dashboard:{charts:{perDay:{title:"Atendimentos hoje: "}}},connections:{title:"Conex\xf5es",toasts:{deleted:"Conex\xe3o com o WhatsApp exclu\xedda com sucesso!"},confirmationModal:{deleteTitle:"Deletar",deleteMessage:"Voc\xea tem certeza? Essa a\xe7\xe3o n\xe3o pode ser revertida.",disconnectTitle:"Desconectar",disconnectMessage:"Tem certeza? Voc\xea precisar\xe1 ler o QR Code novamente."},buttons:{add:"Adicionar WhatsApp",disconnect:"desconectar",tryAgain:"Tentar novamente",qrcode:"QR CODE",newQr:"Novo QR CODE",connecting:"Conectando"},toolTips:{disconnected:{title:"Falha ao iniciar sess\xe3o do WhatsApp",content:"Certifique-se de que seu celular esteja conectado \xe0 internet e tente novamente, ou solicite um novo QR Code"},qrcode:{title:"Esperando leitura do QR Code",content:"Clique no bot\xe3o 'QR CODE' e leia o QR Code com o seu celular para iniciar a sess\xe3o"},connected:{title:"Conex\xe3o estabelecida!"},timeout:{title:"A conex\xe3o com o celular foi perdida",content:"Certifique-se de que seu celular esteja conectado \xe0 internet e o WhatsApp esteja aberto, ou clique no bot\xe3o 'Desconectar' para obter um novo QR Code"}},table:{name:"Nome",status:"Status",lastUpdate:"\xdaltima atualiza\xe7\xe3o",default:"Padr\xe3o",actions:"A\xe7\xf5es",session:"Sess\xe3o"}},whatsappModal:{title:{add:"Adicionar WhatsApp",edit:"Editar WhatsApp"},tabs:{general:"Geral",messages:"Mensagens",assessments:"Avalia\xe7\xf5es",integrations:"Integra\xe7\xf5es",schedules:"Hor\xe1rio de expediente"},form:{name:"Nome",default:"Padr\xe3o",sendIdQueue:"Fila",timeSendQueue:"Redirecionar para fila em X minutos",queueRedirection:"Redirecionamento de Fila",outOfHoursMessage:"Mensagem de fora de expediente",queueRedirectionDesc:"Selecione uma fila para os contatos que n\xe3o possuem fila serem redirecionados",prompt:"Prompt",expiresTicket:"Encerrar chats abertos ap\xf3s x minutos",expiresInactiveMessage:"Mensagem de encerramento por inatividade",greetingMessage:"Mensagem de sauda\xe7\xe3o",complationMessage:"Mensagem de conclus\xe3o"},buttons:{okAdd:"Adicionar",okEdit:"Salvar",cancel:"Cancelar"},success:"WhatsApp salvo com sucesso."},qrCode:{message:"Leia o QrCode para iniciar a sess\xe3o"},contacts:{title:"Contatos",toasts:{deleted:"Contato exclu\xeddo com sucesso!",deletedAll:"Todos contatos exclu\xeddos com sucesso!"},searchPlaceholder:"Pesquisar...",confirmationModal:{deleteTitle:"Deletar ",deleteAllTitle:"Deletar Todos",importTitle:"Importar",deleteMessage:"Tem certeza que deseja deletar este contato? Todos os tickets relacionados ser\xe3o perdidos.",deleteAllMessage:"Tem certeza que deseja deletar todos os contatos? Todos os tickets relacionados ser\xe3o perdidos.",importMessage:"Deseja importar todos os contatos do telefone?"},buttons:{import:"Importar",importSheet:"Import. Excel",add:"Adicionar",export:"Exportar",delete:"Excluir Todos"},table:{name:"Nome",whatsapp:"WhatsApp",email:"Email",actions:"A\xe7\xf5es"}},queueIntegrationModal:{title:{add:"Adicionar",edit:"Editar"},form:{id:"ID",type:"Tipo",name:"Nome",projectName:"Nome do Projeto",language:"Linguagem",jsonContent:"JsonContent",urlN8N:"URL",typebotSlug:"Typebot - Slug",typebotExpires:"Tempo em minutos para expirar uma conversa",typebotKeywordFinish:"Palavra para finalizar o ticket",typebotKeywordRestart:"Palavra para reiniciar o fluxo",typebotRestartMessage:"Mensagem ao reiniciar a conversa",typebotUnknownMessage:"Mensagem de op\xe7\xe3o inv\xe1lida",typebotDelayMessage:"Intervalo (ms) entre mensagens"},buttons:{okAdd:"Adicionar",okEdit:"Salvar",cancel:"Cancelar",test:"Testar Bot"},messages:{testSuccess:"Integra\xe7\xe3o testada com sucesso!",addSuccess:"Integra\xe7\xe3o adicionada com sucesso.",editSuccess:"Integra\xe7\xe3o editada com sucesso."}},sideMenu:{name:"Menu Lateral Inicial",note:"Se habilitado, o menu lateral ir\xe1 iniciar fechado",options:{enabled:"Aberto",disabled:"Fechado"}},promptModal:{form:{name:"Nome",prompt:"Prompt",voice:"Voz",max_tokens:"M\xe1ximo de Tokens na resposta",temperature:"Temperatura",apikey:"API Key",max_messages:"M\xe1ximo de mensagens no Hist\xf3rico",voiceKey:"Chave da API de Voz",voiceRegion:"Regi\xe3o de Voz"},success:"Prompt salvo com sucesso!",title:{add:"Adicionar",edit:"Editar"},buttons:{okAdd:"Adicionar",okEdit:"Salvar",cancel:"Cancelar"}},prompts:{title:"Prompts",table:{name:"Nome",queue:"Setor/Fila",max_tokens:"M\xe1ximo Tokens Resposta",actions:"A\xe7\xf5es"},confirmationModal:{deleteTitle:"Excluir",deleteMessage:"Voc\xea tem certeza? Essa a\xe7\xe3o n\xe3o pode ser revertida!"},buttons:{add:"Adicionar"}},contactModal:{title:{add:"Adicionar",edit:"Editar"},form:{mainInfo:"Dados do contato",extraInfo:"Informa\xe7\xf5es adicionais",name:"Nome",number:"N\xfamero do WhatsApp",email:"Email",whatsapp:"Conex\xe3o Origem",extraName:"Nome do campo",extraValue:"Valor"},buttons:{addExtraInfo:"Adicionar informa\xe7\xe3o",okAdd:"Adicionar",okEdit:"Salvar",cancel:"Cancelar"},success:"Contato salvo com sucesso!"},queueModal:{title:{add:"Adicionar fila",edit:"Editar fila"},confirmationModal:{deleteTitle:"Excluir"},form:{name:"Nome",color:"Cor",greetingMessage:"Mensagem de sauda\xe7\xe3o",complationMessage:"Mensagem de conclus\xe3o",outOfHoursMessage:"Mensagem de fora de expediente",ratingMessage:"Mensagem de avalia\xe7\xe3o",token:"Token",orderQueue:"Ordem da fila (Bot)",integrationId:"Integra\xe7\xe3o"},buttons:{okAdd:"Adicionar",okEdit:"Salvar",cancel:"Cancelar",attach:"Anexar Arquivo"}},userModal:{title:{add:"Adicionar usu\xe1rio",edit:"Editar usu\xe1rio"},form:{name:"Nome",email:"Email",password:"Senha",profile:"Perfil",whatsapp:"Conex\xe3o Padr\xe3o",allTicket:"Ticket Sem Fila [Invis\xedvel]",allTicketEnabled:"Habilitado",allTicketDesabled:"Desabilitado"},buttons:{okAdd:"Adicionar",okEdit:"Salvar",cancel:"Cancelar"},success:"Usu\xe1rio salvo com sucesso."},scheduleModal:{title:{add:"Novo Agendamento",edit:"Editar Agendamento"},form:{body:"Mensagem",contact:"Contato",sendAt:"Data de Agendamento",sentAt:"Data de Envio"},buttons:{okAdd:"Adicionar",okEdit:"Salvar",cancel:"Cancelar"},success:"Agendamento salvo com sucesso."},tagModal:{title:{add:"Nova Tag",edit:"Editar Tag"},form:{name:"Nome",color:"Cor",selectColor:"Selecione uma cor",kanban:"Exibir no Kanban"},buttons:{okAdd:"Adicionar",okEdit:"Salvar",cancel:"Cancelar",selectColor:"Escolher cor"},preview:"Pr\xe9-visualiza\xe7\xe3o",placeholderName:"Nome da tag",success:"Tag salva com sucesso."},chat:{noTicketMessage:"Selecione um ticket para come\xe7ar a conversar."},uploads:{titles:{titleUploadMsgDragDrop:"ARRASTE E SOLTE ARQUIVOS NO CAMPO ABAIXO",titleFileList:"Lista de arquivo(s)"}},ticketsManager:{buttons:{newTicket:"Novo"}},ticketsQueueSelect:{placeholder:"Filas"},tickets:{toasts:{deleted:"O atendimento que voc\xea estava foi deletado."},notification:{message:"Mensagem de"},tabs:{open:{title:"Abertas"},closed:{title:"Finalizados"},search:{title:"Busca"}},search:{placeholder:"Buscar atendimento e mensagens"},buttons:{showAll:"Todos"},toDoList:"Lista de Tarefas"},transferTicketModal:{title:"Transferir Ticket",fieldLabel:"Digite para buscar usu\xe1rios",fieldQueueLabel:"Transferir para fila",fieldQueuePlaceholder:"Selecione uma fila",noOptions:"Nenhum usu\xe1rio encontrado com esse nome",buttons:{ok:"Transferir",cancel:"Cancelar"}},toDoList:{title:"Lista de Tarefas",noTasks:"Voc\xea ainda n\xe3o tem tarefas. Adicione uma nova tarefa acima.",noCompletedTasks:"Voc\xea ainda n\xe3o tem tarefas conclu\xeddas.",noPendingTasks:"Voc\xea n\xe3o tem tarefas pendentes.",all:"Todas as tarefas",pending:"Pendentes",completed:"Conclu\xeddas",filterByCreationDate:"Ordenar por data de cria\xe7\xe3o",filterByUpdateDate:"Ordenar por \xfaltima atualiza\xe7\xe3o",newTask:"Nova tarefa",taskPlaceholder:"Digite sua tarefa aqui...",selectCategory:"Selecionar categoria",save:"Salvar",add:"Adicionar",today:"Hoje",yesterday:"Ontem",edit:"Editar",delete:"Excluir",markAsPending:"Marcar como pendente",markAsCompleted:"Marcar como conclu\xedda",categories:{leads:"Leads",clients:"Clientes",meetings:"Reuni\xf5es",followup:"Follow-up",sales:"Vendas",support:"Suporte"},filterTitle:"Filtrar tarefas"},ticketsList:{pendingHeader:"Aguardando",assignedHeader:"Atendendo",noTicketsTitle:"Nada aqui!",noTicketsMessage:"Nenhum atendimento encontrado com esse status ou termo pesquisado",buttons:{accept:"Aceitar",closed:"Finalizar",reopen:"Reabrir"}},newTicketModal:{title:"Criar Ticket",fieldLabel:"Digite para pesquisar o contato",add:"Adicionar",buttons:{ok:"Salvar",cancel:"Cancelar"}},mainDrawer:{listItems:{dashboard:"Dashboard",connections:"Conex\xf5es",tickets:"Atendimentos",quickMessages:"Respostas R\xe1pidas",contacts:"Contatos",queues:"Filas & Chatbot",tags:"Tags",administration:"Administra\xe7\xe3o",users:"Usu\xe1rios",settings:"Configura\xe7\xf5es",helps:"Ajuda",messagesAPI:"API",schedules:"Agendamentos",campaigns:"Campanhas",annoucements:"Informativos",chats:"Chat Interno",financeiro:"Financeiro",files:"Lista de arquivos",prompts:"Open.Ai",queueIntegration:"Integra\xe7\xf5es"},appBar:{notRegister:"Sem notifica\xe7\xf5es",pageTitle:"P\xe1gina Inicial",user:{profile:"Perfil",logout:"Sair"}}},queueIntegration:{title:"Integra\xe7\xf5es",table:{id:"ID",type:"Tipo",name:"Nome",projectName:"Nome do Projeto",language:"Linguagem",lastUpdate:"Ultima atualiza\xe7\xe3o",actions:"A\xe7\xf5es"},buttons:{add:"Adicionar Projeto"},searchPlaceholder:"Pesquisar...",confirmationModal:{deleteTitle:"Excluir",deleteMessage:"Voc\xea tem certeza? Essa a\xe7\xe3o n\xe3o pode ser revertida! e ser\xe1 removida das filas e conex\xf5es vinculadas"}},files:{title:"Lista de arquivos",table:{name:"Nome",contacts:"Contatos",actions:"A\xe7\xe3o"},toasts:{deleted:"Lista exclu\xedda com sucesso!",deletedAll:"Todas as listas foram exclu\xeddas com sucesso!"},buttons:{add:"Adicionar",deleteAll:"Deletar Todos"},confirmationModal:{deleteTitle:"Deletar",deleteAllTitle:"Deletar Todos",deleteMessage:"Tem certeza que deseja deletar esta lista?",deleteAllMessage:"Tem certeza que deseja deletar todas as listas?"}},messagesAPI:{title:"API",textMessage:{number:"N\xfamero",body:"Mensagem",token:"Token cadastrado"},mediaMessage:{number:"N\xfamero",body:"Nome do arquivo",media:"Arquivo",token:"Token cadastrado"}},notifications:{noTickets:"Nenhuma notifica\xe7\xe3o."},quickMessages:{title:"Respostas R\xe1pidas",searchPlaceholder:"Pesquisar...",noAttachment:"Sem anexo",confirmationModal:{deleteTitle:"Exclus\xe3o",deleteMessage:"Esta a\xe7\xe3o \xe9 irrevers\xedvel! Deseja prosseguir?"},buttons:{add:"Adicionar",attach:"Anexar Arquivo",cancel:"Cancelar",edit:"Editar"},toasts:{success:"Atalho adicionado com sucesso!",deleted:"Atalho removido com sucesso!"},dialog:{title:"Mensagem R\xe1pida",shortcode:"Atalho",message:"Resposta",save:"Salvar",cancel:"Cancelar",geral:"Permitir editar",add:"Adicionar",edit:"Editar",visao:"Permitir vis\xe3o"},table:{shortcode:"Atalho",message:"Mensagem",actions:"A\xe7\xf5es",mediaName:"Nome do Arquivo",status:"Status"}},messageVariablesPicker:{label:"Variav\xe9is dispon\xedveis",vars:{contactFirstName:"Primeiro Nome",contactName:"Nome",greeting:"Sauda\xe7\xe3o",protocolNumber:"Protocolo",date:"Data",hour:"Hora"}},contactLists:{title:"Listas de Contatos",table:{name:"Nome",contacts:"Contatos",actions:"A\xe7\xf5es"},buttons:{add:"Nova Lista"},dialog:{name:"Nome",company:"Empresa",okEdit:"Editar",okAdd:"Adicionar",add:"Adicionar",edit:"Editar",cancel:"Cancelar"},confirmationModal:{deleteTitle:"Excluir",deleteMessage:"Esta a\xe7\xe3o n\xe3o pode ser revertida."},toasts:{deleted:"Registro exclu\xeddo"}},contactListItems:{title:"Contatos",searchPlaceholder:"Pesquisa",buttons:{add:"Novo",lists:"Listas",import:"Importar"},dialog:{name:"Nome",number:"N\xfamero",whatsapp:"Whatsapp",email:"E-mail",okEdit:"Editar",okAdd:"Adicionar",add:"Adicionar",edit:"Editar",cancel:"Cancelar"},table:{name:"Nome",number:"N\xfamero",whatsapp:"Whatsapp",email:"E-mail",actions:"A\xe7\xf5es"},confirmationModal:{deleteTitle:"Excluir",deleteMessage:"Esta a\xe7\xe3o n\xe3o pode ser revertida.",importTitle:"Importar",importMessage:"Deseja importar os contatos desta planilha? "},toasts:{deleted:"Registro exclu\xeddo"}},campaigns:{title:"Campanhas",searchPlaceholder:"Pesquisa",buttons:{add:"Nova Campanha",contactLists:"Listas de Contatos"},table:{name:"Nome",whatsapp:"Conex\xe3o",contactList:"Lista de Contatos",status:"Status",scheduledAt:"Agendamento",completedAt:"Conclu\xedda",confirmation:"Confirma\xe7\xe3o",actions:"A\xe7\xf5es"},dialog:{new:"Nova Campanha",update:"Editar Campanha",readonly:"Apenas Visualiza\xe7\xe3o",form:{name:"Nome",message1:"Mensagem 1",message2:"Mensagem 2",message3:"Mensagem 3",message4:"Mensagem 4",message5:"Mensagem 5",confirmationMessage1:"Mensagem de Confirma\xe7\xe3o 1",confirmationMessage2:"Mensagem de Confirma\xe7\xe3o 2",confirmationMessage3:"Mensagem de Confirma\xe7\xe3o 3",confirmationMessage4:"Mensagem de Confirma\xe7\xe3o 4",confirmationMessage5:"Mensagem de Confirma\xe7\xe3o 5",messagePlaceholder:"Conte\xfado da mensagem",whatsapp:"Conex\xe3o",status:"Status",scheduledAt:"Agendamento",confirmation:"Confirma\xe7\xe3o",contactList:"Lista de Contato",tagList:"Lista de Tags",fileList:"Lista de Arquivos"},buttons:{add:"Adicionar",edit:"Atualizar",okadd:"Ok",cancel:"Cancelar Disparos",restart:"Reiniciar Disparos",close:"Fechar",attach:"Anexar Arquivo"}},confirmationModal:{deleteTitle:"Excluir",deleteMessage:"Esta a\xe7\xe3o n\xe3o pode ser revertida."},toasts:{success:"Opera\xe7\xe3o realizada com sucesso",cancel:"Campanha cancelada",restart:"Campanha reiniciada",deleted:"Registro exclu\xeddo"}},announcements:{active:"Ativo",inactive:"Inativo",title:"Informativos",searchPlaceholder:"Pesquisa",buttons:{add:"Novo Informativo",contactLists:"Listas de Informativos"},table:{priority:"Prioridade",title:"Title",text:"Texto",mediaName:"Arquivo",status:"Status",actions:"A\xe7\xf5es"},dialog:{edit:"Edi\xe7\xe3o de Informativo",add:"Novo Informativo",update:"Editar Informativo",readonly:"Apenas Visualiza\xe7\xe3o",form:{priority:"Prioridade",title:"Title",text:"Texto",mediaPath:"Arquivo",status:"Status"},buttons:{add:"Adicionar",edit:"Atualizar",okadd:"Ok",cancel:"Cancelar",close:"Fechar",attach:"Anexar Arquivo"}},confirmationModal:{deleteTitle:"Excluir",deleteMessage:"Esta a\xe7\xe3o n\xe3o pode ser revertida."},toasts:{success:"Opera\xe7\xe3o realizada com sucesso",deleted:"Registro exclu\xeddo"}},campaignsConfig:{title:"Configura\xe7\xf5es de Campanhas"},queues:{title:"Filas & Chatbot",table:{id:"ID",name:"Nome",color:"Cor",greeting:"Mensagem de sauda\xe7\xe3o",actions:"A\xe7\xf5es",orderQueue:"Ordena\xe7\xe3o da fila (bot)"},buttons:{add:"Adicionar fila"},confirmationModal:{deleteTitle:"Excluir",deleteMessage:"Voc\xea tem certeza? Essa a\xe7\xe3o n\xe3o pode ser revertida! Os atendimentos dessa fila continuar\xe3o existindo, mas n\xe3o ter\xe3o mais nenhuma fila atribu\xedda."}},queueSelect:{inputLabel:"Filas"},users:{title:"Usu\xe1rios",table:{id:"ID",name:"Nome",email:"Email",profile:"Perfil",actions:"A\xe7\xf5es"},buttons:{add:"Adicionar usu\xe1rio"},toasts:{deleted:"Usu\xe1rio exclu\xeddo com sucesso."},confirmationModal:{deleteTitle:"Excluir",deleteMessage:"Todos os dados do usu\xe1rio ser\xe3o perdidos. Os atendimento abertos deste usu\xe1rio ser\xe3o movidos para a fila."}},helps:{title:"Central de Ajuda"},schedules:{title:"Agendamentos",confirmationModal:{deleteTitle:"Voc\xea tem certeza que quer excluir este Agendamento?",deleteMessage:"Esta a\xe7\xe3o n\xe3o pode ser revertida."},table:{contact:"Contato",body:"Mensagem",sendAt:"Data de Agendamento",sentAt:"Data de Envio",status:"Status",actions:"A\xe7\xf5es"},buttons:{add:"Novo Agendamento"},toasts:{deleted:"Agendamento exclu\xeddo com sucesso."}},tags:{title:"Tags",noTags:"Nenhuma tag encontrada. Clique no bot\xe3o + para adicionar uma nova tag.",noTagsFound:"Nenhuma tag encontrada para esta pesquisa.",confirmationModal:{deleteTitle:"Voc\xea tem certeza que quer excluir esta Tag?",deleteMessage:"Esta a\xe7\xe3o n\xe3o pode ser revertida.",deleteAllMessage:"Tem certeza que deseja deletar todas as Tags?",deleteAllTitle:"Deletar Todos"},table:{name:"Nome",color:"Cor",tickets:"Registros Tagdos",actions:"A\xe7\xf5es"},buttons:{add:"Nova Tag",deleteAll:"Deletar Todas",edit:"Editar",delete:"Excluir"},toasts:{deletedAll:"Todas Tags exclu\xeddas com sucesso!",deleted:"Tag exclu\xedda com sucesso."}},settings:{success:"Configura\xe7\xf5es salvas com sucesso.",title:"Configura\xe7\xf5es",settings:{userCreation:{name:"Cria\xe7\xe3o de usu\xe1rio",options:{enabled:"Ativado",disabled:"Desativado"}}}},messagesList:{header:{assignedTo:"Atribu\xeddo \xe0:",buttons:{return:"Retornar",resolve:"Resolver",reopen:"Reabrir",accept:"Aceitar"}}},messagesInput:{placeholderOpen:"Digite uma mensagem",placeholderClosed:"Reabra ou aceite esse ticket para enviar uma mensagem.",signMessage:"Assinar"},contactDrawer:{header:"Dados do contato",buttons:{edit:"Editar contato"},extraInfo:"Outras informa\xe7\xf5es"},fileModal:{title:{add:"Adicionar lista de arquivos",edit:"Editar lista de arquivos"},buttons:{okAdd:"Salvar",okEdit:"Editar",cancel:"Cancelar",fileOptions:"Adicionar arquivo"},form:{name:"Nome da lista de arquivos",message:"Detalhes da lista",fileOptions:"Lista de arquivos",extraName:"Mensagem para enviar com arquivo",extraValue:"Valor da op\xe7\xe3o"},success:"Lista de arquivos salva com sucesso!"},ticketOptionsMenu:{schedule:"Agendamento",delete:"Deletar",transfer:"Transferir",registerAppointment:"Observa\xe7\xf5es do Contato",appointmentsModal:{title:"Observa\xe7\xf5es do Contato",textarea:"Observa\xe7\xe3o",placeholder:"Insira aqui a informa\xe7\xe3o que deseja registrar"},confirmationModal:{title:"Deletar o ticket",titleFrom:"do contato ",message:"Aten\xe7\xe3o! Todas as mensagens relacionadas ao ticket ser\xe3o perdidas."},buttons:{delete:"Excluir",cancel:"Cancelar"}},confirmationModal:{deleteTitle:"Confirmar exclus\xe3o",importTitle:"Importar contatos",buttons:{cancel:"Cancelar",confirm:"Confirmar"}},messageOptionsMenu:{delete:"Deletar",reply:"Responder",edit:"Editar Mensagem",confirmationModal:{title:"Apagar mensagem?",message:"Esta a\xe7\xe3o n\xe3o pode ser revertida."}},backendErrors:{ERR_NO_OTHER_WHATSAPP:"Deve haver pelo menos um WhatsApp padr\xe3o.",ERR_NO_DEF_WAPP_FOUND:"Nenhum WhatsApp padr\xe3o encontrado. Verifique a p\xe1gina de conex\xf5es.",ERR_WAPP_NOT_INITIALIZED:"Esta sess\xe3o do WhatsApp n\xe3o foi inicializada. Verifique a p\xe1gina de conex\xf5es.",ERR_WAPP_CHECK_CONTACT:"N\xe3o foi poss\xedvel verificar o contato do WhatsApp. Verifique a p\xe1gina de conex\xf5es",ERR_WAPP_INVALID_CONTACT:"Este n\xe3o \xe9 um n\xfamero de Whatsapp v\xe1lido.",ERR_WAPP_DOWNLOAD_MEDIA:"N\xe3o foi poss\xedvel baixar m\xeddia do WhatsApp. Verifique a p\xe1gina de conex\xf5es.",ERR_INVALID_CREDENTIALS:"Erro de autentica\xe7\xe3o. Por favor, tente novamente.",ERR_SENDING_WAPP_MSG:"Erro ao enviar mensagem do WhatsApp. Verifique a p\xe1gina de conex\xf5es.",ERR_DELETE_WAPP_MSG:"N\xe3o foi poss\xedvel excluir a mensagem do WhatsApp.",ERR_OTHER_OPEN_TICKET:"J\xe1 existe um t\xedquete aberto para este contato.",ERR_SESSION_EXPIRED:"Sess\xe3o expirada. Por favor entre.",ERR_USER_CREATION_DISABLED:"A cria\xe7\xe3o do usu\xe1rio foi desabilitada pelo administrador.",ERR_NO_PERMISSION:"Voc\xea n\xe3o tem permiss\xe3o para acessar este recurso.",ERR_DUPLICATED_CONTACT:"J\xe1 existe um contato com este n\xfamero.",ERR_NO_SETTING_FOUND:"Nenhuma configura\xe7\xe3o encontrada com este ID.",ERR_NO_CONTACT_FOUND:"Nenhum contato encontrado com este ID.",ERR_NO_TICKET_FOUND:"Nenhum t\xedquete encontrado com este ID.",ERR_NO_USER_FOUND:"Nenhum usu\xe1rio encontrado com este ID.",ERR_NO_WAPP_FOUND:"Nenhum WhatsApp encontrado com este ID.",ERR_CREATING_MESSAGE:"Erro ao criar mensagem no banco de dados.",ERR_CREATING_TICKET:"Erro ao criar t\xedquete no banco de dados.",ERR_FETCH_WAPP_MSG:"Erro ao buscar a mensagem no WhtasApp, talvez ela seja muito antiga.",ERR_QUEUE_COLOR_ALREADY_EXISTS:"Esta cor j\xe1 est\xe1 em uso, escolha outra.",ERR_WAPP_GREETING_REQUIRED:"A mensagem de sauda\xe7\xe3o \xe9 obrigat\xf3rio quando h\xe1 mais de uma fila."},contactDetailsModal:{title:"Detalhes do Contato",tags:"Tags",contactInfo:"Informa\xe7\xf5es de Contato",additionalInfo:"Informa\xe7\xf5es Adicionais",notes:"Observa\xe7\xf5es",success:"Informa\xe7\xf5es salvas com sucesso",tagRemoved:"Tag removida com sucesso",tagAdded:"Tag adicionada com sucesso",addTags:"Adicionar tag",removeTags:"Remover tag",saveButton:"Salvar",cancelButton:"Cancelar",editButton:"Editar",noNotes:"Nenhuma observa\xe7\xe3o adicionada.",addNote:"Adicionar Observa\xe7\xf5es",editNote:"Editar Observa\xe7\xf5es",whatsappNumber:"N\xfamero do WhatsApp",email:"Email",company:"Empresa",position:"Cargo"}}},en:{translations:{signup:{title:"Sign up",toasts:{success:"User created successfully! Please login!",fail:"Error creating user. Check the reported data."},form:{name:"Name",email:"Email",password:"Password"},buttons:{submit:"Register",login:"Already have an account? Log in!"}},login:{title:"Login",form:{email:"Email",password:"Password"},buttons:{submit:"Enter",register:"Don't have an account? Register!"}},auth:{toasts:{success:"Login successfully!"}},dashboard:{charts:{perDay:{title:"Tickets today: "}}},connections:{title:"Connections",toasts:{deleted:"WhatsApp connection deleted sucessfully!"},confirmationModal:{deleteTitle:"Delete",deleteMessage:"Are you sure? It cannot be reverted.",disconnectTitle:"Disconnect",disconnectMessage:"Are you sure? You'll need to read QR Code again."},buttons:{add:"Add WhatsApp",disconnect:"Disconnect",tryAgain:"Try Again",qrcode:"QR CODE",newQr:"New QR CODE",connecting:"Connectiing"},toolTips:{disconnected:{title:"Failed to start WhatsApp session",content:"Make sure your cell phone is connected to the internet and try again, or request a new QR Code"},qrcode:{title:"Waiting for QR Code read",content:"Click on 'QR CODE' button and read the QR Code with your cell phone to start session"},connected:{title:"Connection established"},timeout:{title:"Connection with cell phone has been lost",content:"Make sure your cell phone is connected to the internet and WhatsApp is open, or click on 'Disconnect' button to get a new QRcode"}},table:{name:"Name",status:"Status",lastUpdate:"Last Update",default:"Default",actions:"Actions",session:"Session"}},whatsappModal:{title:{add:"Add WhatsApp",edit:"Edit WhatsApp"},form:{name:"Name",default:"Default"},buttons:{okAdd:"Add",okEdit:"Save",cancel:"Cancel"},success:"WhatsApp saved successfully."},qrCode:{message:"Read QrCode to start the session"},contacts:{title:"Contacts",toasts:{deleted:"Contact deleted sucessfully!"},searchPlaceholder:"Search ...",confirmationModal:{deleteTitle:"Delete",importTitle:"Import contacts",deleteMessage:"Are you sure you want to delete this contact? All related tickets will be lost.",importMessage:"Do you want to import all contacts from the phone?"},buttons:{import:"Import Contacts",add:"Add Contact"},table:{name:"Name",whatsapp:"WhatsApp",email:"Email",actions:"Actions"}},contactModal:{title:{add:"Add contact",edit:"Edit contact"},form:{mainInfo:"Contact details",extraInfo:"Additional information",name:"Name",number:"Whatsapp number",email:"Email",extraName:"Field name",extraValue:"Value"},buttons:{addExtraInfo:"Add information",okAdd:"Add",okEdit:"Save",cancel:"Cancel"},success:"Contact saved successfully."},queueModal:{title:{add:"Add queue",edit:"Edit queue"},form:{name:"Name",color:"Color",greetingMessage:"Greeting Message"},buttons:{okAdd:"Add",okEdit:"Save",cancel:"Cancel"}},userModal:{title:{add:"Add user",edit:"Edit user"},form:{name:"Name",email:"Email",password:"Password",profile:"Profile"},buttons:{okAdd:"Add",okEdit:"Save",cancel:"Cancel"},success:"User saved successfully."},chat:{noTicketMessage:"Select a ticket to start chatting."},ticketsManager:{buttons:{newTicket:"New"}},ticketsQueueSelect:{placeholder:"Queues"},tickets:{toasts:{deleted:"The ticket you were on has been deleted."},notification:{message:"Message from"},tabs:{open:{title:"Inbox"},closed:{title:"Resolved"},search:{title:"Search"}},search:{placeholder:"Search tickets and messages."},buttons:{showAll:"All"}},transferTicketModal:{title:"Transfer Ticket",fieldLabel:"Type to search for users",noOptions:"No user found with this name",buttons:{ok:"Transfer",cancel:"Cancel"}},ticketsList:{pendingHeader:"Queue",assignedHeader:"Working on",noTicketsTitle:"Nothing here!",noTicketsMessage:"No tickets found with this status or search term.",buttons:{accept:"Accept"}},newTicketModal:{title:"Create Ticket",fieldLabel:"Type to search for a contact",add:"Add",buttons:{ok:"Save",cancel:"Cancel"}},mainDrawer:{listItems:{dashboard:"Dashboard",connections:"Connections",tickets:"Tickets",contacts:"Contacts",queues:"Queues",administration:"Administration",users:"Users",settings:"Settings"},appBar:{user:{profile:"Profile",logout:"Logout"}}},notifications:{noTickets:"No notifications."},queues:{title:"Queues",table:{name:"Name",color:"Color",greeting:"Greeting message",actions:"Actions"},buttons:{add:"Add queue"},confirmationModal:{deleteTitle:"Delete",deleteMessage:"Are you sure? It cannot be reverted! Tickets in this queue will still exist, but will not have any queues assigned."}},queueSelect:{inputLabel:"Queues"},users:{title:"Users",table:{name:"Name",email:"Email",profile:"Profile",actions:"Actions"},buttons:{add:"Add user"},toasts:{deleted:"User deleted sucessfully."},confirmationModal:{deleteTitle:"Delete",deleteMessage:"All user data will be lost. Users' open tickets will be moved to queue."}},settings:{success:"Settings saved successfully.",title:"Settings",settings:{userCreation:{name:"User creation",options:{enabled:"Enabled",disabled:"Disabled"}}}},messagesList:{header:{assignedTo:"Assigned to:",buttons:{return:"Return",resolve:"Resolve",reopen:"Reopen",accept:"Accept"}}},messagesInput:{placeholderOpen:"Type a message",placeholderClosed:"Reopen or accept this ticket to send a message.",signMessage:"Sign"},contactDrawer:{header:"Contact details",buttons:{edit:"Edit contact"},extraInfo:"Other information"},ticketOptionsMenu:{delete:"Delete",transfer:"Transfer",confirmationModal:{title:"Delete ticket #",titleFrom:"from contact ",message:"Attention! All ticket's related messages will be lost."},buttons:{delete:"Delete",cancel:"Cancel"}},confirmationModal:{buttons:{confirm:"Ok",cancel:"Cancel"}},messageOptionsMenu:{delete:"Delete",reply:"Reply",confirmationModal:{title:"Delete message?",message:"This action cannot be reverted."}},backendErrors:{ERR_NO_OTHER_WHATSAPP:"There must be at lest one default WhatsApp connection.",ERR_NO_DEF_WAPP_FOUND:"No default WhatsApp found. Check connections page.",ERR_WAPP_NOT_INITIALIZED:"This WhatsApp session is not initialized. Check connections page.",ERR_WAPP_CHECK_CONTACT:"Could not check WhatsApp contact. Check connections page.",ERR_WAPP_INVALID_CONTACT:"This is not a valid whatsapp number.",ERR_WAPP_DOWNLOAD_MEDIA:"Could not download media from WhatsApp. Check connections page.",ERR_INVALID_CREDENTIALS:"Authentication error. Please try again.",ERR_SENDING_WAPP_MSG:"Error sending WhatsApp message. Check connections page.",ERR_DELETE_WAPP_MSG:"Couldn't delete message from WhatsApp.",ERR_OTHER_OPEN_TICKET:"There's already an open ticket for this contact.",ERR_SESSION_EXPIRED:"Session expired. Please login.",ERR_USER_CREATION_DISABLED:"User creation was disabled by administrator.",ERR_NO_PERMISSION:"You don't have permission to access this resource.",ERR_DUPLICATED_CONTACT:"A contact with this number already exists.",ERR_NO_SETTING_FOUND:"No setting found with this ID.",ERR_NO_CONTACT_FOUND:"No contact found with this ID.",ERR_NO_TICKET_FOUND:"No ticket found with this ID.",ERR_NO_USER_FOUND:"No user found with this ID.",ERR_NO_WAPP_FOUND:"No WhatsApp found with this ID.",ERR_CREATING_MESSAGE:"Error while creating message on database.",ERR_CREATING_TICKET:"Error while creating ticket on database.",ERR_FETCH_WAPP_MSG:"Error fetching the message in WhtasApp, maybe it is too old.",ERR_QUEUE_COLOR_ALREADY_EXISTS:"This color is already in use, pick another one.",ERR_WAPP_GREETING_REQUIRED:"Greeting message is required if there is more than one queue."}}},es:{translations:{signup:{title:"Registrarse",toasts:{success:"\xa1Usuario creado exitosamente! \xa1Inicie sesi\xf3n!",fail:"Error al crear usuario. Verifique los datos ingresados."},form:{name:"Nombre",email:"Correo electr\xf3nico",password:"Contrase\xf1a"},buttons:{submit:"Registrarse",login:"\xbfYa tienes una cuenta? \xa1Inicia sesi\xf3n!"}},login:{title:"Iniciar sesi\xf3n",form:{email:"Correo electr\xf3nico",password:"Contrase\xf1a"},buttons:{submit:"Iniciar sesi\xf3n",register:" \xa1Crea tu cuenta en solo unos clics!"}},plans:{form:{name:"Nombre",users:"Usuarios",connections:"Conexiones",campaigns:"Campa\xf1as",schedules:"Programaciones",enabled:"Habilitadas",disabled:"Deshabilitadas",clear:"Cancelar",delete:"Eliminar",save:"Guardar",yes:"S\xed",no:"No",money:"R$"}},companies:{title:"Registrar Empresa",form:{name:"Nombre de la Empresa",plan:"Plan",token:"Token",submit:"Registrar",success:"\xa1Empresa creada exitosamente!"}},auth:{toasts:{success:"\xa1Inicio de sesi\xf3n exitoso!"},token:"Token"},dashboard:{charts:{perDay:{title:"Atenciones de hoy: "}}},connections:{title:"Conexiones",toasts:{deleted:"\xa1Conexi\xf3n con WhatsApp eliminada exitosamente!"},confirmationModal:{deleteTitle:"Eliminar",deleteMessage:"\xbfEst\xe1s seguro? Esta acci\xf3n no se puede deshacer.",disconnectTitle:"Desconectar",disconnectMessage:"\xbfEst\xe1s seguro? Deber\xe1s volver a leer el c\xf3digo QR."},buttons:{add:"Agregar WhatsApp",disconnect:"desconectar",tryAgain:"Intentar de nuevo",qrcode:"C\xd3DIGO QR",newQr:"Nuevo C\xd3DIGO QR",connecting:"Conectando"},toolTips:{disconnected:{title:"Error al iniciar sesi\xf3n en WhatsApp",content:"Aseg\xfarate de que tu tel\xe9fono est\xe9 conectado a internet e int\xe9ntalo nuevamente, o solicita un nuevo c\xf3digo QR"},qrcode:{title:"Esperando lectura del c\xf3digo QR",content:"Haz clic en el bot\xf3n 'C\xd3DIGO QR' y lee el c\xf3digo QR con tu tel\xe9fono para iniciar sesi\xf3n"},connected:{title:"\xa1Conexi\xf3n establecida!"},timeout:{title:"Se perdi\xf3 la conexi\xf3n con el tel\xe9fono",content:"Aseg\xfarate de que tu tel\xe9fono est\xe9 conectado a internet y WhatsApp est\xe9 abierto, o haz clic en el bot\xf3n 'Desconectar' para obtener un nuevo c\xf3digo QR"}},table:{name:"Nombre",status:"Estado",lastUpdate:"\xdaltima actualizaci\xf3n",default:"Predeterminado",actions:"Acciones",session:"Sesi\xf3n"},whatsappModal:{title:{add:"Agregar WhatsApp",edit:"Editar WhatsApp"},tabs:{general:"General",messages:"Mensajes",assessments:"Evaluaciones",integrations:"Integraciones",schedules:"Horario de expediente"},form:{name:"Nombre",default:"Predeterminado",sendIdQueue:"Fila",timeSendQueue:"Redireccionar a cola en X minutos",queueRedirection:"Redirecci\xf3n de cola",outOfHoursMessage:"Mensaje de fuera de expediente",queueRedirectionDesc:"Seleccione una fila para redirigir los contactos que no tienen cola",prompt:"Prompt",expiresTicket:"Cerrar chats abiertos despu\xe9s de X minutos",expiresInactiveMessage:"Mensaje de cierre por inactividad",greetingMessage:"Mensaje de saludo",complationMessage:"Mensaje de conclusi\xf3n"},buttons:{okAdd:"Agregar",okEdit:"Guardar",cancel:"Cancelar"},success:"WhatsApp guardado con \xe9xito."},qrCode:{message:"Lea el c\xf3digo QR para iniciar sesi\xf3n"},contacts:{title:"Contactos",toasts:{deleted:"Contacto eliminado con \xe9xito!",deletedAll:"Todos los contactos eliminados con \xe9xito!"},searchPlaceholder:"Buscar...",confirmationModal:{deleteTitle:"Eliminar ",deleteAllTitle:"Eliminar Todos",importTitle:"Importar contactos",deleteMessage:"\xbfSeguro que desea eliminar este contacto? Se perder\xe1n todos los tickets relacionados.",deleteAllMessage:"\xbfSeguro que desea eliminar todos los contactos? Se perder\xe1n todos los tickets relacionados.",importMessage:"\xbfDesea importar todos los contactos del tel\xe9fono?"},buttons:{import:"Importar",add:"Agregar",export:"Exportar",delete:"Eliminar"},table:{name:"Nombre",whatsapp:"WhatsApp",email:"Correo electr\xf3nico",actions:"Acciones"}},queueIntegrationModal:{title:{add:"Agregar proyecto",edit:"Editar proyecto"},form:{id:"ID",type:"Tipo",name:"Nombre",projectName:"Nombre del Proyecto",language:"Lenguaje",jsonContent:"JsonContent",urlN8N:"URL",typebotSlug:"Typebot - Slug",typebotExpires:"Tiempo en minutos para expirar una conversaci\xf3n",typebotKeywordFinish:"Palabra para finalizar el ticket",typebotKeywordRestart:"Palabra para reiniciar el flujo",typebotRestartMessage:"Mensaje al reiniciar la conversaci\xf3n",typebotUnknownMessage:"Mensaje de opci\xf3n inv\xe1lida",typebotDelayMessage:"Intervalo (ms) entre mensajes"},buttons:{okAdd:"Agregar",okEdit:"Guardar",cancel:"Cancelar",test:"Probar Bot"},messages:{testSuccess:"Integraci\xf3n probada con \xe9xito!",addSuccess:"Integraci\xf3n agregada con \xe9xito.",editSuccess:"Integraci\xf3n editada con \xe9xito."}},sideMenu:{name:"Men\xfa Lateral Inicial",note:"Si est\xe1 habilitado, el men\xfa lateral se iniciar\xe1 cerrado",options:{enabled:"Abierto",disabled:"Cerrado"}},promptModal:{form:{name:"Nombre",prompt:"Prompt",voice:"Voz",max_tokens:"M\xe1ximo de Tokens en la respuesta",temperature:"Temperatura",apikey:"API Key",max_messages:"M\xe1ximo de mensajes en el Historial",voiceKey:"Clave de la API de Voz",voiceRegion:"Regi\xf3n de Voz"},success:"Prompt guardado con \xe9xito!",title:{add:"Agregar Prompt",edit:"Editar Prompt"},buttons:{okAdd:"Agregar",okEdit:"Guardar",cancel:"Cancelar"}},prompts:{title:"Prompts",table:{name:"Nombre",queue:"Sector/Cola",max_tokens:"M\xe1ximo Tokens Respuesta",actions:"Acciones"},confirmationModal:{deleteTitle:"Eliminar",deleteMessage:"\xbfEst\xe1 seguro? \xa1Esta acci\xf3n no se puede deshacer!"},buttons:{add:"Agregar Prompt"}},contactModal:{title:{add:"Agregar contacto",edit:"Editar contacto"},form:{mainInfo:"Datos del contacto",extraInfo:"Informaci\xf3n adicional",name:"Nombre",number:"N\xfamero de Whatsapp",email:"Email",extraName:"Nombre del campo",extraValue:"Valor",whatsapp:"Conexi\xf3n Origen: "},buttons:{addExtraInfo:"Agregar informaci\xf3n",okAdd:"Agregar",okEdit:"Guardar",cancel:"Cancelar"},success:"Contacto guardado con \xe9xito."},queueModal:{title:{add:"Agregar cola",edit:"Editar cola"},form:{name:"Nombre",color:"Color",greetingMessage:"Mensaje de saludo",complationMessage:"Mensaje de conclusi\xf3n",outOfHoursMessage:"Mensaje de fuera de horario",ratingMessage:"Mensaje de evaluaci\xf3n",token:"Token",orderQueue:"Orden de la cola (Bot)",integrationId:"Integraci\xf3n"},buttons:{okAdd:"Agregar",okEdit:"Guardar",cancel:"Cancelar"}},userModal:{title:{add:"Agregar usuario",edit:"Editar usuario"},form:{name:"Nombre",email:"Email",password:"Contrase\xf1a",profile:"Perfil",whatsapp:"Conexi\xf3n Predeterminada",allTicket:"Ticket Sin Cola [Invisible]",allTicketEnabled:"Habilitado",allTicketDesabled:"Deshabilitado"},buttons:{okAdd:"Agregar",okEdit:"Guardar",cancel:"Cancelar"},success:"Usuario guardado con \xe9xito."},scheduleModal:{title:{add:"Nuevo Agendamiento",edit:"Editar Agendamiento"},form:{body:"Mensaje",contact:"Contacto",sendAt:"Fecha de Agendamiento",sentAt:"Fecha de Env\xedo"},buttons:{okAdd:"Agregar",okEdit:"Guardar",cancel:"Cancelar"},success:"Agendamiento guardado con \xe9xito."},tagModal:{title:{add:"Nueva Etiqueta",edit:"Editar Etiqueta"},form:{name:"Nombre",color:"Color"},buttons:{okAdd:"Agregar",okEdit:"Guardar",cancel:"Cancelar"},success:"Etiqueta guardada con \xe9xito."},chat:{noTicketMessage:"Seleccione un ticket para comenzar a conversar."},uploads:{titles:{titleUploadMsgDragDrop:"ARRASTRE Y SUELTE ARCHIVOS EN EL CAMPO ABAJO",titleFileList:"Lista de archivo(s)"}},ticketsManager:{buttons:{newTicket:"Nuevo"}},ticketsQueueSelect:{placeholder:"Colas"},tickets:{toasts:{deleted:"La atenci\xf3n en la que estaba ha sido eliminada."},notification:{message:"Mensaje de"},tabs:{open:{title:"Abiertas"},closed:{title:"Resueltos"},search:{title:"B\xfasqueda"}},search:{placeholder:"Buscar atenci\xf3n y mensajes"},buttons:{showAll:"Todos"}},transferTicketModal:{title:"Transferir Ticket",fieldLabel:"Escribe para buscar usuarios",fieldQueueLabel:"Transferir a cola",fieldQueuePlaceholder:"Seleccione una cola",noOptions:"No se encontraron usuarios con ese nombre",buttons:{ok:"Transferir",cancel:"Cancelar"}},ticketsList:{pendingHeader:"Pendiente",assignedHeader:"Atendiendo",noTicketsTitle:"\xa1Nada aqu\xed!",noTicketsMessage:"No se encontraron tickets con este estado o t\xe9rmino de b\xfasqueda",buttons:{accept:"Aceptar",closed:"Finalizar",reopen:"Reabrir"}},newTicketModal:{title:"Crear Ticket",fieldLabel:"Escribe para buscar el contacto",add:"Agregar",buttons:{ok:"Guardar",cancel:"Cancelar"}},mainDrawer:{listItems:{dashboard:"Tablero",connections:"Conexiones",tickets:"Tickets",quickMessages:"Respuestas R\xe1pidas",contacts:"Contactos",queues:"Colas y Chatbot",tags:"Etiquetas",administration:"Administraci\xf3n",users:"Usuarios",settings:"Configuraciones",helps:"Ayuda",messagesAPI:"API",schedules:"Agendamientos",campaigns:"Campa\xf1as",annoucements:"Anuncios",chats:"Chat Interno",financeiro:"Financiero",files:"Lista de archivos",prompts:"Open.Ai",queueIntegration:"Integraciones"},appBar:{notRegister:"Sin notificaciones",user:{profile:"Perfil",logout:"Salir"}}},queueIntegration:{title:"Integraciones",table:{id:"ID",type:"Tipo",name:"Nombre",projectName:"Nombre del Proyecto",language:"Idioma",lastUpdate:"\xdaltima actualizaci\xf3n",actions:"Acciones"},buttons:{add:"Agregar Proyecto"},searchPlaceholder:"Buscar...",confirmationModal:{deleteTitle:"Eliminar",deleteMessage:"\xbfEst\xe1s seguro? \xa1Esta acci\xf3n no se puede deshacer! y se eliminar\xe1 de las colas y conexiones vinculadas"}},files:{title:"Lista de archivos",table:{name:"Nombre",contacts:"Contactos",actions:"Acci\xf3n"},toasts:{deleted:"\xa1Lista eliminada correctamente!",deletedAll:"\xa1Todas las listas se han eliminado correctamente!"},buttons:{add:"Agregar",deleteAll:"Eliminar Todos"},confirmationModal:{deleteTitle:"Eliminar",deleteAllTitle:"Eliminar Todos",deleteMessage:"\xbfEst\xe1s seguro de que deseas eliminar esta lista?",deleteAllMessage:"\xbfEst\xe1s seguro de que deseas eliminar todas las listas?"}},messagesAPI:{title:"API",textMessage:{number:"N\xfamero",body:"Mensaje",token:"Token registrado"},mediaMessage:{number:"N\xfamero",body:"Nombre del archivo",media:"Archivo",token:"Token registrado"}},notifications:{noTickets:"No hay notificaciones."},quickMessages:{title:"Respuestas R\xe1pidas",searchPlaceholder:"Buscar...",noAttachment:"Sin adjunto",confirmationModal:{deleteTitle:"Eliminaci\xf3n",deleteMessage:"\xa1Esta acci\xf3n es irreversible! \xbfQuieres continuar?"},buttons:{add:"Agregar",attach:"Adjuntar Archivo",cancel:"Cancelar",edit:"Editar"},toasts:{success:"\xa1Atajo agregado correctamente!",deleted:"\xa1Atajo eliminado correctamente!"},dialog:{title:"Mensaje R\xe1pido",shortcode:"Atajo",message:"Respuesta",save:"Guardar",cancel:"Cancelar",geral:"Permitir editar",add:"Agregar",edit:"Editar",visao:"Permitir vista"},table:{shortcode:"Atajo",message:"Mensaje",actions:"Acciones",mediaName:"Nombre del Archivo",status:"Estado"}},messageVariablesPicker:{label:"Variables disponibles",vars:{contactFirstName:"Primer Nombre",contactName:"Nombre",greeting:"Saludo",protocolNumber:"Protocolo",date:"Fecha",hour:"Hora"}},contactLists:{title:"Listas de Contactos",table:{name:"Nombre",contacts:"Contactos",actions:"Acciones"},buttons:{add:"Nueva Lista"},dialog:{name:"Nombre",company:"Empresa",okEdit:"Editar",okAdd:"Agregar",add:"Agregar",edit:"Editar",cancel:"Cancelar"},confirmationModal:{deleteTitle:"Eliminar",deleteMessage:"Esta acci\xf3n no se puede deshacer."},toasts:{deleted:"Registro eliminado"}},contactListItems:{title:"Contactos",searchPlaceholder:"B\xfasqueda",buttons:{add:"Nuevo",lists:"Listas",import:"Importar"},dialog:{name:"Nombre",number:"N\xfamero",whatsapp:"Whatsapp",email:"Correo electr\xf3nico",okEdit:"Editar",okAdd:"Agregar",add:"Agregar",edit:"Editar",cancel:"Cancelar"},table:{name:"Nombre",number:"N\xfamero",whatsapp:"Whatsapp",email:"Correo electr\xf3nico",actions:"Acciones"},confirmationModal:{deleteTitle:"Eliminar",deleteMessage:"Esta acci\xf3n no se puede deshacer.",importTitle:"Importar"},toasts:{deleted:"Registro eliminado"}},campaigns:{title:"Campa\xf1as",searchPlaceholder:"B\xfasqueda",buttons:{add:"Nueva Campa\xf1a",contactLists:"Listas de Contactos"},table:{name:"Nombre",whatsapp:"Conexi\xf3n",contactList:"Lista de Contactos",status:"Estado",scheduledAt:"Programada",completedAt:"Completada",confirmation:"Confirmaci\xf3n",actions:"Acciones"},dialog:{new:"Nueva Campa\xf1a",update:"Editar Campa\xf1a",readonly:"Solo Lectura",form:{name:"Nombre",message1:"Mensaje 1",message2:"Mensaje 2",message3:"Mensaje 3",message4:"Mensaje 4",message5:"Mensaje 5",confirmationMessage1:"Mensaje de Confirmaci\xf3n 1",confirmationMessage2:"Mensaje de Confirmaci\xf3n 2",confirmationMessage3:"Mensaje de Confirmaci\xf3n 3",confirmationMessage4:"Mensaje de Confirmaci\xf3n 4",confirmationMessage5:"Mensaje de Confirmaci\xf3n 5",messagePlaceholder:"Contenido del mensaje",whatsapp:"Conexi\xf3n",status:"Estado",scheduledAt:"Programada",confirmation:"Confirmaci\xf3n",contactList:"Lista de Contacto",tagList:"Lista de Etiquetas",fileList:"Lista de Archivos"},buttons:{add:"Agregar",edit:"Actualizar",okadd:"Ok",cancel:"Cancelar",restart:"Reiniciar Campa\xf1as",close:"Cerrar",attach:"Adjuntar Archivo"}},confirmationModal:{deleteTitle:"Eliminar",deleteMessage:"Esta acci\xf3n no se puede deshacer."},toasts:{success:"Operaci\xf3n realizada correctamente",cancel:"Campa\xf1a cancelada",restart:"Campa\xf1as reiniciadas",deleted:"Registro eliminado"}},announcements:{active:"Activo",inactive:"Inactivo",title:"Informativos",searchPlaceholder:"B\xfasqueda",buttons:{add:"Nuevo Informativo",contactLists:"Listas de Informativos"},table:{priority:"Prioridad",title:"T\xedtulo",text:"Texto",mediaName:"Archivo",status:"Estado",actions:"Acciones"},dialog:{edit:"Editar Informativo",add:"Nuevo Informativo",update:"Editar Informativo",readonly:"Solo Lectura",form:{priority:"Prioridad",title:"T\xedtulo",text:"Texto",mediaPath:"Archivo",status:"Estado"},buttons:{add:"Agregar",edit:"Actualizar",okadd:"Ok",cancel:"Cancelar",close:"Cerrar",attach:"Adjuntar Archivo"}},confirmationModal:{deleteTitle:"Eliminar",deleteMessage:"Esta acci\xf3n no se puede deshacer."},toasts:{success:"Operaci\xf3n realizada correctamente",deleted:"Registro eliminado"}},campaignsConfig:{title:"Configuraciones de Campa\xf1as"},queues:{title:"Colas y Chatbot",table:{id:"ID",name:"Nombre",color:"Color",greeting:"Mensaje de bienvenida",actions:"Acciones",orderQueue:"Orden de la cola (bot)"},buttons:{add:"Agregar cola"},confirmationModal:{deleteTitle:"Eliminar",deleteMessage:"\xbfEst\xe1s seguro? \xa1Esta acci\xf3n no se puede deshacer! Los tickets de esta cola seguir\xe1n existiendo pero ya no tendr\xe1n ninguna cola asignada."}},queueSelect:{inputLabel:"Colas"},users:{title:"Usuarios",table:{id:"ID",name:"Nombre",email:"Email",profile:"Perfil",actions:"Acciones"},buttons:{add:"Agregar usuario"},toasts:{deleted:"Usuario eliminado correctamente."},confirmationModal:{deleteTitle:"Eliminar",deleteMessage:"Todos los datos del usuario se perder\xe1n. Los tickets abiertos de este usuario se mover\xe1n a la cola."}},helps:{title:"Centro de Ayuda"},schedules:{title:"Agendamientos",confirmationModal:{deleteTitle:"\xbfEst\xe1s seguro que quieres eliminar este Agendamiento?",deleteMessage:"Esta acci\xf3n no se puede deshacer."},table:{contact:"Contacto",body:"Mensaje",sendAt:"Fecha de Agendamiento",sentAt:"Fecha de Env\xedo",status:"Estado",actions:"Acciones"},buttons:{add:"Nuevo Agendamiento"},toasts:{deleted:"Agendamiento eliminado correctamente."}},tags:{title:"Etiquetas",confirmationModal:{deleteTitle:"\xbfEst\xe1s seguro que quieres eliminar esta Etiqueta?",deleteMessage:"Esta acci\xf3n no se puede deshacer.",deleteAllMessage:"\xbfEst\xe1s seguro que quieres eliminar todas las Etiquetas?",deleteAllTitle:"Eliminar Todas"},table:{name:"Nombre",color:"Color",tickets:"Tickets Etiquetados",actions:"Acciones"},buttons:{add:"Nueva Etiqueta",deleteAll:"Eliminar Todas"},toasts:{deletedAll:"\xa1Todas las Etiquetas se han eliminado correctamente!",deleted:"Etiqueta eliminada correctamente."}},settings:{success:"Configuraciones guardadas correctamente.",title:"Configuraciones",settings:{userCreation:{name:"Creaci\xf3n de usuario",options:{enabled:"Habilitado",disabled:"Deshabilitado"}}}},messagesList:{header:{assignedTo:"Asignado a:",buttons:{return:"Volver",resolve:"Resolver",reopen:"Reabrir",accept:"Aceptar"}}},messagesInput:{placeholderOpen:"Escribe un mensaje",placeholderClosed:"Reabra o acepte este ticket para enviar un mensaje.",signMessage:"Firmar"},contactDrawer:{header:"Datos del contacto",buttons:{edit:"Editar contacto"},extraInfo:"Informaci\xf3n adicional"},fileModal:{title:{add:"Agregar lista de archivos",edit:"Editar lista de archivos"},buttons:{okAdd:"Guardar",okEdit:"Editar",cancel:"Cancelar",fileOptions:"Agregar archivo"},form:{name:"Nombre de la lista de archivos",message:"Detalles de la lista",fileOptions:"Lista de archivos",extraName:"Mensaje para enviar con archivo",extraValue:"Valor de la opci\xf3n"},success:"Lista de archivos guardada correctamente!"},ticketOptionsMenu:{schedule:"Programaci\xf3n",delete:"Eliminar",transfer:"Transferir",registerAppointment:"Observaciones del Contacto",appointmentsModal:{title:"Observaciones del Contacto",textarea:"Observaci\xf3n",placeholder:"Inserta aqu\xed la informaci\xf3n que deseas registrar"},confirmationModal:{title:"Eliminar el ticket",titleFrom:"del contacto ",message:"\xa1Atenci\xf3n! Todos los mensajes relacionados con el ticket se perder\xe1n."},buttons:{delete:"Eliminar",cancel:"Cancelar"}},messageOptionsMenu:{delete:"Eliminar",reply:"Responder",confirmationModal:{title:"\xbfEliminar mensaje?",message:"Esta acci\xf3n no se puede deshacer."}},backendErrors:{ERR_NO_OTHER_WHATSAPP:"Debe haber al menos un WhatsApp predeterminado.",ERR_NO_DEF_WAPP_FOUND:"No se encontr\xf3 ning\xfan WhatsApp predeterminado. Comprueba la p\xe1gina de conexiones.",ERR_WAPP_NOT_INITIALIZED:"Esta sesi\xf3n de WhatsApp no se ha inicializado. Comprueba la p\xe1gina de conexiones.",ERR_WAPP_CHECK_CONTACT:"No se pudo verificar el contacto de WhatsApp. Comprueba la p\xe1gina de conexiones",ERR_WAPP_INVALID_CONTACT:"Este no es un n\xfamero de WhatsApp v\xe1lido.",ERR_WAPP_DOWNLOAD_MEDIA:"No se pudo descargar medios de WhatsApp. Comprueba la p\xe1gina de conexiones.",ERR_INVALID_CREDENTIALS:"Error de autenticaci\xf3n. Por favor, int\xe9ntalo de nuevo.",ERR_SENDING_WAPP_MSG:"Error al enviar mensaje de WhatsApp. Comprueba la p\xe1gina de conexiones.",ERR_DELETE_WAPP_MSG:"No se pudo eliminar el mensaje de WhatsApp.",ERR_OTHER_OPEN_TICKET:"Ya hay un ticket abierto para este contacto.",ERR_SESSION_EXPIRED:"Sesi\xf3n expirada. Por favor, inicia sesi\xf3n.",ERR_USER_CREATION_DISABLED:"La creaci\xf3n de usuarios ha sido deshabilitada por el administrador.",ERR_NO_PERMISSION:"No tienes permiso para acceder a este recurso.",ERR_DUPLICATED_CONTACT:"Ya existe un contacto con este n\xfamero.",ERR_NO_SETTING_FOUND:"No se encontr\xf3 ninguna configuraci\xf3n con esta ID.",ERR_NO_CONTACT_FOUND:"No se encontr\xf3 ning\xfan contacto con esta ID.",ERR_NO_TICKET_FOUND:"No se encontr\xf3 ning\xfan ticket con esta ID.",ERR_NO_USER_FOUND:"No se encontr\xf3 ning\xfan usuario con esta ID.",ERR_NO_WAPP_FOUND:"No se encontr\xf3 ning\xfan WhatsApp con esta ID.",ERR_CREATING_MESSAGE:"Error al crear mensaje en la base de datos.",ERR_CREATING_TICKET:"Error al crear ticket en la base de datos.",ERR_FETCH_WAPP_MSG:"Error al obtener mensaje de WhatsApp, puede que sea muy antiguo.",ERR_QUEUE_COLOR_ALREADY_EXISTS:"Este color ya est\xe1 en uso, elige otro.",ERR_WAPP_GREETING_REQUIRED:"El saludo es obligatorio cuando hay m\xe1s de una cola."}}}}};z.a.use(W.a).init({debug:!1,defaultNS:["translations"],fallbackLng:"pt",ns:["translations"],resources:L});var q=()=>{const e=Object(S.useHistory)(),[a,t]=Object(n.useState)(!1),[o,r]=Object(n.useState)(!0),[i,l]=Object(n.useState)({}),[s,c]=Object(n.useState)(!0);Object(n.useEffect)(()=>(c(!0),()=>{c(!1)}),[]),B.interceptors.request.use(e=>{const a=localStorage.getItem("token");if(a)try{const n=JSON.parse(a);e.headers.Authorization="Bearer "+n,t(!0)}catch(n){console.error("Erro ao processar token:",n),localStorage.removeItem("token"),t(!1)}return e},e=>Promise.reject(e)),B.interceptors.response.use(e=>e,async a=>{var n,o,r,i;const l=a.config;if((401===(null===a||void 0===a||null===(n=a.response)||void 0===n?void 0:n.status)||403===(null===a||void 0===a||null===(o=a.response)||void 0===o?void 0:o.status))&&!l._retry){var c;if(l._retry=!0,null===(c=l.url)||void 0===c?void 0:c.includes("/auth/refresh_token"))return localStorage.removeItem("token"),localStorage.removeItem("companyId"),localStorage.removeItem("userId"),B.defaults.headers.Authorization=void 0,t(!1),s&&e.push("/login"),Promise.reject(a);try{console.log("Tentando refresh token..."),console.log("URL da API:","http://localhost:8080"),console.log("Cookies dispon\xedveis:",document.cookie);l.headers;const{data:e}=await B.post("/auth/refresh_token",{},{headers:{Authorization:void 0}});if(null===e||void 0===e?void 0:e.token){console.log("Token renovado com sucesso");const a=JSON.stringify(e.token);return localStorage.setItem("token",a),B.defaults.headers.Authorization="Bearer "+e.token,l.headers.Authorization="Bearer "+e.token,B(l)}}catch(u){var d,m;console.error("Erro ao atualizar token:",u),console.error("Status do erro:",null===(d=u.response)||void 0===d?void 0:d.status),console.error("Dados do erro:",null===(m=u.response)||void 0===m?void 0:m.data),localStorage.removeItem("token"),localStorage.removeItem("companyId"),localStorage.removeItem("userId"),B.defaults.headers.Authorization=void 0,t(!1),s&&e.push("/login")}}return 401!==(null===a||void 0===a||null===(r=a.response)||void 0===r?void 0:r.status)&&403!==(null===a||void 0===a||null===(i=a.response)||void 0===i?void 0:i.status)||(localStorage.removeItem("token"),localStorage.removeItem("companyId"),localStorage.removeItem("userId"),B.defaults.headers.Authorization=void 0,t(!1),s&&e.push("/login")),Promise.reject(a)});const d=Object(n.useContext)(j);Object(n.useEffect)(()=>{const a=localStorage.getItem("token");(async()=>{if(a)try{const{data:e}=await B.post("/auth/refresh_token");(null===e||void 0===e?void 0:e.token)&&(B.defaults.headers.Authorization="Bearer "+e.token,s&&(t(!0),l(e.user)))}catch(n){console.error("Erro ao atualizar token:",n),s&&(y.toast.error("Sess\xe3o expirada. Por favor, fa\xe7a login novamente."),e.push("/login"))}s&&r(!1)})()},[s,e]),Object(n.useEffect)(()=>{const e=localStorage.getItem("companyId");if(e&&d){const a=d.getSocket(e);if(a){const t=e=>{"update"===e.action&&e.user.id===i.id&&s&&l(e.user)};return a.on(`company-${e}-user`,t),()=>{a.off(`company-${e}-user`,t)}}}},[d,i,s]);return{isAuth:a,user:i,loading:o,handleLogin:async a=>{if(s){r(!0);try{const{data:n}=await B.post("/auth/login",a),{user:{companyId:o,id:i,company:c}}=n;if(Object(k.has)(c,"settings")&&Object(k.isArray)(c.settings)){const e=c.settings.find(e=>"campaignsEnabled"===e.key);e&&"true"===e.value&&localStorage.setItem("cshow","true")}w.a.locale("pt-br");const d=n.user.company.dueDate,m=w()(d).format("DD/MM/yyyy"),u=w()(d).diff(w()(w()()).format()),p=w()(w()().format()).isBefore(d),g=w.a.duration(u).asDays();!0===p?(localStorage.setItem("token",JSON.stringify(n.token)),localStorage.setItem("companyId",o),localStorage.setItem("userId",i),localStorage.setItem("companyDueDate",m),B.defaults.headers.Authorization="Bearer "+n.token,s&&(l(n.user),t(!0),y.toast.success(z.a.t("auth.toasts.success")),Math.round(g)<5&&y.toast.warn(`Sua assinatura vence em ${Math.round(g)} ${1===Math.round(g)?"dia":"dias"}`),e.push("/tickets"))):s&&y.toast.error(`Opss! Sua assinatura venceu ${m}. Entre em contato com o Suporte para mais informa\xe7\xf5es!`)}catch(i){var n,o;if(s)y.toast.error((null===(n=i.response)||void 0===n||null===(o=n.data)||void 0===o?void 0:o.error)||"Erro ao fazer login")}finally{s&&r(!1)}}},handleLogout:async()=>{if(s){r(!0);try{await B.delete("/auth/logout"),s&&(t(!1),l({}),localStorage.removeItem("token"),localStorage.removeItem("companyId"),localStorage.removeItem("userId"),localStorage.removeItem("cshow"),B.defaults.headers.Authorization=void 0,e.push("/login"))}catch(o){var a,n;if(s)y.toast.error((null===(a=o.response)||void 0===a||null===(n=a.data)||void 0===n?void 0:n.error)||"Erro ao fazer logout")}finally{s&&r(!1)}}},getCurrentUserInfo:async()=>{try{const{data:e}=await B.get("/auth/me");return e}catch(t){var e,a;if(s)y.toast.error((null===(e=t.response)||void 0===e||null===(a=e.data)||void 0===a?void 0:a.error)||"Erro ao obter informa\xe7\xf5es do usu\xe1rio");return null}}}};const H=Object(n.createContext)(),U=e=>{let{children:a}=e;const t=q();return o.a.createElement(H.Provider,{value:t},a)},V=(e,a)=>{if("LOAD_WHATSAPPS"===a.type){return[...a.payload]}if("UPDATE_WHATSAPPS"===a.type){const t=a.payload,n=e.findIndex(e=>e.id===t.id);return-1!==n?(e[n]=t,[...e]):[t,...e]}if("UPDATE_SESSION"===a.type){const t=a.payload,n=e.findIndex(e=>e.id===t.id);return-1!==n?(e[n].status=t.status,e[n].updatedAt=t.updatedAt,e[n].qrcode=t.qrcode,e[n].retries=t.retries,[...e]):[...e]}if("DELETE_WHATSAPPS"===a.type){const t=a.payload,n=e.findIndex(e=>e.id===t);return-1!==n&&e.splice(n,1),[...e]}if("RESET"===a.type)return[]};var G=()=>{const[e,a]=Object(n.useReducer)(V,[]),[t,o]=Object(n.useState)(!0),r=Object(n.useContext)(j);return Object(n.useEffect)(()=>{o(!0);(async()=>{try{if(!localStorage.getItem("token"))return void y.toast.error("Token de autentica\xe7\xe3o n\xe3o encontrado. Fa\xe7a login novamente.");const{data:e}=await B.get("/whatsapp/?session=0");a({type:"LOAD_WHATSAPPS",payload:e}),o(!1)}catch(e){o(!1),e.response&&401===e.response.status?(y.toast.error("Erro de autentica\xe7\xe3o. Fa\xe7a login novamente."),localStorage.removeItem("token"),window.location.href="/login"):y.toast.error(e.message||"Erro ao carregar sess\xf5es do WhatsApp")}})()},[]),Object(n.useEffect)(()=>{const e=localStorage.getItem("companyId"),t=r.getSocket(e);return t.on(`company-${e}-whatsapp`,e=>{"update"===e.action&&a({type:"UPDATE_WHATSAPPS",payload:e.whatsapp})}),t.on(`company-${e}-whatsapp`,e=>{"delete"===e.action&&a({type:"DELETE_WHATSAPPS",payload:e.whatsappId})}),t.on(`company-${e}-whatsappSession`,e=>{"update"===e.action&&a({type:"UPDATE_SESSION",payload:e.session})}),()=>{t.disconnect()}},[r]),{whatsApps:e,loading:t}};const _=Object(n.createContext)(),K=e=>{let{children:a}=e;const{loading:t,whatsApps:n}=G();return o.a.createElement(_.Provider,{value:{whatsApps:n,loading:t}},a)};var Q=o.a.createContext({toggleColorMode:()=>{}}),Y=t(1148),X=t(70),$=t(1205),J=t(1106),Z=t(1159),ee=t(1151),ae=t(1206),te=t(1207),ne=t(747),oe=t(1152),re=t(5),ie=t(1208),le=t(1209),se=t(1179),ce=t(1165),de=t(1157),me=t(659),ue=t.n(me),pe=t(473),ge=t.n(pe),fe=t(751),be=t(1149);const Ee=Object(Y.a)(e=>({backdrop:{zIndex:e.zIndex.drawer+1,color:"#fff"}}));var he=()=>{const e=Ee();return o.a.createElement(fe.a,{className:e.backdrop,open:!0},o.a.createElement(be.a,{color:"inherit"}))},xe=t(1153),ye=t(1154),ve=t(1156),Ce=t(1158),ke=t(1098),Se=t(1111),Ne=t(1110),we=t(1161),Ie=t(400),Ae=t(7),Te=t(1155),De=t(1160),Oe=t(21);var je={user:{static:[]},admin:{static:["dashboard:view","drawer-admin-items:view","tickets-manager:showall","user-modal:editProfile","user-modal:editQueues","ticket-options:deleteTicket","contacts-page:deleteContact","connections-page:actionButtons","connections-page:addConnection","connections-page:editOrDeleteConnection"]}};const Re=e=>{let{role:a,perform:t,data:n,yes:o,no:r}=e;return((e,a,t)=>{const n=je[e];if(!n)return!1;const o=n.static;if(o&&o.includes(a))return!0;const r=n.dynamic;if(r){const e=r[a];return!!e&&e(t)}return!1})(a,t,n)?o():r()};Re.defaultProps={yes:()=>null,no:()=>null};var Fe=t(1320);const Me=Object(Y.a)(e=>({chips:{display:"flex",flexWrap:"wrap"},chip:{margin:2}}));var Pe=e=>{let{selectedQueueIds:a,onChange:t,multiple:r=!0,title:i="",style:l={},className:s=""}=e;const c=Me(),[d,m]=Object(n.useState)([]);Object(n.useEffect)(()=>{u()},[]);const u=async()=>{try{const{data:e}=await B.get("/queue");m(e)}catch(e){y.toast.error(e.message)}};return o.a.createElement("div",null,o.a.createElement(ke.a,{fullWidth:!0,margin:"dense",variant:"outlined",style:{...l,width:"100%"},className:s},o.a.createElement(Se.a,{shrink:!!a},i),o.a.createElement(Ne.a,{label:i,multiple:r,labelWidth:60,value:a,onChange:e=>{t(e.target.value)},MenuProps:{anchorOrigin:{vertical:"bottom",horizontal:"left"},transformOrigin:{vertical:"top",horizontal:"left"},getContentAnchorEl:null},style:{...l,width:"100%"},className:s,renderValue:e=>{var a,t;return o.a.createElement("div",{className:c.chips},(null===e||void 0===e?void 0:e.length)>0&&r?e.map(e=>{const a=d.find(a=>a.id===e);return a?o.a.createElement(Fe.a,{key:e,style:{backgroundColor:a.color},variant:"outlined",label:a.name,className:c.chip}):null}):o.a.createElement(Fe.a,{key:e,variant:"outlined",style:{backgroundColor:null===(a=d.find(a=>a.id===e))||void 0===a?void 0:a.color},label:null===(t=d.find(a=>a.id===e))||void 0===t?void 0:t.name,className:c.chip}))}},!r&&o.a.createElement(oe.a,{value:null},"Nenhum"),d.map(e=>o.a.createElement(oe.a,{key:e.id,value:e.id},e.name)))))};const Be=Object(Y.a)(e=>({root:{display:"flex",flexWrap:"wrap"},dialogPaper:{borderRadius:12,background:"linear-gradient(135deg, #f7f8fa 60%, #e5e0fa 100%)"},dialogTitle:{background:"#fff",padding:e.spacing(3),borderBottom:"1px solid #e3e6fd","& h2":{color:"#5D3FD3",fontWeight:600,fontSize:"1.5rem"}},dialogContent:{padding:e.spacing(3),background:"#fff"},dialogActions:{padding:e.spacing(2,3),background:"#fff",borderTop:"1px solid #e3e6fd"},formSection:{marginBottom:e.spacing(3)},sectionTitle:{display:"flex",alignItems:"center",gap:e.spacing(1),marginBottom:e.spacing(2),color:"#5D3FD3",fontWeight:600,fontSize:"1.1rem"},multFieldLine:{display:"flex",gap:e.spacing(2),marginBottom:e.spacing(2),[e.breakpoints.down("sm")]:{flexDirection:"column",gap:e.spacing(1)}},field:{flex:1,"& .MuiOutlinedInput-root":{borderRadius:8,"&:hover .MuiOutlinedInput-notchedOutline":{borderColor:"#5D3FD3"},"&.Mui-focused .MuiOutlinedInput-notchedOutline":{borderColor:"#5D3FD3"}}},formControl:{width:"100%",marginBottom:e.spacing(2),"& .MuiOutlinedInput-root":{borderRadius:8,"&:hover .MuiOutlinedInput-notchedOutline":{borderColor:"#5D3FD3"},"&.Mui-focused .MuiOutlinedInput-notchedOutline":{borderColor:"#5D3FD3"}}},btnWrapper:{position:"relative"},buttonProgress:{color:Ie.a[500],position:"absolute",top:"50%",left:"50%",marginTop:-12,marginLeft:-12},cancelButton:{color:"#666",borderColor:"#666","&:hover":{borderColor:"#333",backgroundColor:"rgba(0, 0, 0, 0.04)"}},saveButton:{background:"linear-gradient(90deg, #5D3FD3 0%, #7B68EE 100%)",color:"#fff","&:hover":{background:"linear-gradient(90deg, #4930A8 0%, #6A5ACD 100%)"}},divider:{margin:e.spacing(3,0),borderColor:"#e3e6fd"}})),ze=Oe.b().shape({name:Oe.d().min(2,"Too Short!").max(50,"Too Long!").required("Required"),password:Oe.d().min(5,"Too Short!").max(50,"Too Long!"),email:Oe.d().email("Invalid email").required("Required")});var We=e=>{let{open:a,onClose:t,userId:r}=e;const i=Be(),{user:l}=Object(n.useContext)(H),[s,c]=Object(n.useState)(!0),d={name:"",email:"",password:"",profile:"user",allTicket:"enabled"},[m,u]=Object(n.useState)(d),[p,E]=Object(n.useState)([]),[h,x]=Object(n.useState)(!1),{loading:v,whatsApps:C}=G();Object(n.useEffect)(()=>(c(!0),()=>{c(!1)}),[]),Object(n.useEffect)(()=>{(async()=>{if(r&&a&&s)try{const{data:a}=await B.get("/users/"+r);if(s){var e;u(e=>({...e,...a}));const t=null===(e=a.queues)||void 0===e?void 0:e.map(e=>e.id);E(t),x(a.whatsappId?a.whatsappId:"")}}catch(t){s&&y.toast.error(t.message)}})()},[r,a,s]);const k=()=>{t(),u(d)};return o.a.createElement(xe.a,{open:a,onClose:k,maxWidth:"sm",fullWidth:!0,scroll:"paper",classes:{paper:i.dialogPaper}},o.a.createElement(ye.a,{className:i.dialogTitle},o.a.createElement(g.a,{display:"flex",alignItems:"center",gap:1},o.a.createElement(Te.a,{size:24}),r?""+z.a.t("userModal.title.edit"):""+z.a.t("userModal.title.add"))),o.a.createElement(Ae.e,{initialValues:m,enableReinitialize:!0,validationSchema:ze,onSubmit:(e,a)=>{setTimeout(()=>{(async e=>{const a={...e,whatsappId:h,queueIds:p,allTicket:e.allTicket};try{r?await B.put("/users/"+r,a):await B.post("/users",a),y.toast.success(z.a.t("userModal.success"))}catch(t){y.toast.error(t.message)}k()})(e),a.setSubmitting(!1)},400)}},e=>{let{touched:a,errors:t,isSubmitting:n}=e;return o.a.createElement(Ae.d,null,o.a.createElement(ve.a,{className:i.dialogContent},o.a.createElement("div",{className:i.formSection},o.a.createElement(f.a,{className:i.sectionTitle},o.a.createElement(de.a,{size:20}),"Informa\xe7\xf5es B\xe1sicas"),o.a.createElement("div",{className:i.multFieldLine},o.a.createElement(Ae.b,{as:Ce.a,label:z.a.t("userModal.form.name"),autoFocus:!0,name:"name",error:a.name&&Boolean(t.name),helperText:a.name&&t.name,variant:"outlined",margin:"dense",fullWidth:!0,className:i.field}),o.a.createElement(Ae.b,{as:Ce.a,label:z.a.t("userModal.form.password"),type:"password",name:"password",error:a.password&&Boolean(t.password),helperText:a.password&&t.password,variant:"outlined",margin:"dense",fullWidth:!0,className:i.field})),o.a.createElement(Ae.b,{as:Ce.a,label:z.a.t("userModal.form.email"),name:"email",error:a.email&&Boolean(t.email),helperText:a.email&&t.email,variant:"outlined",margin:"dense",fullWidth:!0,className:i.field})),o.a.createElement(Z.a,{className:i.divider}),o.a.createElement("div",{className:i.formSection},o.a.createElement(f.a,{className:i.sectionTitle},o.a.createElement(De.a,{size:20}),"Configura\xe7\xf5es"),o.a.createElement(ke.a,{variant:"outlined",className:i.formControl,margin:"dense"},o.a.createElement(Re,{role:l.profile,perform:"user-modal:editProfile",yes:()=>o.a.createElement(o.a.Fragment,null,o.a.createElement(Se.a,{id:"profile-selection-input-label"},z.a.t("userModal.form.profile")),o.a.createElement(Ae.b,{as:Ne.a,label:z.a.t("userModal.form.profile"),name:"profile",labelId:"profile-selection-label",id:"profile-selection",required:!0},o.a.createElement(oe.a,{value:"admin"},"Admin"),o.a.createElement(oe.a,{value:"user"},"User")))})),o.a.createElement(Re,{role:l.profile,perform:"user-modal:editQueues",yes:()=>o.a.createElement(Pe,{selectedQueueIds:p,onChange:e=>E(e)})}),o.a.createElement(Re,{role:l.profile,perform:"user-modal:editProfile",yes:()=>o.a.createElement(ke.a,{variant:"outlined",margin:"dense",className:i.formControl,fullWidth:!0},o.a.createElement(Se.a,null,z.a.t("userModal.form.whatsapp")),o.a.createElement(Ae.b,{as:Ne.a,value:h,onChange:e=>x(e.target.value),label:z.a.t("userModal.form.whatsapp")},o.a.createElement(oe.a,{value:""},"\xa0"),C.map(e=>o.a.createElement(oe.a,{key:e.id,value:e.id},e.name))))}),o.a.createElement(Re,{role:l.profile,perform:"user-modal:editProfile",yes:()=>!v&&o.a.createElement(ke.a,{variant:"outlined",className:i.formControl,margin:"dense",fullWidth:!0},o.a.createElement(Se.a,{id:"allTicket-selection-input-label"},z.a.t("userModal.form.allTicket")),o.a.createElement(Ae.b,{as:Ne.a,label:z.a.t("allTicket.form.viewTags"),name:"allTicket",labelId:"allTicket-selection-label",id:"allTicket-selection",required:!0},o.a.createElement(oe.a,{value:"enabled"},z.a.t("userModal.form.allTicketEnabled")),o.a.createElement(oe.a,{value:"desabled"},z.a.t("userModal.form.allTicketDesabled"))))}))),o.a.createElement(we.a,{className:i.dialogActions},o.a.createElement(b.a,{onClick:k,disabled:n,variant:"outlined",className:i.cancelButton},z.a.t("userModal.buttons.cancel")),o.a.createElement(b.a,{type:"submit",disabled:n,variant:"contained",className:`${i.btnWrapper} ${i.saveButton}`},r?""+z.a.t("userModal.buttons.okEdit"):""+z.a.t("userModal.buttons.okAdd"),n&&o.a.createElement(be.a,{size:24,className:i.buttonProgress}))))}))},Le=t(1321),qe=t(1168),He=t(1104),Ue=t(1102),Ve=t(1162),Ge=t(1163),_e=t(1164),Ke=t(1166),Qe=t(1167),Ye=t(1169),Xe=t(1170),$e=t(1171),Je=t(1172),Ze=t(1173),ea=t(1174),aa=t(1175),ta=t(1176),na=t(1177),oa=t(1178),ra=t(1180),ia=t(1181),la=t(1182),sa=t(1183),ca=t(1184),da=t(1185),ma=t(1186);var ua=()=>({getPlanList:async e=>{const{data:a}=await P.request({url:"/plans/list",method:"GET",params:e});return a},list:async e=>{const{data:a}=await B.request({url:"/plans/all",method:"GET",params:e});return a},save:async e=>{const{data:a}=await B.request({url:"/plans",method:"POST",data:e});return a},update:async e=>{const{data:a}=await B.request({url:"/plans/"+e.id,method:"PUT",data:e});return a},finder:async e=>{const{data:a}=await B.request({url:"/plans/"+e,method:"GET"});return a},remove:async e=>{const{data:a}=await B.request({url:"/plans/"+e,method:"DELETE"});return a},getPlanCompany:async(e,a)=>{const{data:t}=await B.request({url:"/companies/listPlan/"+a,method:"GET",params:e});return t}});var pa=()=>({getVersion:async()=>{const{data:e}=await B.request({url:"/version",method:"GET"});return e}});const ga=Object(Y.a)(e=>({ListSubheader:{height:26,marginTop:"-15px",marginBottom:"-10px"},userProfile:{display:"flex",flexDirection:"column",padding:e.spacing(3,2.5,2,2.5),borderBottom:"1px solid "+e.palette.divider,transition:"background-color 0.2s ease",[e.breakpoints.down("sm")]:{padding:e.spacing(2,1.5,1.5,1.5)},"&:hover":{backgroundColor:"rgba(93, 63, 211, 0.03)"}},userInfo:{display:"flex",alignItems:"center"},userTextContainer:{marginLeft:e.spacing(2.5)},avatar:{width:e.spacing(6),height:e.spacing(6),backgroundColor:"#5D3FD3",color:"#FFFFFF",fontSize:20,transition:"transform 0.2s ease, box-shadow 0.2s ease","&:hover":{transform:"scale(1.05)",boxShadow:"0 3px 10px rgba(93, 63, 211, 0.2)"}},userName:{fontWeight:600,fontSize:17,color:"#000",transition:"color 0.2s ease","&:hover":{color:"#5D3FD3"}},userRole:{fontSize:13,color:"#4CAF50",display:"block",marginTop:2,transition:"opacity 0.2s ease","&:hover":{opacity:.8}},onlineIndicator:{width:10,height:10,borderRadius:"50%",backgroundColor:"#4CAF50",display:"inline-block",marginLeft:e.spacing(.5),transition:"transform 0.2s ease","&:hover":{transform:"scale(1.2)"}},menuSection:{marginTop:e.spacing(1)},menuItem:{borderRadius:e.spacing(1),margin:e.spacing(.5,1.5),padding:e.spacing(.9,1.5),transition:"all 0.2s ease-in-out",position:"relative",overflow:"hidden",[e.breakpoints.down("sm")]:{margin:e.spacing(.2,1),padding:e.spacing(1,1.2)},"&.Mui-selected":{backgroundColor:"#5D3FD3",boxShadow:"0 2px 8px rgba(93, 63, 211, 0.2)","& .MuiListItemIcon-root":{color:"#FFFFFF"},"& .MuiListItemText-primary":{color:"#FFFFFF",fontWeight:500},"&::before":{content:'""',position:"absolute",left:0,top:"50%",transform:"translateY(-50%)",width:4,height:"70%",backgroundColor:"#FFFFFF",borderRadius:"0 4px 4px 0"}},"&:hover":{backgroundColor:"rgba(93, 63, 211, 0.08)",transform:"translateX(3px)","& .MuiListItemIcon-root":{color:"#5D3FD3",transform:"scale(1.1)"},"& .MuiListItemText-primary":{color:"#5D3FD3"}}},menuIcon:{minWidth:46,color:"#616161",transition:"transform 0.2s ease-in-out, color 0.2s ease-in-out"},logoutItem:{margin:e.spacing(1,1.5),borderRadius:e.spacing(1),display:"flex",alignItems:"center",color:"#666",padding:e.spacing(.75,1),transition:"all 0.2s ease","&:hover":{backgroundColor:"rgba(244, 67, 54, 0.08)",color:"#F44336",transform:"translateX(3px)","& .MuiListItemIcon-root":{color:"#F44336"}}},logoutIcon:{color:"#666",minWidth:36,marginRight:e.spacing(1),transition:"color 0.2s ease"},badge:{marginRight:e.spacing(1)},categoryHeader:{fontSize:13,fontWeight:500,color:"#757575",padding:e.spacing(1.5,2.5,.8,2.5),marginTop:e.spacing(1),letterSpacing:"0.5px",transition:"color 0.2s ease",[e.breakpoints.down("sm")]:{padding:e.spacing(1,2,.5,2),fontSize:12},"&:hover":{color:"#5D3FD3"}},versionText:{fontSize:11,textAlign:"center",opacity:.7,padding:e.spacing(1),transition:"opacity 0.2s ease","&:hover":{opacity:1}},menuContainer:{flex:1,overflowY:"auto","&::-webkit-scrollbar":{width:"6px"},"&::-webkit-scrollbar-thumb":{backgroundColor:"#5D3FD3",borderRadius:"4px"},"&::-webkit-scrollbar-track":{backgroundColor:"rgba(93, 63, 211, 0.05)"},[e.breakpoints.down("sm")]:{paddingBottom:e.spacing(8)}},collapsedMenuItem:{justifyContent:"center",padding:e.spacing(1.5),margin:e.spacing(1,0),transition:"all 0.2s ease","&.Mui-selected":{backgroundColor:"rgba(93, 63, 211, 0.1)","& .MuiListItemIcon-root":{color:"#5D3FD3"}},"&:hover":{backgroundColor:"rgba(93, 63, 211, 0.08)",transform:"scale(1.1)"},"& .MuiListItemIcon-root":{minWidth:"auto",margin:0,fontSize:24,transition:"transform 0.2s ease"}},collapsedCategorySpace:{height:e.spacing(2)},collapsedUserProfile:{display:"flex",justifyContent:"center",padding:e.spacing(2,0),borderBottom:"1px solid "+e.palette.divider,transition:"background-color 0.2s ease","&:hover":{backgroundColor:"rgba(93, 63, 211, 0.03)"}},collapsedAvatar:{width:e.spacing(4.5),height:e.spacing(4.5),backgroundColor:"#5D3FD3",color:"#FFFFFF",fontSize:16,transition:"transform 0.2s ease, box-shadow 0.2s ease","&:hover":{transform:"scale(1.1)",boxShadow:"0 2px 8px rgba(93, 63, 211, 0.25)"}}}));function fa(e){const a=ga(),{icon:t,primary:n,to:r,className:i,selected:l,onClick:s,collapsed:c}=e,d=o.a.useMemo(()=>o.a.forwardRef((e,a)=>o.a.createElement(p.b,Object.assign({to:r,ref:a},e,{onClick:s}))),[r,s]);return o.a.createElement("li",null,o.a.createElement(Ue.a,{button:!0,dense:!0,component:d,className:`${a.menuItem} ${i||""} ${c?a.collapsedMenuItem:""}`,selected:l},t?o.a.createElement(Ve.a,{className:a.menuIcon},o.a.cloneElement(t,{style:{fontSize:c?24:22}})):null,!c&&o.a.createElement(Ge.a,{primary:n,primaryTypographyProps:{style:{fontSize:15,transition:"color 0.2s ease"}}})))}const ba={chats:[],version:null,ticketsUnread:0,chatsUnread:0},Ea=(e,a)=>{switch(a.type){case"LOAD_CHATS":const t=a.payload,n=[];return Object(k.isArray)(t)&&t.forEach(a=>{const t=e.chats.findIndex(e=>e.id===a.id);-1!==t?e.chats[t]=a:n.push(a)}),{...e,chats:[...e.chats,...n]};case"UPDATE_CHATS":const o=a.payload,r=e.chats.findIndex(e=>e.id===o.id);return-1!==r?(e.chats[r]=o,{...e,chats:[...e.chats]}):{...e,chats:[o,...e.chats]};case"DELETE_CHAT":const i=a.payload,l=e.chats.findIndex(e=>e.id===i);return-1!==l&&e.chats.splice(l,1),{...e,chats:[...e.chats]};case"RESET":return ba;case"CHANGE_CHAT":const s=e.chats.map(e=>e.id===a.payload.chat.id?a.payload.chat:e);return{...e,chats:s};case"SET_VERSION":return{...e,version:a.payload};case"SET_TICKETS_UNREAD":return{...e,ticketsUnread:a.payload};case"SET_CHATS_UNREAD":return{...e,chatsUnread:a.payload};default:return e}};var ha=e=>{const a=ga(),{drawerClose:t,collapsed:r}=e,{whatsApps:i}=Object(n.useContext)(_),{user:l,handleLogout:s}=Object(n.useContext)(H),[c,d]=Object(n.useState)(!1),[m,u]=Object(n.useState)(!1),[p,b]=Object(n.useState)(!1),[E,h]=Object(n.useState)(!1),[x,v]=Object(n.useState)(!1),[C,k]=Object(n.useState)(!1),N=Object(S.useHistory)(),w=Object(S.useLocation)(),[I,A]=Object(n.useState)(!1),[T,D]=Object(n.useState)(!1),[O,R]=Object(n.useState)(!1),[F,M]=Object(n.useState)(""),[P,W]=Object(n.useState)(!0),[L,q]=Object(n.useState)(1),[U]=Object(n.useState)(""),[V,G]=Object(n.useReducer)(Ea,ba),{getPlanCompany:K}=ua(),{getVersion:Q}=pa(),{socketConnection:Y}=Object(n.useContext)(j),[X,$]=Object(n.useState)(!0);Object(n.useEffect)(()=>($(!0),()=>{$(!1)}),[]),Object(n.useEffect)(()=>{!async function(){try{const{data:e}=await B.get("/version");X&&G({type:"SET_VERSION",payload:e.version})}catch(e){console.error(e)}}()},[X]),Object(n.useEffect)(()=>{l&&l.companyId&&async function(){try{if(!l||!l.companyId)return void console.error("ID da empresa n\xe3o dispon\xedvel");const e=l.companyId,a=await K(void 0,e);a&&a.plan?(b(a.plan.useCampaigns||!1),h(a.plan.useKanban||!1),v(a.plan.useOpenAi||!1),k(a.plan.useIntegrations||!1),A(a.plan.useSchedules||!1),D(a.plan.useInternalChat||!1),R(a.plan.useExternalApi||!1)):console.error("Configura\xe7\xf5es do plano n\xe3o dispon\xedveis")}catch(e){console.error("Erro ao buscar configura\xe7\xf5es do plano:",e)}}()},[l]),Object(n.useEffect)(()=>{const e=setTimeout(()=>{J()},500);return()=>clearTimeout(e)},[U,L]),Object(n.useEffect)(()=>{if(!Y)return;const e=localStorage.getItem("companyId");if(!e)return;const a=Y.getSocket(e);if(!a)return;const t=e=>{try{"new-message"===e.action&&G({type:"CHANGE_CHAT",payload:e}),"update"===e.action&&G({type:"CHANGE_CHAT",payload:e})}catch(a){console.error("Erro ao processar atualiza\xe7\xe3o do chat:",a)}};return a.on(`company-${e}-chat`,t),()=>{a&&a.off(`company-${e}-chat`,t)}},[Y]),Object(n.useEffect)(()=>{if(!Y)return;const e=e=>{try{X&&G({type:"SET_TICKETS_UNREAD",payload:e})}catch(a){console.error("Erro ao processar atualiza\xe7\xe3o do ticket:",a)}},a=e=>{try{X&&G({type:"SET_CHATS_UNREAD",payload:e})}catch(a){console.error("Erro ao processar atualiza\xe7\xe3o do chat:",a)}};return Y.on("ticket:update",e),Y.on("chat:update",a),()=>{Y&&(Y.off("ticket:update",e),Y.off("chat:update",a))}},[Y,X]),Object(n.useEffect)(()=>{let e=0;if(V.chats.length>0)for(let a of V.chats)for(let t of a.users)t.userId===l.id&&(e+=t.unreads);W(!(e>0))},[V.chats,l.id]),Object(n.useEffect)(()=>{localStorage.getItem("cshow")&&b(!0)},[]),Object(n.useEffect)(()=>{const e=setTimeout(()=>{if(i.length>0){i.filter(e=>"qrcode"===e.status||"PAIRING"===e.status||"DISCONNECTED"===e.status||"TIMEOUT"===e.status||"OPENING"===e.status).length>0?d(!0):d(!1)}},2e3);return()=>clearTimeout(e)},[i]);const J=async()=>{try{const{data:e}=await B.get("/chats/",{params:{searchParam:U,pageNumber:L}});X&&G({type:"LOAD_CHATS",payload:e.records})}catch(n){var e,a,t;if(X)if(401===(null===(e=n.response)||void 0===e?void 0:e.status))N.push("/login");else y.toast.error((null===(a=n.response)||void 0===a||null===(t=a.data)||void 0===t?void 0:t.error)||"Erro ao carregar chats")}};Object(n.useEffect)(()=>{M(w.pathname),(w.pathname.includes("/campaigns")||w.pathname.includes("/contact-lists"))&&u(!0)},[w]),Object(n.useEffect)(()=>(N.listen(()=>{M(window.location.pathname)}),M(window.location.pathname),()=>{}),[N]);const ae=e=>e?e.charAt(0).toUpperCase():"?",te=e=>{M(e),document.body.offsetWidth<600&&t()};return o.a.createElement("div",{onClick:t,className:a.menuContainer},r?o.a.createElement(g.a,{className:a.collapsedUserProfile},o.a.createElement(Le.a,{className:a.collapsedAvatar},ae(l.name))):o.a.createElement(g.a,{className:a.userProfile},o.a.createElement("div",{className:a.userInfo},o.a.createElement(Le.a,{className:a.avatar},ae(l.name)),o.a.createElement("div",{className:a.userTextContainer},o.a.createElement(f.a,{variant:"subtitle1",className:a.userName},l.name,o.a.createElement("span",{className:a.onlineIndicator})),o.a.createElement(f.a,{variant:"body2",className:a.userRole},l.profile)))),o.a.createElement(Z.a,null),!r&&o.a.createElement(f.a,{className:a.categoryHeader},"Principal"),r&&o.a.createElement("div",{className:a.collapsedCategorySpace}),o.a.createElement(Re,{role:l.profile,perform:"dashboard:view",yes:()=>o.a.createElement(fa,{to:"/",primary:"Dashboard",icon:o.a.createElement(_e.a,{size:22}),selected:"/"===F,onClick:()=>te("/"),collapsed:r})}),o.a.createElement(fa,{to:"/tickets",primary:"Atendimentos",icon:o.a.createElement(ce.a,{size:22}),selected:"/tickets"===F,onClick:()=>te("/tickets"),collapsed:r}),E&&o.a.createElement(fa,{to:"/kanban",primary:"Kanban",icon:o.a.createElement(Ke.a,{size:22}),selected:"/kanban"===F,onClick:()=>te("/kanban"),collapsed:r}),o.a.createElement(fa,{to:"/contacts",primary:"Contatos",icon:o.a.createElement(Qe.a,{size:22}),selected:"/contacts"===F,onClick:()=>te("/contacts"),collapsed:r}),o.a.createElement(fa,{to:"/chats",primary:"Chat Interno",icon:o.a.createElement(qe.a,{color:"secondary",variant:"dot",invisible:P,className:a.badge},o.a.createElement(ce.a,{size:22})),selected:"/chats"===F,onClick:()=>te("/chats"),collapsed:r}),o.a.createElement(fa,{to:"/quick-messages",primary:"Respostas R\xe1pidas",icon:o.a.createElement(Ye.a,{size:22}),selected:"/quick-messages"===F,onClick:()=>te("/quick-messages"),collapsed:r}),o.a.createElement(fa,{to:"/todolist",primary:"Tarefas",icon:o.a.createElement(Xe.a,{size:22}),selected:"/todolist"===F,onClick:()=>te("/todolist"),collapsed:r}),o.a.createElement(fa,{to:"/schedules",primary:"Agendamentos",icon:o.a.createElement($e.a,{size:22}),selected:"/schedules"===F,onClick:()=>te("/schedules"),collapsed:r}),o.a.createElement(fa,{to:"/tags",primary:"Tags",icon:o.a.createElement(Je.a,{size:22}),selected:"/tags"===F,onClick:()=>te("/tags"),collapsed:r}),o.a.createElement(fa,{to:"/helps",primary:"Ajuda",icon:o.a.createElement(Ze.a,{size:22}),selected:"/helps"===F,onClick:()=>te("/helps"),collapsed:r}),o.a.createElement(Re,{role:l.profile,perform:"drawer-admin-items:view",yes:()=>o.a.createElement(o.a.Fragment,null,o.a.createElement(Z.a,{style:{margin:"16px 0 8px 0"}}),!r&&o.a.createElement(f.a,{className:a.categoryHeader},"Administra\xe7\xe3o"),r&&o.a.createElement("div",{className:a.collapsedCategorySpace}),p&&o.a.createElement(o.a.Fragment,null,o.a.createElement(Ue.a,{button:!0,onClick:()=>u(e=>!e),className:a.menuItem,selected:F.includes("/campaigns")||F.includes("/contact-lists")},o.a.createElement(Ve.a,{className:a.menuIcon},o.a.createElement(ea.a,{size:22})),o.a.createElement(Ge.a,{primary:"Campanhas"}),m?o.a.createElement(aa.a,{size:20}):o.a.createElement(ta.a,{size:20})),o.a.createElement(He.a,{style:{paddingLeft:15},in:m,timeout:"auto",unmountOnExit:!0},o.a.createElement(ee.a,{component:"div",disablePadding:!0},o.a.createElement(Ue.a,{onClick:()=>{N.push("/campaigns"),te("/campaigns")},button:!0,className:a.menuItem,selected:"/campaigns"===F},o.a.createElement(Ve.a,{className:a.menuIcon},o.a.createElement(na.a,{size:22})),o.a.createElement(Ge.a,{primary:"Listagem"})),o.a.createElement(Ue.a,{onClick:()=>{N.push("/contact-lists"),te("/contact-lists")},button:!0,className:a.menuItem,selected:"/contact-lists"===F},o.a.createElement(Ve.a,{className:a.menuIcon},o.a.createElement(Te.a,{size:22})),o.a.createElement(Ge.a,{primary:"Listas de Contatos"})),o.a.createElement(Ue.a,{onClick:()=>{N.push("/campaigns-config"),te("/campaigns-config")},button:!0,className:a.menuItem,selected:"/campaigns-config"===F},o.a.createElement(Ve.a,{className:a.menuIcon},o.a.createElement(oa.a,{size:22})),o.a.createElement(Ge.a,{primary:"Configura\xe7\xf5es"}))))),l.super&&o.a.createElement(fa,{to:"/announcements",primary:"Informativos",icon:o.a.createElement(se.a,{size:22}),selected:"/announcements"===F,onClick:()=>te("/announcements"),collapsed:r}),x&&o.a.createElement(fa,{to:"/prompts",primary:"Open.AI",icon:o.a.createElement(ra.a,{size:22}),selected:"/prompts"===F,onClick:()=>te("/prompts"),collapsed:r}),C&&o.a.createElement(fa,{to:"/queue-integration",primary:"Integra\xe7\xf5es",icon:o.a.createElement(ia.a,{size:22}),selected:"/queue-integration"===F,onClick:()=>te("/queue-integration"),collapsed:r}),o.a.createElement(fa,{to:"/connections",primary:"Conex\xf5es",icon:o.a.createElement(qe.a,{badgeContent:c?"!":0,color:"error",className:a.badge},o.a.createElement(la.a,{size:22})),selected:"/connections"===F,onClick:()=>te("/connections"),collapsed:r}),o.a.createElement(fa,{to:"/queues",primary:z.a.t("mainDrawer.listItems.queues"),icon:o.a.createElement(sa.a,{size:22}),selected:"/queues"===F,onClick:()=>te("/queues"),collapsed:r}),o.a.createElement(fa,{to:"/users",primary:z.a.t("mainDrawer.listItems.users"),icon:o.a.createElement(Te.a,{size:22}),selected:"/users"===F,onClick:()=>te("/users"),collapsed:r}),O&&o.a.createElement(fa,{to:"/messages-api",primary:z.a.t("mainDrawer.listItems.messagesAPI"),icon:o.a.createElement(ca.a,{size:22}),selected:"/messages-api"===F,onClick:()=>te("/messages-api"),collapsed:r}),o.a.createElement(fa,{to:"/financeiro",primary:z.a.t("mainDrawer.listItems.financeiro"),icon:o.a.createElement(da.a,{size:22}),selected:"/financeiro"===F,onClick:()=>te("/financeiro"),collapsed:r}),o.a.createElement(fa,{to:"/settings",primary:z.a.t("mainDrawer.listItems.settings"),icon:o.a.createElement(oa.a,{size:22}),selected:"/settings"===F,onClick:()=>te("/settings"),collapsed:r}),!r&&o.a.createElement(o.a.Fragment,null,o.a.createElement(Z.a,{style:{margin:"16px 0 8px 0"}}),o.a.createElement(f.a,{className:a.versionText},""+V.version)))}),!r&&o.a.createElement(o.a.Fragment,null,o.a.createElement(Z.a,{style:{margin:"16px 0 8px 0"}}),o.a.createElement(Ue.a,{button:!0,onClick:()=>{s()},className:a.logoutItem},o.a.createElement(Ve.a,{className:a.logoutIcon},o.a.createElement(ma.a,{size:22})),o.a.createElement(Ge.a,{primary:"Log out"}))))};function xa(){return{dateToClient:function(e){return w()(e).isValid()?w()(e).format("DD/MM/YYYY"):e},datetimeToClient:function(e){return w()(e).isValid()?w()(e).format("DD/MM/YYYY HH:mm"):e},dateToDatabase:function(e){return w()(e,"DD/MM/YYYY").isValid()?w()(e).format("YYYY-MM-DD HH:mm:ss"):e}}}var ya=t(1150),va=t(203),Ca=t.n(va),ka=t(1187),Sa=t(1188),Na=t(752),wa=t(304),Ia=t(1189);const Aa=Object(Y.a)(e=>({mainPaper:{flex:1,maxHeight:400,maxWidth:360,padding:e.spacing(1),overflowY:"scroll",...e.scrollbarStyles,borderRadius:12,boxShadow:"0 4px 20px rgba(0,0,0,0.12)",border:"1px solid rgba(93, 63, 211, 0.1)",animation:"$slideIn 0.3s ease-out"},"@keyframes slideIn":{"0%":{opacity:0,transform:"translateY(-10px)"},"100%":{opacity:1,transform:"translateY(0)"}},announcementHeader:{padding:e.spacing(2),borderBottom:"1px solid rgba(0,0,0,0.08)",background:"linear-gradient(145deg, #5D3FD3 0%, #7058e6 100%)",color:"#FFFFFF",display:"flex",alignItems:"center",justifyContent:"space-between",borderTopLeftRadius:12,borderTopRight:12},headerTitle:{fontWeight:600,fontSize:16,display:"flex",alignItems:"center","& svg":{marginRight:e.spacing(1),fontSize:20}},announcementItem:{margin:e.spacing(1,0),transition:"all 0.2s ease",borderRadius:8,"&:hover":{backgroundColor:"rgba(93, 63, 211, 0.05)",transform:"translateY(-1px)",boxShadow:"0 2px 8px rgba(0,0,0,0.05)"}},priorityHigh:{borderLeft:"4px solid #b81111"},priorityMedium:{borderLeft:"4px solid orange"},priorityLow:{borderLeft:"4px solid grey"},announcementTitle:{fontWeight:600,color:"#333",fontSize:14},announcementDate:{fontSize:12,color:"#666",marginRight:e.spacing(1)},announcementText:{color:"#555",marginTop:e.spacing(.5),fontSize:13,maxHeight:40,overflow:"hidden",textOverflow:"ellipsis",display:"-webkit-box","-webkit-line-clamp":2,"-webkit-box-orient":"vertical"},buttonIcon:{color:"#5D3FD3",transition:"all 0.3s ease","&:hover":{color:"#4930A8"}},badge:{backgroundColor:"#5D3FD3",transition:"all 0.3s ease"},emptyAnnouncements:{display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",padding:e.spacing(4),color:"#666",backgroundColor:"#f9f9f9",borderRadius:8,margin:e.spacing(2)},emptyIcon:{fontSize:48,color:"#5D3FD3",opacity:.6,marginBottom:e.spacing(2)},dialog:{"& .MuiDialog-paper":{borderRadius:12,boxShadow:"0 6px 30px rgba(0,0,0,0.2)"}},dialogTitle:{backgroundColor:"#5D3FD3",color:"#FFFFFF","& .MuiTypography-root":{fontWeight:600}},dialogContent:{padding:e.spacing(3)},dialogMedia:{border:"1px solid #f1f1f1",margin:"0 auto 20px",textAlign:"center",width:"100%",maxWidth:400,height:300,backgroundRepeat:"no-repeat",backgroundSize:"contain",backgroundPosition:"center",borderRadius:8,boxShadow:"0 2px 8px rgba(0,0,0,0.1)",transition:"all 0.2s ease","&:hover":{boxShadow:"0 4px 12px rgba(0,0,0,0.15)"}},dialogText:{color:"#333",lineHeight:1.6},dialogActions:{padding:e.spacing(2)},closeButton:{color:"#5D3FD3",borderColor:"#5D3FD3","&:hover":{backgroundColor:"rgba(93, 63, 211, 0.08)",borderColor:"#4930A8"}}}));function Ta(e){let{announcement:a,open:t,handleClose:n}=e;const r=Aa();return o.a.createElement(xe.a,{open:t,onClose:()=>n(),"aria-labelledby":"alert-dialog-title","aria-describedby":"alert-dialog-description",className:r.dialog,fullWidth:!0,maxWidth:"sm"},o.a.createElement(ye.a,{id:"alert-dialog-title",className:r.dialogTitle},o.a.createElement("div",{style:{display:"flex",alignItems:"center"}},o.a.createElement(Ca.a,{style:{marginRight:8}}),a.title)),o.a.createElement(ve.a,{className:r.dialogContent},a.mediaPath&&o.a.createElement("div",{className:r.dialogMedia,style:{backgroundImage:`url(${i=a.mediaPath,"http://localhost:8080/public/"+i})`}}),o.a.createElement(ka.a,{id:"alert-dialog-description",className:r.dialogText},a.text)),o.a.createElement(we.a,{className:r.dialogActions},o.a.createElement(b.a,{onClick:()=>n(),variant:"outlined",className:r.closeButton,autoFocus:!0},"Fechar")));var i}const Da=(e,a)=>{if("LOAD_ANNOUNCEMENTS"===a.type){const t=a.payload,n=[];return Object(k.isArray)(t)&&t.forEach(a=>{const t=e.findIndex(e=>e.id===a.id);-1!==t?e[t]=a:n.push(a)}),[...e,...n]}if("UPDATE_ANNOUNCEMENTS"===a.type){const t=a.payload,n=e.findIndex(e=>e.id===t.id);return-1!==n?(e[n]=t,[...e]):[t,...e]}if("DELETE_ANNOUNCEMENT"===a.type){const t=a.payload,n=e.findIndex(e=>e.id===t);return-1!==n&&e.splice(n,1),[...e]}if("RESET"===a.type)return[]};function Oa(){const e=Aa(),[a,t]=Object(n.useState)(!1),[r,i]=Object(n.useState)(null),[l,s]=Object(n.useState)(1),[c,d]=Object(n.useState)(!1),[m]=Object(n.useState)(""),[u,p]=Object(n.useReducer)(Da,[]),[g,b]=Object(n.useState)(!1),[E,h]=Object(n.useState)({}),[x,v]=Object(n.useState)(!1),C=Object(n.useContext)(j);Object(n.useEffect)(()=>{p({type:"RESET"}),s(1)},[m]),Object(n.useEffect)(()=>{t(!0);const e=setTimeout(()=>{S()},500);return()=>clearTimeout(e)},[m,l]),Object(n.useEffect)(()=>{const e=localStorage.getItem("companyId"),a=C.getSocket(e);return a?(a.on("company-announcement",e=>{"update"!==e.action&&"create"!==e.action||(p({type:"UPDATE_ANNOUNCEMENTS",payload:e.record}),b(!1)),"delete"===e.action&&p({type:"DELETE_ANNOUNCEMENT",payload:+e.id})}),()=>{a.disconnect()}):()=>{}},[C]);const S=async()=>{try{const{data:e}=await B.get("/announcements/",{params:{searchParam:m,pageNumber:l}});p({type:"LOAD_ANNOUNCEMENTS",payload:e.records}),d(e.hasMore),t(!1)}catch(e){y.toast.error(e.message)}},N=Boolean(r),I=N?"simple-popover":void 0;return o.a.createElement("div",null,o.a.createElement(Ta,{announcement:E,open:x,handleClose:()=>v(!1)}),o.a.createElement(Sa.a,{title:"Informativos",arrow:!0,TransitionComponent:Na.a,TransitionProps:{timeout:600}},o.a.createElement(J.a,{variant:"contained","aria-describedby":I,onClick:e=>{i(e.currentTarget),b(!0)},className:e.buttonIcon},o.a.createElement(qe.a,{color:"secondary",variant:"dot",classes:{badge:e.badge},invisible:g||u.length<1},o.a.createElement(Ca.a,null)))),o.a.createElement(ya.a,{id:I,open:N,anchorEl:r,onClose:()=>{i(null)},anchorOrigin:{vertical:"bottom",horizontal:"right"},transformOrigin:{vertical:"top",horizontal:"right"}},o.a.createElement(wa.a,{variant:"outlined",onScroll:e=>{if(!c||a)return;const{scrollTop:t,scrollHeight:n,clientHeight:o}=e.currentTarget;n-(t+100)<o&&s(e=>e+1)},className:e.mainPaper},o.a.createElement("div",{className:e.announcementHeader},o.a.createElement(f.a,{className:e.headerTitle},o.a.createElement(Ca.a,{fontSize:"small"}),"Informativos"),o.a.createElement(qe.a,{color:"error",badgeContent:u.length,max:99},o.a.createElement(Ca.a,{fontSize:"small"}))),o.a.createElement(ee.a,{component:"nav","aria-label":"main mailbox folders"},Object(k.isArray)(u)&&u.length>0?u.map((a,t)=>{return o.a.createElement(Ue.a,{key:t,className:`${e.announcementItem} ${r=a.priority,1===r?e.priorityHigh:2===r?e.priorityMedium:3===r?e.priorityLow:""}`,onClick:()=>(h(a),v(!0),void i(null)),button:!0},a.mediaPath&&o.a.createElement(Ia.a,null,o.a.createElement(Le.a,{alt:a.mediaName,src:(n=a.mediaPath,"http://localhost:8080/public/"+n)})),o.a.createElement(Ge.a,{primary:o.a.createElement(f.a,{className:e.announcementTitle},a.title),secondary:o.a.createElement(o.a.Fragment,null,o.a.createElement(f.a,{component:"span",className:e.announcementDate},w()(a.createdAt).format("DD/MM/YYYY")),o.a.createElement(f.a,{component:"div",className:e.announcementText},a.text))}));var n,r}):o.a.createElement("div",{className:e.emptyAnnouncements},o.a.createElement(Ca.a,{className:e.emptyIcon}),o.a.createElement(f.a,null,"Nenhum informativo"))))))}var ja=t(745),Ra=t(216),Fa=t.n(Ra),Ma=t(471),Pa=t.n(Ma),Ba=t(365),za=t(645),Wa=t.n(za);var La=e=>{let{searchParam:a,tags:t,users:o,pageNumber:r,status:i,date:l,updatedAt:s,showAll:c,queueIds:d,withUnreadMessages:m}=e;const[u,p]=Object(n.useState)(!0),[g,f]=Object(n.useState)(!1),[b,E]=Object(n.useState)([]);return Object(n.useEffect)(()=>{p(!0);const e=setTimeout(()=>{(async()=>{try{const{data:e}=await B.get("/tickets",{params:{searchParam:a,pageNumber:r,tags:t,users:o,status:i,date:l,updatedAt:s,showAll:c,queueIds:d,withUnreadMessages:m}});E(e.tickets),f(e.hasMore),p(!1)}catch(e){p(!1),y.toast.error(e.message)}})()},500);return()=>clearTimeout(e)},[a,t,o,r,i,l,s,c,d,m]),{tickets:b,loading:u,hasMore:g}},qa=t(1204),Ha=t(398),Ua=t(652),Va=t(653),Ga=t(1316);const _a=Object(n.createContext)(),Ka=e=>{let{children:a}=e;const[t,r]=Object(n.useState)({id:null,code:null}),i=Object(S.useHistory)();return Object(n.useEffect)(()=>{null!==t.id&&i.push("/tickets/"+t.uuid)},[t]),o.a.createElement(_a.Provider,{value:{currentTicket:t,setCurrentTicket:r}},a)},Qa=Object(Y.a)(e=>({button:{position:"relative"},buttonProgress:{color:Ie.a[500],position:"absolute",top:"50%",left:"50%",marginTop:-12,marginLeft:-12}}));var Ya=e=>{let{loading:a,children:t,...n}=e;const r=Qa();return o.a.createElement(b.a,Object.assign({className:r.button,disabled:a},n),t,a&&o.a.createElement(be.a,{size:24,className:r.buttonProgress}))},Xa=t(646);const $a=["a","abbr","address","area","article","aside","audio","b","base","bdi","bdo","big","blockquote","body","br","button","canvas","caption","cite","code","col","colgroup","data","datalist","dd","del","details","dfn","dialog","div","dl","dt","em","embed","fieldset","figcaption","figure","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","iframe","img","input","ins","kbd","keygen","label","legend","li","link","main","map","mark","marquee","menu","menuitem","meta","meter","nav","noscript","object","ol","optgroup","option","output","p","param","picture","pre","progress","q","rp","rt","ruby","s","samp","script","section","select","small","source","span","strong","style","sub","summary","sup","table","tbody","td","textarea","tfoot","th","thead","time","title","tr","track","u","ul","var","video","wbr","circle","clipPath","defs","ellipse","foreignObject","g","image","line","linearGradient","marker","mask","path","pattern","polygon","polyline","radialGradient","rect","stop","svg","text","tspan"],Ja=["a","b","strong","em","u","code","del"],Za=e=>{let{children:a,...t}=e;return o.a.createElement("a",Object.assign({},t,{target:"_blank",rel:"noopener noreferrer",style:{color:"#5D3FD3",textDecoration:"underline",fontWeight:600}}),a)};var et=e=>{let{children:a,message:t}=e,n=null===t||void 0===t?void 0:t.mediaType;console.log("type",n);const r=/\*(.*?)\*/g,i=/~(.*?)~/g;a&&r.test(a)&&(a=a.replace(r,"**$1**")),a&&i.test(a)&&(a=a.replace(i,"~~$1~~"));const l=o.a.useMemo(()=>{const e={disableParsingRawHTML:!0,forceInline:!0,overrides:{a:{component:Za},strong:{props:{style:{color:"#5D3FD3",fontWeight:700}}},em:{props:{style:{color:"#5D3FD3",fontStyle:"italic"}}}}};return $a.forEach(a=>{Ja.includes(a)||(e.overrides[a]=e=>e.children||null)}),e},[]);if(!a)return null;const s=a.match(/(?<=FN:)(.*)(?=\n)|(?<=TEL;.*:)(.*)(?=\n)/g),c=s?s[0]:"",d=s?s[1]:"",m={backgroundColor:"#f7f7fa",border:"2px solid #5D3FD3",borderRadius:"12px",width:"320px",display:"flex",alignItems:"center",padding:"12px 0",boxShadow:"0 2px 12px rgba(93,63,211,0.10)",margin:"8px 0"},u={marginLeft:"16px",width:56,height:56,border:"2px solid #5D3FD3"},p={marginLeft:"18px"},g={margin:"4px",fontSize:16,color:"#222"};return"contactMessage"===n?o.a.createElement("div",{style:m},o.a.createElement(Le.a,{style:u,src:t.contact.profilePicUrl,alt:"contact_image"}),o.a.createElement("div",{style:p},o.a.createElement("p",{style:g},o.a.createElement("strong",{style:{color:"#5D3FD3"}},"Nome:")," ",c),o.a.createElement("p",{style:g},o.a.createElement("strong",{style:{color:"#5D3FD3"}},"N\xfamero:")," ",d))):o.a.createElement("div",{style:{fontSize:16,color:"#444",lineHeight:1.6,margin:"4px 0"}},o.a.createElement(Xa.a,{options:l},a))},at=t(470),tt=t.n(at),nt=t(654),ot=t.n(nt),rt=t(656),it=t.n(rt),lt=t(655),st=t.n(lt),ct=t(288),dt=t.n(ct),mt=t(1109);const ut=Object(mt.a)(e=>({tag:{padding:"1px 5px",borderRadius:"3px",fontSize:"0.8em",fontWeight:"bold",color:"#FFF",marginRight:"5px",whiteSpace:"nowrap"}}));var pt=e=>{let{tag:a}=e;const t=ut();return o.a.createElement("div",{className:t.tag,style:{backgroundColor:a.color,marginTop:"2px"}},a.name.toUpperCase())},gt=t(156),ft=t.n(gt);const bt=Object(n.createContext)(),Et=e=>{let{children:a}=e;const[t,r]=Object(n.useState)(null);return o.a.createElement(bt.Provider,{value:{replyingMessage:t,setReplyingMessage:r}},a)};var ht=t(1194),xt=t(1195),yt=t(1196),vt=t(1197),Ct=t(1198),kt=t(1199),St=t(647),Nt=t.n(St),wt=t(648),It=t.n(wt);var At=e=>{let{image:a,link:t,description:r}=e;Object(n.useEffect)(()=>{},[a,t,r]);const i=async()=>{try{window.open(t)}catch(e){y.toast.error(e.message)}};return o.a.createElement(o.a.Fragment,null,o.a.createElement("div",{style:{minWidth:"250px"}},o.a.createElement("div",null,o.a.createElement("div",{style:{float:"left"}},o.a.createElement("img",{src:a,alt:"loc",onClick:i,style:{width:"100px"}})),r&&o.a.createElement("div",{style:{display:"flex",flexWrap:"wrap"}},o.a.createElement(f.a,{style:{marginTop:"12px",marginLeft:"15px",marginRight:"15px",float:"left"},variant:"subtitle1",color:"primary",gutterBottom:!0},o.a.createElement("div",{dangerouslySetInnerHTML:{__html:r.replace("\\n","<br />")}}))),o.a.createElement("div",{style:{display:"block",content:"",clear:"both"}}),o.a.createElement("div",null,o.a.createElement(Z.a,null),o.a.createElement(b.a,{fullWidth:!0,color:"primary",onClick:i,disabled:!t},"Visualizar")))))},Tt=t(1107),Dt=t(250),Ot=t.n(Dt),jt=t(94),Rt=t.n(jt);const Ft=o.a.forwardRef((function(e,a){return o.a.createElement(Tt.a,Object.assign({direction:"up",ref:a},e))})),Mt=Object(Y.a)(e=>({dialogRoot:{"& .MuiDialog-paper":{borderRadius:18,padding:0,boxShadow:"0 8px 32px rgba(93, 63, 211, 0.15)",overflow:"hidden"}},dialogTitle:{fontSize:24,fontWeight:700,color:"#5D3FD3",padding:"28px 32px 10px 32px",display:"flex",justifyContent:"space-between",alignItems:"center",letterSpacing:.2,[e.breakpoints.down("xs")]:{padding:"20px 16px 8px 16px",fontSize:20}},dialogContent:{padding:"24px 32px",background:"#faf9fd",[e.breakpoints.down("xs")]:{padding:"16px"}},dialogActions:{padding:"18px 32px 28px 32px",justifyContent:"center",gap:16,background:"#faf9fd",[e.breakpoints.down("xs")]:{padding:"12px 16px 20px 16px",gap:8}},cancelButton:{backgroundColor:"#fff",color:"#5D3FD3",padding:"10px 24px",fontWeight:600,fontSize:16,borderRadius:10,border:"2px solid #5D3FD3",textTransform:"none",transition:"all 0.2s","&:hover":{backgroundColor:"#f3f0fa",borderColor:"#5D3FD3"},[e.breakpoints.down("xs")]:{padding:"8px 16px",fontSize:14}},confirmButton:{backgroundColor:"#5D3FD3",color:"#fff",padding:"10px 24px",fontWeight:600,fontSize:16,borderRadius:10,textTransform:"none",boxShadow:"0 2px 8px rgba(93, 63, 211, 0.15)",transition:"all 0.2s","&:hover":{backgroundColor:"#4b2fc7",boxShadow:"0 4px 12px rgba(93, 63, 211, 0.2)"},[e.breakpoints.down("xs")]:{padding:"8px 16px",fontSize:14}},buttonIcon:{marginRight:8,fontSize:20},closeButton:{color:"#5D3FD3",padding:8,transition:"all 0.2s","&:hover":{backgroundColor:"#f3f0fa"}},contentText:{fontSize:16,color:"#444",lineHeight:1.6,textAlign:"center"}}));var Pt=e=>{let{title:a,children:t,open:n,onClose:r,onConfirm:i}=e;const l=Mt();return o.a.createElement(xe.a,{open:n,onClose:()=>r(!1),"aria-labelledby":"confirm-dialog",className:l.dialogRoot,TransitionComponent:Ft,fullWidth:!0,maxWidth:"xs"},o.a.createElement(ye.a,{disableTypography:!0,className:l.dialogTitle,id:"confirm-dialog"},o.a.createElement(f.a,{variant:"h6"},a),o.a.createElement(J.a,{className:l.closeButton,onClick:()=>r(!1),size:"small"},o.a.createElement(ft.a,null))),o.a.createElement(ve.a,{className:l.dialogContent},o.a.createElement(f.a,{className:l.contentText},t)),o.a.createElement(we.a,{className:l.dialogActions},o.a.createElement(b.a,{variant:"outlined",onClick:()=>r(!1),className:l.cancelButton,startIcon:o.a.createElement(Ot.a,{className:l.buttonIcon})},z.a.t("confirmationModal.buttons.cancel")||"Cancelar"),o.a.createElement(b.a,{variant:"contained",onClick:()=>{r(!1),i()},className:l.confirmButton,startIcon:o.a.createElement(Rt.a,{className:l.buttonIcon})},z.a.t("confirmationModal.buttons.confirm")||"Confirmar")))},Bt=t(755),zt=t(1190),Wt=t(1191);const Lt=Object(Y.a)(e=>({messagesList:{backgroundSize:"370px",backgroundImage:e.backgroundImage,display:"flex",justifyContent:"center",flexGrow:1,padding:"16px",overflowY:"auto","@media (max-width: 600px)":{paddingBottom:"70px"},...e.scrollbarStyles,minHeight:"120px",minWidth:"400px",maxWidth:"600px",background:"#faf9fd"},textContentItem:{overflowWrap:"break-word",padding:"8px 12px"},messageRight:{fontSize:"13px",marginLeft:16,marginTop:2,minWidth:100,maxWidth:510,height:"auto",display:"block",position:"relative",whiteSpace:"pre-wrap",alignSelf:"flex-end",borderRadius:8,padding:"8px 12px",background:"#f3f0fa",border:"1px solid #e8e8e8"},inputmsg:{backgroundColor:"#fff",display:"flex",width:"100%",margin:"8px 0",borderRadius:8,border:"1px solid #e8e8e8",transition:"all 0.2s","&:focus-within":{borderColor:"#5D3FD3",boxShadow:"0 1px 4px rgba(93,63,211,0.08)"}},timestamp:{fontSize:11,position:"absolute",bottom:0,right:5,color:"#666"},titleBackground:{color:"#fff",backgroundColor:"#5D3FD3",padding:"12px 16px",display:"flex",alignItems:"center",gap:8,"& .MuiIconButton-root":{padding:4,marginRight:8,"&:hover":{background:"rgba(255,255,255,0.1)"}}},dialogPaper:{borderRadius:12,boxShadow:"0 4px 24px rgba(93,63,211,0.12)"},saveButton:{padding:8,margin:"0 8px",color:"#5D3FD3","&:hover":{background:"#f3f0fa"}},inputBase:{padding:"12px 16px",fontSize:14,color:"#333","&::placeholder":{color:"#999",opacity:1}}}));var qt=e=>{let{open:a,onClose:t,onSave:r,message:i}=e;const l=Lt(),[s,c]=Object(n.useState)(null),d=Object(n.useRef)(null);Object(n.useEffect)(()=>{a&&c(null===i||void 0===i?void 0:i.body)},[a,i]);return o.a.createElement(xe.a,{open:a,onClose:()=>t(!1),"aria-labelledby":"edit-message-dialog",PaperProps:{className:l.dialogPaper},ref:d},o.a.createElement(ye.a,{id:"edit-message-dialog",className:l.titleBackground},o.a.createElement(J.a,{edge:"start",color:"inherit",onClick:()=>t(!1),"aria-label":"close"},o.a.createElement(zt.a,{size:20})),"Editar Mensagem"),o.a.createElement(ve.a,{style:{padding:0}},o.a.createElement(g.a,null,o.a.createElement(g.a,{className:l.messagesList},o.a.createElement(g.a,{component:"div",className:l.messageRight},o.a.createElement(g.a,{className:l.textContentItem},o.a.createElement(g.a,{component:"div",style:{color:"#333"}},o.a.createElement(et,null,null===i||void 0===i?void 0:i.body))))),o.a.createElement(wa.a,{component:"form",style:{display:"flex",alignItems:"center",borderRadius:0,backgroundColor:"#fff",borderTop:"1px solid #e8e8e8"}},o.a.createElement(g.a,{className:l.inputmsg},o.a.createElement(Bt.a,{className:l.inputBase,multiline:!0,maxRows:6,placeholder:"Digite sua mensagem...",value:s,onChange:e=>c(e.target.value),inputProps:{"aria-label":"edit message"}})),o.a.createElement(J.a,{className:l.saveButton,onClick:()=>(async e=>{if(e)try{const a={read:1,fromMe:!0,mediaUrl:"",body:e,quotedMsg:null};await B.post("/messages/edit/"+i.id,a),t(!1)}catch(a){}})(s)},o.a.createElement(Wt.a,{size:20}))))))};var Ht=e=>{let{message:a,menuOpen:t,handleClose:r,anchorEl:i}=e;const{setReplyingMessage:l}=Object(n.useContext)(bt),[s,c]=Object(n.useState)(!1),[d,m]=Object(n.useState)(!1);return o.a.createElement(o.a.Fragment,null,o.a.createElement(Pt,{title:z.a.t("messageOptionsMenu.confirmationModal.title"),open:s,onClose:c,onConfirm:async()=>{try{await B.delete("/messages/"+a.id)}catch(e){y.toast.errorr(e.message)}}},z.a.t("messageOptionsMenu.confirmationModal.message")),o.a.createElement(qt,{title:z.a.t("messageOptionsMenu.editMessageModal.title"),open:d,onClose:m,onSave:async()=>{try{await B.put("/messages/"+a.id)}catch(e){y.toast.errorr(e.message)}},message:a},z.a.t("messageOptionsMenu.confirmationModal.message")),o.a.createElement(ne.a,{anchorEl:i,getContentAnchorEl:null,anchorOrigin:{vertical:"bottom",horizontal:"right"},transformOrigin:{vertical:"top",horizontal:"right"},open:t,onClose:r},a.fromMe&&o.a.createElement(oe.a,{onClick:e=>{m(!0),r()}},z.a.t("messageOptionsMenu.edit")),a.fromMe&&o.a.createElement(oe.a,{onClick:e=>{c(!0),r()}},z.a.t("messageOptionsMenu.delete")),o.a.createElement(oe.a,{onClick:()=>{l(a),r()}},z.a.t("messageOptionsMenu.reply"))))},Ut=t(744);const Vt=Object(Y.a)(e=>({messageMedia:{objectFit:"cover",width:250,height:200,borderTopLeftRadius:8,borderTopRightRadius:8,borderBottomLeftRadius:8,borderBottomRightRadius:8}}));var Gt=e=>{let{imageUrl:a}=e;const t=Vt(),[r,i]=Object(n.useState)(!0),[l,s]=Object(n.useState)("");return Object(n.useEffect)(()=>{if(!a)return;(async()=>{const{data:e,headers:t}=await B.get(a,{responseType:"blob"}),n=window.URL.createObjectURL(new Blob([e],{type:t["content-type"]}));s(n),i(!1)})()},[a]),o.a.createElement(Ut.a,{className:t.messageMedia,smallSrcSet:r?a:l,medium:r?a:l,large:r?a:l,alt:"image"})},_t=t(1192),Kt=t(487),Qt=t(1193),Yt=t(1319),Xt=t(649),$t=t.n(Xt),Jt=(t(873),t(650)),Zt=t.n(Jt),en=t(48),an=t.n(en),tn=t(651),nn=t.n(tn),on=t(251),rn=t.n(on);const ln=o.a.forwardRef((function(e,a){return o.a.createElement(Tt.a,Object.assign({direction:"up",ref:a},e))})),sn=Object(Y.a)(e=>({root:{display:"flex",flexWrap:"wrap"},dialogPaper:{borderRadius:12,padding:e.spacing(1),boxShadow:"0 8px 24px rgba(0, 0, 0, 0.1)"},dialogTitle:{fontSize:"1.25rem",fontWeight:600,padding:e.spacing(2,3),display:"flex",justifyContent:"space-between",alignItems:"center",borderBottom:"1px solid rgba(0, 0, 0, 0.08)"},dialogContent:{padding:e.spacing(3)},dialogActions:{padding:e.spacing(1,3,2),justifyContent:"center",gap:e.spacing(1)},textField:{marginBottom:e.spacing(2),"& .MuiOutlinedInput-root":{borderRadius:10,height:56},"& .MuiInputLabel-outlined":{transform:"translate(14px, 16px) scale(1)"},"& .MuiInputLabel-outlined.MuiInputLabel-shrink":{transform:"translate(14px, -6px) scale(0.75)"}},extraAttr:{display:"flex",alignItems:"center",justifyContent:"space-between",marginBottom:e.spacing(2),backgroundColor:"rgba(0, 0, 0, 0.02)",borderRadius:10,padding:e.spacing(2,2),transition:"all 0.2s ease",boxShadow:"0 1px 3px rgba(0,0,0,0.05)","&:hover":{backgroundColor:"rgba(0, 0, 0, 0.03)",boxShadow:"0 3px 5px rgba(0,0,0,0.08)"}},sectionTitle:{fontSize:"1rem",fontWeight:600,color:"#5D3FD3",marginTop:e.spacing(2),marginBottom:e.spacing(4),position:"relative","&::after":{content:'""',position:"absolute",width:40,height:3,bottom:-5,left:0,backgroundColor:"#5D3FD3",borderRadius:2}},addInfoButton:{backgroundColor:"#5D3FD3",color:"white",borderRadius:10,padding:e.spacing(1,3),textTransform:"none",fontWeight:600,marginTop:e.spacing(1),"&:hover":{backgroundColor:"#4930A8"}},infoFieldContainer:{marginBottom:e.spacing(1)},emptyInfoText:{textAlign:"center",color:e.palette.text.secondary,margin:e.spacing(2,0),fontStyle:"italic"},infoFieldTitle:{fontSize:"0.75rem",color:"#5D3FD3",marginBottom:e.spacing(.5),fontWeight:600},btnWrapper:{position:"relative"},cancelButton:{backgroundColor:"#f5f5f5",color:"#666",borderRadius:10,padding:e.spacing(1,3),textTransform:"none",fontWeight:600,"&:hover":{backgroundColor:"#e0e0e0"}},saveButton:{backgroundColor:"#5D3FD3",color:"white",borderRadius:10,padding:e.spacing(1,3),textTransform:"none",fontWeight:600,"&:hover":{backgroundColor:"#4930A8"}},buttonProgress:{color:Ie.a[500],position:"absolute",top:"50%",left:"50%",marginTop:-12,marginLeft:-12},buttonIcon:{marginRight:e.spacing(1)},closeButton:{color:e.palette.grey[500]},divider:{margin:e.spacing(2,0)},infoSection:{marginTop:e.spacing(2),marginBottom:e.spacing(2)},extraInfoTextField:{"& .MuiOutlinedInput-root":{borderRadius:10,fontSize:"1rem"},"& .MuiOutlinedInput-input":{padding:"12px 14px"}},phoneInputContainer:{marginBottom:e.spacing(2),"& .react-tel-input":{fontFamily:e.typography.fontFamily,"& .form-control":{width:"100%",height:56,borderRadius:10,fontSize:"1rem",borderColor:"rgba(0, 0, 0, 0.23)","&:hover":{borderColor:"rgba(0, 0, 0, 0.42)"},"&:focus":{borderColor:"#5D3FD3",boxShadow:"0 0 0 2px rgba(93, 63, 211, 0.2)"}},"& .flag-dropdown":{borderTopLeftRadius:10,borderBottomLeftRadius:10,"&:hover, &.open":{backgroundColor:"rgba(0, 0, 0, 0.04)"}},"& .selected-flag":{paddingLeft:16,"& .flag":{transform:"scale(1.2)"}},"& .country-list":{borderRadius:10,marginTop:8,boxShadow:"0 4px 20px rgba(0,0,0,0.1)"}}},phoneLabel:{marginBottom:e.spacing(.75),fontSize:"0.75rem",fontWeight:400,color:"rgba(0, 0, 0, 0.6)",lineHeight:1.2,letterSpacing:"0.03em",transform:"translate(0, 0) scale(1)",paddingLeft:5},phoneErrorHelper:{color:e.palette.error.main,fontSize:"0.75rem",marginTop:3,marginLeft:14},formGrid:{marginTop:e.spacing(2)}})),cn=Oe.b().shape({name:Oe.d().min(2,"Nome muito curto").max(50,"Nome muito longo").required("Nome \xe9 obrigat\xf3rio"),number:Oe.d().test("is-valid-phone","N\xfamero de telefone inv\xe1lido",e=>!e||/^\+?[1-9]\d{1,3}[-\s]?\d{4,14}$/.test(e)),email:Oe.d().email("Email inv\xe1lido")});var dn=e=>{let{open:a,onClose:t,contactId:r,initialValues:i,onSave:l}=e;const s=sn(),c=Object(n.useRef)(!0),d={name:"",number:"",email:"",extraInfo:[]},[m,u]=Object(n.useState)(d);Object(n.useEffect)(()=>()=>{c.current=!1},[]),Object(n.useEffect)(()=>{(async()=>{if(i&&u(e=>({...e,...i})),r)try{const{data:e}=await B.get("/contacts/"+r);c.current&&u(e)}catch(e){y.toast.error(e.message)}})()},[r,a,i]);const p=()=>{t(),u(d)};return o.a.createElement("div",{className:s.root},o.a.createElement(xe.a,{open:a,onClose:p,maxWidth:"md",scroll:"paper",TransitionComponent:ln,PaperProps:{className:s.dialogPaper}},o.a.createElement(ye.a,{disableTypography:!0,className:s.dialogTitle},o.a.createElement(f.a,{variant:"h6"},r?z.a.t("contactModal.title.edit"):z.a.t("contactModal.title.add")),o.a.createElement(J.a,{className:s.closeButton,onClick:p},o.a.createElement(ft.a,null))),o.a.createElement(Ae.e,{initialValues:m,enableReinitialize:!0,validationSchema:cn,onSubmit:(e,a)=>{setTimeout(()=>{(async e=>{try{const a={...e};if(a.number&&(a.number=a.number.replace(/[^\d+]/g,"")),r)await B.put("/contacts/"+r,a),p();else{const{data:e}=await B.post("/contacts",a);l&&l(e),p()}y.toast.success(z.a.t("contactModal.success"))}catch(a){y.toast.error(a.message)}})(e),a.setSubmitting(!1)},400)}},e=>{let{values:a,errors:t,touched:n,isSubmitting:i,setFieldValue:l}=e;return o.a.createElement(Ae.d,null,o.a.createElement(ve.a,{className:s.dialogContent,dividers:!0},o.a.createElement(f.a,{variant:"subtitle1",className:s.sectionTitle},z.a.t("contactModal.form.mainInfo")||"Dados do contato"),o.a.createElement(_t.a,{container:!0,spacing:2,className:s.formGrid},o.a.createElement(_t.a,{item:!0,xs:12,sm:6},o.a.createElement(Ae.b,{as:Ce.a,label:z.a.t("contactModal.form.name")||"Nome",name:"name",autoFocus:!0,error:n.name&&Boolean(t.name),helperText:n.name&&t.name,variant:"outlined",fullWidth:!0,className:s.textField})),o.a.createElement(_t.a,{item:!0,xs:12,sm:6,style:{display:"flex",flexDirection:"column",justifyContent:"flex-start"}},o.a.createElement("div",{className:s.phoneInputContainer},o.a.createElement("div",{style:{width:"100%",marginTop:0}},o.a.createElement($t.a,{country:"br",value:a.number,onChange:e=>l("number",e),enableSearch:!0,disableSearchIcon:!0,countryCodeEditable:!1,placeholder:"",specialLabel:"",preferredCountries:["br","ar","cl","us","pt"],containerStyle:{width:"100%"},inputStyle:{width:"100%",height:"56px",fontSize:"16px",borderRadius:"10px"},buttonStyle:{borderTopLeftRadius:"10px",borderBottomLeftRadius:"10px"},dropdownStyle:{width:"400px",maxHeight:"300px",overflowY:"auto"}})),n.number&&t.number&&o.a.createElement("div",{className:s.phoneErrorHelper},t.number))),o.a.createElement(_t.a,{item:!0,xs:12},o.a.createElement(Ae.b,{as:Ce.a,label:z.a.t("contactModal.form.email")||"Email",name:"email",error:n.email&&Boolean(t.email),helperText:n.email&&t.email,placeholder:"Email",fullWidth:!0,variant:"outlined",className:s.textField}))),(null===m||void 0===m?void 0:m.whatsapp)&&o.a.createElement("div",{className:s.infoSection},o.a.createElement(f.a,{variant:"subtitle1",className:s.sectionTitle},z.a.t("contactModal.form.whatsapp")||"Conex\xe3o Origem"),o.a.createElement(g.a,{border:1,borderColor:"rgba(0, 0, 0, 0.1)",borderRadius:10,p:2,bgcolor:"rgba(0, 0, 0, 0.02)"},o.a.createElement(f.a,{variant:"body2"},null===m||void 0===m?void 0:m.whatsapp.name))),o.a.createElement("div",{className:s.infoSection},o.a.createElement(f.a,{variant:"subtitle1",className:s.sectionTitle},z.a.t("contactModal.form.extraInfo")||"Informa\xe7\xf5es adicionais"),o.a.createElement(Ae.c,{name:"extraInfo"},e=>{let{push:t,remove:n}=e;return o.a.createElement(o.a.Fragment,null,a.extraInfo&&a.extraInfo.length>0?a.extraInfo.map((e,a)=>o.a.createElement(wa.a,{elevation:0,className:s.extraAttr,key:a+"-info"},o.a.createElement(_t.a,{container:!0,spacing:2},o.a.createElement(_t.a,{item:!0,xs:5},o.a.createElement("div",{className:s.infoFieldContainer},o.a.createElement(f.a,{className:s.infoFieldTitle},z.a.t("contactModal.form.extraName")||"Campo"),o.a.createElement(Ae.b,{as:Ce.a,placeholder:"Nome do campo",name:`extraInfo[${a}].name`,variant:"outlined",size:"small",fullWidth:!0,className:s.extraInfoTextField}))),o.a.createElement(_t.a,{item:!0,xs:6},o.a.createElement("div",{className:s.infoFieldContainer},o.a.createElement(f.a,{className:s.infoFieldTitle},z.a.t("contactModal.form.extraValue")||"Valor"),o.a.createElement(Ae.b,{as:Ce.a,placeholder:"Valor do campo",name:`extraInfo[${a}].value`,variant:"outlined",size:"small",fullWidth:!0,className:s.extraInfoTextField}))),o.a.createElement(_t.a,{item:!0,xs:1,container:!0,alignItems:"center",justifyContent:"center"},o.a.createElement(Sa.a,{title:"Remover campo",arrow:!0},o.a.createElement(J.a,{size:"small",onClick:()=>n(a),style:{color:"#f44336"}},o.a.createElement(an.a,null))))))):o.a.createElement(f.a,{className:s.emptyInfoText},"Nenhuma informa\xe7\xe3o adicional. Clique no bot\xe3o abaixo para adicionar."),o.a.createElement("div",{style:{textAlign:"center",marginTop:16}},o.a.createElement(b.a,{variant:"contained",color:"primary",onClick:()=>t({name:"",value:""}),className:s.addInfoButton,startIcon:o.a.createElement(Zt.a,null)},z.a.t("contactModal.buttons.addExtraInfo")||"+ Adicionar informa\xe7\xe3o")))}))),o.a.createElement(we.a,{className:s.dialogActions},o.a.createElement(b.a,{variant:"contained",onClick:p,className:s.cancelButton,startIcon:o.a.createElement(Ot.a,null),disabled:i},z.a.t("contactModal.buttons.cancel")||"Cancelar"),o.a.createElement("div",{className:s.btnWrapper},o.a.createElement(b.a,{type:"submit",variant:"contained",className:s.saveButton,startIcon:r?o.a.createElement(rn.a,null):o.a.createElement(nn.a,null),disabled:i},r?z.a.t("contactModal.buttons.okEdit")||"Salvar":z.a.t("contactModal.buttons.okAdd")||"Adicionar"),i&&o.a.createElement(be.a,{size:24,className:s.buttonProgress}))))})))};const mn=Object(Y.a)(e=>({online:{fontSize:11,color:"#25d366"},offline:{fontSize:11,color:"#e1306c"},dialogPaper:{borderRadius:18,boxShadow:"0 8px 32px rgba(93, 63, 211, 0.15)",overflow:"hidden"},dialogTitle:{fontSize:24,fontWeight:700,color:"#5D3FD3",padding:"28px 32px 10px 32px",letterSpacing:.2,[e.breakpoints.down("xs")]:{padding:"20px 16px 8px 16px",fontSize:20}},dialogContent:{padding:"24px 32px",background:"#faf9fd",[e.breakpoints.down("xs")]:{padding:"16px"}},dialogActions:{padding:"18px 32px 28px 32px",justifyContent:"flex-end",gap:16,background:"#faf9fd",[e.breakpoints.down("xs")]:{padding:"12px 16px 20px 16px",gap:8}},input:{"& .MuiOutlinedInput-root":{borderRadius:12,fontSize:16,height:48,background:"#fff","& fieldset":{borderColor:"#5D3FD3"},"&:hover fieldset":{borderColor:"#5D3FD3"},"&.Mui-focused fieldset":{borderColor:"#5D3FD3",boxShadow:"0 0 0 2px #e5e0fa"}},"& label":{color:"#5D3FD3",fontWeight:500,fontSize:15},"& .MuiInputBase-input":{fontSize:16}},select:{"& .MuiOutlinedInput-root":{borderRadius:12,fontSize:16,height:48,background:"#fff","& fieldset":{borderColor:"#5D3FD3"},"&:hover fieldset":{borderColor:"#5D3FD3"},"&.Mui-focused fieldset":{borderColor:"#5D3FD3",boxShadow:"0 0 0 2px #e5e0fa"}},"& .MuiSelect-select":{fontSize:16,padding:"14px 12px"}},buttonOutlined:{borderRadius:10,borderColor:"#5D3FD3",color:"#5D3FD3",fontWeight:600,fontSize:16,padding:"10px 24px",textTransform:"none",transition:"all 0.2s","&:hover":{background:"#f3f0fa",borderColor:"#5D3FD3"},[e.breakpoints.down("xs")]:{padding:"8px 16px",fontSize:14}},buttonContained:{borderRadius:10,background:"#5D3FD3",color:"#fff",fontWeight:600,fontSize:16,padding:"10px 24px",textTransform:"none",boxShadow:"0 2px 8px rgba(93, 63, 211, 0.15)",transition:"all 0.2s","&:hover":{background:"#4b2fc7",boxShadow:"0 4px 12px rgba(93, 63, 211, 0.2)"},[e.breakpoints.down("xs")]:{padding:"8px 16px",fontSize:14}}})),un=Object(Qt.a)({trim:!0});var pn=e=>{var a;let{modalOpen:t,onClose:r,initialContact:i}=e;const l=mn(),[s,c]=Object(n.useState)([]),d=Object(n.useRef)(!0),[m,u]=Object(n.useState)(!1),[p,g]=Object(n.useState)(""),[E,h]=Object(n.useState)(null),[x,v]=Object(n.useState)(""),[C,k]=Object(n.useState)(""),[S,N]=Object(n.useState)({}),[w,I]=Object(n.useState)([]),[A,T]=Object(n.useState)(!1),{user:D}=Object(n.useContext)(H),{companyId:O,whatsappId:j}=D;Object(n.useEffect)(()=>(d.current=!0,()=>{d.current=!1}),[]),Object(n.useEffect)(()=>{void 0!==(null===i||void 0===i?void 0:i.id)&&(c([i]),h(i))},[i]),Object(n.useEffect)(()=>{u(!0);const e=setTimeout(()=>{null!==j&&void 0!==j&&d.current&&k(j),1===D.queues.length&&d.current&&v(D.queues[0].id),(async()=>{try{const{data:e}=await B.get("/whatsapp",{params:{companyId:O,session:0}});d.current&&I(e)}catch(e){console.error(e)}})(),d.current&&u(!1)},500);return()=>clearTimeout(e)},[O,D.queues,j]),Object(n.useEffect)(()=>{if(!t||p.length<3)return void(d.current&&u(!1));u(!0);const e=setTimeout(()=>{(async()=>{try{const{data:e}=await B.get("contacts",{params:{searchParam:p}});d.current&&(c(e.contacts),u(!1))}catch(e){d.current&&(u(!1),y.toast.error(e.message))}})()},500);return()=>clearTimeout(e)},[p,t]);const R=()=>{r(),g(""),h(null)},F=async e=>{if(e)if(""!==x||"admin"===D.profile){d.current&&u(!0);try{const a=""!==x?x:null,t=""!==C?C:null;if(!t)return y.toast.error("Selecione um WhatsApp"),void(d.current&&u(!1));const{data:n}=await B.post("/tickets",{contactId:e,queueId:a,whatsappId:t,userId:D.id,status:"open",companyId:D.companyId});r(n)}catch(n){var a,t;if(null===(a=n.response)||void 0===a||null===(t=a.data)||void 0===t?void 0:t.error)try{const e=JSON.parse(n.response.data.error);e.userId,null===D||void 0===D||D.id,d.current&&u(!1),r(e)}catch(o){y.toast.error("Erro ao criar ticket. Verifique se o contato j\xe1 n\xe3o possui um ticket aberto."),d.current&&u(!1)}else y.toast.error(n.message||"Erro ao criar ticket"),d.current&&u(!1)}}else y.toast.error("Selecione uma fila")},M=(e,a)=>{const t=un(e,a);return""!==a.inputValue&&!m&&p.length>=3&&t.push({name:""+a.inputValue}),t},P=e=>e.number?o.a.createElement(o.a.Fragment,null,o.a.createElement(f.a,{component:"span",style:{fontSize:14,marginLeft:"10px",display:"inline-flex",alignItems:"center",lineHeight:"2"}},e.name," - ",e.number)):`${z.a.t("newTicketModal.add")} ${e.name}`,W=e=>e.number?`${e.name} - ${e.number}`:""+e.name;return o.a.createElement(o.a.Fragment,null,o.a.createElement(dn,{open:A,initialValues:S,onClose:()=>{T(!1)},onSave:e=>{F(e.id)}}),o.a.createElement(xe.a,{open:t,onClose:R,classes:{paper:l.dialogPaper}},o.a.createElement(ye.a,{id:"form-dialog-title",className:l.dialogTitle},z.a.t("newTicketModal.title")),o.a.createElement(ve.a,{dividers:!0,className:l.dialogContent},o.a.createElement(_t.a,{style:{width:300},container:!0,spacing:2},void 0===i||void 0===i.id?o.a.createElement(_t.a,{xs:12,item:!0},o.a.createElement(Yt.a,{fullWidth:!0,options:s,loading:m,clearOnBlur:!0,autoHighlight:!0,freeSolo:!0,clearOnEscape:!0,getOptionLabel:W,renderOption:P,filterOptions:M,onChange:(e,a)=>((e,a)=>{(null===a||void 0===a?void 0:a.number)?h(a):(null===a||void 0===a?void 0:a.name)&&(N({name:a.name}),T(!0))})(0,a),renderInput:e=>o.a.createElement(Ce.a,Object.assign({},e,{label:z.a.t("newTicketModal.fieldLabel"),variant:"outlined",autoFocus:!0,onChange:e=>g(e.target.value),onKeyPress:e=>{!m&&E&&"Enter"===e.key&&F(E.id)},InputProps:{...e.InputProps,endAdornment:o.a.createElement(o.a.Fragment,null,m?o.a.createElement(be.a,{color:"inherit",size:20}):null,e.InputProps.endAdornment)}}))})):null,o.a.createElement(_t.a,{xs:12,item:!0},o.a.createElement(Ne.a,{required:!0,fullWidth:!0,displayEmpty:!0,variant:"outlined",value:x,onChange:e=>{v(e.target.value)},MenuProps:{anchorOrigin:{vertical:"bottom",horizontal:"left"},transformOrigin:{vertical:"top",horizontal:"left"},getContentAnchorEl:null},renderValue:()=>{if(""===x)return"Selecione uma fila";return D.queues.find(e=>e.id===x).name},className:l.select},(null===(a=D.queues)||void 0===a?void 0:a.length)>0&&D.queues.map((e,a)=>o.a.createElement(oe.a,{dense:!0,key:a,value:e.id,style:{borderRadius:8}},o.a.createElement(Ge.a,{primary:e.name}))))),o.a.createElement(_t.a,{xs:12,item:!0},o.a.createElement(Ne.a,{required:!0,fullWidth:!0,displayEmpty:!0,variant:"outlined",value:C,onChange:e=>{k(e.target.value)},MenuProps:{anchorOrigin:{vertical:"bottom",horizontal:"left"},transformOrigin:{vertical:"top",horizontal:"left"},getContentAnchorEl:null},renderValue:()=>{if(""===C)return"Selecione uma Conex\xe3o";return w.find(e=>e.id===C).name},className:l.select},(null===w||void 0===w?void 0:w.length)>0&&w.map((e,a)=>o.a.createElement(oe.a,{dense:!0,key:a,value:e.id,style:{borderRadius:8}},o.a.createElement(Ge.a,{primary:o.a.createElement(o.a.Fragment,null,o.a.createElement(f.a,{component:"span",style:{fontSize:14,marginLeft:"10px",display:"inline-flex",alignItems:"center",lineHeight:"2"}},e.name," \xa0"," ",o.a.createElement("p",{className:"CONNECTED"===e.status?l.online:l.offline},"(",e.status,")")))}))))))),o.a.createElement(we.a,{className:l.dialogActions},o.a.createElement(b.a,{onClick:R,color:"secondary",disabled:m,variant:"outlined",className:l.buttonOutlined},z.a.t("newTicketModal.buttons.cancel")),o.a.createElement(Ya,{variant:"contained",type:"button",disabled:!E,onClick:()=>F(E.id),color:"primary",loading:m,className:l.buttonContained},z.a.t("newTicketModal.buttons.ok")))))};var gn=e=>{let{contact:a,numbers:t}=e;const r=Object(S.useHistory)(),{user:i}=Object(n.useContext)(H),[l,s]=Object(n.useState)({name:"",number:0,profilePicUrl:""}),[c,d]=Object(n.useState)(""),[m,u]=Object(n.useState)(!1),[p,g]=Object(n.useState)(!0),[E,h]=Object(n.useState)(!1),[x,v]=Object(n.useState)({});Object(n.useEffect)(()=>{const e=setTimeout(async()=>{try{let e={name:a,number:t.replace(/\D/g,""),email:""};const{data:n}=await B.post("/contacts",e);n.alreadyExists?s(n.existingContact):s(e),n.invalido&&g(!1)}catch(e){y.toast.errorr(e.message)}},1500);return()=>clearTimeout(e)},[a,t]);const C=async e=>{try{let a=l.id;if(!a){const e={name:l.name,number:l.number,email:""},{data:t}=await B.post("/contacts",e);a=t.existingContact.id}const{data:t}=await B.post("/tickets",{contactId:a,queueId:e,userId:i.id,status:"open"});r.push("/tickets/"+t.uuid)}catch(a){y.toast.errorr(a.message)}};return o.a.createElement(o.a.Fragment,null,o.a.createElement(Kt.a,{open:m,onClose:()=>u(!1)},o.a.createElement("div",{style:{position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",backgroundColor:"#FFF",padding:"20px",outline:"none"}},o.a.createElement("h2",null,"Selecione a Fila"),i.queues.map(e=>o.a.createElement("div",{key:e.id},o.a.createElement(b.a,{onClick:()=>(async e=>{d(e),u(!1),""!==e&&await C(e)})(e.id)},e.name))))),o.a.createElement("div",{style:{minWidth:"250px"}},o.a.createElement(pn,{modalOpen:E,initialContact:l,onClose:e=>{(e=>{h(!1),void 0!==e&&void 0!==e.uuid&&r.push("/tickets/"+e.uuid)})(e)}}),o.a.createElement(_t.a,{container:!0,spacing:1},o.a.createElement(_t.a,{item:!0,xs:1},o.a.createElement(Le.a,{src:l.profilePicUrl})),o.a.createElement(_t.a,{item:!0,xs:9},o.a.createElement(f.a,{style:{marginTop:"12px",marginLeft:"10px"},variant:"subtitle1",color:"primary",gutterBottom:!0},l.name)),o.a.createElement(_t.a,{item:!0,xs:9},o.a.createElement(f.a,{style:{marginLeft:"10px"},variant:"body2",color:"textSecondary",gutterBottom:!0},o.a.createElement("strong",null,"Nome:")," ",l.name),o.a.createElement(f.a,{style:{marginLeft:"10px"},variant:"body2",color:"textSecondary",gutterBottom:!0},o.a.createElement(f.a,{variant:"body2",color:"textSecondary",component:"span"},o.a.createElement("strong",null,"Telefone:")," ",l.number))),o.a.createElement(_t.a,{item:!0,xs:12},o.a.createElement(Z.a,null),o.a.createElement(b.a,{fullWidth:!0,color:"primary",onClick:()=>{v(l),h(!0)},disabled:!l.number||!p},p?"Conversar (Novo Ticket)":"CONTATO FORA DO WHATSAPP")))))};const fn=Object(Y.a)(e=>({messagesListWrapper:{overflow:"hidden",position:"relative",display:"flex",flexDirection:"column",flexGrow:1,width:"100%",minWidth:300,minHeight:200},messagesList:{backgroundImage:"light"===e.mode?`url(${It.a})`:`url(${Nt.a})`,display:"flex",flexDirection:"column",flexGrow:1,padding:"20px 20px 20px 20px",overflowY:"scroll",...e.scrollbarStyles},circleLoading:{color:Ie.a[500],position:"absolute",opacity:"70%",top:0,left:"50%",marginTop:12},messageLeft:{marginRight:20,marginTop:2,minWidth:100,maxWidth:600,height:"auto",display:"block",position:"relative","&:hover #messageActionsButton":{display:"flex",position:"absolute",top:0,right:0},whiteSpace:"pre-wrap",backgroundColor:"#ffffff",color:"#303030",alignSelf:"flex-start",borderTopLeftRadius:0,borderTopRightRadius:8,borderBottomLeftRadius:8,borderBottomRightRadius:8,paddingLeft:5,paddingRight:5,paddingTop:5,paddingBottom:0,boxShadow:"0 1px 1px #b3b3b3"},quotedContainerLeft:{margin:"-3px -80px 6px -6px",overflow:"hidden",backgroundColor:"#f0f0f0",borderRadius:"7.5px",display:"flex",position:"relative"},quotedMsg:{padding:10,maxWidth:300,height:"auto",display:"block",whiteSpace:"pre-wrap",overflow:"hidden"},quotedSideColorLeft:{flex:"none",width:"4px",backgroundColor:"#6bcbef"},messageRight:{marginLeft:20,marginTop:2,minWidth:100,maxWidth:600,height:"auto",display:"block",position:"relative","&:hover #messageActionsButton":{display:"flex",position:"absolute",top:0,right:0},whiteSpace:"pre-wrap",backgroundColor:"#dcf8c6",color:"#303030",alignSelf:"flex-end",borderTopLeftRadius:8,borderTopRightRadius:8,borderBottomLeftRadius:8,borderBottomRightRadius:0,paddingLeft:5,paddingRight:5,paddingTop:5,paddingBottom:0,boxShadow:"0 1px 1px #b3b3b3"},quotedContainerRight:{margin:"-3px -80px 6px -6px",overflowY:"hidden",backgroundColor:"#cfe9ba",borderRadius:"7.5px",display:"flex",position:"relative"},quotedMsgRight:{padding:10,maxWidth:300,height:"auto",whiteSpace:"pre-wrap"},quotedSideColorRight:{flex:"none",width:"4px",backgroundColor:"#35cd96"},messageActionsButton:{display:"none",position:"relative",color:"#999",zIndex:1,backgroundColor:"inherit",opacity:"90%","&:hover, &.Mui-focusVisible":{backgroundColor:"inherit"}},messageContactName:{display:"flex",color:"#6bcbef",fontWeight:500},textContentItem:{overflowWrap:"break-word",padding:"3px 80px 6px 6px"},textContentItemEdited:{overflowWrap:"break-word",padding:"3px 120px 6px 6px"},textContentItemDeleted:{fontStyle:"italic",color:"rgba(0, 0, 0, 0.36)",overflowWrap:"break-word",padding:"3px 80px 6px 6px"},messageMedia:{objectFit:"cover",width:250,height:200,borderTopLeftRadius:8,borderTopRightRadius:8,borderBottomLeftRadius:8,borderBottomRightRadius:8},timestamp:{fontSize:11,position:"absolute",bottom:0,right:5,color:"#999"},dailyTimestamp:{alignItems:"center",textAlign:"center",alignSelf:"center",width:"110px",backgroundColor:"#e1f3fb",margin:"10px",borderRadius:"10px",boxShadow:"0 1px 1px #b3b3b3"},dailyTimestampText:{color:"#808888",padding:8,alignSelf:"center",marginLeft:"0px"},ackIcons:{fontSize:18,verticalAlign:"middle",marginLeft:4},deletedIcon:{fontSize:18,verticalAlign:"middle",marginRight:4},ackDoneAllIcon:{color:Ie.a[500],fontSize:18,verticalAlign:"middle",marginLeft:4},downloadMedia:{display:"flex",alignItems:"center",justifyContent:"center",backgroundColor:"inherit",padding:10}})),bn=(e,a)=>{if("LOAD_MESSAGES"===a.type){const t=a.payload,n=[];return t.forEach(a=>{const t=e.findIndex(e=>e.id===a.id);-1!==t?e[t]=a:n.push(a)}),[...n,...e]}if("ADD_MESSAGE"===a.type){const t=a.payload,n=e.findIndex(e=>e.id===t.id);return-1!==n?e[n]=t:e.push(t),[...e]}if("UPDATE_MESSAGE"===a.type){const t=a.payload,n=e.findIndex(e=>e.id===t.id);return-1!==n&&(e[n]=t),[...e]}if("RESET"===a.type)return[]};var En=e=>{let{ticket:a,ticketId:t,isGroup:r}=e;const i=fn(),[l,s]=Object(n.useReducer)(bn,[]),[c,d]=Object(n.useState)(1),[m,u]=Object(n.useState)(!1),[p,g]=Object(n.useState)(!1),f=Object(n.useRef)(),[E,h]=Object(n.useState)({}),[x,v]=Object(n.useState)(null),C=Boolean(x),k=Object(n.useRef)(t),S=/iPad|iPhone|iPod/.test(navigator.userAgent)&&!window.MSStream,N=Object(n.useContext)(j);Object(n.useEffect)(()=>{s({type:"RESET"}),d(1),k.current=t},[t]),Object(n.useEffect)(()=>{g(!0);const e=setTimeout(()=>{(async()=>{if(void 0!==t)try{const{data:e}=await B.get("/messages/"+t,{params:{pageNumber:c}});k.current===t&&(s({type:"LOAD_MESSAGES",payload:e.messages}),u(e.hasMore),g(!1)),1===c&&e.messages.length>1&&w()}catch(e){g(!1),y.toast.errorr(e.message)}})()},500);return()=>{clearTimeout(e)}},[c,t]),Object(n.useEffect)(()=>{const e=localStorage.getItem("companyId"),t=N.getSocket(e);return t.on("ready",()=>t.emit("joinChatBox",""+a.id)),t.on(`company-${e}-appMessage`,e=>{"create"===e.action&&e.message.ticketId===k.current&&(s({type:"ADD_MESSAGE",payload:e.message}),w()),"update"===e.action&&e.message.ticketId===k.current&&s({type:"UPDATE_MESSAGE",payload:e.message})}),()=>{t.disconnect()}},[t,a,N]);const w=()=>{f.current&&f.current.scrollIntoView({})},I=(e,a)=>{v(e.currentTarget),h(a)},A=e=>{if("locationMessage"===e.mediaType&&e.body.split("|").length>=2){let a=e.body.split("|"),t=a[0],n=a[1],r=null;return a.length>2&&(r=e.body.split("|")[2]),o.a.createElement(At,{image:t,link:n,description:r})}if("contactMessage"===e.mediaType){let a=e.body.split("\n"),t=[],n="";for(let e=0;e<a.length;e++){let o=a[e].split(":");for(let e=0;e<o.length;e++)-1!==o[e].indexOf("+")&&t.push({number:o[e]}),-1!==o[e].indexOf("FN")&&(n=o[e+1])}return o.a.createElement(gn,{contact:n,numbers:t[0].number})}return"image"===e.mediaType?o.a.createElement(Gt,{imageUrl:e.mediaUrl}):"audio"===e.mediaType?S?(e.mediaUrl=e.mediaUrl.replace("ogg","mp3"),o.a.createElement("audio",{controls:!0},o.a.createElement("source",{src:e.mediaUrl,type:"audio/mp3"}))):o.a.createElement("audio",{controls:!0},o.a.createElement("source",{src:e.mediaUrl,type:"audio/ogg"})):"video"===e.mediaType?o.a.createElement("video",{className:i.messageMedia,src:e.mediaUrl,controls:!0}):o.a.createElement(o.a.Fragment,null,o.a.createElement("div",{className:i.downloadMedia},o.a.createElement(b.a,{startIcon:o.a.createElement(ht.a,{size:16}),color:"primary",variant:"outlined",target:"_blank",href:e.mediaUrl},"Download")),o.a.createElement(Z.a,null))},T=(e,a)=>{if(0===a)return o.a.createElement("span",{className:i.dailyTimestamp,key:"timestamp-"+e.id},o.a.createElement("div",{className:i.dailyTimestampText},Object(ja.a)(Object(Ua.a)(l[a].createdAt),"dd/MM/yyyy")));if(a<l.length-1){let t=Object(Ua.a)(l[a].createdAt),n=Object(Ua.a)(l[a-1].createdAt);if(!Object(Va.a)(t,n))return o.a.createElement("span",{className:i.dailyTimestamp,key:"timestamp-"+e.id},o.a.createElement("div",{className:i.dailyTimestampText},Object(ja.a)(Object(Ua.a)(l[a].createdAt),"dd/MM/yyyy")))}return a===l.length-1?o.a.createElement("div",{key:"ref-"+e.createdAt,ref:f,style:{float:"left",clear:"both"}}):void 0},D=(e,a)=>{if(a<l.length&&a>0){var t,n;let r=e.ticketId;null===(t=e.ticket)||void 0===t||null===(n=t.whatsapp)||void 0===n||n.name;if(r!==l[a-1].ticketId)return o.a.createElement("center",null,o.a.createElement("div",{className:i.ticketNunberClosed},"Conversa encerrada:"," ",Object(ja.a)(Object(Ua.a)(l[a-1].createdAt),"dd/MM/yyyy HH:mm:ss")),o.a.createElement("div",{className:i.ticketNunberOpen},"Conversa iniciada:"," ",Object(ja.a)(Object(Ua.a)(e.createdAt),"dd/MM/yyyy HH:mm:ss")))}},O=(e,a)=>{if(a<l.length&&a>0){if(l[a].fromMe!==l[a-1].fromMe)return o.a.createElement("span",{style:{marginTop:16},key:"divider-"+e.id})}},R=e=>{var a,t,n,r,l;return o.a.createElement("div",{className:Object(re.a)(i.quotedContainerLeft,{[i.quotedContainerRight]:e.fromMe})},o.a.createElement("span",{className:Object(re.a)(i.quotedSideColorLeft,{[i.quotedSideColorRight]:null===(a=e.quotedMsg)||void 0===a?void 0:a.fromMe})}),o.a.createElement("div",{className:i.quotedMsg},!(null===(t=e.quotedMsg)||void 0===t?void 0:t.fromMe)&&o.a.createElement("span",{className:i.messageContactName},null===(n=e.quotedMsg)||void 0===n||null===(r=n.contact)||void 0===r?void 0:r.name),"audio"===e.quotedMsg.mediaType&&o.a.createElement("div",{className:i.downloadMedia},o.a.createElement("audio",{controls:!0},o.a.createElement("source",{src:e.quotedMsg.mediaUrl,type:"audio/ogg"}))),"video"===e.quotedMsg.mediaType&&o.a.createElement("video",{className:i.messageMedia,src:e.quotedMsg.mediaUrl,controls:!0}),"application"===e.quotedMsg.mediaType&&o.a.createElement("div",{className:i.downloadMedia},o.a.createElement(b.a,{startIcon:o.a.createElement(ht.a,{size:16}),color:"primary",variant:"outlined",target:"_blank",href:e.quotedMsg.mediaUrl},"Download")),"image"===e.quotedMsg.mediaType&&o.a.createElement(Gt,{imageUrl:e.quotedMsg.mediaUrl})||(null===(l=e.quotedMsg)||void 0===l?void 0:l.body)))};return o.a.createElement("div",{className:i.messagesListWrapper},o.a.createElement(Ht,{message:E,anchorEl:x,menuOpen:C,handleClose:e=>{v(null)}}),o.a.createElement("div",{id:"messagesList",className:i.messagesList,onScroll:e=>{if(!m)return;const{scrollTop:a}=e.currentTarget;0===a&&(document.getElementById("messagesList").scrollTop=1),p||a<50&&d(e=>e+1)}},l.length>0?(()=>{if(l.length>0){return l.map((e,a)=>{var t,n;return"call_log"===e.mediaType?o.a.createElement(o.a.Fragment,{key:e.id},T(e,a),D(e,a),O(e,a),o.a.createElement("div",{className:i.messageCenter},o.a.createElement(J.a,{variant:"contained",size:"small",id:"messageActionsButton",disabled:e.isDeleted,className:i.messageActionsButton,onClick:a=>I(a,e)},o.a.createElement(ta.a,{size:20})),r&&o.a.createElement("span",{className:i.messageContactName},null===(t=e.contact)||void 0===t?void 0:t.name),o.a.createElement("div",null,o.a.createElement(Ct.a,{size:16,color:"#df3333"}),o.a.createElement("span",null,"Chamada de voz/v\xeddeo perdida \xe0s"," ",Object(ja.a)(Object(Ua.a)(e.createdAt),"HH:mm"))))):e.fromMe?o.a.createElement(o.a.Fragment,{key:e.id},T(e,a),D(e,a),O(e,a),o.a.createElement("div",{className:i.messageRight},o.a.createElement(J.a,{variant:"contained",size:"small",id:"messageActionsButton",disabled:e.isDeleted,className:i.messageActionsButton,onClick:a=>I(a,e)},o.a.createElement(ta.a,{size:20})),(e.mediaUrl||"locationMessage"===e.mediaType||"vcard"===e.mediaType||"contactMessage"===e.mediaType)&&A(e),o.a.createElement("div",{className:Object(re.a)(i.textContentItem,{[i.textContentItemDeleted]:e.isDeleted})},e.isDeleted&&o.a.createElement("div",null,o.a.createElement("span",{className:"message-deleted"},"Essa mensagem foi apagada pelo contato \xa0",o.a.createElement(kt.a,{size:16,className:i.deletedIcon}))),e.quotedMsg&&R(e),o.a.createElement(et,null,e.body),o.a.createElement("span",{className:i.timestamp},Object(ja.a)(Object(Ua.a)(e.createdAt),"HH:mm"),(e=>0===e.ack?o.a.createElement(xt.a,{size:16,className:i.ackIcons}):1===e.ack||2===e.ack?o.a.createElement(yt.a,{size:16,className:i.ackIcons}):3===e.ack?o.a.createElement(vt.a,{size:16,className:i.ackIcons}):4===e.ack||5===e.ack?o.a.createElement(vt.a,{size:16,className:i.ackDoneAllIcon}):void 0)(e))))):o.a.createElement(o.a.Fragment,{key:e.id},T(e,a),D(e,a),O(e,a),o.a.createElement("div",{className:i.messageLeft},o.a.createElement(J.a,{variant:"contained",size:"small",id:"messageActionsButton",disabled:e.isDeleted,className:i.messageActionsButton,onClick:a=>I(a,e)},o.a.createElement(ta.a,{size:20})),r&&o.a.createElement("span",{className:i.messageContactName},null===(n=e.contact)||void 0===n?void 0:n.name),e.isDeleted&&o.a.createElement("div",null,o.a.createElement("span",{className:"message-deleted"},"Essa mensagem foi apagada pelo contato \xa0",o.a.createElement(kt.a,{size:16,className:i.deletedIcon}))),(e.mediaUrl||"locationMessage"===e.mediaType||"vcard"===e.mediaType||"contactMessage"===e.mediaType)&&A(e),o.a.createElement("div",{className:i.textContentItem},e.quotedMsg&&R(e),o.a.createElement(et,null,"locationMessage"===e.mediaType||"contactMessage"===e.mediaType?null:e.body),o.a.createElement("span",{className:i.timestamp},Object(ja.a)(Object(Ua.a)(e.createdAt),"HH:mm")))))})}return o.a.createElement("div",null,"Diga ol\xe1 para seu novo contato!")})():[]),p&&o.a.createElement("div",null,o.a.createElement(be.a,{className:i.circleLoading})))},hn=t(1200),xn=t(1201),yn=t(1202);const vn=Object(Y.a)(e=>({ticketHeader:{display:"flex",backgroundColor:"#eee",flex:"none",borderBottom:"1px solid rgba(0, 0, 0, 0.12)"}}));var Cn=()=>{const e=vn();return o.a.createElement(hn.a,{square:!0,className:e.ticketHeader},o.a.createElement(xn.a,{titleTypographyProps:{noWrap:!0},subheaderTypographyProps:{noWrap:!0},avatar:o.a.createElement(yn.a,{animation:"wave",variant:"circle"},o.a.createElement(Le.a,{alt:"contact_image"})),title:o.a.createElement(yn.a,{animation:"wave",width:80}),subheader:o.a.createElement(yn.a,{animation:"wave",width:140})}))};const kn=Object(Y.a)(e=>({ticketHeader:{display:"flex",background:"#fff",flex:"none",alignItems:"center",borderBottom:"3px solid #5D3FD3",borderTopLeftRadius:16,borderTopRightRadius:16,boxShadow:"0 2px 12px rgba(93,63,211,0.06)",padding:e.spacing(2,3),minHeight:64,[e.breakpoints.down("sm")]:{flexWrap:"wrap",padding:e.spacing(1,1),minHeight:48}}}));var Sn=e=>{let{loading:a,children:t}=e;const n=kn();return o.a.createElement(o.a.Fragment,null,a?o.a.createElement(Cn,null):o.a.createElement(hn.a,{square:!0,className:n.ticketHeader},t))},Nn=t(1203);var wn=e=>{let{contact:a,ticket:t,onClick:r}=e;const{user:i}=t,[l,s]=Object(n.useState)(""),[c,d]=Object(n.useState)("");return Object(n.useEffect)(()=>{if(a&&(d(a.name),document.body.offsetWidth<600&&a.name.length>10)){const e=a.name.substring(0,10)+"...";d(e)}i&&a&&(s(`${z.a.t("messagesList.header.assignedTo")} ${i.name}`),document.body.offsetWidth<600&&s(""+i.name))},[]),o.a.createElement(xn.a,{onClick:r,style:{cursor:"pointer",transition:"box-shadow 0.2s",borderRadius:12,boxShadow:"0 1px 4px rgba(93,63,211,0.07)"},titleTypographyProps:{noWrap:!0},subheaderTypographyProps:{noWrap:!0},avatar:o.a.createElement(Le.a,{src:a.profilePicUrl,alt:"contact_image",style:{width:52,height:52,border:"2.5px solid #5D3FD3",boxShadow:"0 2px 8px rgba(93,63,211,0.10)"}}),title:o.a.createElement(g.a,{display:"flex",alignItems:"center",gap:1},o.a.createElement(f.a,{style:{color:"#5D3FD3",fontWeight:700,fontSize:18}},c),o.a.createElement(f.a,{style:{color:"#888",fontWeight:500,fontSize:13,marginLeft:8}},"#",t.id)),subheader:t.user&&o.a.createElement(g.a,{display:"flex",alignItems:"center",gap:1},o.a.createElement(Nn.a,{style:{fontSize:18,color:"#5D3FD3",marginRight:4}}),o.a.createElement(f.a,{style:{color:"#666",fontWeight:500,fontSize:15}},l))})};const In=Object(Y.a)(e=>({root:{display:"flex",height:"100%",position:"relative",overflow:"hidden",background:"#fafbfc",borderBottomLeftRadius:18,borderBottomRightRadius:18,padding:e.spacing(2,2,2,2)},dialogPaper:{borderRadius:18,boxShadow:"0 8px 32px rgba(93,63,211,0.12)",background:"#fff"},dialogActions:{padding:e.spacing(2,3),justifyContent:"flex-end",background:"#fafbfc",borderBottomLeftRadius:18,borderBottomRightRadius:18},closeButton:{background:"#5D3FD3",color:"#fff",borderRadius:10,fontWeight:600,fontSize:16,padding:"8px 28px",boxShadow:"0 2px 8px rgba(93,63,211,0.10)",display:"flex",alignItems:"center",gap:8,"&:hover":{background:"#4930A8"}},mainWrapper:{flex:1,height:"100%",display:"flex",flexDirection:"column",overflow:"hidden",borderTopLeftRadius:0,borderBottomLeftRadius:0,borderLeft:"0",marginRight:-320,transition:e.transitions.create("margin",{easing:e.transitions.easing.sharp,duration:e.transitions.duration.leavingScreen})},mainWrapperShift:{borderTopRightRadius:0,borderBottomRightRadius:0,transition:e.transitions.create("margin",{easing:e.transitions.easing.easeOut,duration:e.transitions.duration.enteringScreen}),marginRight:0}}));function An(e){let{open:a,handleClose:t,ticketId:r}=e;const i=Object(S.useHistory)(),l=In(),{user:s}=Object(n.useContext)(H),[,c]=Object(n.useState)(!1),[d,m]=Object(n.useState)(!0),[u,p]=Object(n.useState)({}),[f,E]=Object(n.useState)({}),h=Object(n.useContext)(j);Object(n.useEffect)(()=>{let e=null;return a&&(m(!0),e=setTimeout(()=>{(async()=>{try{const{data:e}=await B.get("/tickets/"+r),{queueId:a}=e,{queues:t,profile:n}=s;if(void 0===t.find(e=>e.id===a)&&"admin"!==n)return y.toast.error("Acesso n\xe3o permitido"),void i.push("/tickets");p(e.contact),E(e),m(!1)}catch(e){m(!1),y.toast.error(e.message)}})()},500)),()=>{null!==e&&clearTimeout(e)}},[r,s,i,a]),Object(n.useEffect)(()=>{const e=localStorage.getItem("companyId");if(a){const a=h.getSocket(e);a.on("ready",()=>a.emit("joinChatBox",""+f.id)),a.on(`company-${e}-ticket`,e=>{"update"===e.action&&e.ticket.id===f.id&&E(e.ticket),"delete"===e.action&&e.ticketId===f.id&&i.push("/tickets")}),a.on(`company-${e}-contact`,e=>{"update"===e.action&&p(a=>{var t;return a.id===(null===(t=e.contact)||void 0===t?void 0:t.id)?{...a,...e.contact}:a})})}return()=>{0}},[r,f,i,a,h]);const x=()=>{c(!0)};return o.a.createElement(xe.a,{maxWidth:"md",onClose:t,open:a,PaperProps:{className:l.dialogPaper}},o.a.createElement(Sn,{loading:d},(()=>{if(void 0!==f.user)return o.a.createElement(wn,{contact:u,ticket:f,onClick:x})})()),o.a.createElement(Et,null,o.a.createElement(g.a,{className:l.root},o.a.createElement(En,{ticket:f,ticketId:f.id,isGroup:f.isGroup}))),o.a.createElement(we.a,{className:l.dialogActions},o.a.createElement(b.a,{onClick:t,className:l.closeButton,startIcon:o.a.createElement(ft.a,null)},"Fechar")))}const Tn=Object(Y.a)(e=>({ticket:{position:"relative",borderRadius:14,margin:"10px 0",boxShadow:"0 2px 12px rgba(93,63,211,0.06)",transition:"box-shadow 0.2s, border 0.2s",border:"2px solid transparent","&:hover":{boxShadow:"0 4px 24px rgba(93,63,211,0.12)",border:"2px solid #5D3FD3"},"&.Mui-selected":{border:"2px solid #5D3FD3",boxShadow:"0 4px 24px rgba(93,63,211,0.16)",background:"#f7f7fa"},background:"#fff",minHeight:80,alignItems:"center",padding:"0 8px"},pendingTicket:{cursor:"unset"},queueTag:{background:"#FCFCFC",color:"#000",marginRight:1,padding:1,fontWeight:"bold",paddingLeft:5,paddingRight:5,borderRadius:3,fontSize:"0.8em",whiteSpace:"nowrap"},noTicketsDiv:{display:"flex",height:"100px",margin:40,flexDirection:"column",alignItems:"center",justifyContent:"center"},newMessagesCount:{position:"absolute",alignSelf:"center",marginRight:8,marginLeft:"auto",top:"10px",left:"20px",borderRadius:0},noTicketsText:{textAlign:"center",color:"rgb(104, 121, 146)",fontSize:"14px",lineHeight:"1.4"},connectionTag:{background:"green",color:"#FFF",marginRight:1,padding:1,fontWeight:"bold",paddingLeft:5,paddingRight:5,borderRadius:3,fontSize:"0.8em",whiteSpace:"nowrap"},noTicketsTitle:{textAlign:"center",fontSize:"16px",fontWeight:"600",margin:"0px"},contactNameWrapper:{display:"flex",justifyContent:"space-between",alignItems:"center",width:"100%"},contactName:{color:"#5D3FD3",fontWeight:700,fontSize:18,maxWidth:140,overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},lastMessageTime:{justifySelf:"flex-end",textAlign:"right",position:"relative",top:-21,background:"#333333",color:"#ffffff",border:"1px solid #3a3b6c",borderRadius:5,padding:1,paddingLeft:5,paddingRight:5,fontSize:"0.9em"},closedBadge:{alignSelf:"center",justifySelf:"flex-end",marginRight:32,marginLeft:"auto"},contactLastMessage:{paddingRight:"0%",marginLeft:"5px"},badgeStyle:{color:"white",backgroundColor:Ie.a[500]},acceptButton:{position:"absolute",right:"108px"},ticketQueueColor:{flex:"none",width:"8px",height:"100%",position:"absolute",top:"0%",left:"0%"},ticketInfo:{position:"relative",top:-13},secondaryContentSecond:{display:"flex",alignItems:"flex-start",flexWrap:"wrap",flexDirection:"row",alignContent:"flex-start"},ticketInfo1:{position:"relative",top:13,right:0},Radiusdot:{"& .MuiBadge-badge":{borderRadius:2,position:"inherit",height:16,margin:2,padding:3},"& .MuiBadge-anchorOriginTopRightRectangle":{transform:"scale(1) translate(0%, -40%)"}},actionButtonsWrapper:{display:"flex",gap:8,alignItems:"center",marginTop:4,marginBottom:2,marginLeft:0,flexWrap:"wrap",position:"static"},compactButton:{minWidth:0,padding:"4px 12px",fontSize:13,borderRadius:16,fontWeight:600,boxShadow:"0 1px 4px rgba(93,63,211,0.07)",display:"flex",alignItems:"center",gap:6}}));var Dn=e=>{var a,t,r,i,l,s,c,d,m,u,p,b;let{ticket:E}=e;const h=Tn(),x=Object(S.useHistory)(),[v,C]=Object(n.useState)(!1),[k,N]=Object(n.useState)(null),[w,I]=Object(n.useState)([]),[A,T]=Object(n.useState)(""),[D,O]=Object(n.useState)(!1),{ticketId:j}=Object(S.useParams)(),R=Object(n.useRef)(!0),{setCurrentTicket:F}=Object(n.useContext)(_a),{user:M}=Object(n.useContext)(H),[P]=Object(n.useState)(!1),{profile:W}=M;Object(n.useEffect)(()=>{var e,a;E.userId&&E.user&&N(null===(e=E.user)||void 0===e||null===(a=e.name)||void 0===a?void 0:a.toUpperCase());return I(null===E||void 0===E?void 0:E.tags),()=>{R.current=!1}},[]);Object(n.useEffect)(()=>{let e;const a=()=>{const{labelText:t,labelColor:n}=(()=>{let e="",a="";if(!E.lastMessage)return{labelText:"",labelColor:""};const t=Object(Ua.a)(E.updatedAt),n=new Date-t,o=Math.floor(n/36e5),r=Math.floor(n/6e4);return r>=3&&r<=10?(a=`(${r} m atr\xe1s)`,e="green"):r>=30&&r<60?(a=`(${r} m atr\xe1s)`,e="Orange"):r>60&&o<24?(a=`(${o} h atr\xe1s)`,e="red"):o>=24&&(a=`(${Math.floor(o/24)} dias atr\xe1s)`,e="red"),{labelText:a,labelColor:e}})();R.current&&(T(o.a.createElement(qe.a,{className:h.lastInteractionLabel,style:{color:n}},t)),e=setTimeout(a,3e4))};return a(),()=>{clearTimeout(e)}},[E,h.lastInteractionLabel]);const L=async e=>{const a={read:1,fromMe:!0,mediaUrl:"",body:"*Mensagem Autom\xe1tica:*\n"+`{{ms}} *{{name}}*, meu nome \xe9 *${null===M||void 0===M?void 0:M.name}* e agora vou prosseguir com seu atendimento!`.trim()};try{await B.post("/messages/"+e,a)}catch(t){y.toast.errorr(t.message)}};return o.a.createElement(o.a.Fragment,{key:E.id},o.a.createElement(An,{open:D,handleClose:()=>O(!1),ticketId:E.id}),o.a.createElement(Ue.a,{dense:!0,button:!0,onClick:e=>{"pending"!==E.status&&(e=>{const a=Object(Ga.a)(),{id:t,uuid:n}=e;F({id:t,uuid:n,code:a})})(E)},selected:j&&+j===E.id,className:Object(re.a)(h.ticket,{[h.pendingTicket]:"pending"===E.status})},o.a.createElement(Sa.a,{arrow:!0,placement:"right",title:(null===(a=E.queue)||void 0===a||null===(t=a.name)||void 0===t?void 0:t.toUpperCase())||"SEM FILA"},o.a.createElement("span",{style:{backgroundColor:(null===(r=E.queue)||void 0===r?void 0:r.color)||"#7C7C7C"},className:h.ticketQueueColor})),o.a.createElement(Ia.a,null,o.a.createElement(Le.a,{src:null===E||void 0===E||null===(i=E.contact)||void 0===i?void 0:i.profilePicUrl,style:{width:52,height:52,border:"2px solid #5D3FD3",borderRadius:"50%",objectFit:"cover",background:"#fff",marginTop:0,marginLeft:0,color:"#5D3FD3",fontWeight:700,fontSize:22}},!(null===E||void 0===E||null===(l=E.contact)||void 0===l?void 0:l.profilePicUrl)&&(null===E||void 0===E||null===(s=E.contact)||void 0===s?void 0:s.name)?E.contact.name.charAt(0).toUpperCase():null)),o.a.createElement(Ge.a,{disableTypography:!0,primary:o.a.createElement("span",{className:h.contactNameWrapper},o.a.createElement(f.a,{noWrap:!0,component:"span",variant:"body2",color:"textPrimary"},o.a.createElement("strong",null,E.contact.name," ",A),"admin"===W&&o.a.createElement(Sa.a,{title:"Espiar Conversa"},o.a.createElement(dt.a,{onClick:()=>O(!0),fontSize:"small",style:{color:"#5D3FD3",cursor:"pointer",marginLeft:10,verticalAlign:"middle"}})))),secondary:o.a.createElement("span",{className:h.contactNameWrapper},o.a.createElement(f.a,{className:h.contactLastMessage,noWrap:!0,component:"span",variant:"body2",color:"textSecondary"}," ",E.lastMessage&&E.lastMessage.includes("data:image/png;base64")?o.a.createElement(et,null," Localiza\xe7\xe3o"):o.a.createElement(et,null,E.lastMessage),E.lastMessage&&P?o.a.createElement(o.a.Fragment,null,E.lastMessage.includes("VCARD")?o.a.createElement(et,null,"Novo Contato recebido"):E.lastMessage.includes("data:image")?o.a.createElement(et,null,"Localiza\xe7\xe3o recebida"):o.a.createElement(et,null,E.lastMessage.slice(0,20)+"...")):o.a.createElement(et,null,"---"),o.a.createElement("span",{className:h.secondaryContentSecond},(null===E||void 0===E||null===(c=E.whatsapp)||void 0===c?void 0:c.name)?o.a.createElement(qe.a,{className:h.connectionTag},null===E||void 0===E||null===(d=E.whatsapp)||void 0===d||null===(m=d.name)||void 0===m?void 0:m.toUpperCase()):o.a.createElement("br",null),k?o.a.createElement(qe.a,{style:{backgroundColor:"#000000"},className:h.connectionTag},k):o.a.createElement("br",null),o.a.createElement(qe.a,{style:{backgroundColor:(null===(u=E.queue)||void 0===u?void 0:u.color)||"#7c7c7c"},className:h.connectionTag},(null===(p=E.queue)||void 0===p||null===(b=p.name)||void 0===b?void 0:b.toUpperCase())||"SEM FILA")),o.a.createElement("span",{style:{paddingTop:"2px"},className:h.secondaryContentSecond},null===w||void 0===w?void 0:w.map(e=>o.a.createElement(pt,{tag:e,key:`ticket-contact-tag-${E.id}-${e.id}`})))),o.a.createElement(qe.a,{className:h.newMessagesCount,badgeContent:E.unreadMessages,classes:{badge:h.badgeStyle}}))}),o.a.createElement(qa.a,null,o.a.createElement(g.a,{className:h.ticketInfo1},o.a.createElement(o.a.Fragment,null,E.chatbot&&o.a.createElement(Sa.a,{title:"Chatbot"},o.a.createElement(tt.a,{fontSize:"small",style:{color:Ha.a[700],marginRight:5}})))),E.lastMessage&&o.a.createElement(o.a.Fragment,null,o.a.createElement(f.a,{className:h.lastMessageTime,component:"span",variant:"body2",color:"textSecondary"},Object(Va.a)(Object(Ua.a)(E.updatedAt),new Date)?o.a.createElement(o.a.Fragment,null,Object(ja.a)(Object(Ua.a)(E.updatedAt),"HH:mm")):o.a.createElement(o.a.Fragment,null,Object(ja.a)(Object(Ua.a)(E.updatedAt),"dd/MM/yyyy"))),o.a.createElement("br",null)),o.a.createElement("span",{className:h.actionButtonsWrapper},"pending"===E.status&&o.a.createElement(Ya,{style:{backgroundColor:"#43a047",color:"white"},variant:"contained",className:h.compactButton,size:"small",loading:v,onClick:e=>(async e=>{C(!0);try{let t;await B.put("/tickets/"+e,{status:"open",userId:null===M||void 0===M?void 0:M.id});try{const{data:e}=await B.get("/settings/");t=e.filter(e=>"sendGreetingAccepted"===e.key)}catch(a){y.toast.errorr(a.message)}"enabled"!==t[0].value||E.isGroup||L(E.id)}catch(a){C(!1),y.toast.errorr(a.message)}R.current&&C(!1),x.push("/tickets/"+E.uuid)})(E.id),startIcon:o.a.createElement(ot.a,{style:{fontSize:18}})},z.a.t("ticketsList.buttons.accept")),"closed"!==E.status&&o.a.createElement(Ya,{style:{backgroundColor:"#e53935",color:"white"},variant:"contained",className:h.compactButton,size:"small",loading:v,onClick:e=>(async e=>{I(null===E||void 0===E?void 0:E.tags),C(!0);try{var a;await B.put("/tickets/"+e,{status:"closed",userId:null===M||void 0===M?void 0:M.id,queueId:null===E||void 0===E||null===(a=E.queue)||void 0===a?void 0:a.id,useIntegration:!1,promptId:null,integrationId:null})}catch(t){C(!1),y.toast.errorr(t.message)}R.current&&C(!1),x.push("/tickets/")})(E.id),startIcon:o.a.createElement(st.a,{style:{fontSize:18}})},z.a.t("ticketsList.buttons.closed")),"closed"===E.status&&o.a.createElement(Ya,{style:{backgroundColor:"#e53935",color:"white"},variant:"contained",className:h.compactButton,size:"small",loading:v,onClick:e=>(async e=>{C(!0);try{var a;await B.put("/tickets/"+e,{status:"open",userId:null===M||void 0===M?void 0:M.id,queueId:null===E||void 0===E||null===(a=E.queue)||void 0===a?void 0:a.id})}catch(t){C(!1),y.toast.errorr(t.message)}R.current&&C(!1),x.push("/tickets/"+E.uuid)})(E.id),startIcon:o.a.createElement(it.a,{style:{fontSize:18}})},z.a.t("ticketsList.buttons.reopen"))))))};const On=Object(Y.a)(e=>({tabContainer:{overflowY:"auto",maxHeight:350,"&::-webkit-scrollbar":{width:"6px"},"&::-webkit-scrollbar-thumb":{backgroundColor:"#5D3FD3",borderRadius:"4px"},"&::-webkit-scrollbar-track":{backgroundColor:"rgba(93, 63, 211, 0.05)"}},popoverPaper:{width:"100%",maxWidth:350,marginLeft:e.spacing(2),marginRight:e.spacing(1),[e.breakpoints.down("sm")]:{maxWidth:270},borderRadius:12,boxShadow:"0 4px 20px rgba(0,0,0,0.12)",overflow:"hidden",border:"1px solid rgba(93, 63, 211, 0.1)",animation:"$slideIn 0.3s ease-out"},"@keyframes slideIn":{"0%":{opacity:0,transform:"translateY(-10px)"},"100%":{opacity:1,transform:"translateY(0)"}},noShadow:{boxShadow:"none !important"},notificationHeader:{background:"linear-gradient(145deg, #5D3FD3 0%, #7058e6 100%)",padding:e.spacing(1.8,2),display:"flex",alignItems:"center",justifyContent:"space-between",color:"#FFFFFF"},notificationTitle:{fontWeight:600,color:"#FFFFFF",fontSize:15,display:"flex",alignItems:"center","& svg":{marginRight:e.spacing(1),fontSize:20}},notificationIcon:{color:"#FFFFFF",opacity:.9,transition:"all 0.2s ease","&:hover":{opacity:1,transform:"scale(1.1)"}},emptyNotifications:{display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",padding:e.spacing(6),color:"#666",backgroundColor:"#f9f9f9",borderRadius:8,margin:e.spacing(2),transition:"all 0.3s ease"},emptyNotificationsIcon:{fontSize:48,color:"#5D3FD3",opacity:.6,marginBottom:e.spacing(2),animation:"$pulse 2s infinite"},"@keyframes pulse":{"0%":{transform:"scale(1)",opacity:.6},"50%":{transform:"scale(1.1)",opacity:.8},"100%":{transform:"scale(1)",opacity:.6}},badge:{backgroundColor:"#5D3FD3",transition:"all 0.3s ease","&.MuiBadge-badge":{transform:"scale(1) translate(40%, -40%)"}},buttonIcon:{color:"#5D3FD3",transition:"all 0.3s ease","&:hover":{color:"#4930A8"}},readAllBtn:{margin:e.spacing(1),fontSize:13,color:"#5D3FD3",borderColor:"#5D3FD3",borderRadius:20,padding:e.spacing(.5,2),transition:"all 0.2s ease","&:hover":{backgroundColor:"rgba(93, 63, 211, 0.08)",borderColor:"#4930A8",color:"#4930A8"}},footer:{display:"flex",justifyContent:"center",padding:e.spacing(1),borderTop:"1px solid rgba(0,0,0,0.05)"},notificationItem:{transition:"all 0.2s ease","&:hover":{backgroundColor:"rgba(93, 63, 211, 0.05)"}}}));var jn=e=>{const a=On(),t=Object(S.useHistory)(),{user:r}=Object(n.useContext)(H),i=+t.location.pathname.split("/")[2],l=Object(n.useRef)(i),s=Object(n.useRef)(),[c,d]=Object(n.useState)(!1),[m,u]=Object(n.useState)([]),[p,g]=Object(n.useState)(!1),[,E]=Object(n.useState)([]),{tickets:h}=La({withUnreadMessages:"true"}),[x]=Object(Ba.a)(Wa.a,e),v=Object(n.useRef)(),C=Object(n.useRef)(t),k=Object(n.useContext)(j);Object(n.useEffect)(()=>{(async()=>{try{"enable"===r.allTicket&&g(!0)}catch(e){y.toast.error((null===e||void 0===e?void 0:e.message)||"Erro desconhecido")}})()},[]),Object(n.useEffect)(()=>{v.current=x,"Notification"in window?Notification.requestPermission():console.log("This browser doesn't support notifications")},[x]),Object(n.useEffect)(()=>{(()=>{if(p)u(h);else{const e=h.filter(e=>"pending"!==e.status);u(e)}})()},[h,p]),Object(n.useEffect)(()=>{l.current=i},[i]),Object(n.useEffect)(()=>{const e=k.getSocket(r.companyId);return e.on("ready",()=>e.emit("joinNotification")),e.on(`company-${r.companyId}-ticket`,e=>{"updateUnread"!==e.action&&"delete"!==e.action||(u(a=>{const t=a.findIndex(a=>a.id===e.ticketId);return-1!==t?(a.splice(t,1),[...a]):a}),E(a=>{const t=a.findIndex(a=>a.tag===String(e.ticketId));return-1!==t?(a[t].close(),a.splice(t,1),[...a]):a}))}),e.on(`company-${r.companyId}-appMessage`,e=>{var a;if("create"===e.action&&!e.message.fromMe&&"pending"!==e.ticket.status&&(!e.message.read||"pending"===e.ticket.status)&&(e.ticket.userId===(null===r||void 0===r?void 0:r.id)||!e.ticket.userId)&&((null===r||void 0===r||null===(a=r.queues)||void 0===a?void 0:a.some(a=>a.id===e.ticket.queueId))||!e.ticket.queueId)){u(a=>{const t=a.findIndex(a=>a.id===e.ticket.id);return-1!==t?(a[t]=e.ticket,[...a]):[e.ticket,...a]});if(e.message.ticketId===l.current&&"visible"===document.visibilityState||e.ticket.userId&&e.ticket.userId!==(null===r||void 0===r?void 0:r.id)||e.ticket.isGroup)return;N(e)}}),()=>{e.disconnect()}},[r,p,k,r.allTicket]);const N=e=>{const{message:a,contact:t,ticket:n}=e,o={body:`${a.body} - ${Object(ja.a)(new Date,"HH:mm")}`,icon:t.urlPicture,tag:n.id,renotify:!0},r=new Notification(`${z.a.t("tickets.notification.message")} ${t.name}`,o);r.onclick=e=>{e.preventDefault(),window.focus(),C.current.push("/tickets/"+n.uuid)},E(e=>{const a=e.findIndex(e=>e.tag===r.tag);return-1!==a?(e[a]=r,[...e]):[r,...e]}),v.current()},w=()=>{d(!1)},I=e=>{let{children:a}=e;return o.a.createElement("div",{onClick:w},a)};return o.a.createElement(o.a.Fragment,null,o.a.createElement(Sa.a,{title:"Notifica\xe7\xf5es",arrow:!0,TransitionComponent:Na.a,TransitionProps:{timeout:600}},o.a.createElement(J.a,{onClick:()=>{d(e=>!e)},ref:s,"aria-label":"Open Notifications",color:"inherit",className:a.buttonIcon,size:"medium"},o.a.createElement(qe.a,{overlap:"rectangular",badgeContent:m.length,color:"secondary",classes:{badge:a.badge}},o.a.createElement(Pa.a,null)))),o.a.createElement(ya.a,{disableScrollLock:!0,open:c,anchorEl:s.current,anchorOrigin:{vertical:"bottom",horizontal:"right"},transformOrigin:{vertical:"top",horizontal:"right"},classes:{paper:a.popoverPaper},onClose:w},o.a.createElement("div",{className:a.notificationHeader},o.a.createElement(f.a,{className:a.notificationTitle},o.a.createElement(Pa.a,{fontSize:"small"}),"Notifica\xe7\xf5es"),o.a.createElement(qe.a,{overlap:"rectangular",badgeContent:m.length,color:"error"},o.a.createElement(J.a,{size:"small",className:a.notificationIcon},o.a.createElement(Fa.a,{fontSize:"small"})))),o.a.createElement("div",{className:a.tabContainer},0===m.length?o.a.createElement("div",{className:a.emptyNotifications},o.a.createElement(Fa.a,{className:a.emptyNotificationsIcon}),o.a.createElement(f.a,{variant:"body2",align:"center"},"Nenhuma notifica\xe7\xe3o")):o.a.createElement(ee.a,null,m.map(e=>o.a.createElement(I,{key:e.id},o.a.createElement("div",{className:a.notificationItem},o.a.createElement(Dn,{ticket:e})))))),m.length>0&&o.a.createElement("div",{className:a.footer},o.a.createElement(b.a,{variant:"outlined",size:"small",className:a.readAllBtn,onClick:w},"Ler todas"))))},Rn=t(472),Fn=t.n(Rn),Mn=t(657),Pn=t.n(Mn),Bn=t(1322);const zn=Object(Y.a)(e=>({tabContainer:{padding:e.spacing(2)},popoverPaper:{width:"100%",maxWidth:350,marginLeft:e.spacing(2),marginRight:e.spacing(1),[e.breakpoints.down("sm")]:{maxWidth:270},borderRadius:12,boxShadow:"0 4px 20px rgba(0,0,0,0.12)",overflow:"hidden",border:"1px solid rgba(93, 63, 211, 0.1)",animation:"$slideIn 0.3s ease-out"},"@keyframes slideIn":{"0%":{opacity:0,transform:"translateY(-10px)"},"100%":{opacity:1,transform:"translateY(0)"}},noShadow:{boxShadow:"none !important"},buttonIcon:{color:"#5D3FD3",transition:"all 0.3s ease","&:hover":{color:"#4930A8"}},icons:{color:"#5D3FD3"},volumeSlider:{color:"#5D3FD3","& .MuiSlider-thumb":{backgroundColor:"#5D3FD3"},"& .MuiSlider-track":{backgroundColor:"#5D3FD3"},"& .MuiSlider-rail":{backgroundColor:"rgba(93, 63, 211, 0.2)"}},customBadge:{backgroundColor:"#f44336",color:"#fff"}}));var Wn=e=>{let{volume:a,setVolume:t}=e;const r=zn(),i=Object(n.useRef)(),[l,s]=Object(n.useState)(!1);return o.a.createElement(o.a.Fragment,null,o.a.createElement(Sa.a,{title:"Volume",arrow:!0,TransitionComponent:Na.a,TransitionProps:{timeout:600}},o.a.createElement(J.a,{onClick:()=>{s(e=>!e)},ref:i,"aria-label":"Ajustar Volume",color:"inherit",className:r.buttonIcon,size:"medium"},o.a.createElement(Fn.a,null))),o.a.createElement(ya.a,{disableScrollLock:!0,open:l,anchorEl:i.current,anchorOrigin:{vertical:"bottom",horizontal:"right"},transformOrigin:{vertical:"top",horizontal:"right"},classes:{paper:r.popoverPaper},onClose:()=>{s(!1)}},o.a.createElement(ee.a,{dense:!0,className:r.tabContainer},o.a.createElement(_t.a,{container:!0,spacing:2},o.a.createElement(_t.a,{item:!0},o.a.createElement(Pn.a,{className:r.icons})),o.a.createElement(_t.a,{item:!0,xs:!0},o.a.createElement(Bn.a,{value:a,"aria-labelledby":"continuous-slider",step:.1,min:0,max:1,onChange:(e,a)=>(e=>{t(e),localStorage.setItem("volume",e)})(a),className:r.volumeSlider})),o.a.createElement(_t.a,{item:!0},o.a.createElement(Fn.a,{className:r.icons}))))))},Ln=t(658),qn=t.n(Ln);const Hn=Object(Y.a)(e=>({mainPaper:{flex:1,maxHeight:400,maxWidth:360,padding:e.spacing(1),overflowY:"scroll",...e.scrollbarStyles,borderRadius:14,boxShadow:"0 4px 20px rgba(0,0,0,0.12)",border:"1px solid rgba(93, 63, 211, 0.1)",animation:"$slideIn 0.3s ease-out",background:"#fff"},"@keyframes slideIn":{"0%":{opacity:0,transform:"translateY(-10px)"},"100%":{opacity:1,transform:"translateY(0)"}},chatHeader:{padding:e.spacing(2),borderBottom:"1px solid rgba(0,0,0,0.08)",background:"linear-gradient(145deg, #5D3FD3 0%, #7058e6 100%)",color:"#FFFFFF",display:"flex",alignItems:"center",justifyContent:"space-between",borderTopLeftRadius:14,borderTopRightRadius:14},headerTitle:{fontWeight:600,fontSize:16,display:"flex",alignItems:"center",gap:8,"& svg":{fontSize:22}},buttonIcon:{color:"#5D3FD3",transition:"all 0.3s ease","&:hover":{color:"#4930A8"}},badge:{backgroundColor:"#5D3FD3",transition:"all 0.3s ease",fontWeight:600,fontSize:13,padding:"0 4px"},chatItem:{margin:e.spacing(1,0),transition:"all 0.2s ease",borderRadius:8,"&:hover":{backgroundColor:"rgba(93, 63, 211, 0.07)",transform:"translateY(-1px)",boxShadow:"0 2px 8px rgba(93,63,211,0.08)",cursor:"pointer"}},chatName:{fontWeight:600,color:"#333",fontSize:14},chatDate:{fontSize:12,color:"#666",marginRight:e.spacing(1)},emptyChats:{display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",padding:e.spacing(4),color:"#666",backgroundColor:"#f9f9f9",borderRadius:8,margin:e.spacing(2)},emptyIcon:{fontSize:48,color:"#5D3FD3",opacity:.6,marginBottom:e.spacing(2)}})),Un=(e,a)=>{if("LOAD_CHATS"===a.type){const t=a.payload,n=[];return Object(k.isArray)(t)&&t.forEach(a=>{const t=e.findIndex(e=>e.id===a.id);-1!==t?e[t]=a:n.push(a)}),[...e,...n]}if("UPDATE_CHATS"===a.type){const t=a.payload,n=e.findIndex(e=>e.id===t.id);return-1!==n?(e[n]=t,[...e]):[t,...e]}if("DELETE_CHAT"===a.type){const t=a.payload,n=e.findIndex(e=>e.id===t);return-1!==n&&e.splice(n,1),[...e]}if("RESET"===a.type)return[];if("CHANGE_CHAT"===a.type){return e.map(e=>e.id===a.payload.chat.id?a.payload.chat:e)}};function Vn(){const e=Hn(),{user:a}=Object(n.useContext)(H),{socketConnection:t}=Object(n.useContext)(j),r=Object(S.useHistory)(),[i,l]=Object(n.useState)(!1),[s,c]=Object(n.useState)(null),[d,m]=Object(n.useState)(1),[u,p]=Object(n.useState)(!1),[g]=Object(n.useState)(""),[b,E]=Object(n.useReducer)(Un,[]),[h,x]=Object(n.useState)(!0),{datetimeToClient:v}=xa(),[C]=Object(Ba.a)(qn.a),[N,w]=Object(n.useState)(!0);Object(n.useEffect)(()=>(w(!0),()=>{w(!1)}),[]),Object(n.useEffect)(()=>{if(!t)return;const e=localStorage.getItem("companyId");if(!e)return;const a=t.getSocket(e);if(!a)return;const n=e=>{if(N)try{"new-message"===e.action&&(E({type:"CHANGE_CHAT",payload:e}),C()),"update"===e.action&&E({type:"CHANGE_CHAT",payload:e})}catch(a){console.error("Erro ao processar mensagem:",a)}};return a.on(`company-${e}-chat`,n),()=>{a&&a.off(`company-${e}-chat`,n)}},[t,N,C]),Object(n.useEffect)(()=>{const e=setTimeout(()=>{N&&I()},500);return()=>clearTimeout(e)},[g,d,N]),Object(n.useEffect)(()=>{let e=0;if(b.length>0)for(let t of b)for(let n of t.users)n.userId===a.id&&(e+=n.unreads);x(!(e>0))},[b,a.id]);const I=async()=>{try{l(!0);const{data:e}=await B.get("/chats/",{params:{searchParam:g,pageNumber:d}});N&&(E({type:"LOAD_CHATS",payload:e.records}),p(e.records.length>0))}catch(n){var e,a,t;if(N)if(401===(null===(e=n.response)||void 0===e?void 0:e.status))r.push("/login");else y.toast.error((null===(a=n.response)||void 0===a||null===(t=a.data)||void 0===t?void 0:t.error)||"Erro ao carregar chats")}finally{N&&l(!1)}},A=()=>{c(null)},T=Boolean(s),D=T?"simple-popover":void 0;return o.a.createElement("div",null,o.a.createElement(Sa.a,{title:"Chat Interno",arrow:!0,TransitionComponent:Na.a,TransitionProps:{timeout:600}},o.a.createElement(J.a,{"aria-describedby":D,variant:"contained",onClick:e=>{c(e.currentTarget)},className:e.buttonIcon,size:"medium"},o.a.createElement(qe.a,{color:"secondary",variant:"dot",invisible:h,classes:{badge:e.badge}},o.a.createElement(ce.a,{size:22})))),o.a.createElement(ya.a,{id:D,open:T,anchorEl:s,onClose:A,anchorOrigin:{vertical:"bottom",horizontal:"right"},transformOrigin:{vertical:"top",horizontal:"right"}},o.a.createElement(wa.a,{variant:"outlined",onScroll:e=>{0===e.target.scrollTop&&!i&&u&&N&&m(e=>e+1)},className:e.mainPaper},o.a.createElement("div",{className:e.chatHeader},o.a.createElement(f.a,{className:e.headerTitle},o.a.createElement(ce.a,{size:20}),"Chat Interno"),o.a.createElement(qe.a,{color:"error",badgeContent:b.length,max:99,classes:{badge:e.badge}},o.a.createElement(ce.a,{size:20}))),o.a.createElement(ee.a,{component:"nav","aria-label":"chat list"},Object(k.isArray)(b)&&b.length>0?b.map(t=>{let n=!1,i=0;if(t.users&&Object(k.isArray)(t.users))for(let e of t.users)e.userId===a.id&&(n=e.unreads>0,i=e.unreads);return o.a.createElement(Ue.a,{key:t.id,className:e.chatItem,button:!0,onClick:()=>(e=>{A(),r.push("/chats/"+e.id)})(t)},o.a.createElement(Ge.a,{primary:o.a.createElement(f.a,{className:e.chatName},t.title),secondary:o.a.createElement(f.a,{component:"span",className:e.chatDate},v(t.updatedAt))}),n&&o.a.createElement(qe.a,{color:"secondary",badgeContent:i,style:{marginRight:8},classes:{badge:e.badge}}))}):o.a.createElement("div",{className:e.emptyChats},o.a.createElement(ce.a,{className:e.emptyIcon}),o.a.createElement(f.a,null,"Nenhuma conversa"))))))}const Gn=Object(Y.a)(e=>({root:{display:"flex",height:"100vh",[e.breakpoints.down("sm")]:{height:"calc(100vh - 56px)"},backgroundColor:e.palette.fancyBackground,"& .MuiButton-outlinedPrimary":{color:(e.palette.type,"#FFF"),backgroundColor:"light"===e.palette.type?"#5D3FD3":"#1c1c1c"},"& .MuiTab-textColorPrimary.Mui-selected":{color:"light"===e.palette.type?"#5D3FD3":"#FFF"}},avatar:{width:"100%"},toolbar:{paddingRight:24,color:e.palette.dark.main,display:"flex",alignItems:"center",justifyContent:"space-between",height:64,boxShadow:"0 2px 10px rgba(0,0,0,0.05)",[e.breakpoints.down("sm")]:{padding:e.spacing(0,1),minHeight:56,height:56}},toolbarIcon:{display:"flex",alignItems:"center",justifyContent:"space-between",padding:"0 8px",minHeight:"48px",[e.breakpoints.down("sm")]:{height:"48px"}},appBar:{zIndex:e.zIndex.drawer+1,transition:e.transitions.create(["width","margin"],{easing:e.transitions.easing.sharp,duration:e.transitions.duration.leavingScreen}),backgroundColor:"dark"===e.palette.type?e.palette.fancyBackground:"#FFFFFF",color:"dark"===e.palette.type?"#FFFFFF":"#5D3FD3",boxShadow:"dark"===e.palette.type?"0 1px 3px rgba(0,0,0,0.15)":"0 1px 3px rgba(0,0,0,0.08)",borderBottom:"dark"===e.palette.type?"1px solid rgba(255,255,255,0.05)":"1px solid rgba(0,0,0,0.06)"},appBarShift:{marginLeft:280,width:"calc(100% - 280px)",transition:e.transitions.create(["width","margin"],{easing:e.transitions.easing.sharp,duration:e.transitions.duration.enteringScreen}),[e.breakpoints.down("sm")]:{display:"none"}},menuButton:{marginRight:36},menuButtonHidden:{display:"none"},title:{flexGrow:1,fontSize:15,color:"dark"===e.palette.type?"#FFFFFF":"#333",fontWeight:500,[e.breakpoints.down("xs")]:{fontSize:13,whiteSpace:"normal",lineHeight:1.2}},drawerPaper:{position:"relative",whiteSpace:"nowrap",width:280,transition:e.transitions.create("width",{easing:e.transitions.easing.sharp,duration:e.transitions.duration.enteringScreen}),[e.breakpoints.down("sm")]:{width:"100%",position:"fixed",height:"100%",zIndex:e.zIndex.drawer+2},"&::-webkit-scrollbar":{width:"6px"},"&::-webkit-scrollbar-thumb":{backgroundColor:"#5D3FD3",borderRadius:"4px"},"&::-webkit-scrollbar-track":{backgroundColor:"rgba(93, 63, 211, 0.05)"},backgroundColor:e.palette.background.paper,borderRight:"1px solid "+e.palette.divider,boxShadow:"2px 0 8px rgba(0,0,0,0.04)"},drawerPaperClose:{overflowX:"hidden",transition:e.transitions.create("width",{easing:e.transitions.easing.sharp,duration:e.transitions.duration.leavingScreen}),width:80,[e.breakpoints.up("sm")]:{width:80},[e.breakpoints.down("sm")]:{width:"100%"}},appBarSpacer:{minHeight:"48px"},content:{flex:1,overflow:"auto"},container:{paddingTop:e.spacing(4),paddingBottom:e.spacing(4)},paper:{padding:e.spacing(2),display:"flex",overflow:"auto",flexDirection:"column"},containerWithScroll:{flex:1,padding:e.spacing(1),overflowY:"auto","&::-webkit-scrollbar":{width:"6px"},"&::-webkit-scrollbar-thumb":{backgroundColor:"#5D3FD3",borderRadius:"4px"},"&::-webkit-scrollbar-track":{backgroundColor:"rgba(93, 63, 211, 0.05)"}},NotificationsPopOver:{},logo:{width:"auto",height:"32px",maxWidth:120,[e.breakpoints.down("sm")]:{width:"auto",height:"32px",maxWidth:120}},drawerHeader:{display:"flex",alignItems:"center",justifyContent:"space-between",padding:e.spacing(2,2.5),borderBottom:"1px solid "+e.palette.divider,backgroundColor:"dark"===e.palette.type?e.palette.fancyBackground:"#FFFFFF",minHeight:70,boxShadow:"dark"===e.palette.type?"0 2px 4px rgba(0,0,0,0.2)":"0 2px 4px rgba(0,0,0,0.03)"},drawerLogoBox:{display:"flex",alignItems:"center",padding:e.spacing(0,1)},logoText:{fontWeight:600,fontSize:"26px",color:"dark"===e.palette.type?"#FFFFFF":"#5D3FD3",letterSpacing:"-0.5px",transition:"all 0.3s ease","&:hover":{color:"dark"===e.palette.type?"#e0e0e0":"#4930A8",transform:"scale(1.02)"}},drawerToggleIcon:{color:"#757575",padding:6,transition:"all 0.2s ease",borderRadius:"50%","&:hover":{backgroundColor:"rgba(0,0,0,0.04)",transform:"rotate(-180deg)"}},appBarButton:{color:(e.palette.type,"#5D3FD3"),margin:e.spacing(0,.5),padding:e.spacing(1),borderRadius:e.spacing(1),transition:"all 0.2s ease",[e.breakpoints.down("xs")]:{margin:e.spacing(0,.2),padding:e.spacing(.7)},"&:hover":{backgroundColor:"dark"===e.palette.type?"rgba(93, 63, 211, 0.12)":"rgba(93, 63, 211, 0.08)",transform:"translateY(-1px)"}},userButton:{color:(e.palette.type,"#5D3FD3"),borderRadius:e.spacing(1),padding:e.spacing(.5),marginLeft:e.spacing(1),transition:"all 0.2s ease",[e.breakpoints.down("xs")]:{marginLeft:e.spacing(.3),padding:e.spacing(.4)},"&:hover":{backgroundColor:"dark"===e.palette.type?"rgba(93, 63, 211, 0.12)":"rgba(93, 63, 211, 0.08)",transform:"scale(1.05)"}},greetingText:{fontSize:15,fontWeight:500,color:"dark"===e.palette.type?"#FFFFFF":"#333",[e.breakpoints.down("xs")]:{fontSize:13}},companyText:{fontWeight:600,color:(e.palette.type,"#5D3FD3"),transition:"color 0.2s ease","&:hover":{color:"dark"===e.palette.type?"#7058e6":"#4930A8"}},dueDateText:{fontSize:13,opacity:.8,color:"dark"===e.palette.type?"#CCCCCC":"#666",[e.breakpoints.down("xs")]:{fontSize:11}},menuIconOnly:{display:"flex",justifyContent:"center",padding:e.spacing(1.2),width:"100%",color:(e.palette.type,"#5D3FD3"),"& svg":{fontSize:28},transition:"all 0.2s ease","&:hover":{backgroundColor:"dark"===e.palette.type?"rgba(93, 63, 211, 0.12)":"rgba(93, 63, 211, 0.04)"}},headerSection:{display:"flex",alignItems:"center","& > *":{transition:"all 0.2s ease"},[e.breakpoints.down("xs")]:{"& > *:not(:last-child)":{marginRight:-6}}},mobileHeaderSection:{[e.breakpoints.down("xs")]:{display:"flex",alignItems:"center",justifyContent:"space-between",width:"100%"}},rightIconsSection:{display:"flex",alignItems:"center",marginLeft:"auto","& > *":{transition:"all 0.2s ease"},[e.breakpoints.down("xs")]:{"& > *:not(:last-child)":{marginRight:-6}}}}));var _n=e=>{let{children:a,themeToggle:t}=e;const r=Gn(),[i,l]=Object(n.useState)(!1),[c,d]=Object(n.useState)(null),[m,u]=Object(n.useState)(!1),{handleLogout:p,loading:g}=Object(n.useContext)(H),[b,E]=Object(n.useState)(!1),[h,x]=Object(n.useState)("permanent"),{user:v}=Object(n.useContext)(H),C=(Object(S.useLocation)(),Object(X.a)()),{colorMode:k}=Object(n.useContext)(Q),N=Object(s.a)(C.breakpoints.up("sm")),[w,I]=Object(n.useState)(localStorage.getItem("volume")||1),{dateToClient:A}=xa(),T=Object(n.useContext)(j);Object(n.useEffect)(()=>{document.body.offsetWidth>1200&&E(!0)},[]),Object(n.useEffect)(()=>{document.body.offsetWidth<600?x("temporary"):x("permanent")},[b]),Object(n.useEffect)(()=>{const e=localStorage.getItem("companyId"),a=localStorage.getItem("userId"),t=T.getSocket(e);t.on(`company-${e}-auth`,e=>{e.user.id===+a&&(y.toast.error("Sua conta foi acessada em outro computador."),setTimeout(()=>{localStorage.clear(),window.location.reload()},1e3))}),t.emit("userStatus");const n=setInterval(()=>{t.emit("userStatus")},3e5);return()=>{t.disconnect(),clearInterval(n)}},[T]);const D=()=>{d(null),u(!1)};return g?o.a.createElement(he,null):o.a.createElement("div",{className:r.root},o.a.createElement($.a,{variant:h,className:b?r.drawerPaper:r.drawerPaperClose,classes:{paper:Object(re.a)(r.drawerPaper,!b&&r.drawerPaperClose)},open:b},o.a.createElement("div",{className:r.drawerHeader},b?o.a.createElement(o.a.Fragment,null,o.a.createElement(f.a,{variant:"h6",className:r.logoText},"Conecta Atende"),o.a.createElement(J.a,{size:"small",onClick:()=>E(!b),className:r.drawerToggleIcon},o.a.createElement(ue.a,{fontSize:"small"}))):o.a.createElement(J.a,{className:r.menuIconOnly,onClick:()=>E(!b)},o.a.createElement(ge.a,{style:{color:(C.palette.type,"#5D3FD3")}}))),o.a.createElement(Z.a,null),o.a.createElement(ee.a,{className:r.containerWithScroll},o.a.createElement(ha,{drawerClose:()=>{document.body.offsetWidth<600&&E(!1)},collapsed:!b}))),o.a.createElement(We,{open:i,onClose:()=>l(!1),userId:null===v||void 0===v?void 0:v.id}),o.a.createElement(ae.a,{position:"absolute",className:Object(re.a)(r.appBar,b&&r.appBarShift),color:"default"},o.a.createElement(te.a,{variant:"dense",className:r.toolbar},o.a.createElement("div",{className:r.headerSection},o.a.createElement(J.a,{edge:"start",variant:"contained","aria-label":"open drawer",onClick:()=>E(!b),className:Object(re.a)(r.appBarButton,r.menuButton,b&&r.menuButtonHidden)},o.a.createElement(ge.a,null))),o.a.createElement("div",{className:r.rightIconsSection},N?o.a.createElement("div",{style:{display:"flex",alignItems:"center",gap:12}},o.a.createElement(Wn,{setVolume:I,volume:w},o.a.createElement(J.a,{className:r.appBarButton,size:"medium"},o.a.createElement(ie.a,{size:24})))):null,v.id&&o.a.createElement("div",{style:{display:"flex",alignItems:"center",gap:12}},o.a.createElement(jn,{volume:w},o.a.createElement(J.a,{className:r.appBarButton,size:"medium"},o.a.createElement(le.a,{size:24})))),o.a.createElement("div",{style:{display:"flex",alignItems:"center",gap:12}},o.a.createElement(Oa,null,o.a.createElement(J.a,{className:r.appBarButton,size:"medium"},o.a.createElement(se.a,{size:24})))),N?o.a.createElement("div",{style:{display:"flex",alignItems:"center",gap:12}},o.a.createElement(Vn,null,o.a.createElement(J.a,{className:r.appBarButton,size:"medium"},o.a.createElement(ce.a,{size:24})))):null,o.a.createElement("div",{style:{display:"flex",alignItems:"center",gap:12}},o.a.createElement(J.a,{"aria-label":"account of current user","aria-controls":"menu-appbar","aria-haspopup":"true",onClick:e=>{d(e.currentTarget),u(!0)},variant:"contained",className:r.userButton,size:"medium",style:{marginLeft:8}},o.a.createElement(de.a,{size:28})),o.a.createElement(ne.a,{id:"menu-appbar",anchorEl:c,getContentAnchorEl:null,anchorOrigin:{vertical:"bottom",horizontal:"right"},transformOrigin:{vertical:"top",horizontal:"right"},open:m,onClose:D,PaperProps:{style:{borderRadius:8,boxShadow:"0 4px 15px rgba(0,0,0,0.15)",marginTop:8,border:"1px solid rgba(93, 63, 211, 0.1)"}},MenuListProps:{style:{padding:"8px 4px"}}},o.a.createElement(oe.a,{onClick:()=>{l(!0),D()},style:{margin:"0 4px",padding:"8px 16px",borderRadius:4,transition:"all 0.2s ease"}},z.a.t("mainDrawer.appBar.user.profile")),o.a.createElement(oe.a,{onClick:()=>{D(),p()},style:{margin:"0 4px",padding:"8px 16px",borderRadius:4,transition:"all 0.2s ease",color:"#F44336"}},z.a.t("mainDrawer.appBar.user.logout"))))))),o.a.createElement("main",{className:r.content},o.a.createElement("div",{className:r.appBarSpacer}),a||null))},Kn=t(1224),Qn=t(1225),Yn=t(1226),Xn=t(1227),$n=t(1228),Jn=t(1229),Zn=t(1210);const eo=Object(Y.a)(e=>({mainContainer:{flex:1,padding:e.spacing(2),height:"calc(100% - 48px)"},contentWrapper:{height:"100%",overflowY:"hidden",display:"flex",flexDirection:"column"}}));var ao=e=>{let{children:a}=e;const t=eo();return o.a.createElement(Zn.a,{className:t.mainContainer},o.a.createElement("div",{className:t.contentWrapper},a))};const to=Object(Y.a)(e=>({contactsHeader:{display:"flex",alignItems:"center",padding:"0px 6px 6px 6px"}}));var no=e=>{let{children:a}=e;const t=to();return o.a.createElement("div",{className:t.contactsHeader},a)};const oo=Object(Y.a)(e=>({MainHeaderButtonsWrapper:{flex:"none",marginLeft:"auto","& > *":{margin:e.spacing(1)}}}));var ro=e=>{let{children:a}=e;const t=oo();return o.a.createElement("div",{className:t.MainHeaderButtonsWrapper},a)},io=t(660),lo=t.n(io),so=t(1211),co=t(1212),mo=t(1213),uo=t(1214);var po=o.a.memo(e=>{let{open:a,onClose:t,whatsAppId:r}=e;const[i,l]=Object(n.useState)(""),[s,c]=Object(n.useState)(!0),d=Object(X.a)(),m=Object(n.useContext)(j);Object(n.useEffect)(()=>{(async()=>{if(r){c(!0);try{const{data:e}=await B.get("/whatsapp/"+r);l(e.qrcode)}catch(e){y.toast.error(e.message)}c(!1)}})()},[r]),Object(n.useEffect)(()=>{if(!r)return;const e=localStorage.getItem("companyId"),a=m.getSocket(e),n=e=>{"update"===e.action&&e.session.id===r&&l(e.session.qrcode),"update"===e.action&&""===e.session.qrcode&&t()};return a.on(`company-${e}-whatsappSession`,n),()=>{a.off(`company-${e}-whatsappSession`,n)}},[r,t,m]);return o.a.createElement(xe.a,{open:a,onClose:t,maxWidth:"xs",scroll:"paper",PaperProps:{style:{borderRadius:16,background:"#f7f7fa"}}},o.a.createElement(ve.a,{style:{padding:32}},o.a.createElement(g.a,{display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",minWidth:340},o.a.createElement(so.a,{style:{fontSize:40,color:d.palette.primary.main,marginBottom:8}}),o.a.createElement(f.a,{variant:"h5",style:{fontWeight:700,marginBottom:8,textAlign:"center"}},"Escaneie o QR Code"),o.a.createElement(f.a,{variant:"body2",color:"textSecondary",style:{marginBottom:16,textAlign:"center"}},"Abra o WhatsApp no seu celular"," ",o.a.createElement(co.a,{style:{fontSize:18,verticalAlign:"middle"}})," e escaneie o c\xf3digo abaixo para conectar."),o.a.createElement(g.a,{display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",mb:2},s||!i?o.a.createElement(g.a,{display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",style:{height:256,width:256,background:"#fff",borderRadius:16,boxShadow:"0 2px 12px rgba(0,0,0,0.07)"}},o.a.createElement(be.a,{color:"primary"}),o.a.createElement(f.a,{variant:"caption",color:"textSecondary",style:{marginTop:12}},"Aguardando QR Code...")):o.a.createElement(g.a,{style:{background:"#fff",borderRadius:16,boxShadow:"0 2px 12px rgba(0,0,0,0.07)",padding:12,marginBottom:8}},o.a.createElement(lo.a,{value:i,size:220}))),o.a.createElement(g.a,{display:"flex",justifyContent:"center",gap:2,mt:2},o.a.createElement(b.a,{variant:"contained",color:"primary",startIcon:o.a.createElement(mo.a,null),onClick:async()=>{c(!0);try{await B.put("/whatsappsession/"+r)}catch(e){y.toast.error(e.message)}c(!1)},style:{marginRight:8,borderRadius:8},disabled:s},"Novo QR Code"),o.a.createElement(b.a,{variant:"outlined",color:"secondary",startIcon:o.a.createElement(uo.a,null),onClick:t,style:{borderRadius:8}},"Fechar")))))}),go=t(1216),fo=t(1217),bo=t(1323),Eo=t(1220),ho=t(1317),xo=t(1215),yo=t(1218),vo=t(1219),Co=t(1221),ko=t(1222),So=t(1223);const No=Object(Y.a)(e=>({root:{display:"flex",flexWrap:"wrap"},dialogPaper:{borderRadius:10,maxHeight:"80vh"},dialogTitle:{backgroundColor:"#f8f8f8",borderBottom:"1px solid #e0e0e0",paddingBottom:e.spacing(2)},dialogTitleText:{color:"#5D3FD3",fontWeight:600,display:"flex",alignItems:"center","& svg":{marginRight:e.spacing(1),color:"#25D366"}},multFieldLine:{display:"flex","& > *:not(:last-child)":{marginRight:e.spacing(1)}},btnWrapper:{position:"relative"},buttonProgress:{color:"#5D3FD3",position:"absolute",top:"50%",left:"50%",marginTop:-12,marginLeft:-12},sectionTitle:{color:"#5D3FD3",fontSize:"1rem",fontWeight:600,marginTop:e.spacing(2),marginBottom:e.spacing(1)},textField:{"& .MuiOutlinedInput-root":{borderRadius:10}},sectionContainer:{backgroundColor:"#f8f8f8",borderRadius:10,padding:e.spacing(2),marginBottom:e.spacing(2)},stepper:{backgroundColor:"transparent",marginBottom:e.spacing(2),padding:e.spacing(2,0)},stepIcon:{"&$activeStep":{color:"#5D3FD3"},"&$completedStep":{color:"#5D3FD3"},fontSize:36},activeStep:{},completedStep:{},stepLabel:{"& .MuiStepLabel-label":{fontWeight:500},"& .MuiStepLabel-active":{color:"#5D3FD3",fontWeight:600},"& .MuiStepLabel-completed":{color:"#5D3FD3",fontWeight:600}},formButton:{borderRadius:8,"& .MuiButton-label":{display:"flex",alignItems:"center"},"& svg":{marginRight:e.spacing(.5)}},cancelButton:{backgroundColor:"#f5f5f5",color:"#333","&:hover":{backgroundColor:"#e0e0e0"}},saveButton:{backgroundColor:"#5D3FD3",color:"white","&:hover":{backgroundColor:"#4930A8"}},selectField:{"& .MuiOutlinedInput-root":{borderRadius:10}},stepContent:{minHeight:300,padding:e.spacing(2,0)},stepperButtons:{display:"flex",justifyContent:"space-between",marginTop:e.spacing(2)},stepButton:{borderRadius:10},backButton:{borderColor:"#e0e0e0",color:"#555"},nextButton:{backgroundColor:"#5D3FD3",color:"white","&:hover":{backgroundColor:"#4930A8"}},infoText:{color:"#666",fontSize:"0.875rem",marginBottom:e.spacing(2)},sectionDivider:{margin:e.spacing(3,0)}})),wo=Oe.b().shape({name:Oe.d().min(2,"Too Short!").max(50,"Too Long!").required("Required")});var Io=o.a.memo(e=>{let{open:a,onClose:t,whatsAppId:r}=e;const i=No(),l={name:"",greetingMessage:"",complationMessage:"",outOfHoursMessage:"",ratingMessage:"",isDefault:!1,token:"",provider:"beta",expiresInactiveMessage:"",expiresTicket:0,timeUseBotQueues:0,maxUseBotQueues:3,promptId:"",queueIds:[],transferQueueId:null},[s,c]=Object(n.useState)(l),[d,m]=Object(n.useState)([]),[u,p]=Object(n.useState)([]),[E,h]=Object(n.useState)(void 0),[x,v]=Object(n.useState)(void 0),[C,k]=Object(n.useState)([]),[S,N]=Object(n.useState)(0),[w,I]=Object(n.useState)(!1),[A,T]=Object(n.useState)(!1),[D,O]=Object(n.useState)(!1),[j,R]=Object(n.useState)(!1),[F,M]=Object(n.useState)(!1),P=[{label:"B\xe1sico",icon:o.a.createElement(xo.a,{size:24})},{label:"Mensagens",icon:o.a.createElement(ce.a,{size:24})},{label:"Integra\xe7\xf5es",icon:o.a.createElement(oa.a,{size:24})},{label:"Filas",icon:o.a.createElement(la.a,{size:24})}];Object(n.useEffect)(()=>{(async()=>{if(r)try{var e;const{data:a}=await B.get(`whatsapp/${r}?session=0`);c({...l,...a,promptId:a.promptId||"",queueIds:a.queueIds||[],transferQueueId:a.transferQueueId||null});const t=(null===(e=a.queues)||void 0===e?void 0:e.map(e=>e.id))||[];m(t),h(a.transferQueueId||null)}catch(a){y.toast.errorr(a.message)}})()},[r]),Object(n.useEffect)(()=>{(async()=>{try{const{data:e}=await B.get("/prompt");k(e.prompts)}catch(e){y.toast.errorr(e.message)}})()},[r]),Object(n.useEffect)(()=>{(async()=>{try{const{data:e}=await B.get("/queue");p(e)}catch(e){y.toast.errorr(e.message)}})()},[]);const W=async e=>{const a={...e,queueIds:d,transferQueueId:E||null,promptId:x||null};delete a.queues,delete a.session;try{r?await B.put("/whatsapp/"+r,a):await B.post("/whatsapp",a),y.toast.success(z.a.t("whatsappModal.success")),q()}catch(t){y.toast.errorr(t.message)}},L=e=>{v(e.target.value||void 0),m([])},q=()=>{t(),c(l),h(void 0),m([]),v(void 0),N(0)},H=()=>{N(e=>e-1)},U=(e,a,t,n)=>{switch(e){case 0:return o.a.createElement(g.a,{className:i.stepContent},o.a.createElement(f.a,{className:i.sectionTitle},"Informa\xe7\xf5es B\xe1sicas"),o.a.createElement(f.a,{className:i.infoText},"Configure as informa\xe7\xf5es b\xe1sicas da conex\xe3o WhatsApp"),o.a.createElement(_t.a,{container:!0,spacing:2},o.a.createElement(_t.a,{item:!0,xs:12,sm:8},o.a.createElement(Ae.b,{as:Ce.a,label:"Nome",autoFocus:!0,name:"name",error:t.name&&Boolean(n.name),helperText:t.name&&n.name?n.name:"",variant:"outlined",margin:"dense",fullWidth:!0,className:i.textField,InputLabelProps:{shrink:!0},InputProps:{style:{borderRadius:12,boxShadow:t.name&&n.name?"0 0 0 2px #ff1744":"0 1px 4px rgba(93,63,211,0.07)",background:"#fff",height:52,fontSize:17,padding:"0 14px",alignItems:"center",display:"flex"}}})),o.a.createElement(_t.a,{item:!0,xs:12,sm:4,style:{display:"flex",alignItems:"center"}},o.a.createElement(go.a,{control:o.a.createElement(Ae.b,{as:fo.a,color:"primary",name:"isDefault",checked:a.isDefault}),label:"Padr\xe3o"})),o.a.createElement(_t.a,{item:!0,xs:12},o.a.createElement(Ae.b,{as:Ce.a,label:"Token",type:F?"text":"password",fullWidth:!0,name:"token",variant:"outlined",margin:"dense",className:i.textField,InputLabelProps:{shrink:!0},InputProps:{style:{borderRadius:12,boxShadow:t.token&&n.token?"0 0 0 2px #ff1744":"0 1px 4px rgba(93,63,211,0.07)",background:"#fff",height:52,fontSize:17,padding:"0 14px",alignItems:"center",display:"flex"},endAdornment:o.a.createElement(J.a,{"aria-label":F?"Ocultar token":"Revelar token",onClick:()=>M(e=>!e),edge:"end",size:"small",tabIndex:-1},F?o.a.createElement(yo.a,{size:20}):o.a.createElement(vo.a,{size:20}))}}))));case 1:return o.a.createElement(g.a,{className:i.stepContent},o.a.createElement(f.a,{className:i.sectionTitle},"Configura\xe7\xf5es de Mensagens"),o.a.createElement(f.a,{className:i.infoText},"Configure as mensagens autom\xe1ticas enviadas aos contatos"),o.a.createElement(_t.a,{container:!0,spacing:2},o.a.createElement(_t.a,{item:!0,xs:12},o.a.createElement(go.a,{control:o.a.createElement(fo.a,{checked:w,onChange:()=>I(e=>!e),color:"primary"}),label:"Ativar mensagem de sauda\xe7\xe3o"}),w&&o.a.createElement(Ae.b,{as:Ce.a,label:"Mensagem de sauda\xe7\xe3o",type:"greetingMessage",multiline:!0,rows:4,fullWidth:!0,name:"greetingMessage",error:t.greetingMessage&&Boolean(n.greetingMessage),helperText:t.greetingMessage&&n.greetingMessage,variant:"outlined",margin:"dense",className:i.textField,InputLabelProps:{shrink:!0},InputProps:{style:{borderRadius:12,boxShadow:t.greetingMessage&&n.greetingMessage?"0 0 0 2px #ff1744":"0 1px 4px rgba(93,63,211,0.07)",background:"#fff",minHeight:52,fontSize:17,padding:"0 14px",alignItems:"center",display:"flex"}}})),o.a.createElement(_t.a,{item:!0,xs:12},o.a.createElement(go.a,{control:o.a.createElement(fo.a,{checked:A,onChange:()=>T(e=>!e),color:"primary"}),label:"Ativar mensagem de conclus\xe3o"}),A&&o.a.createElement(Ae.b,{as:Ce.a,label:"Mensagem de conclus\xe3o",type:"complationMessage",multiline:!0,rows:4,fullWidth:!0,name:"complationMessage",error:t.complationMessage&&Boolean(n.complationMessage),helperText:t.complationMessage&&n.complationMessage,variant:"outlined",margin:"dense",className:i.textField,InputLabelProps:{shrink:!0},InputProps:{style:{borderRadius:12,boxShadow:t.complationMessage&&n.complationMessage?"0 0 0 2px #ff1744":"0 1px 4px rgba(93,63,211,0.07)",background:"#fff",minHeight:52,fontSize:17,padding:"0 14px",alignItems:"center",display:"flex"}}})),o.a.createElement(_t.a,{item:!0,xs:12},o.a.createElement(go.a,{control:o.a.createElement(fo.a,{checked:D,onChange:()=>O(e=>!e),color:"primary"}),label:"Ativar mensagem de fora de expediente"}),D&&o.a.createElement(Ae.b,{as:Ce.a,label:"Mensagem de fora de expediente",type:"outOfHoursMessage",multiline:!0,rows:4,fullWidth:!0,name:"outOfHoursMessage",error:t.outOfHoursMessage&&Boolean(n.outOfHoursMessage),helperText:t.outOfHoursMessage&&n.outOfHoursMessage,variant:"outlined",margin:"dense",className:i.textField,InputLabelProps:{shrink:!0},InputProps:{style:{borderRadius:12,boxShadow:t.outOfHoursMessage&&n.outOfHoursMessage?"0 0 0 2px #ff1744":"0 1px 4px rgba(93,63,211,0.07)",background:"#fff",minHeight:52,fontSize:17,padding:"0 14px",alignItems:"center",display:"flex"}}})),o.a.createElement(_t.a,{item:!0,xs:12},o.a.createElement(go.a,{control:o.a.createElement(fo.a,{checked:j,onChange:()=>R(e=>!e),color:"primary"}),label:"Ativar mensagem de avalia\xe7\xe3o"}),j&&o.a.createElement(Ae.b,{as:Ce.a,label:"Mensagem de avalia\xe7\xe3o",type:"ratingMessage",multiline:!0,rows:4,fullWidth:!0,name:"ratingMessage",error:t.ratingMessage&&Boolean(n.ratingMessage),helperText:t.ratingMessage&&n.ratingMessage,variant:"outlined",margin:"dense",className:i.textField,InputLabelProps:{shrink:!0},InputProps:{style:{borderRadius:12,boxShadow:t.ratingMessage&&n.ratingMessage?"0 0 0 2px #ff1744":"0 1px 4px rgba(93,63,211,0.07)",background:"#fff",minHeight:52,fontSize:17,padding:"0 14px",alignItems:"center",display:"flex"}}}))));case 2:return o.a.createElement(g.a,{className:i.stepContent},o.a.createElement(f.a,{className:i.sectionTitle},"Integra\xe7\xf5es"),o.a.createElement(f.a,{className:i.infoText},"Configure as integra\xe7\xf5es para esta conex\xe3o de WhatsApp"),o.a.createElement(_t.a,{container:!0,spacing:2},o.a.createElement(_t.a,{item:!0,xs:12},o.a.createElement(f.a,{variant:"subtitle2",style:{marginBottom:"8px",color:"#666"}},"Filas"),o.a.createElement(Pe,{selectedQueueIds:d,onChange:e=>(m(e||[]),void v(void 0)),className:i.selectField,style:{borderRadius:12,boxShadow:"0 1px 4px rgba(93,63,211,0.07)",background:"#fff",height:52,fontSize:17,padding:"0 14px",alignItems:"center",display:"flex",marginTop:8}})),o.a.createElement(_t.a,{item:!0,xs:12},o.a.createElement(f.a,{variant:"subtitle2",style:{marginBottom:"8px",color:"#666",marginTop:"16px"}},"Prompt"),o.a.createElement(ke.a,{margin:"dense",variant:"outlined",fullWidth:!0,className:i.selectField,style:{marginTop:8}},o.a.createElement(Ne.a,{labelId:"dialog-select-prompt-label",id:"dialog-select-prompt",name:"promptId",value:x||"",onChange:L,fullWidth:!0,displayEmpty:!0,MenuProps:{anchorOrigin:{vertical:"bottom",horizontal:"left"},transformOrigin:{vertical:"top",horizontal:"left"},getContentAnchorEl:null},style:{borderRadius:12,boxShadow:"0 1px 4px rgba(93,63,211,0.07)",background:"#fff",height:52,fontSize:17,padding:"0 14px",alignItems:"center",display:"flex"},inputProps:{style:{borderRadius:12,padding:"0 14px",height:52,fontSize:17,display:"flex",alignItems:"center",background:"#fff"}}},o.a.createElement(oe.a,{value:""},o.a.createElement("em",null,"Selecione um prompt")),C.map(e=>o.a.createElement(oe.a,{key:e.id,value:e.id,style:{fontSize:16}},e.name)))))));case 3:return o.a.createElement(g.a,{className:i.stepContent},o.a.createElement(f.a,{className:i.sectionTitle},"Redirecionamento de Fila"),o.a.createElement(f.a,{className:i.infoText},"Selecione uma fila para os contatos que n\xe3o possuem fila serem redirecionados"),o.a.createElement(_t.a,{container:!0,spacing:2},o.a.createElement(_t.a,{item:!0,xs:12,sm:6},o.a.createElement(Ae.b,{fullWidth:!0,type:"number",as:Ce.a,label:"Transferir ap\xf3s x (minutos)",name:"timeToTransfer",error:t.timeToTransfer&&Boolean(n.timeToTransfer),helperText:t.timeToTransfer&&n.timeToTransfer,variant:"outlined",margin:"dense",className:i.textField,InputLabelProps:{shrink:!!a.timeToTransfer}})),o.a.createElement(_t.a,{item:!0,xs:12,sm:6},o.a.createElement(Pe,{selectedQueueIds:E,onChange:e=>{h(e||void 0)},multiple:!1,title:"Fila de Transfer\xeancia",className:i.selectField,style:{borderRadius:12,boxShadow:"0 1px 4px rgba(93,63,211,0.07)",background:"#fff",height:52,fontSize:17,padding:"0 14px",alignItems:"center",display:"flex",marginTop:8}})),o.a.createElement(_t.a,{item:!0,xs:12},o.a.createElement(Z.a,{className:i.sectionDivider}),o.a.createElement(f.a,{className:i.sectionTitle},"Configura\xe7\xf5es de Chat")),o.a.createElement(_t.a,{item:!0,xs:12},o.a.createElement(f.a,{variant:"subtitle2",style:{marginBottom:"8px",color:"#666"}},"Encerrar chats abertos ap\xf3s x minutos"),o.a.createElement(Ae.b,{as:Ce.a,fullWidth:!0,name:"expiresTicket",variant:"outlined",margin:"dense",className:i.textField,error:t.expiresTicket&&Boolean(n.expiresTicket),helperText:t.expiresTicket&&n.expiresTicket})),o.a.createElement(_t.a,{item:!0,xs:12},o.a.createElement(Ae.b,{as:Ce.a,label:"Mensagem de encerramento por inatividade",multiline:!0,rows:4,fullWidth:!0,name:"expiresInactiveMessage",error:t.expiresInactiveMessage&&Boolean(n.expiresInactiveMessage),helperText:t.expiresInactiveMessage&&n.expiresInactiveMessage,variant:"outlined",margin:"dense",className:i.textField}))));default:return"Etapa desconhecida"}};return o.a.createElement("div",{className:i.root},o.a.createElement(xe.a,{open:a,onClose:q,maxWidth:"md",fullWidth:!0,scroll:"paper",classes:{paper:i.dialogPaper}},o.a.createElement(ye.a,{className:i.dialogTitle},o.a.createElement(g.a,{className:i.dialogTitleText},o.a.createElement(xo.a,{size:24}),o.a.createElement(f.a,{variant:"h6",component:"div"},r?z.a.t("whatsappModal.title.edit"):z.a.t("whatsappModal.title.add")))),o.a.createElement(Ae.e,{initialValues:s,enableReinitialize:!0,validationSchema:wo,onSubmit:(e,a)=>{S===P.length-1&&setTimeout(()=>{W(e),a.setSubmitting(!1)},400)}},e=>{let{values:a,touched:t,errors:n,isSubmitting:r,handleSubmit:l,setFieldValue:s}=e;return o.a.createElement(Ae.d,null,o.a.createElement(ve.a,{dividers:!0},o.a.createElement(bo.a,{activeStep:S,className:i.stepper,alternativeLabel:!0},P.map(e=>o.a.createElement(Eo.a,{key:e.label},o.a.createElement(ho.a,{className:i.stepLabel,StepIconProps:{classes:{root:i.stepIcon,active:i.activeStep,completed:i.completedStep}}},e.label)))),U(S,a,t,n),o.a.createElement("div",{className:i.stepperButtons},o.a.createElement(b.a,{disabled:0===S,onClick:H,variant:"outlined",className:`${i.stepButton} ${i.backButton}`,startIcon:o.a.createElement(Co.a,{size:20})},"VOLTAR"),S===P.length-1?o.a.createElement(b.a,{variant:"contained",className:`${i.stepButton} ${i.nextButton}`,startIcon:o.a.createElement(ko.a,{size:20}),disabled:r,onClick:e=>{e.preventDefault(),e.stopPropagation(),W(a)}},"SALVAR",r&&o.a.createElement(be.a,{size:24,className:i.buttonProgress})):o.a.createElement(b.a,{variant:"contained",onClick:e=>{e.preventDefault(),e.stopPropagation(),N(e=>e+1)},className:`${i.stepButton} ${i.nextButton}`,endIcon:o.a.createElement(So.a,{size:20})},"PR\xd3XIMO"))))})))});const Ao=Object(Y.a)(e=>({mainPaper:{flex:1,padding:e.spacing(2),overflowY:"scroll",...e.scrollbarStyles,borderRadius:10,boxShadow:"0 2px 10px rgba(0,0,0,0.08)"},customTableCell:{display:"flex",alignItems:"center",justifyContent:"center"},tooltip:{backgroundColor:"#f5f5f9",color:"rgba(0, 0, 0, 0.87)",fontSize:e.typography.pxToRem(14),border:"1px solid #dadde9",maxWidth:450},tooltipPopper:{textAlign:"center"},buttonProgress:{color:"#5D3FD3"},pageTitle:{color:"#333",fontWeight:700,fontSize:"1.5rem",marginBottom:8},pageSubtitle:{color:"#666",fontSize:"0.9rem",marginBottom:e.spacing(2)},addButton:{backgroundColor:"#5D3FD3",color:"white",borderRadius:10,padding:e.spacing(1,3),"&:hover":{backgroundColor:"#4930A8"}},connectionCard:{borderRadius:16,marginBottom:e.spacing(3),boxShadow:"0 4px 24px rgba(0,0,0,0.07)",background:"#fafbfc",padding:0,transition:"all 0.2s ease",position:"relative",border:"1px solid #f0f0f0","&:hover":{boxShadow:"0 8px 32px rgba(93,63,211,0.10)",transform:"translateY(-2px)"}},connectionHeader:{display:"flex",alignItems:"center",justifyContent:"space-between",padding:e.spacing(2,3,1,3),borderBottom:"1px solid #f0f0f0"},connectionTitle:{display:"flex",alignItems:"center",gap:e.spacing(1)},connectionName:{fontWeight:700,fontSize:"1.15rem",color:"#222",marginRight:e.spacing(1)},connectionBadge:{padding:e.spacing(.3,1),borderRadius:8,backgroundColor:"#e3f2fd",color:"#0288d1",fontSize:"0.70rem",marginLeft:e.spacing(.5),textTransform:"uppercase",fontWeight:600,letterSpacing:1},connectionBody:{padding:e.spacing(2)},connectionInfo:{display:"flex",alignItems:"center",marginBottom:e.spacing(1),"& svg":{marginRight:e.spacing(1),color:"#666"},"& span":{color:"#666",fontSize:"0.9rem"}},connectionStatus:{display:"flex",alignItems:"center",gap:e.spacing(1)},connectionActions:{display:"flex",gap:e.spacing(1.5),justifyContent:"flex-end",padding:e.spacing(2,3,2,3),background:"#f7f7fa",borderTop:"1px solid #f0f0f0"},actionButton:{borderRadius:10,fontWeight:600,fontSize:"0.95rem",padding:e.spacing(1,2.5),display:"flex",alignItems:"center",gap:e.spacing(1),boxShadow:"none",textTransform:"none"},disconnectButton:{backgroundColor:"#ffb3a7",color:"#b71c1c",border:"none","&:hover":{backgroundColor:"#ff867c",color:"#b71c1c"}},editButton:{backgroundColor:"#5D3FD3",color:"#fff","&:hover":{backgroundColor:"#4930A8"}},deleteButton:{backgroundColor:"#ffb3a7",color:"#b71c1c",border:"none","&:hover":{backgroundColor:"#ff867c",color:"#b71c1c"}},connectedStatus:{backgroundColor:Ie.a[50],color:Ie.a[800],padding:e.spacing(.5,1.5),borderRadius:16,fontSize:"0.85rem",fontWeight:600,display:"flex",alignItems:"center",gap:e.spacing(.5)},connectedTimestamp:{fontSize:"0.75rem",color:"#888",marginLeft:e.spacing(1)},updateButton:{color:"#5D3FD3",backgroundColor:"white",borderRadius:8,border:"1px solid #e0e0e0",padding:e.spacing(.5,2),fontSize:"0.875rem",textTransform:"none","&:hover":{backgroundColor:"#f5f5f5"},marginLeft:"auto"},sessionButton:{borderRadius:8,padding:e.spacing(.75,2),textTransform:"none",fontWeight:500,fontSize:"0.875rem",boxShadow:"none",margin:e.spacing(0,.5)},syncButton:{backgroundColor:"#5D3FD3",color:"white","&:hover":{backgroundColor:"#4930A8"}},pageTitle:{color:"#5D3FD3",fontWeight:600,fontSize:"1.5rem",marginBottom:e.spacing(2),marginTop:e.spacing(4),position:"relative",display:"inline-block","&::after":{content:'""',position:"absolute",width:"40%",height:3,bottom:-5,left:0,backgroundColor:"#5D3FD3",borderRadius:2}},titleContainer:{display:"flex",alignItems:"center"},loadingContainer:{display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",padding:e.spacing(4),gap:e.spacing(2)},loadingText:{color:e.palette.text.secondary,marginTop:e.spacing(1)}}));var To=()=>{const e=Ao(),{user:a}=Object(n.useContext)(H),{whatsApps:t,loading:r}=Object(n.useContext)(_),[i,l]=Object(n.useState)(!1),[s,c]=Object(n.useState)(!1),[d,m]=Object(n.useState)(null),[u,p]=Object(n.useState)(!1),[E,h]=Object(n.useState)(!1),x={action:"",title:"",message:"",whatsAppId:"",open:!1},[v,C]=Object(n.useState)(x),k=()=>{m(null),l(!0)},S=Object(n.useCallback)(()=>{l(!1),m(null)},[m,l]),N=Object(n.useCallback)(e=>{m(e),c(!0)},[]),w=Object(n.useCallback)(()=>{m(null),c(!1)},[]),I=(e,a)=>{"disconnect"===e&&C({action:e,title:z.a.t("connections.confirmationModal.disconnectTitle"),message:z.a.t("connections.confirmationModal.disconnectMessage"),whatsAppId:a}),"delete"===e&&C({action:e,title:z.a.t("connections.confirmationModal.deleteTitle"),message:z.a.t("connections.confirmationModal.deleteMessage"),whatsAppId:a}),p(!0)};return o.a.createElement(ao,null,o.a.createElement(Pt,{title:v.title,open:u,onClose:p,onConfirm:async()=>{if("disconnect"===v.action)try{await B.delete("/whatsappsession/"+v.whatsAppId)}catch(e){y.toast.error(e.message)}if("delete"===v.action)try{await B.delete("/whatsapp/"+v.whatsAppId),y.toast.success(z.a.t("connections.toasts.deleted"))}catch(e){y.toast.error(e.message)}C(x)}},v.message),o.a.createElement(po,{open:s,onClose:w,whatsAppId:!i&&(null===d||void 0===d?void 0:d.id)}),o.a.createElement(Io,{open:i,onClose:S,whatsAppId:!s&&(null===d||void 0===d?void 0:d.id)}),o.a.createElement(no,null,o.a.createElement("div",null,o.a.createElement(f.a,{className:e.pageTitle},"Conex\xf5es WhatsApp"),o.a.createElement(f.a,{className:e.pageSubtitle},"Gerencie suas contas e conex\xf5es do WhatsApp")),o.a.createElement(ro,null,o.a.createElement(Re,{role:a.profile,perform:"connections-page:addConnection",yes:()=>o.a.createElement(b.a,{variant:"contained",className:e.addButton,startIcon:o.a.createElement(Kn.a,{size:20}),onClick:k},"Adicionar")}))),r?o.a.createElement(wa.a,{className:e.mainPaper},o.a.createElement(g.a,{className:e.loadingContainer},o.a.createElement(be.a,{color:"primary"}),o.a.createElement(f.a,{className:e.loadingText},"Carregando conex\xf5es..."))):o.a.createElement(o.a.Fragment,null,(null===t||void 0===t?void 0:t.length)>0?t.map((t,n)=>o.a.createElement(Na.a,{in:!0,key:t.id,timeout:300,style:{transitionDelay:100*n+"ms"}},o.a.createElement(hn.a,{className:e.connectionCard},o.a.createElement("div",{className:e.connectionHeader},o.a.createElement("div",{className:e.connectionTitle},o.a.createElement(ce.a,{size:28}),o.a.createElement(f.a,{className:e.connectionName},t.name),t.isDefault&&o.a.createElement("div",{className:e.connectionBadge},"PADR\xc3O")),o.a.createElement("div",{className:e.connectionStatus},"CONNECTED"===t.status&&o.a.createElement("div",{className:e.connectedStatus},o.a.createElement(Qn.a,{size:18,color:Ie.a[700]}),"Conectado",o.a.createElement("span",{className:e.connectedTimestamp},"Atualizado em:"," ",Object(ja.a)(Object(Ua.a)(t.updatedAt),"dd/MM/yy HH:mm"))))),o.a.createElement("div",{className:e.connectionActions},"CONNECTED"===t.status&&o.a.createElement(b.a,{variant:"contained",className:`${e.actionButton} ${e.disconnectButton}`,startIcon:o.a.createElement(Yn.a,{size:20}),onClick:()=>I("disconnect",t.id)},"Desconectar"),"DISCONNECTED"===t.status&&o.a.createElement(o.a.Fragment,null,o.a.createElement(b.a,{variant:"contained",className:`${e.actionButton} ${e.editButton}`,startIcon:o.a.createElement(la.a,{size:20}),onClick:()=>(async e=>{try{await B.post("/whatsappsession/"+e)}catch(a){y.toast.error(a.message)}})(t.id)},"Reconectar"),o.a.createElement(b.a,{variant:"contained",className:`${e.actionButton} ${e.disconnectButton}`,startIcon:o.a.createElement(Xn.a,{size:20}),onClick:()=>(async e=>{try{h(!0),await B.put("/whatsappsession/"+e)}catch(a){y.toast.error(a.message)}finally{h(!1)}})(t.id),disabled:E},E?"Carregando...":"Novo QR Code")),"qrcode"===t.status&&o.a.createElement(b.a,{variant:"contained",className:`${e.actionButton} ${e.editButton}`,startIcon:o.a.createElement(Xn.a,{size:20}),onClick:()=>N(t)},"QR Code"),o.a.createElement(Re,{role:a.profile,perform:"connections-page:editOrDeleteConnection",yes:()=>o.a.createElement(o.a.Fragment,null,o.a.createElement(b.a,{variant:"contained",className:`${e.actionButton} ${e.editButton}`,startIcon:o.a.createElement($n.a,{size:20}),onClick:()=>(e=>{m(e),l(!0)})(t)},"Editar"),o.a.createElement(b.a,{variant:"contained",className:`${e.actionButton} ${e.deleteButton}`,startIcon:o.a.createElement(Jn.a,{size:20}),onClick:()=>I("delete",t.id)},"Excluir"))}))))):o.a.createElement(wa.a,{className:e.mainPaper},o.a.createElement(f.a,{align:"center",color:"textSecondary"},"Nenhuma conex\xe3o configurada"))))},Do=t(1230),Oo=t(76),jo=t.n(Oo),Ro=t(664),Fo=t.n(Ro),Mo=t(64),Po=t.n(Mo),Bo=t(157),zo=t.n(Bo),Wo=t(661),Lo=t.n(Wo),qo=t(253),Ho=t.n(qo);const Uo=Object(Y.a)(e=>({root:{display:"flex",flexWrap:"wrap"},textField:{marginRight:e.spacing(1),flex:1,marginBottom:e.spacing(2),background:"#f7f8fa",borderRadius:10},extraAttr:{display:"flex",justifyContent:"center",alignItems:"center"},btnWrapper:{position:"relative",borderRadius:12,minWidth:120,fontWeight:600,fontSize:16,textTransform:"none",boxShadow:"0 2px 8px rgba(93,63,211,0.10)"},buttonProgress:{color:Ie.a[500],position:"absolute",top:"50%",left:"50%",marginTop:-12,marginLeft:-12},dialogPaper:{borderRadius:18,boxShadow:"0 8px 32px rgba(93,63,211,0.18)",background:"#fff",padding:e.spacing(1,0)},dialogTitle:{fontWeight:700,fontSize:22,color:"#5D3FD3",textAlign:"center",padding:e.spacing(3,2,1,2),letterSpacing:.2},dialogContent:{padding:e.spacing(3,3,2,3),background:"#f7f8fa",borderRadius:14},dialogActions:{padding:e.spacing(3,3,2,3),display:"flex",justifyContent:"flex-end",gap:e.spacing(2)}})),Vo=Oe.b().shape({name:Oe.d().min(2,"Too Short!").max(50,"Too Long!").required("Required"),number:Oe.d().min(8,"Too Short!").max(50,"Too Long!"),email:Oe.d().email("Invalid email")});var Go=e=>{let{open:a,onClose:t,contactId:r,initialValues:i,onSave:l}=e;const s=Uo(),c=Object(n.useRef)(!0),{user:{companyId:d}}=Object(n.useContext)(H),{contactListId:m}=Object(S.useParams)(),u={name:"",number:"",email:""},[p,g]=Object(n.useState)(u);Object(n.useEffect)(()=>()=>{c.current=!1},[]),Object(n.useEffect)(()=>{(async()=>{if(i&&g(e=>({...e,...i})),r)try{const{data:e}=await B.get("/contact-list-items/"+r);c.current&&g(e)}catch(e){y.toast.error(e.message)}})()},[r,a,i]);const E=()=>{t(),g(u)};return o.a.createElement("div",{className:s.root},o.a.createElement(xe.a,{open:a,onClose:E,maxWidth:"sm",fullWidth:!0,scroll:"paper",classes:{paper:s.dialogPaper}},o.a.createElement(ye.a,{id:"form-dialog-title",className:s.dialogTitle},r?""+z.a.t("contactModal.title.edit"):""+z.a.t("contactModal.title.add")),o.a.createElement(Ae.e,{initialValues:p,enableReinitialize:!0,validationSchema:Vo,onSubmit:(e,a)=>{setTimeout(()=>{(async e=>{try{if(r)await B.put("/contact-list-items/"+r,{...e,companyId:d,contactListId:m}),E();else{const{data:a}=await B.post("/contact-list-items",{...e,companyId:d,contactListId:m});l&&l(a),E()}y.toast.success(z.a.t("contactModal.success"))}catch(a){y.toast.error(a.message)}})(e),a.setSubmitting(!1)},400)}},e=>{let{values:a,errors:t,touched:n,isSubmitting:i}=e;return o.a.createElement(Ae.d,null,o.a.createElement(ve.a,{dividers:!0,className:s.dialogContent},o.a.createElement(f.a,{variant:"subtitle1",gutterBottom:!0},z.a.t("contactModal.form.mainInfo")),o.a.createElement(Ae.b,{as:Ce.a,label:z.a.t("contactModal.form.name"),name:"name",autoFocus:!0,error:n.name&&Boolean(t.name),helperText:n.name&&t.name,variant:"outlined",margin:"dense",className:s.textField,InputProps:{startAdornment:o.a.createElement(Do.a,{position:"start"},o.a.createElement(Lo.a,{style:{color:"#5D3FD3"}})),style:{borderRadius:10,background:"#fff"}}}),o.a.createElement(Ae.b,{as:Ce.a,label:z.a.t("contactModal.form.number"),name:"number",error:n.number&&Boolean(t.number),helperText:n.number&&t.number,placeholder:"5513912344321",variant:"outlined",margin:"dense",className:s.textField,InputProps:{startAdornment:o.a.createElement(Do.a,{position:"start"},o.a.createElement(Ho.a,{style:{color:"#5D3FD3"}})),style:{borderRadius:10,background:"#fff"}}}),o.a.createElement(Ae.b,{as:Ce.a,label:z.a.t("contactModal.form.email"),name:"email",error:n.email&&Boolean(t.email),helperText:n.email&&t.email,placeholder:"Email address",fullWidth:!0,margin:"dense",variant:"outlined",className:s.textField,InputProps:{startAdornment:o.a.createElement(Do.a,{position:"start"},o.a.createElement(zo.a,{style:{color:"#5D3FD3"}})),style:{borderRadius:10,background:"#fff"}}})),o.a.createElement(we.a,{className:s.dialogActions},o.a.createElement(b.a,{onClick:E,color:"secondary",disabled:i,variant:"outlined",className:s.btnWrapper},z.a.t("contactModal.buttons.cancel")),o.a.createElement(b.a,{type:"submit",color:"primary",disabled:i,variant:"contained",className:s.btnWrapper},r?""+z.a.t("contactModal.buttons.okEdit"):""+z.a.t("contactModal.buttons.okAdd"),i&&o.a.createElement(be.a,{size:24,className:s.buttonProgress}))))})))},_o=t(1232),Ko=t(1231);const Qo=Object(Y.a)(e=>({customTableCell:{display:"flex",alignItems:"center",justifyContent:"center"}}));var Yo=e=>{let{avatar:a,columns:t}=e;const n=Qo();return o.a.createElement(o.a.Fragment,null,o.a.createElement(Ko.a,null,a&&o.a.createElement(o.a.Fragment,null,o.a.createElement(_o.a,{style:{paddingRight:0}},o.a.createElement(yn.a,{animation:"wave",variant:"circle",width:40,height:40})),o.a.createElement(_o.a,null,o.a.createElement(yn.a,{animation:"wave",height:30,width:80}))),Array.from({length:t},(e,a)=>o.a.createElement(_o.a,{align:"center",key:a},o.a.createElement("div",{className:n.customTableCell},o.a.createElement(yn.a,{align:"center",animation:"wave",height:30,width:80}))))))};var Xo=()=>({findById:async e=>{const{data:a}=await B.request({url:"/contact-lists/"+e,method:"GET"});return a},save:async e=>{const{data:a}=await B.request({url:"/contact-lists",method:"POST",data:e});return a},update:async e=>{const{data:a}=await B.request({url:"/contact-lists/"+e.id,method:"PUT",data:e});return a},deleteRecord:async e=>{const{data:a}=await B.request({url:"/contact-lists/"+e,method:"DELETE"});return a},list:async e=>{const{data:a}=await B.request({url:"/contact-lists/list",method:"GET",params:e});return a}}),$o=t(663),Jo=t.n($o),Zo=t(662),er=t.n(Zo),ar=t(371),tr=t.n(ar);const nr=(e,a)=>{if("LOAD_CONTACTS"===a.type){const t=a.payload,n=[];return t.forEach(a=>{const t=e.findIndex(e=>e.id===a.id);-1!==t?e[t]=a:n.push(a)}),[...e,...n]}if("UPDATE_CONTACTS"===a.type){const t=a.payload,n=e.findIndex(e=>e.id===t.id);return-1!==n?(e[n]=t,[...e]):[t,...e]}if("DELETE_CONTACT"===a.type){const t=a.payload,n=e.findIndex(e=>e.id===t);return-1!==n&&e.splice(n,1),[...e]}if("RESET"===a.type)return[]},or=Object(Y.a)(e=>({mainPaper:{flex:1,padding:e.spacing(3),overflowY:"scroll",background:"linear-gradient(135deg, #f7f8fa 60%, #e5e0fa 100%)",borderRadius:16,boxShadow:"0 4px 20px rgba(93,63,211,0.10)",...e.scrollbarStyles},cardGrid:{marginTop:e.spacing(2)},contactCard:{background:"#fff",borderRadius:16,boxShadow:"0 4px 20px rgba(93,63,211,0.10)",padding:e.spacing(2),margin:"0 auto",transition:"all 0.3s ease",position:"relative",display:"flex",flexDirection:"column",height:"100%",minHeight:120,cursor:"pointer","&:hover":{transform:"translateY(-4px)",boxShadow:"0 8px 30px rgba(93,63,211,0.15)"}},cardHeader:{display:"flex",alignItems:"center",gap:12,marginBottom:e.spacing(1),justifyContent:"space-between"},cardTitle:{fontWeight:700,fontSize:18,color:"#5D3FD3",display:"flex",alignItems:"center",gap:8},cardStatus:{display:"flex",alignItems:"center",gap:4,fontWeight:600,fontSize:14,borderRadius:12,padding:"2px 10px",background:"#f7f8fa"},cardInfo:{marginBottom:e.spacing(1),color:"#444",fontSize:15,display:"flex",flexDirection:"column",gap:2},cardActions:{display:"flex",justifyContent:"flex-end",gap:8,marginTop:e.spacing(1),paddingTop:e.spacing(1),borderTop:"1px solid rgba(0,0,0,0.05)"},actionButton:{color:"#666","&:hover":{background:"rgba(93,63,211,0.1)",color:"#5D3FD3"}},deleteButton:{color:"#ff4d4f","&:hover":{background:"rgba(255,77,79,0.1)"}},headerContainer:{display:"flex",alignItems:"center",justifyContent:"space-between",marginBottom:e.spacing(3),padding:e.spacing(2.5,3),background:"#fff",borderRadius:18,boxShadow:"0 4px 24px rgba(93,63,211,0.13)",minHeight:64,gap:e.spacing(2)},headerTitleBlock:{display:"flex",alignItems:"center",gap:e.spacing(2)},headerTitle:{fontWeight:700,fontSize:22,color:"#5D3FD3",display:"flex",alignItems:"center",gap:8},headerTag:{display:"flex",alignItems:"center",background:"#f7f8fa",color:"#5D3FD3",borderRadius:10,fontWeight:600,fontSize:15,padding:"2px 10px",marginLeft:8,gap:4},headerDate:{display:"flex",alignItems:"center",color:"#888",fontWeight:500,fontSize:14,marginLeft:12,gap:4},headerActions:{display:"flex",gap:e.spacing(2),alignItems:"center"},searchField:{minWidth:220,maxWidth:320,background:"#f7f8fa",borderRadius:12,marginRight:e.spacing(2)},headerButton:{borderRadius:12,fontWeight:600,minWidth:100,boxShadow:"0 2px 8px rgba(93,63,211,0.10)",textTransform:"none",fontSize:15},emptyState:{textAlign:"center",padding:e.spacing(4),color:"#666"},emptyStateIcon:{fontSize:64,color:"#5D3FD3",marginBottom:e.spacing(2)}}));var rr=()=>{const e=or(),{user:a}=Object(n.useContext)(H),{contactListId:t}=Object(S.useParams)(),r=Object(S.useHistory)(),[i,l]=Object(n.useState)(!1),[s,c]=Object(n.useState)(1),[d,m]=Object(n.useState)(""),[u,p]=Object(n.useReducer)(nr,[]),[g,f]=Object(n.useState)(null),[E,h]=Object(n.useState)(!1),[x,v]=Object(n.useState)(null),[C,k]=Object(n.useState)(!1),[N,w]=Object(n.useState)(!1),[I,A]=Object(n.useState)({}),T=Object(n.useRef)(null),{findById:D}=Xo(),O=Object(n.useContext)(j);Object(n.useEffect)(()=>{D(t).then(e=>{A(e)})},[t]),Object(n.useEffect)(()=>{p({type:"RESET"}),c(1)},[d]),Object(n.useEffect)(()=>{l(!0);const e=setTimeout(()=>{(async()=>{try{const{data:e}=await B.get("contact-list-items",{params:{searchParam:d,pageNumber:s,contactListId:t}});p({type:"LOAD_CONTACTS",payload:e.contacts}),w(e.hasMore),l(!1)}catch(e){y.toast.error(e.message)}})()},500);return()=>clearTimeout(e)},[d,s,t]),Object(n.useEffect)(()=>{const e=localStorage.getItem("companyId"),a=O.getSocket(e);return a.on(`company-${e}-ContactListItem`,e=>{"update"!==e.action&&"create"!==e.action||p({type:"UPDATE_CONTACTS",payload:e.record}),"delete"===e.action&&p({type:"DELETE_CONTACT",payload:+e.id}),"reload"===e.action&&p({type:"LOAD_CONTACTS",payload:e.records})}),a.on(`company-${e}-ContactListItem-${t}`,e=>{"reload"===e.action&&p({type:"LOAD_CONTACTS",payload:e.records})}),()=>{a.disconnect()}},[t,O]);return o.a.createElement(ao,{className:e.mainContainer},o.a.createElement(Go,{open:E,onClose:()=>{f(null),h(!1)},"aria-labelledby":"form-dialog-title",contactId:g}),o.a.createElement(Pt,{title:x?`${z.a.t("contactListItems.confirmationModal.deleteTitle")} ${x.name}?`:""+z.a.t("contactListItems.confirmationModal.importTitle"),open:C,onClose:k,onConfirm:()=>x?(async e=>{try{await B.delete("/contact-list-items/"+e),y.toast.success(z.a.t("contacts.toasts.deleted"))}catch(a){y.toast.error(a.message)}v(null),m(""),c(1)})(x.id):(async()=>{try{const e=new FormData;e.append("file",T.current.files[0]),await B.request({url:`contact-lists/${t}/upload`,method:"POST",data:e})}catch(e){y.toast.error(e.message)}})()},x?""+z.a.t("contactListItems.confirmationModal.deleteMessage"):o.a.createElement(o.a.Fragment,null,z.a.t("contactListItems.confirmationModal.importMessage"),o.a.createElement("a",{href:tr.a,download:"planilha.xlsx"},"Clique aqui para baixar planilha exemplo."))),o.a.createElement(no,null,o.a.createElement("div",{className:e.headerContainer},o.a.createElement("div",{className:e.headerTitleBlock},o.a.createElement(Rt.a,{className:e.headerIcon}),o.a.createElement("span",{className:e.headerTitle},I.name),I.tag&&o.a.createElement("span",{className:e.headerTag},o.a.createElement(er.a,{style:{fontSize:18}})," TAG: ",I.tag),I.createdAt&&o.a.createElement("span",{className:e.headerDate},o.a.createElement(Jo.a,{style:{fontSize:18}}),new Date(I.createdAt).toLocaleString("pt-BR",{day:"2-digit",month:"2-digit",year:"numeric",hour:"2-digit",minute:"2-digit"}))),o.a.createElement("div",{className:e.headerActions},o.a.createElement(Ce.a,{placeholder:z.a.t("contactListItems.searchPlaceholder"),type:"search",value:d,onChange:e=>{m(e.target.value.toLowerCase())},className:e.searchField,InputProps:{startAdornment:o.a.createElement(Do.a,{position:"start"},o.a.createElement(jo.a,{style:{color:"gray"}}))}}),o.a.createElement(b.a,{variant:"contained",color:"primary",onClick:()=>{r.push("/contact-lists")},className:e.headerButton},z.a.t("contactListItems.buttons.lists")),o.a.createElement(b.a,{variant:"contained",color:"primary",onClick:()=>{T.current.value=null,T.current.click()},className:e.headerButton},z.a.t("contactListItems.buttons.import")),o.a.createElement(b.a,{variant:"contained",color:"primary",onClick:()=>{f(null),h(!0)},className:e.headerButton},z.a.t("contactListItems.buttons.add"))))),o.a.createElement(wa.a,{className:e.mainPaper,variant:"outlined",onScroll:e=>{if(!N||i)return;const{scrollTop:a,scrollHeight:t,clientHeight:n}=e.currentTarget;t-(a+100)<n&&c(e=>e+1)}},o.a.createElement("input",{style:{display:"none"},id:"upload",name:"file",type:"file",accept:".xls,.xlsx",onChange:()=>{k(!0)},ref:T}),o.a.createElement(_t.a,{container:!0,spacing:3,className:e.cardGrid},0!==u.length||i?u.map(t=>o.a.createElement(_t.a,{item:!0,xs:12,sm:6,md:4,lg:3,key:t.id},o.a.createElement("div",{className:e.contactCard},o.a.createElement("div",{className:e.cardHeader},o.a.createElement("span",{className:e.cardTitle},t.name),o.a.createElement("span",{className:e.cardStatus},t.isWhatsappValid?o.a.createElement(Rt.a,{style:{color:"green"},fontSize:"small"}):o.a.createElement(Fo.a,{style:{color:"grey"},fontSize:"small"}),t.isWhatsappValid?"WhatsApp v\xe1lido":"Inv\xe1lido")),o.a.createElement("div",{className:e.cardInfo},o.a.createElement("span",null,o.a.createElement("b",null,"N\xfamero:")," ",t.number),o.a.createElement("span",null,o.a.createElement("b",null,"Email:")," ",t.email)),o.a.createElement("div",{className:e.cardActions},o.a.createElement(J.a,{size:"small",onClick:()=>{return e=t.id,f(e),void h(!0);var e},className:e.actionButton,title:"Editar Contato"},o.a.createElement(Po.a,null)),o.a.createElement(Re,{role:a.profile,perform:"contacts-page:deleteContact",yes:()=>o.a.createElement(J.a,{size:"small",onClick:()=>{k(!0),v(t)},className:e.deleteButton,title:"Excluir Contato"},o.a.createElement(an.a,null))}))))):o.a.createElement(_t.a,{item:!0,xs:12},o.a.createElement("div",{className:e.emptyState},o.a.createElement(Rt.a,{className:e.emptyStateIcon}),o.a.createElement("span",{style:{fontSize:18}},z.a.t("contactListItems.emptyState")),o.a.createElement("div",{style:{marginTop:8}},z.a.t("contactListItems.emptyStateSubtitle")))),i&&o.a.createElement(_t.a,{item:!0,xs:12},o.a.createElement(Yo,{columns:3})))))},ir=t(372),lr=t.n(ir),sr=t(299),cr=t.n(sr);const dr=Object(Y.a)(e=>({root:{display:"flex",flexWrap:"wrap"},dialogPaper:{borderRadius:18,boxShadow:"0 4px 24px rgba(93,63,211,0.13)",background:"#fff",padding:e.spacing(1,0)},dialogTitle:{fontWeight:700,fontSize:22,color:"#5D3FD3",textAlign:"center",padding:e.spacing(3,2,1,2),letterSpacing:.2},dialogContent:{padding:e.spacing(3,3,2,3),background:"#f7f8fa",borderRadius:14},multFieldLine:{display:"flex","& > *:not(:last-child)":{marginRight:e.spacing(1)}},btnWrapper:{position:"relative"},buttonProgress:{color:Ie.a[500],position:"absolute",top:"50%",left:"50%",marginTop:-12,marginLeft:-12},formControl:{margin:e.spacing(1),minWidth:120},actionButton:{borderRadius:12,textTransform:"none",fontWeight:600,padding:"10px 24px",boxShadow:"0 4px 12px rgba(93,63,211,0.10)",transition:"all 0.2s","&:hover":{boxShadow:"0 6px 16px rgba(93,63,211,0.18)"}},cancelButton:{borderRadius:12,textTransform:"none",fontWeight:600,padding:"10px 24px",border:"1px solid #e0e0e0",background:"#fff",color:"#5D3FD3",marginRight:e.spacing(1),"&:hover":{background:"#f7f8fa",color:"#4930A8"}}})),mr=Oe.b().shape({name:Oe.d().min(2,"Too Short!").max(50,"Too Long!").required("Required")});var ur=e=>{let{open:a,onClose:t,contactListId:r}=e;const i=dr(),l={name:""},[s,c]=Object(n.useState)(l);Object(n.useEffect)(()=>{(async()=>{if(r)try{const{data:e}=await B.get("/contact-lists/"+r);c(a=>({...a,...e}))}catch(e){y.toast.error(e.message)}})()},[r,a]);const d=()=>{t(),c(l)};return o.a.createElement("div",{className:i.root},o.a.createElement(xe.a,{open:a,onClose:d,maxWidth:"xs",fullWidth:!0,scroll:"paper",classes:{paper:i.dialogPaper}},o.a.createElement(ye.a,{id:"form-dialog-title",className:i.dialogTitle},r?""+z.a.t("contactLists.dialog.edit"):""+z.a.t("contactLists.dialog.add")),o.a.createElement(Ae.e,{initialValues:s,enableReinitialize:!0,validationSchema:mr,onSubmit:(e,a)=>{setTimeout(()=>{(async e=>{const a={...e};try{r?await B.put("/contact-lists/"+r,a):await B.post("/contact-lists",a),y.toast.success(z.a.t("contactList.dialog"))}catch(t){y.toast.error(t.message)}d()})(e),a.setSubmitting(!1)},400)}},e=>{let{touched:a,errors:t,isSubmitting:n}=e;return o.a.createElement(Ae.d,null,o.a.createElement(ve.a,{dividers:!0,className:i.dialogContent},o.a.createElement("div",{className:i.multFieldLine},o.a.createElement(Ae.b,{as:Ce.a,label:z.a.t("contactLists.dialog.name"),autoFocus:!0,name:"name",error:a.name&&Boolean(t.name),helperText:a.name&&t.name,variant:"outlined",margin:"dense",fullWidth:!0,InputProps:{style:{borderRadius:10,background:"#fff"}}}))),o.a.createElement(we.a,{style:{padding:24,paddingTop:8}},o.a.createElement(b.a,{onClick:d,color:"secondary",disabled:n,variant:"outlined",className:i.cancelButton},z.a.t("contactLists.dialog.cancel")),o.a.createElement(b.a,{type:"submit",color:"primary",disabled:n,variant:"contained",className:i.actionButton},r?""+z.a.t("contactLists.dialog.okEdit"):""+z.a.t("contactLists.dialog.okAdd"),n&&o.a.createElement(be.a,{size:24,className:i.buttonProgress}))))})))},pr=t(1233);const gr=(e,a)=>{if("LOAD_CONTACTLISTS"===a.type){const t=a.payload,n=[];return t.forEach(a=>{const t=e.findIndex(e=>e.id===a.id);-1!==t?e[t]=a:n.push(a)}),[...e,...n]}if("UPDATE_CONTACTLIST"===a.type){const t=a.payload,n=e.findIndex(e=>e.id===t.id);return-1!==n?(e[n]=t,[...e]):[t,...e]}if("DELETE_CONTACTLIST"===a.type){const t=a.payload,n=e.findIndex(e=>e.id===t);return-1!==n&&e.splice(n,1),[...e]}if("RESET"===a.type)return[]},fr=Object(Y.a)(e=>({mainPaper:{flex:1,padding:e.spacing(3),overflowY:"scroll",background:"linear-gradient(135deg, #f7f8fa 60%, #e5e0fa 100%)",borderRadius:16,boxShadow:"0 4px 20px rgba(93,63,211,0.10)",...e.scrollbarStyles},container:{paddingTop:e.spacing(4),paddingBottom:e.spacing(4),paddingLeft:e.spacing(4),paddingRight:e.spacing(4),[e.breakpoints.down("sm")]:{paddingLeft:e.spacing(2),paddingRight:e.spacing(2)}},searchField:{"& .MuiOutlinedInput-root":{borderRadius:12,background:"#fff","&:hover fieldset":{borderColor:"#5D3FD3"}}},addButton:{borderRadius:12,textTransform:"none",fontWeight:600,padding:"10px 24px",boxShadow:"0 4px 12px rgba(93,63,211,0.15)","&:hover":{boxShadow:"0 6px 16px rgba(93,63,211,0.2)"}},cardGrid:{marginTop:e.spacing(2)},contactListCard:{background:"#fff",borderRadius:16,boxShadow:"0 4px 20px rgba(93,63,211,0.10)",padding:e.spacing(3),margin:"0 auto",transition:"all 0.3s ease",position:"relative",display:"flex",flexDirection:"column",height:"100%",minHeight:160,cursor:"pointer","&:hover":{transform:"translateY(-4px)",boxShadow:"0 8px 30px rgba(93,63,211,0.15)"}},cardHeader:{display:"flex",alignItems:"center",gap:12,marginBottom:e.spacing(2),justifyContent:"space-between"},cardTitle:{fontWeight:700,fontSize:20,color:"#5D3FD3",display:"flex",alignItems:"center",gap:8},cardContacts:{display:"flex",alignItems:"center",gap:8,color:"#666",fontWeight:600,fontSize:16,background:"rgba(93,63,211,0.1)",padding:"4px 12px",borderRadius:20},cardActions:{display:"flex",justifyContent:"flex-end",gap:8,marginTop:e.spacing(2),paddingTop:e.spacing(2),borderTop:"1px solid rgba(0,0,0,0.05)"},actionButton:{color:"#666","&:hover":{background:"rgba(93,63,211,0.1)",color:"#5D3FD3"}},deleteButton:{color:"#ff4d4f","&:hover":{background:"rgba(255,77,79,0.1)"}},headerContainer:{display:"flex",alignItems:"center",justifyContent:"space-between",marginBottom:e.spacing(3),padding:e.spacing(2),background:"#fff",borderRadius:16,boxShadow:"0 4px 20px rgba(93,63,211,0.10)"},headerTitle:{display:"flex",alignItems:"center",gap:e.spacing(2)},headerIcon:{color:"#5D3FD3",fontSize:32},headerText:{fontWeight:700,fontSize:24,color:"#5D3FD3"},headerActions:{display:"flex",gap:e.spacing(2)},emptyState:{textAlign:"center",padding:e.spacing(4),color:"#666"},emptyStateIcon:{fontSize:64,color:"#5D3FD3",marginBottom:e.spacing(2)}}));var br=()=>{const e=fr(),a=Object(S.useHistory)(),[t,r]=Object(n.useState)(!1),[i,l]=Object(n.useState)(1),[s,c]=Object(n.useState)(!1),[d,m]=Object(n.useState)(null),[u,p]=Object(n.useState)(null),[g,E]=Object(n.useState)(!1),[h,x]=Object(n.useState)(!1),[v,C]=Object(n.useState)(""),[k,N]=Object(n.useReducer)(gr,[]),w=Object(n.useContext)(j);Object(n.useEffect)(()=>{N({type:"RESET"}),l(1)},[v]),Object(n.useEffect)(()=>{r(!0);const e=setTimeout(()=>{(async()=>{try{const{data:e}=await B.get("/contact-lists/",{params:{searchParam:v,pageNumber:i}});N({type:"LOAD_CONTACTLISTS",payload:e.records}),c(e.hasMore),r(!1)}catch(e){y.toast.error(e.message)}})()},500);return()=>clearTimeout(e)},[v,i]),Object(n.useEffect)(()=>{const e=localStorage.getItem("companyId"),a=w.getSocket(e);return a.on(`company-${e}-ContactList`,e=>{"update"!==e.action&&"create"!==e.action||N({type:"UPDATE_CONTACTLIST",payload:e.record}),"delete"===e.action&&N({type:"DELETE_CONTACTLIST",payload:+e.id})}),()=>{a.disconnect()}},[w]);return o.a.createElement(Zn.a,{maxWidth:"xl",className:e.container},o.a.createElement(Pt,{title:u&&`${z.a.t("contactLists.confirmationModal.deleteTitle")} ${u.name}?`,open:h,onClose:x,onConfirm:()=>(async e=>{try{await B.delete("/contact-lists/"+e),y.toast.success(z.a.t("contactLists.toasts.deleted"))}catch(a){y.toast.error(a.message)}p(null),C(""),l(1)})(u.id)},z.a.t("contactLists.confirmationModal.deleteMessage")),o.a.createElement(ur,{open:g,onClose:()=>{m(null),E(!1)},"aria-labelledby":"form-dialog-title",contactListId:d&&d.id}),o.a.createElement(no,null,o.a.createElement("div",{className:e.headerContainer},o.a.createElement("div",{className:e.headerTitle},o.a.createElement(cr.a,{className:e.headerIcon}),o.a.createElement(f.a,{className:e.headerText},z.a.t("contactLists.title"))),o.a.createElement("div",{className:e.headerActions},o.a.createElement(Ce.a,{placeholder:z.a.t("contacts.searchPlaceholder"),type:"search",value:v,onChange:e=>{C(e.target.value.toLowerCase())},className:e.searchField,InputProps:{startAdornment:o.a.createElement(Do.a,{position:"start"},o.a.createElement(jo.a,{style:{color:"gray"}}))}}),o.a.createElement(b.a,{variant:"contained",color:"primary",onClick:()=>{m(null),E(!0)},className:e.addButton,startIcon:o.a.createElement(cr.a,null)},z.a.t("contactLists.buttons.add"))))),o.a.createElement(wa.a,{className:e.mainPaper,variant:"outlined",onScroll:e=>{if(!s||t)return;const{scrollTop:a,scrollHeight:n,clientHeight:o}=e.currentTarget;n-(a+100)<o&&l(e=>e+1)}},o.a.createElement(_t.a,{container:!0,spacing:3,className:e.cardGrid},0!==k.length||t?k.map(t=>o.a.createElement(_t.a,{item:!0,xs:12,sm:6,md:4,lg:3,key:t.id},o.a.createElement(hn.a,{className:e.contactListCard,elevation:0,onClick:()=>{return e=t.id,void a.push(`/contact-lists/${e}/contacts`);var e}},o.a.createElement("div",{className:e.cardHeader},o.a.createElement(f.a,{className:e.cardTitle},t.name),o.a.createElement("div",{className:e.cardContacts},o.a.createElement(cr.a,{style:{color:"#5D3FD3"}}),t.contactsCount||0)),o.a.createElement(pr.a,{style:{padding:0}}),o.a.createElement("div",{className:e.cardActions},o.a.createElement("a",{href:tr.a,download:"planilha.xlsx",onClick:e=>e.stopPropagation()},o.a.createElement(J.a,{size:"small",title:"Baixar Planilha Exemplo",className:e.actionButton},o.a.createElement(lr.a,null))),o.a.createElement(J.a,{size:"small",onClick:e=>{e.stopPropagation(),(e=>{m(e),E(!0)})(t)},title:"Editar Lista",className:e.actionButton},o.a.createElement(Po.a,null)),o.a.createElement(J.a,{size:"small",onClick:e=>{e.stopPropagation(),x(!0),p(t)},title:"Excluir Lista",className:e.deleteButton},o.a.createElement(an.a,null)))))):o.a.createElement(_t.a,{item:!0,xs:12},o.a.createElement("div",{className:e.emptyState},o.a.createElement(cr.a,{className:e.emptyStateIcon}),o.a.createElement(f.a,{variant:"h6"},z.a.t("contactLists.emptyState")),o.a.createElement(f.a,{variant:"body2",style:{marginTop:8}},z.a.t("contactLists.emptyStateSubtitle")))),t&&o.a.createElement(_t.a,{item:!0,xs:12},o.a.createElement("table",null,o.a.createElement("tbody",null,o.a.createElement(Yo,{columns:3})))))))},Er=t(1242),hr=t(1243),xr=t(1244),yr=t(91),vr=t.n(yr),Cr=t(669),kr=t.n(Cr),Sr=t(666),Nr=t.n(Sr),wr=t(474),Ir=t.n(wr),Ar=t(290),Tr=t.n(Ar),Dr=t(668),Or=t.n(Dr),jr=t(667),Rr=t.n(jr),Fr=t(291),Mr=t.n(Fr),Pr=t(289),Br=t.n(Pr),zr=t(1235),Wr=t(1236),Lr=t(1234),qr=t(1237),Hr=t(1238),Ur=t(1239),Vr=t(1240),Gr=t(1241),_r=t(1318);const Kr=o.a.forwardRef((function(e,a){return o.a.createElement(Tt.a,Object.assign({direction:"up",ref:a},e))})),Qr=Object(Y.a)(e=>({root:{display:"flex",flexWrap:"wrap"},multFieldLine:{display:"flex",marginBottom:e.spacing(2),"& > *:not(:last-child)":{marginRight:e.spacing(1)}},textField:{marginBottom:e.spacing(2),"& .MuiOutlinedInput-root":{borderRadius:10},"& .MuiOutlinedInput-notchedOutline":{borderColor:"rgba(93, 63, 211, 0.2)"},"&:hover .MuiOutlinedInput-notchedOutline":{borderColor:"rgba(93, 63, 211, 0.5)"},"& .Mui-focused .MuiOutlinedInput-notchedOutline":{borderColor:"#5D3FD3"}},btnWrapper:{position:"relative"},buttonProgress:{color:Ie.a[500],position:"absolute",top:"50%",left:"50%",marginTop:-12,marginLeft:-12},formControl:{margin:e.spacing(1),minWidth:120},colorAdorment:{width:20,height:20,borderRadius:4},colorPickerContainer:{padding:e.spacing(2),marginTop:e.spacing(2),marginBottom:e.spacing(2),borderRadius:10,backgroundColor:e.palette.background.default,border:"1px solid rgba(93, 63, 211, 0.1)",boxShadow:"0 2px 8px rgba(0,0,0,0.04)"},dialogTitle:{display:"flex",alignItems:"center",background:"linear-gradient(145deg, #5D3FD3 0%, #7058e6 100%)",color:"#FFFFFF","& h2":{display:"flex",alignItems:"center",color:"#FFFFFF"}},titleIcon:{marginRight:e.spacing(1),color:"#FFFFFF"},previewContainer:{display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",marginTop:e.spacing(2),marginBottom:e.spacing(2),padding:e.spacing(2),borderRadius:10,backgroundColor:e.palette.background.default,border:"1px solid rgba(93, 63, 211, 0.1)",boxShadow:"0 2px 8px rgba(0,0,0,0.04)"},previewTitle:{marginBottom:e.spacing(1),fontSize:"0.8rem",color:e.palette.text.secondary},previewTag:{padding:e.spacing(1,2),borderRadius:20,color:"white",textShadow:"1px 1px 1px #000",fontWeight:"bold",display:"flex",alignItems:"center","& svg":{marginRight:e.spacing(1)}},checkboxContainer:{display:"flex",alignItems:"center"},colorOptions:{display:"flex",flexWrap:"wrap",marginTop:e.spacing(1),gap:e.spacing(1),justifyContent:"center"},colorOption:{width:36,height:36,borderRadius:4,cursor:"pointer",border:"2px solid transparent",transition:"all 0.2s","&:hover":{transform:"scale(1.1)",boxShadow:"0 2px 10px rgba(0,0,0,0.15)"}},selectedColor:{border:"2px solid #5D3FD3",transform:"scale(1.1)",boxShadow:"0 2px 10px rgba(0,0,0,0.15)"},dialogActions:{padding:e.spacing(2),justifyContent:"space-between",borderTop:"1px solid rgba(0,0,0,0.08)"},cancelButton:{color:"#333",borderRadius:10,borderColor:"rgba(0,0,0,0.12)",padding:e.spacing(1,2),"&:hover":{backgroundColor:"rgba(0,0,0,0.04)"}},saveButton:{backgroundColor:"#5D3FD3",color:"#FFF",borderRadius:10,padding:e.spacing(1,3),"&:hover":{backgroundColor:"#4930A8"}}})),Yr=Oe.b().shape({name:Oe.d().min(3,"Mensagem muito curta").required("Obrigat\xf3rio")}),Xr=["#2DDD7F","#5D3FD3","#FF5733","#1E88E5","#8E24AA","#F4511E","#43A047","#3949AB","#00ACC1","#E53935","#607D8B","#F9A825"];var $r=e=>{let{open:a,onClose:t,tagId:r,reload:i}=e;const l=Qr(),{user:s}=Object(n.useContext)(H),c={name:"",color:"#5D3FD3",kanban:0},[d,m]=Object(n.useState)(c),[u,p]=Object(n.useState)(0);Object(n.useEffect)(()=>{try{(async()=>{if(!r)return;const{data:e}=await B.get("/tags/"+r);p(e.kanban),m(a=>({...a,...e}))})()}catch(e){y.toast.error(e.message)}},[r,a]);const g=()=>{m(c),t()},E=e=>{p(e.target.checked?1:0)};return o.a.createElement("div",{className:l.root},o.a.createElement(xe.a,{open:a,onClose:g,maxWidth:"xs",fullWidth:!0,scroll:"paper",TransitionComponent:Kr},o.a.createElement(ye.a,{id:"form-dialog-title",className:l.dialogTitle},o.a.createElement(Lr.a,{className:l.titleIcon}),r?""+z.a.t("tagModal.title.edit"):""+z.a.t("tagModal.title.add")),o.a.createElement(Ae.e,{initialValues:d,enableReinitialize:!0,validationSchema:Yr,onSubmit:(e,a)=>{setTimeout(()=>{(async e=>{const a={...e,userId:s.id,kanban:u};try{r?await B.put("/tags/"+r,a):await B.post("/tags",a),y.toast.success(z.a.t("tagModal.success")),"function"==typeof i&&i()}catch(t){y.toast.error(t.message)}g()})(e),a.setSubmitting(!1)},400)}},e=>{let{touched:a,errors:t,isSubmitting:n,values:i}=e;return o.a.createElement(Ae.d,null,o.a.createElement(ve.a,{dividers:!0},o.a.createElement("div",{className:l.multFieldLine},o.a.createElement(Ae.b,{as:Ce.a,label:z.a.t("tagModal.form.name"),name:"name",autoFocus:!0,error:a.name&&Boolean(t.name),helperText:a.name&&t.name,variant:"outlined",margin:"dense",className:l.textField,fullWidth:!0})),o.a.createElement(wa.a,{elevation:0,className:l.previewContainer},o.a.createElement(f.a,{className:l.previewTitle},z.a.t("tagModal.preview")),o.a.createElement("div",{className:l.previewTag,style:{backgroundColor:i.color||"#5D3FD3"}},o.a.createElement(Lr.a,{fontSize:"small"}),i.name||z.a.t("tagModal.form.name"))),o.a.createElement(wa.a,{elevation:0,className:l.colorPickerContainer},o.a.createElement(f.a,{variant:"subtitle2",gutterBottom:!0,style:{marginBottom:12,color:"#555"}},z.a.t("tagModal.form.color")),o.a.createElement("div",{className:l.colorOptions},Xr.map(e=>o.a.createElement(Sa.a,{title:e,key:e,arrow:!0},o.a.createElement("div",{className:`${l.colorOption} ${i.color===e?l.selectedColor:""}`,style:{backgroundColor:e},onClick:()=>{m({...i,color:e})}})))),o.a.createElement("div",{className:l.multFieldLine,style:{marginTop:16}},o.a.createElement(Ae.b,{as:Ce.a,label:z.a.t("tagModal.form.colorCode"),name:"color",variant:"outlined",margin:"dense",fullWidth:!0,className:l.textField,InputProps:{startAdornment:o.a.createElement(Do.a,{position:"start"},o.a.createElement("div",{className:l.colorAdorment,style:{backgroundColor:i.color}}))}}))),o.a.createElement(go.a,{control:o.a.createElement(_r.a,{checked:1===u,onChange:E,color:"primary"}),label:z.a.t("tagModal.form.kanban"),className:l.checkboxContainer})),o.a.createElement(we.a,{className:l.dialogActions},o.a.createElement(b.a,{onClick:g,color:"secondary",disabled:n,variant:"outlined",className:l.cancelButton},z.a.t("tagModal.buttons.cancel")),o.a.createElement(b.a,{type:"submit",color:"primary",disabled:n,variant:"contained",className:l.saveButton},r?""+z.a.t("tagModal.buttons.okEdit"):""+z.a.t("tagModal.buttons.okAdd"),n&&o.a.createElement(be.a,{size:24,className:l.buttonProgress}))))})))};function Jr(e){let{ticket:a}=e;const[t,r]=Object(n.useState)([]),[i,l]=Object(n.useState)([]),[s,c]=Object(n.useState)(!1),d=Object(n.useRef)(!0),m=a&&a.number&&!a.protocol;Object(n.useEffect)(()=>()=>{d.current=!1},[]),Object(n.useEffect)(()=>{d.current&&p().then(()=>{Array.isArray(a.tags)?l(a.tags):l([])})},[a]);const u=async e=>{try{c(!0);const{data:a}=await B.post("/tags",e);return a}catch(a){y.toast.error(a.message)}finally{c(!1)}},p=async()=>{try{c(!0);const{data:e}=await B.get("/tags/list");r(e)}catch(e){y.toast.error(e.message)}finally{c(!1)}},g=async(e,t)=>{let n=[];if("create-option"===t){if(Object(k.isArray)(e))for(let a of e)if(Object(k.isString)(a)){const e=await u({name:a});n.push(e)}else n.push(a);await p()}else n=e;l(n);const o=m?{contactId:a.id,tags:n}:{ticketId:a.id,tags:n};await(async e=>{try{return c(!0),m?(await B.put("/contacts/"+a.id,{...a,tags:e.tags}),y.toast.success(z.a.t("contactDetailsModal.success"))):await B.post("/tags/sync",e),!0}catch(t){return y.toast.error(t.message),!1}finally{c(!1)}})(o)};return o.a.createElement(wa.a,{style:{padding:12}},s?o.a.createElement("div",{style:{display:"flex",justifyContent:"center",padding:8}},o.a.createElement(be.a,{size:24})):o.a.createElement(Yt.a,{multiple:!0,size:"small",options:t,value:i,freeSolo:!0,onChange:(e,a,t)=>g(a,t),getOptionLabel:e=>e.name||"",renderTags:(e,a)=>e.map((e,t)=>{var n;return o.a.createElement(Fe.a,Object.assign({key:e.id||t,variant:"outlined",style:{background:e.color||"#eee",color:"#FFF",marginRight:1,fontWeight:600,borderRadius:3,fontSize:"0.8em",whiteSpace:"nowrap",textShadow:"0px 1px 1px rgba(0,0,0,0.5)"},label:(null===(n=e.name)||void 0===n?void 0:n.toUpperCase())||""},a({index:t}),{size:"small"}))}),renderInput:e=>o.a.createElement(Ce.a,Object.assign({},e,{variant:"outlined",placeholder:"Tags"})),PaperComponent:e=>{let{children:a}=e;return o.a.createElement(wa.a,{style:{width:400,marginLeft:12}},a)},noOptionsText:o.a.createElement(f.a,null,"Nenhuma tag encontrada")}))}const Zr=Object(Y.a)(e=>({root:{display:"flex",flexDirection:"column"},dialogPaper:{borderRadius:12,padding:e.spacing(1),boxShadow:"0 8px 24px rgba(0, 0, 0, 0.1)",maxWidth:700,width:"100%"},dialogTitle:{display:"flex",justifyContent:"space-between",alignItems:"center",padding:e.spacing(2,2,1),"& h2":{fontSize:"1.25rem",fontWeight:600,color:e.palette.primary.main}},closeButton:{color:e.palette.grey[700],padding:8},dialogContent:{padding:e.spacing(2)},section:{marginBottom:e.spacing(3)},sectionTitle:{fontSize:"1rem",fontWeight:600,color:e.palette.primary.main,marginBottom:e.spacing(2),position:"relative","&::after":{content:'""',position:"absolute",width:40,height:3,bottom:-5,left:0,backgroundColor:e.palette.primary.main,borderRadius:2}},avatar:{width:e.spacing(8),height:e.spacing(8),fontSize:"2rem",backgroundColor:e.palette.primary.main},contactName:{fontSize:"1.5rem",fontWeight:600,marginBottom:e.spacing(.5)},contactTitle:{fontSize:"1rem",color:e.palette.text.secondary,marginBottom:e.spacing(1)},divider:{marginTop:e.spacing(2),marginBottom:e.spacing(2)},contactInfoItem:{display:"flex",alignItems:"center",marginBottom:e.spacing(1.5),"& .MuiSvgIcon-root":{marginRight:e.spacing(1.5),color:e.palette.primary.main}},infoText:{fontSize:"0.95rem"},infoLabel:{fontSize:"0.8rem",color:e.palette.text.secondary,marginBottom:e.spacing(.25)},tagChip:{margin:e.spacing(.5),transition:"transform 0.2s ease","&:hover":{transform:"translateY(-2px)"}},addTagButton:{margin:e.spacing(.5),backgroundColor:"rgba(0, 0, 0, 0.04)",color:e.palette.text.secondary,"&:hover":{backgroundColor:"rgba(0, 0, 0, 0.08)"}},tagsContainer:{display:"flex",flexWrap:"wrap",marginTop:e.spacing(1)},fieldBox:{marginBottom:e.spacing(2)},countryFlag:{marginRight:e.spacing(.75),width:20,height:15,boxShadow:"0 0 1px rgba(0,0,0,0.2)",borderRadius:2},phoneWithFlag:{display:"flex",alignItems:"center"},extraInfoItem:{backgroundColor:"rgba(0, 0, 0, 0.03)",padding:e.spacing(1.5),borderRadius:8,marginBottom:e.spacing(1.5)},extraInfoName:{fontSize:"0.9rem",fontWeight:500,marginBottom:e.spacing(.5)},extraInfoValue:{fontSize:"1rem"},notesContainer:{marginTop:e.spacing(2)},notesPaper:{padding:e.spacing(2),backgroundColor:"rgba(255, 243, 224, 0.2)",border:"1px solid rgba(255, 167, 38, 0.2)",borderRadius:8},notesInput:{marginBottom:e.spacing(1)},actionButtons:{display:"flex",justifyContent:"flex-end",gap:e.spacing(1),marginTop:e.spacing(2)},actionButton:{borderRadius:8,textTransform:"none",padding:e.spacing(.75,2),fontSize:"0.9rem"},saveButton:{backgroundColor:e.palette.primary.main,color:"white","&:hover":{backgroundColor:e.palette.primary.dark}},editButton:{color:e.palette.primary.main,borderColor:e.palette.primary.main}}));var ei=e=>{var a,t,r,i;let{open:l,onClose:s,contactId:c}=e;const d=Zr(),[m,u]=Object(n.useState)(null),[p,E]=Object(n.useState)(!0),[h,x]=Object(n.useState)(""),[v,C]=Object(n.useState)(!1),[k,S]=Object(n.useState)(!1),[N,w]=Object(n.useState)(null);Object(n.useEffect)(()=>{(async()=>{if(!l||!c)return u(null),void E(!1);try{E(!0);const{data:e}=await B.get("/contacts/"+c);u(e),x(e.notes||""),E(!1)}catch(e){E(!1),y.toast.error(e.message)}})()},[l,c]);if(p||!m)return null;return o.a.createElement(xe.a,{open:l,onClose:s,classes:{paper:d.dialogPaper},maxWidth:"md",scroll:"paper"},o.a.createElement(ye.a,{disableTypography:!0,className:d.dialogTitle},o.a.createElement(f.a,{variant:"h2"},z.a.t("contactDetailsModal.title")),o.a.createElement(J.a,{className:d.closeButton,onClick:s,size:"small"},o.a.createElement(uo.a,null))),o.a.createElement(ve.a,{className:d.dialogContent},o.a.createElement("div",{className:d.root},o.a.createElement("div",{className:d.section},o.a.createElement(_t.a,{container:!0,spacing:2,alignItems:"center"},o.a.createElement(_t.a,{item:!0},o.a.createElement(Le.a,{className:d.avatar,src:m.profilePicUrl,alt:m.name},!m.profilePicUrl&&m.name.split(" ").map(e=>e.charAt(0)).join("").toUpperCase().substring(0,2))),o.a.createElement(_t.a,{item:!0,xs:!0},o.a.createElement(f.a,{className:d.contactName},m.name),o.a.createElement(f.a,{className:d.contactTitle},(null===(a=m.extraInfo)||void 0===a?void 0:a.jobTitle)||"CEO"," at"," ",(null===(t=m.extraInfo)||void 0===t?void 0:t.company)||m.name.split(" ")[0]+" Enterprises")),o.a.createElement(_t.a,{item:!0},o.a.createElement(Sa.a,{title:"Enviar mensagem"},o.a.createElement(J.a,{color:"primary",onClick:()=>{s()}},o.a.createElement(zr.a,null))),o.a.createElement(Sa.a,{title:"Editar contato"},o.a.createElement(J.a,{onClick:()=>{s()}},o.a.createElement(Wr.a,null)))))),o.a.createElement("div",{className:d.section},o.a.createElement(_t.a,{container:!0,spacing:2,alignItems:"center"},o.a.createElement(_t.a,{item:!0},o.a.createElement(f.a,{className:d.sectionTitle},z.a.t("contactDetailsModal.tags"))),o.a.createElement(_t.a,{item:!0},o.a.createElement(Sa.a,{title:z.a.t("contactDetailsModal.addTags")},o.a.createElement(J.a,{color:"primary",size:"small",onClick:()=>function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;w(e)}()},o.a.createElement(Lr.a,{fontSize:"small"}))))),o.a.createElement(g.a,{mt:1},m&&o.a.createElement(Jr,{ticket:m}))),o.a.createElement(Z.a,{className:d.divider}),o.a.createElement("div",{className:d.section},o.a.createElement(f.a,{className:d.sectionTitle},z.a.t("contactDetailsModal.contactInfo")),o.a.createElement("div",{className:d.contactInfoItem},o.a.createElement(qr.a,null),o.a.createElement("div",null,o.a.createElement(f.a,{className:d.infoLabel},z.a.t("contactDetailsModal.whatsappNumber")),o.a.createElement("div",{className:d.phoneWithFlag},o.a.createElement(Br.a,{code:(I=m.number,I?I.startsWith("1")?"us":I.startsWith("351")?"pt":I.startsWith("55")?"br":I.startsWith("54")?"ar":I.startsWith("598")?"uy":I.startsWith("595")?"py":I.startsWith("591")?"bo":I.startsWith("56")?"cl":I.startsWith("51")?"pe":I.startsWith("57")?"co":I.startsWith("58")?"ve":"br":"br"),className:d.countryFlag}),o.a.createElement(f.a,{className:d.infoText},(e=>{if(!e)return"-";if(e.startsWith("+"))return e;let a="55",t=e;e.startsWith("1")?a="1":e.startsWith("351")?a="351":e.startsWith("55")?a="55":e.startsWith("54")?a="54":e.startsWith("598")?a="598":e.startsWith("595")?a="595":e.startsWith("591")?a="591":e.startsWith("56")?a="56":e.startsWith("51")?a="51":e.startsWith("57")?a="57":e.startsWith("58")&&(a="58");let n=t.substring(a.length);return n.length>8?"55"===a&&11===n.length?`+${a} ${n.substring(0,2)} ${n.substring(2,7)}-${n.substring(7)}`:`+${a} ${n.replace(/(\d{3})(\d{3})(\d{4})/,"$1 $2 $3")}`:`+${a} ${n}`})(m.number))))),o.a.createElement("div",{className:d.contactInfoItem},o.a.createElement(Hr.a,null),o.a.createElement("div",null,o.a.createElement(f.a,{className:d.infoLabel},z.a.t("contactDetailsModal.email")),o.a.createElement(f.a,{className:d.infoText},m.email||"-"))),o.a.createElement("div",{className:d.contactInfoItem},o.a.createElement(Ur.a,null),o.a.createElement("div",null,o.a.createElement(f.a,{className:d.infoLabel},z.a.t("contactDetailsModal.company")),o.a.createElement(f.a,{className:d.infoText},(null===(r=m.extraInfo)||void 0===r?void 0:r.company)||m.name.split(" ")[0]+" Enterprises"))),o.a.createElement("div",{className:d.contactInfoItem},o.a.createElement(Vr.a,null),o.a.createElement("div",null,o.a.createElement(f.a,{className:d.infoLabel},z.a.t("contactDetailsModal.position")),o.a.createElement(f.a,{className:d.infoText},(null===(i=m.extraInfo)||void 0===i?void 0:i.jobTitle)||"CEO")))),m.extraInfo&&m.extraInfo.length>0&&o.a.createElement("div",{className:d.section},o.a.createElement(f.a,{className:d.sectionTitle},z.a.t("contactDetailsModal.additionalInfo")),m.extraInfo.map((e,a)=>o.a.createElement(wa.a,{key:a,className:d.extraInfoItem,elevation:0},o.a.createElement(f.a,{className:d.extraInfoName},e.name,":"),o.a.createElement(f.a,{className:d.extraInfoValue},e.value)))),o.a.createElement("div",{className:d.section},o.a.createElement(f.a,{className:d.sectionTitle},z.a.t("contactDetailsModal.notes")),o.a.createElement("div",{className:d.notesContainer},v?o.a.createElement(o.a.Fragment,null,o.a.createElement(Ce.a,{fullWidth:!0,multiline:!0,rows:4,value:h,onChange:e=>x(e.target.value),variant:"outlined",placeholder:"Adicione observa\xe7\xf5es sobre este contato...",className:d.notesInput}),o.a.createElement("div",{className:d.actionButtons},o.a.createElement(b.a,{variant:"outlined",size:"small",onClick:()=>{C(!1),x(m.notes||"")},className:d.actionButton,startIcon:o.a.createElement(uo.a,null)},z.a.t("contactDetailsModal.cancelButton")),o.a.createElement(b.a,{variant:"contained",size:"small",color:"primary",onClick:async()=>{try{await B.put("/contacts/"+c,{...m,notes:h}),y.toast.success(z.a.t("contactModal.success")||"Notas salvas com sucesso"),C(!1)}catch(e){y.toast.error(e.message)}},className:`${d.actionButton} ${d.saveButton}`,startIcon:o.a.createElement(Gr.a,null)},z.a.t("contactDetailsModal.saveButton")))):o.a.createElement(o.a.Fragment,null,o.a.createElement(wa.a,{className:d.notesPaper,elevation:0},o.a.createElement(f.a,null,h||z.a.t("contactDetailsModal.noNotes"))),o.a.createElement("div",{className:d.actionButtons},o.a.createElement(b.a,{variant:"outlined",size:"small",onClick:()=>C(!0),className:`${d.actionButton} ${d.editButton}`,startIcon:o.a.createElement(Wr.a,null)},h?z.a.t("contactDetailsModal.editNote"):z.a.t("contactDetailsModal.addNote")))))))),o.a.createElement($r,{open:k,onClose:()=>{w(null),S(!1)},tagId:N,reload:async()=>{try{const{data:e}=await B.get("/contacts/"+c);u(e)}catch(e){y.toast.error(e.message)}}}));var I},ai=t(665);const ti=(e,a)=>{if("LOAD_CONTACTS"===a.type){const t=a.payload,n=[];return t.forEach(a=>{const t=e.findIndex(e=>e.id===a.id);-1!==t?e[t]=a:n.push(a)}),[...e,...n]}if("UPDATE_CONTACTS"===a.type){const t=a.payload,n=e.findIndex(e=>e.id===t.id);return-1!==n?(e[n]=t,[...e]):[t,...e]}if("DELETE_CONTACT"===a.type){const t=a.payload,n=e.findIndex(e=>e.id===t);return-1!==n&&e.splice(n,1),[...e]}if("RESET"===a.type)return[]},ni=Object(Y.a)(e=>({container:{paddingTop:e.spacing(4),paddingBottom:e.spacing(4),paddingLeft:e.spacing(4),paddingRight:e.spacing(4),[e.breakpoints.down("sm")]:{paddingLeft:e.spacing(1),paddingRight:e.spacing(1)}},mainPaper:{flex:1,padding:e.spacing(2),overflowY:"scroll",...e.scrollbarStyles},contactCard:{position:"relative",marginBottom:e.spacing(2),transition:"transform 0.2s ease, box-shadow 0.2s ease",height:"100%",display:"flex",flexDirection:"column","&:hover":{transform:"translateY(-4px)",boxShadow:"0 4px 20px rgba(0,0,0,0.08)"}},contactCardContent:{paddingTop:e.spacing(1.5),paddingBottom:e.spacing(1.5),height:"100%",display:"flex",flexDirection:"column"},contactHeader:{display:"flex",alignItems:"center",marginBottom:e.spacing(1.5)},contactInfo:{flexGrow:1,display:"flex",flexDirection:"column",justifyContent:"space-between"},tagsContainer:{marginTop:e.spacing(1),marginBottom:e.spacing(1.5)},contactDetailsSection:{display:"flex",flexDirection:"column",gap:e.spacing(.75),marginTop:"auto"},contactActions:{display:"flex",justifyContent:"flex-end",alignItems:"center",marginTop:e.spacing(1)},avatar:{width:e.spacing(6),height:e.spacing(6),marginRight:e.spacing(1)},statusChip:{marginRight:e.spacing(1),marginBottom:e.spacing(1),fontWeight:"bold"},tagChip:{marginRight:e.spacing(1),marginBottom:e.spacing(1),transition:"all 0.2s ease","&:hover":{transform:"translateY(-2px)",boxShadow:"0 2px 5px rgba(0,0,0,0.1)"}},viewButtons:{display:"flex",border:"1px solid rgba(0, 0, 0, 0.12)",borderRadius:e.shape.borderRadius},viewButton:{padding:e.spacing(.5),minWidth:"auto",color:e.palette.text.secondary,"&.active":{color:"#5D3FD3",backgroundColor:"rgba(93, 63, 211, 0.08)"}},header:{display:"flex",alignItems:"center",justifyContent:"space-between",marginBottom:e.spacing(1)},filtersContainer:{display:"flex",alignItems:"center",gap:e.spacing(1),marginBottom:e.spacing(2)},filterSelect:{minWidth:120,"& .MuiOutlinedInput-root":{borderRadius:10,backgroundColor:"rgba(0, 0, 0, 0.02)","&:hover":{backgroundColor:"rgba(0, 0, 0, 0.04)"}},"& .MuiSelect-select":{paddingTop:9,paddingBottom:9}},emailPhone:{display:"flex",alignItems:"center",gap:e.spacing(.5),marginTop:e.spacing(.5),color:e.palette.text.secondary},companyInfo:{fontSize:"0.875rem",fontWeight:500,marginTop:e.spacing(.5)},jobTitle:{fontSize:"0.875rem",color:e.palette.text.secondary},revenue:{marginTop:e.spacing(1)},tableContainer:{overflowX:"auto"},actionsColumn:{width:120},nameColumn:{minWidth:200},searchInput:{margin:0,width:300,"& .MuiOutlinedInput-root":{borderRadius:10}},pageTitle:{color:"#5D3FD3",fontWeight:600,fontSize:"1.5rem",marginBottom:e.spacing(2),position:"relative",display:"inline-block",marginTop:e.spacing(4),"&::after":{content:'""',position:"absolute",width:"40%",height:3,bottom:-5,left:0,backgroundColor:"#5D3FD3",borderRadius:2}},titleContainer:{display:"flex",alignItems:"center"},headerContent:{display:"flex",flexDirection:"column",width:"100%"},upperHeader:{display:"flex",justifyContent:"space-between",alignItems:"center",width:"100%"},actionButtons:{display:"flex",justifyContent:"flex-end",margin:e.spacing(2,0),gap:e.spacing(1)},actionButton:{borderRadius:10,padding:e.spacing(1,2),textTransform:"none",boxShadow:"0 1px 3px rgba(0,0,0,0.1)",transition:"all 0.2s ease",fontWeight:600,fontSize:"0.8rem",color:"white","&:hover":{transform:"translateY(-2px)",boxShadow:"0 4px 8px rgba(0,0,0,0.1)"}},addButton:{backgroundColor:"#5D3FD3",color:"white","&:hover":{backgroundColor:"#4930A8"}},importButton:{backgroundColor:"#5D3FD3",color:"white","&:hover":{backgroundColor:"#4930A8"}},exportButton:{backgroundColor:"#5D3FD3",color:"white","&:hover":{backgroundColor:"#4930A8"}},importExcelButton:{backgroundColor:"#5D3FD3",color:"white","&:hover":{backgroundColor:"#4930A8"}},buttonIcon:{marginRight:e.spacing(1)},filterAndButtonContainer:{display:"flex",alignItems:"center",gap:e.spacing(1),flexWrap:"wrap"},actionButtonsContainer:{display:"flex",gap:e.spacing(1),flexWrap:"wrap"},controlsContainer:{display:"flex",alignItems:"center",gap:e.spacing(1),marginTop:e.spacing(2),marginBottom:e.spacing(2),flexWrap:"wrap",justifyContent:"space-between"},countryFlag:{marginRight:e.spacing(.75),width:16,height:12,boxShadow:"0 0 1px rgba(0,0,0,0.2)",borderRadius:2},phoneWithFlag:{display:"flex",alignItems:"center",marginLeft:e.spacing(.5)},actionMenuItem:{padding:e.spacing(1,2),transition:"background-color 0.2s ease","&:hover":{backgroundColor:"rgba(0, 0, 0, 0.04)"}},menuPaper:{boxShadow:"0 4px 15px rgba(0, 0, 0, 0.1)",borderRadius:10,minWidth:180},actionsButton:{color:e.palette.text.secondary,backgroundColor:"rgba(0, 0, 0, 0.04)",transition:"all 0.2s ease",padding:6,marginLeft:e.spacing(1),"&:hover":{backgroundColor:"rgba(0, 0, 0, 0.08)",color:e.palette.primary.main,transform:"scale(1.1)"}},tagFilterButton:{marginLeft:e.spacing(1),borderRadius:10,borderColor:"#5D3FD3",color:"#5D3FD3",backgroundColor:"rgba(93, 63, 211, 0.04)","&:hover":{backgroundColor:"rgba(93, 63, 211, 0.08)",borderColor:"#5D3FD3"}},tagFilterContainer:{padding:e.spacing(2),marginBottom:e.spacing(2),borderRadius:10,backgroundColor:"rgba(93, 63, 211, 0.02)",borderLeft:"4px solid #5D3FD3"},searchAndFilterContainer:{display:"flex",alignItems:"center",gap:e.spacing(1),flexWrap:"wrap"}})),oi=e=>{var a,t,r;let{contact:i,onMenuClick:l,onEditContact:s,getCountryCode:c,formatPhoneNumber:d}=e;const m=ni(),[u,p]=Object(n.useState)(null),[g,b]=Object(n.useState)(!1),[E,h]=Object(n.useState)(!1),[x,v]=Object(n.useState)(!1),[C,k]=Object(n.useState)(null),{user:N}=Object(n.useContext)(H),w=Object(S.useHistory)(),I=()=>{p(null)};return o.a.createElement(hn.a,{className:m.contactCard},o.a.createElement(pr.a,{className:m.contactCardContent},o.a.createElement("div",{className:m.contactHeader},o.a.createElement(Le.a,{src:i.profilePicUrl,className:m.avatar}),o.a.createElement("div",{className:m.contactInfo},o.a.createElement(f.a,{variant:"h6",component:"h2"},i.name),o.a.createElement(f.a,{className:m.jobTitle},(null===(a=i.extraInfo)||void 0===a?void 0:a.jobTitle)||"CEO"," at"," ",(null===(t=i.extraInfo)||void 0===t?void 0:t.company)||i.name.split(" ")[0]+" Enterprises")),o.a.createElement(J.a,{size:"small",onClick:e=>{p(e.currentTarget),l(i)},"aria-controls":"contact-menu-"+i.id,"aria-haspopup":"true",className:m.actionsButton},o.a.createElement(Tr.a,{fontSize:"small"})),o.a.createElement(ne.a,{id:"contact-menu-"+i.id,anchorEl:u,keepMounted:!0,open:Boolean(u),onClose:I,transformOrigin:{vertical:"top",horizontal:"right"},PaperProps:{className:m.menuPaper,elevation:2}},o.a.createElement(oe.a,{onClick:()=>{h(!0),I()},className:m.actionMenuItem},o.a.createElement(Ir.a,{fontSize:"small",style:{marginRight:8,color:"#2196F3"}}),"Detalhes do Contato"),o.a.createElement(oe.a,{onClick:()=>{b(!0),I()},className:m.actionMenuItem},o.a.createElement(Mr.a,{fontSize:"small",style:{marginRight:8,color:"#25D366"}}),"Enviar mensagem"),o.a.createElement(oe.a,{onClick:()=>{s(i.id),I()},className:m.actionMenuItem},o.a.createElement(Po.a,{fontSize:"small",style:{marginRight:8,color:"#5D3FD3"}}),"Editar contato"),o.a.createElement(Re,{role:N.profile,perform:"contacts-page:deleteContact",yes:()=>o.a.createElement(oe.a,{onClick:()=>{v(!0),k(i),I()},style:{color:"#f44336"},className:m.actionMenuItem},o.a.createElement(an.a,{fontSize:"small",style:{marginRight:8}}),"Excluir contato")}))),o.a.createElement("div",{className:m.contactDetailsSection},o.a.createElement("div",{className:m.emailPhone},o.a.createElement(Ho.a,{fontSize:"small"}),o.a.createElement("div",{className:m.phoneWithFlag},o.a.createElement(Br.a,{code:c(i.number),className:m.countryFlag}),o.a.createElement(f.a,{variant:"body2"},d(i.number)))),o.a.createElement("div",{className:m.emailPhone},o.a.createElement(zo.a,{fontSize:"small"}),o.a.createElement(f.a,{variant:"body2"},i.email)),(null===(r=i.extraInfo)||void 0===r?void 0:r.revenue)&&o.a.createElement(f.a,{variant:"body2",className:m.revenue},"Receita M\xe9dia: R$ ",i.extraInfo.revenue||"15.000"),i.tickets&&i.tickets.length>0&&o.a.createElement(f.a,{variant:"body2",color:"textSecondary"},"Tickets: ",i.tickets.length),i.schedules&&i.schedules.length>0&&o.a.createElement(f.a,{variant:"body2",color:"textSecondary"},"Agendamentos: ",i.schedules.length))),o.a.createElement(pn,{modalOpen:g,initialContact:i,onClose:e=>{b(!1),void 0!==e&&void 0!==e.uuid&&w.push("/tickets/"+e.uuid)}}),o.a.createElement(ei,{open:E,onClose:()=>{h(!1)},contactId:i.id}),o.a.createElement(Pt,{title:C?`${z.a.t("contacts.confirmationModal.deleteTitle")} ${C.name}?`:""+z.a.t("contacts.confirmationModal.importTitle"),open:x,onClose:()=>v(!1),onConfirm:async()=>{try{await B.delete("/contacts/"+i.id),y.toast.success(z.a.t("contacts.toasts.deleted"))}catch(e){y.toast.error(e.message)}k(null),I()}},C?""+z.a.t("contacts.confirmationModal.deleteMessage"):""+z.a.t("contacts.confirmationModal.importMessage")))};var ri=()=>{const e=ni(),a=Object(S.useHistory)(),{user:t}=Object(n.useContext)(H),r=Object(n.useContext)(j),[i,l]=Object(n.useState)(!1),[s,c]=Object(n.useState)(1),[d,m]=Object(n.useState)(""),[u,p]=Object(n.useReducer)(ti,[]),[g,E]=Object(n.useState)(null),[h,x]=Object(n.useState)(!1),[v,C]=Object(n.useState)(!1),[k,N]=Object(n.useState)(null),[w,I]=Object(n.useState)(!1),[A,T]=Object(n.useState)({}),[D,O]=Object(n.useState)(null),[R,F]=Object(n.useState)(!1),[M,P]=Object(n.useState)(!1),W=Object(n.useRef)(null),[L,q]=Object(n.useState)("cards"),[U,V]=Object(n.useState)(null),G=e=>{if(!e)return"-";if(e.startsWith("+"))return e;let a="55",t=e;e.startsWith("1")?a="1":e.startsWith("351")?a="351":e.startsWith("55")?a="55":e.startsWith("54")?a="54":e.startsWith("598")?a="598":e.startsWith("595")?a="595":e.startsWith("591")?a="591":e.startsWith("56")?a="56":e.startsWith("51")?a="51":e.startsWith("57")?a="57":e.startsWith("58")&&(a="58");let n=t.substring(a.length);return n.length>8?"55"===a&&11===n.length?`+${a} ${n.substring(0,2)} ${n.substring(2,7)}-${n.substring(7)}`:`+${a} ${n.replace(/(\d{3})(\d{3})(\d{4})/,"$1 $2 $3")}`:`+${a} ${n}`},_=e=>e?e.startsWith("1")?"us":e.startsWith("351")?"pt":e.startsWith("55")?"br":e.startsWith("54")?"ar":e.startsWith("598")?"uy":e.startsWith("595")?"py":e.startsWith("591")?"bo":e.startsWith("56")?"cl":e.startsWith("51")?"pe":e.startsWith("57")?"co":e.startsWith("58")?"ve":"br":"br";Object(n.useEffect)(()=>{p({type:"RESET"}),c(1)},[d]),Object(n.useEffect)(()=>{l(!0);const e=setTimeout(()=>{(async()=>{try{const{data:e}=await B.get("/contacts/",{params:{searchParam:d,pageNumber:s,pageSize:20}});p({type:"LOAD_CONTACTS",payload:e.contacts}),P(e.hasMore),l(!1)}catch(e){y.toast.error(e.message),l(!1)}})()},500);return()=>clearTimeout(e)},[d,s]),Object(n.useEffect)(()=>{const e=localStorage.getItem("companyId"),a=r.getSocket(e);return a.on(`company-${e}-contact`,e=>{"update"!==e.action&&"create"!==e.action||p({type:"UPDATE_CONTACTS",payload:e.contact}),"delete"===e.action&&p({type:"DELETE_CONTACT",payload:+e.contactId})}),()=>{a.disconnect()}},[r]);const K=e=>{E(e),x(!0)},Q=e=>{const{target:a}=e;if(!M||i)return;const{scrollTop:t,scrollHeight:n,clientHeight:o}=a;n-t-o<=300&&X()},Y=Object(n.useRef)(null);Object(n.useEffect)(()=>{const e=Y.current;if(e)return e.addEventListener("scroll",Q),()=>e.removeEventListener("scroll",Q)},[M,i,u]);const X=()=>{!i&&M&&c(e=>e+1)},$=async()=>{try{await B.post("/contacts/import"),y.toast.success("Contatos do WhatsApp importados com sucesso!"),a.go(0)}catch(e){y.toast.error(e.message||"Erro ao importar contatos do WhatsApp")}},Z=(e,a)=>{V(e.currentTarget),T(a)},ee=()=>{V(null),T({})},ae=e=>"Customer"===e?"#4caf50":"Lead"===e?"#ff9800":"Prospect"===e?"#2196f3":"#9e9e9e",te=u;return o.a.createElement(Zn.a,{maxWidth:"xl",className:e.container},o.a.createElement(pn,{modalOpen:w,initialContact:A,onClose:e=>{(e=>{I(!1),void 0!==e&&void 0!==e.uuid&&a.push("/tickets/"+e.uuid)})(e)}}),o.a.createElement(dn,{open:h,onClose:()=>{E(null),x(!1)},"aria-labelledby":"form-dialog-title",contactId:g}),o.a.createElement(ei,{open:v,onClose:()=>{N(null),C(!1)},contactId:k}),o.a.createElement(Pt,{title:D?`${z.a.t("contacts.confirmationModal.deleteTitle")} ${D.name}?`:""+z.a.t("contacts.confirmationModal.importTitle"),open:R,onClose:F,onConfirm:e=>D?(async e=>{try{await B.delete("/contacts/"+e),y.toast.success(z.a.t("contacts.toasts.deleted"))}catch(a){y.toast.error(a.message)}O(null),m(""),c(1)})(D.id):$()},D?""+z.a.t("contacts.confirmationModal.deleteMessage"):""+z.a.t("contacts.confirmationModal.importMessage")),o.a.createElement(no,null,o.a.createElement("div",{className:e.headerContent},o.a.createElement("div",{className:e.upperHeader},o.a.createElement("div",{className:e.titleContainer},o.a.createElement(f.a,{className:e.pageTitle},z.a.t("contacts.title"))),o.a.createElement("div",{className:e.viewButtons},o.a.createElement(J.a,{className:`${e.viewButton} ${"cards"===L?"active":""}`,onClick:()=>q("cards")},o.a.createElement(Nr.a,null)),o.a.createElement(J.a,{className:`${e.viewButton} ${"table"===L?"active":""}`,onClick:()=>q("table")},o.a.createElement(Rr.a,null)))),o.a.createElement("div",{className:e.controlsContainer},o.a.createElement("div",{className:e.searchAndFilterContainer},o.a.createElement(Ce.a,{placeholder:z.a.t("contacts.searchPlaceholder"),type:"search",value:d,onChange:e=>{m(e.target.value.toLowerCase())},className:e.searchInput,variant:"outlined",size:"small",InputProps:{startAdornment:o.a.createElement(Do.a,{position:"start"},o.a.createElement(jo.a,{style:{color:"gray"}}))}})),o.a.createElement("div",{className:e.actionButtonsContainer},o.a.createElement(b.a,{variant:"contained",color:"primary",className:`${e.actionButton} ${e.addButton}`,onClick:()=>{E(null),x(!0)},startIcon:o.a.createElement(vr.a,{className:e.buttonIcon}),size:"small"},"Adicionar"),o.a.createElement(b.a,{variant:"contained",color:"primary",className:`${e.actionButton} ${e.importButton}`,onClick:$,startIcon:o.a.createElement(Or.a,{className:e.buttonIcon}),size:"small"},"Importar do WhatsApp"),o.a.createElement(b.a,{variant:"contained",color:"primary",className:`${e.actionButton} ${e.importExcelButton}`,onClick:()=>{W.current.value=null,W.current.click()},startIcon:o.a.createElement(kr.a,{className:e.buttonIcon}),size:"small"},"Importar Excel"),o.a.createElement(ai.CSVLink,{style:{textDecoration:"none"},separator:";",filename:"varity_crm.csv",data:u.map(e=>{var a;return{name:e.name,number:G(e.number),email:e.email,status:e.status||"Customer",company:(null===(a=e.extraInfo)||void 0===a?void 0:a.company)||e.name.split(" ")[0]+" Enterprises"}})},o.a.createElement(b.a,{variant:"contained",color:"primary",className:`${e.actionButton} ${e.exportButton}`,startIcon:o.a.createElement(lr.a,{className:e.buttonIcon}),size:"small"},"Exportar")))))),o.a.createElement(wa.a,{className:e.mainPaper,variant:"outlined",ref:Y},o.a.createElement(o.a.Fragment,null,o.a.createElement("input",{style:{display:"none"},id:"upload",name:"file",type:"file",accept:".xls,.xlsx",onChange:async()=>{try{if(W.current.files[0]){const e=new FormData;e.append("file",W.current.files[0]),await B.request({url:"/contacts/upload",method:"POST",data:e}),y.toast.success("Contatos importados com sucesso!"),a.go(0)}else y.toast.error("Por favor, selecione um arquivo Excel para importar")}catch(e){y.toast.error(e.message||"Erro ao importar contatos do Excel")}},ref:W})),"cards"===L?o.a.createElement(_t.a,{container:!0,spacing:2},te.map(e=>o.a.createElement(_t.a,{item:!0,xs:12,sm:6,lg:4,xl:3,key:e.id},o.a.createElement(oi,{contact:e,onMenuClick:Z,onEditContact:K,getCountryCode:_,formatPhoneNumber:G}))),i&&o.a.createElement(_t.a,{item:!0,xs:12},o.a.createElement(Er.a,null,o.a.createElement(hr.a,null,o.a.createElement(Yo,{avatar:!0,columns:3})))),!i&&M&&o.a.createElement(_t.a,{item:!0,xs:12,style:{textAlign:"center",padding:16}},o.a.createElement(b.a,{variant:"outlined",color:"primary",onClick:X},"Carregar mais contatos"))):o.a.createElement("div",{className:e.tableContainer},o.a.createElement(Er.a,{size:"small"},o.a.createElement(xr.a,null,o.a.createElement(Ko.a,null,o.a.createElement(_o.a,null,"Nome"),o.a.createElement(_o.a,null,"Email"),o.a.createElement(_o.a,null,"Empresa"),o.a.createElement(_o.a,{align:"center"},"Status"),o.a.createElement(_o.a,{align:"center",className:e.actionsColumn},"A\xe7\xf5es"))),o.a.createElement(hr.a,null,te.map(a=>{var n,r;return o.a.createElement(Ko.a,{key:a.id},o.a.createElement(_o.a,{className:e.nameColumn},o.a.createElement("div",{style:{display:"flex",alignItems:"center"}},o.a.createElement(Le.a,{src:a.profilePicUrl,style:{marginRight:8}}),o.a.createElement("div",null,o.a.createElement(f.a,{variant:"body1",style:{fontWeight:500}},a.name),o.a.createElement("div",{style:{display:"flex",alignItems:"center"}},o.a.createElement(Br.a,{code:_(a.number),className:e.countryFlag}),o.a.createElement(f.a,{variant:"body2",color:"textSecondary"},G(a.number)))))),o.a.createElement(_o.a,null,a.email),o.a.createElement(_o.a,null,(null===(n=a.extraInfo)||void 0===n?void 0:n.company)||a.name.split(" ")[0]+" Enterprises"),o.a.createElement(_o.a,{align:"center"},o.a.createElement(Fe.a,{label:(r=a.status||"Customer",r||"N\xe3o definido"),size:"small",style:{backgroundColor:ae(a.status||"Customer"),color:"#fff",fontWeight:"bold"}})),o.a.createElement(_o.a,{align:"center"},o.a.createElement(J.a,{size:"small","aria-controls":"contact-menu-"+a.id,"aria-haspopup":"true",onClick:e=>Z(e,a),className:e.actionsButton},o.a.createElement(Tr.a,{fontSize:"small"})),o.a.createElement(ne.a,{id:"contact-menu-"+a.id,anchorEl:U,keepMounted:!0,open:Boolean(U)&&A.id===a.id,onClose:ee,transformOrigin:{vertical:"top",horizontal:"right"},PaperProps:{className:e.menuPaper,elevation:2}},o.a.createElement(oe.a,{onClick:()=>{var e;e=a.id,N(e),C(!0),ee()},className:e.actionMenuItem},o.a.createElement(Ir.a,{fontSize:"small",style:{marginRight:8,color:"#2196F3"}}),"Detalhes do Contato"),o.a.createElement(oe.a,{onClick:()=>{I(!0),ee()},className:e.actionMenuItem},o.a.createElement(Mr.a,{fontSize:"small",style:{marginRight:8,color:"#25D366"}}),"Enviar mensagem"),o.a.createElement(oe.a,{onClick:()=>{K(a.id),ee()},className:e.actionMenuItem},o.a.createElement(Po.a,{fontSize:"small",style:{marginRight:8,color:"#5D3FD3"}}),"Editar contato"),o.a.createElement(Re,{role:t.profile,perform:"contacts-page:deleteContact",yes:()=>o.a.createElement(oe.a,{onClick:e=>{F(!0),O(a),ee()},style:{color:"#f44336"},className:e.actionMenuItem},o.a.createElement(an.a,{fontSize:"small",style:{marginRight:8}}),"Excluir contato")}))))}),i&&o.a.createElement(Yo,{avatar:!0,columns:5}),!i&&M&&o.a.createElement(Ko.a,null,o.a.createElement(_o.a,{colSpan:5,style:{textAlign:"center",padding:16}},o.a.createElement(b.a,{variant:"outlined",color:"primary",onClick:X},"Carregar mais contatos"))))))))};const ii=Object(Y.a)(e=>({cardRoot:{borderRadius:18,boxShadow:"0 4px 24px rgba(93,63,211,0.10)",transition:"box-shadow 0.2s, transform 0.2s",minWidth:220,minHeight:120,background:"#fff","&:hover":{boxShadow:"0 8px 32px rgba(93,63,211,0.18)",transform:"translateY(-2px) scale(1.02)"},display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center",margin:8},cardHeader:{padding:"24px 24px 16px 24px",width:"100%",display:"flex",flexDirection:"column",alignItems:"center",background:"none"},cardAvatar:{width:64,height:64,background:"linear-gradient(135deg, #5D3FD3 0%, #8F6FE6 100%)",color:"#fff",marginBottom:12,boxShadow:"0 2px 8px rgba(93,63,211,0.10)",display:"flex",alignItems:"center",justifyContent:"center",fontSize:36,border:"4px solid #f7f7fa"},cardTitle:{fontSize:16,color:"#5D3FD3",fontWeight:700,letterSpacing:.5,marginBottom:2,textAlign:"center",textTransform:"uppercase"},cardSubtitle:{color:"#222",fontSize:28,fontWeight:800,textAlign:"center",marginTop:2,letterSpacing:.5}}));function li(e){const{icon:a,title:t,value:n,loading:r}=e,i=ii();return r?o.a.createElement(yn.a,{variant:"rect",height:120,style:{borderRadius:18,minWidth:220}}):o.a.createElement(hn.a,{className:i.cardRoot,elevation:0},o.a.createElement(xn.a,{className:i.cardHeader,avatar:o.a.createElement(Le.a,{className:i.cardAvatar},a&&o.a.createElement(a,{size:36,color:"#fff"})),title:o.a.createElement(f.a,{variant:"h6",component:"h2",className:i.cardTitle},t),subheader:o.a.createElement(f.a,{variant:"subtitle1",component:"p",className:i.cardSubtitle},n)}))}var si=t(1245),ci=t(399),di=t(1326);const mi=Object(Y.a)(e=>({on:{color:Ie.a[600],fontSize:26,verticalAlign:"middle"},off:{color:ci.a[500],fontSize:26,verticalAlign:"middle"},pointer:{cursor:"pointer"},tableHead:{background:"linear-gradient(90deg, #f3f0fa 0%, #faf9fd 100%)"},tableCellHead:{color:"#5D3FD3",fontWeight:700,fontSize:15,letterSpacing:.2,borderBottom:"2px solid #ece6fa",background:"none"},tableRow:{transition:"background 0.15s","&:hover":{background:"#f3f0fa"}},tableCell:{fontSize:15,padding:"14px 10px",borderBottom:"1px solid #f0eef7"}}));function ui(e){let{rating:a}=e;const t=null===a?0:Math.trunc(a);return o.a.createElement(di.a,{defaultValue:t,max:3,readOnly:!0,size:"small"})}function pi(e){const{loading:a,attendants:t}=e,n=mi();return a?o.a.createElement(yn.a,{variant:"rect",height:150,style:{borderRadius:16}}):o.a.createElement(si.a,{component:wa.a,style:{borderRadius:16,boxShadow:"0 4px 24px rgba(93,63,211,0.08)"}},o.a.createElement(Er.a,null,o.a.createElement(xr.a,{className:n.tableHead},o.a.createElement(Ko.a,null,o.a.createElement(_o.a,{className:n.tableCellHead},"Nome"),o.a.createElement(_o.a,{align:"center",className:n.tableCellHead},"Avalia\xe7\xf5es"),o.a.createElement(_o.a,{align:"center",className:n.tableCellHead},"T.M. de Atendimento"),o.a.createElement(_o.a,{align:"center",className:n.tableCellHead},"Status (Atual)"))),o.a.createElement(hr.a,null,t.map((e,a)=>{return o.a.createElement(Ko.a,{key:a,className:n.tableRow},o.a.createElement(_o.a,{className:n.tableCell},e.name),o.a.createElement(_o.a,{align:"center",className:n.tableCell},o.a.createElement(Sa.a,{title:"1 - Insatisfeito, 2 - Satisfeito, 3 - Muito Satisfeito",arrow:!0},o.a.createElement("span",{className:n.pointer},o.a.createElement(ui,{rating:e.rating})))),o.a.createElement(_o.a,{align:"center",className:n.tableCell},(t=e.avgSupportTime,w()().startOf("day").add(t,"minutes").format("HH[h] mm[m]"))),o.a.createElement(_o.a,{align:"center",className:n.tableCell},e.online?o.a.createElement(Wt.a,{className:n.on}):o.a.createElement(E.a,{className:n.off})));var t}))))}var gi=t(475),fi=t(1246),bi=t(1312),Ei=t(1247),hi=t(677),xi=t(678),yi=t(142),vi=t(205),Ci=t(298),ki=t(676);const Si=Object(Y.a)(e=>({chartCard:{background:"#fff",borderRadius:18,boxShadow:"0 4px 24px rgba(93,63,211,0.10)",padding:e.spacing(3,3,2,3),marginTop:e.spacing(2),marginBottom:e.spacing(2),maxWidth:"100%"},title:{color:"#5D3FD3",fontWeight:700,fontSize:20,marginBottom:e.spacing(2)}}));var Ni=e=>{let{queueTicket:a}=e;const t=Si(),{tickets:r}=La({queueIds:a?`[${a}]`:"[]"}),[i,l]=Object(n.useState)([{time:"00:00",amount:0},{time:"01:00",amount:0},{time:"02:00",amount:0},{time:"03:00",amount:0},{time:"04:00",amount:0},{time:"05:00",amount:0},{time:"06:00",amount:0},{time:"07:00",amount:0},{time:"08:00",amount:0},{time:"09:00",amount:0},{time:"10:00",amount:0},{time:"11:00",amount:0},{time:"12:00",amount:0},{time:"13:00",amount:0},{time:"14:00",amount:0},{time:"15:00",amount:0},{time:"16:00",amount:0},{time:"17:00",amount:0},{time:"18:00",amount:0},{time:"19:00",amount:0},{time:"20:00",amount:0},{time:"21:00",amount:0},{time:"22:00",amount:0},{time:"23:00",amount:0}]);return Object(n.useEffect)(()=>{l(e=>{let a=e.map(e=>({...e,amount:0}));return r.forEach(e=>{const t=Object(ja.a)(Object(gi.a)(Object(Ua.a)(e.createdAt)),"HH:mm"),n=a.findIndex(e=>e.time===t);-1!==n&&a[n].amount++}),a})},[r]),o.a.createElement("div",{className:t.chartCard},o.a.createElement(fi.a,{width:"100%",height:250},o.a.createElement(bi.a,{data:i,margin:{top:5,right:30,left:20,bottom:5}},o.a.createElement(Ei.a,{strokeDasharray:"3 3",stroke:"#ece6fa"}),o.a.createElement(hi.a,{dataKey:"time",stroke:"#b3a6e7",fontSize:13}),o.a.createElement(xi.a,{type:"number",allowDecimals:!1,stroke:"#b3a6e7",fontSize:13},o.a.createElement(yi.a,{angle:270,position:"left",style:{textAnchor:"middle",fill:"#5D3FD3",fontWeight:600}},"Tickets")),o.a.createElement(vi.a,{contentStyle:{borderRadius:12,background:"#faf9fd",border:"1px solid #ece6fa",color:"#222"},labelStyle:{color:"#5D3FD3",fontWeight:700}}),o.a.createElement(Ci.a,null),o.a.createElement(ki.a,{type:"monotone",dataKey:"amount",stroke:"#5D3FD3",strokeWidth:3,activeDot:{r:7}}))))},wi=t(59),Ii=t(379);const Ai=Object(Y.a)(e=>({chartBox:{background:"#fff",borderRadius:18,boxShadow:"0 4px 24px rgba(93,63,211,0.10)",padding:e.spacing(3,3,2,3),marginTop:e.spacing(2),marginBottom:e.spacing(2),maxWidth:"100%"},title:{color:"#5D3FD3",fontWeight:700,fontSize:20,marginBottom:e.spacing(2)},filterStack:{marginBottom:e.spacing(2),marginTop:e.spacing(1),flexWrap:"wrap"},dateInput:{borderRadius:10,background:"#faf9fd",minWidth:120,boxShadow:"0 1px 4px rgba(93,63,211,0.04)"},button:{borderRadius:10,fontWeight:700,fontSize:16,padding:"10px 18px",background:"#5D3FD3",color:"#fff",boxShadow:"0 2px 8px rgba(93,63,211,0.10)",textTransform:"none","&:hover":{background:"#4930A8"},display:"flex",alignItems:"center",gap:8,marginLeft:8},chart:{maxWidth:"100%",maxHeight:320}}));wi.f.register(wi.e,wi.j,wi.c,wi.p,wi.q,wi.h);const Ti={responsive:!0,plugins:{legend:{display:!1},title:{display:!1},datalabels:{display:!0,anchor:"end",align:"end",color:"#5D3FD3",font:{size:16,weight:"bold"},formatter:e=>e>0?e:""},tooltip:{backgroundColor:"#fff",titleColor:"#5D3FD3",bodyColor:"#222",borderColor:"#ece6fa",borderWidth:1,padding:12,caretSize:8,cornerRadius:8,displayColors:!1,callbacks:{label:e=>"Total: "+e.parsed.y}}},layout:{padding:{top:16,bottom:8,left:8,right:8}},scales:{x:{grid:{display:!1},ticks:{color:"#5D3FD3",font:{weight:"bold",size:14}}},y:{beginAtZero:!0,grid:{color:"#ece6fa",borderDash:[4,4]},ticks:{color:"#666",font:{size:13},stepSize:1}}},animation:{duration:900,easing:"easeOutQuart"},elements:{bar:{borderRadius:12,borderSkipped:!1}}},Di=e=>{let{ticketsData:a}=e;const t=Ai(),r=Object(n.useRef)();const i=o.a.useMemo(()=>{let e="#5D3FD3";return r.current&&r.current.ctx&&r.current.chartArea&&(e=function(e,a){const t=e.createLinearGradient(0,a.bottom,0,a.top);return t.addColorStop(0,"#8F6FE6"),t.addColorStop(1,"#5D3FD3"),t}(r.current.ctx,r.current.chartArea)),{labels:a&&(null===a||void 0===a?void 0:a.data.length)>0&&(null===a||void 0===a?void 0:a.data.map(e=>e.hasOwnProperty("horario")?`Das ${e.horario}:00 as ${e.horario}:59`:e.data)),datasets:[{data:(null===a||void 0===a?void 0:a.data.length)>0&&(null===a||void 0===a?void 0:a.data.map(e=>e.total)),backgroundColor:e,borderRadius:12,maxBarThickness:38,minBarLength:2}]}},[a,r.current]);return o.a.createElement("div",{className:t.chartBox},o.a.createElement(f.a,{component:"h2",variant:"h6",className:t.title,gutterBottom:!0},"Total de Atendimentos"),o.a.createElement(Ii.a,{ref:r,options:Ti,data:i,className:t.chart,redraw:!0}))};var Oi=t(484);wi.f.register(wi.a,wi.q,wi.h,Oi.a);const ji=Object(Y.a)(e=>({container:{paddingTop:e.spacing(1),paddingBottom:e.spacing(2),paddingLeft:e.spacing(1),paddingRight:e.spacing(2)},chartBox:{background:"#fff",borderRadius:18,boxShadow:"0 4px 24px rgba(93,63,211,0.10)",padding:e.spacing(3,3,2,3),marginTop:e.spacing(2),marginBottom:e.spacing(2),maxWidth:"100%"},title:{color:"#5D3FD3",fontWeight:700,fontSize:20,marginBottom:e.spacing(2)},filterStack:{marginBottom:e.spacing(2),marginTop:e.spacing(1),flexWrap:"wrap"},dateInput:{borderRadius:10,background:"#faf9fd",minWidth:120,boxShadow:"0 1px 4px rgba(93,63,211,0.04)"},button:{borderRadius:10,fontWeight:700,fontSize:16,padding:"10px 18px",background:"#5D3FD3",color:"#fff",boxShadow:"0 2px 8px rgba(93,63,211,0.10)",textTransform:"none","&:hover":{background:"#4930A8"},display:"flex",alignItems:"center",gap:8,marginLeft:8},chart:{maxWidth:"100%",maxHeight:340}})),Ri=["#5D3FD3","#8F6FE6","#A3A1FB","#B5B2FF","#C7C6FF","#E0DFFF","#F3F0FA","#6AD1E3","#FFB86B","#FF6B81","#FFD36B","#6BFFB8","#6B8EFF","#FF6BCE"],Fi={responsive:!0,plugins:{legend:{display:!0,position:"right",labels:{color:"#5D3FD3",font:{size:15,weight:"bold"},padding:18}},datalabels:{color:"#fff",font:{weight:"bold",size:15},formatter:(e,a)=>e>0?e:""},tooltip:{backgroundColor:"#fff",titleColor:"#5D3FD3",bodyColor:"#222",borderColor:"#ece6fa",borderWidth:1,padding:12,caretSize:8,cornerRadius:8,displayColors:!0,callbacks:{label:e=>`${e.label}: ${e.parsed} conversas`}}},animation:{animateRotate:!0,duration:1200,easing:"easeOutQuart"}},Mi=e=>{let{ticketsData:a,loading:t}=e;const r=ji(),i=Object(n.useRef)(),l=o.a.useMemo(()=>{if(!a||!a.data||0===a.data.length)return{labels:[],datasets:[{data:[],backgroundColor:[],borderWidth:2,borderColor:"#fff"}]};const e=a.data.map(e=>e.nome);return{labels:e,datasets:[{data:a.data.map(e=>e.quantidade),backgroundColor:Ri.slice(0,e.length),borderWidth:2,borderColor:"#fff"}]}},[a]);return t?o.a.createElement("div",{className:r.chartBox},o.a.createElement(f.a,{component:"h2",variant:"h6",className:r.title,gutterBottom:!0},"Total de Conversas por Usu\xe1rios"),o.a.createElement("div",{style:{display:"flex",justifyContent:"center",alignItems:"center",height:"300px"}},o.a.createElement(f.a,null,"Carregando..."))):a&&a.data&&0!==a.data.length?o.a.createElement("div",{className:r.chartBox},o.a.createElement(f.a,{component:"h2",variant:"h6",className:r.title,gutterBottom:!0},"Total de Conversas por Usu\xe1rios"),o.a.createElement(Ii.b,{ref:i,options:Fi,data:l,className:r.chart,plugins:[Oi.a],redraw:!0})):o.a.createElement("div",{className:r.chartBox},o.a.createElement(f.a,{component:"h2",variant:"h6",className:r.title,gutterBottom:!0},"Total de Conversas por Usu\xe1rios"),o.a.createElement("div",{style:{display:"flex",justifyContent:"center",alignItems:"center",height:"300px"}},o.a.createElement(f.a,null,"Nenhum dado dispon\xedvel para o per\xedodo selecionado")))};var Pi=t(1248);var Bi=e=>{let{children:a,className:t}=e;return o.a.createElement(f.a,{component:"h2",variant:"h5",style:{color:"#5D3FD3",fontWeight:800,fontSize:22,marginBottom:18},gutterBottom:!0,className:t},a)};const zi=Object(Y.a)(e=>({paper:{borderRadius:18,boxShadow:"0 4px 24px rgba(93,63,211,0.10)",padding:e.spacing(4,3,3,3),marginBottom:e.spacing(2),background:"#fff"},title:{color:"#5D3FD3",fontWeight:700,fontSize:20,marginBottom:e.spacing(2)},formControl:{borderRadius:10,background:"#faf9fd",minHeight:48,marginBottom:e.spacing(1)},select:{borderRadius:10,background:"#fff",minHeight:48},textField:{borderRadius:10,background:"#fff",minHeight:48},button:{borderRadius:10,fontWeight:700,fontSize:16,padding:"12px 0",background:"#5D3FD3",color:"#fff",boxShadow:"0 2px 8px rgba(93,63,211,0.10)",textTransform:"none","&:hover":{background:"#4930A8"},display:"flex",alignItems:"center",gap:8}}));var Wi=e=>{let{classes:a,setDateStartTicket:t,setDateEndTicket:r,dateStartTicket:i,dateEndTicket:l,setQueueTicket:s,queueTicket:c}=e;const{user:d}=Object(n.useContext)(H),m=zi(),[u,p]=o.a.useState(c),[g,f]=o.a.useState(i),[E,h]=o.a.useState(l);return o.a.createElement(_t.a,{item:!0,xs:12},o.a.createElement(wa.a,{className:m.paper,elevation:6},o.a.createElement("div",{className:m.title},o.a.createElement(Bi,null,"Filtros")),o.a.createElement(_t.a,{container:!0,spacing:3,alignItems:"center"},o.a.createElement(_t.a,{item:!0,xs:12,sm:6,md:3},o.a.createElement(ke.a,{fullWidth:!0,className:m.formControl,variant:"outlined"},o.a.createElement(Se.a,{id:"queue-label"},"Departamentos"),o.a.createElement(Ne.a,{labelId:"queue-label",id:"queue-select",value:u,label:"Departamentos",onChange:e=>p(e.target.value),className:m.select},o.a.createElement(oe.a,{value:!1},"Todos os Departamentos"),d.queues.map(e=>o.a.createElement(oe.a,{key:e.id,value:e.id},e.name))))),o.a.createElement(_t.a,{item:!0,xs:12,sm:6,md:4},o.a.createElement(Ce.a,{fullWidth:!0,name:"dateStart",label:"De",InputLabelProps:{shrink:!0},type:"date",value:g,onChange:e=>f(e.target.value),variant:"outlined",className:m.textField})),o.a.createElement(_t.a,{item:!0,xs:12,sm:6,md:4},o.a.createElement(Ce.a,{fullWidth:!0,name:"dateEnd",label:"At\xe9",InputLabelProps:{shrink:!0},type:"date",value:E,onChange:e=>h(e.target.value),variant:"outlined",className:m.textField})),o.a.createElement(_t.a,{item:!0,xs:12,sm:6,md:1},o.a.createElement(b.a,{fullWidth:!0,variant:"contained",color:"primary",className:m.button,onClick:()=>{s(u),t(g),r(E)},startIcon:o.a.createElement(Pi.a,{size:18})},"Filtrar")))))};var Li=e=>{let{searchParam:a,pageNumber:t,date:o,dateStart:r,dateEnd:i}=e;const[l,s]=Object(n.useState)(!0),[c,d]=Object(n.useState)(!1),[m,u]=Object(n.useState)([]),[p,g]=Object(n.useState)(0);return Object(n.useEffect)(()=>{s(!0);const e=setTimeout(()=>{(async()=>{try{const{data:e}=await B.get("/contacts",{params:{searchParam:a,pageNumber:t,date:o,dateStart:r,dateEnd:i}});u(e.contacts),d(e.hasMore),g(e.count),s(!1)}catch(e){s(!1),y.toast.error(e.message)}})()},500);return()=>clearTimeout(e)},[a,t,o,r,i]),{contacts:m,loading:l,hasMore:c,count:p}};var qi=()=>({find:async e=>{const{data:a}=await B.request({url:"/dashboard",method:"GET",params:e});return a}}),Hi=t(1249),Ui=t(1250),Vi=t(1251),Gi=t(1252);const _i=Object(Y.a)(e=>({container:{paddingTop:e.spacing(4),paddingBottom:e.spacing(4),paddingLeft:e.spacing(4),paddingRight:e.spacing(4),[e.breakpoints.down("sm")]:{paddingLeft:e.spacing(1),paddingRight:e.spacing(1)}},cardGrid:{marginBottom:e.spacing(3)},cardWrapper:{display:"flex",justifyContent:"center",alignItems:"stretch",width:"100%"},sectionPaper:{background:"#fff",borderRadius:18,boxShadow:"0 4px 24px rgba(93,63,211,0.10)",padding:e.spacing(3,3,2,3),marginBottom:e.spacing(3),width:"100%",maxWidth:1800,marginLeft:"auto",marginRight:"auto"}}));var Ki=()=>{const e=_i(),[a,t]=Object(n.useState)({}),[r,i]=Object(n.useState)([]),[l,s]=Object(n.useState)(0),[c,d]=Object(n.useState)(1),[m,u]=Object(n.useState)(w()().subtract(7,"days").format("YYYY-MM-DD")),[p,g]=Object(n.useState)(w()().format("YYYY-MM-DD")),[f,b]=Object(n.useState)(!1),{find:E}=qi(),[h,x]=Object(n.useState)(!1),{user:v}=Object(n.useContext)(H),[C,S]=Object(n.useState)({data:[]}),[N,I]=Object(n.useState)({data:[]});async function A(){try{b(!0);const e=localStorage.getItem("companyId"),a=await B.get(`/dashboard/ticketsUsers?initialDate=${Object(ja.a)(new Date(m),"yyyy-MM-dd")}&finalDate=${Object(ja.a)(new Date(p),"yyyy-MM-dd")}&companyId=${e}`);S(a.data);const t=await B.get(`/dashboard/ticketsDay?initialDate=${Object(ja.a)(new Date(m),"yyyy-MM-dd")}&finalDate=${Object(ja.a)(new Date(p),"yyyy-MM-dd")}&companyId=${e}`);I(t.data),b(!1)}catch(e){y.toast.error("Erro ao carregar dados dos gr\xe1ficos"),b(!1)}}async function T(){b(!0);try{let e={};if(l>0&&(e={days:l}),!Object(k.isEmpty)(m)&&w()(m).isValid()&&(e={...e,date_from:w()(m).format("YYYY-MM-DD")}),!Object(k.isEmpty)(p)&&w()(p).isValid()&&(e={...e,date_to:w()(p).format("YYYY-MM-DD")}),0===Object.keys(e).length)return y.toast.error("Parametrize o filtro"),void b(!1);const a=await E(e);t(a.counters),Object(k.isArray)(a.attendants)?i(a.attendants):i([])}catch(e){y.toast.error("Erro ao carregar dados do dashboard")}finally{b(!1)}}function D(e){return w()().startOf("day").add(e,"minutes").format("HH[h] mm[m]")}Object(n.useEffect)(()=>{!async function(){await T(),await A()}()},[]),Object(n.useEffect)(()=>{A(),T()},[m,p,h]);const O=[v.super&&{title:"Conex\xf5es Ativas",value:a.totalWhatsappSessions,icon:Hi.a,loading:f},v.super&&{title:"Empresas",value:a.totalCompanies,icon:Ui.a,loading:f},{title:"Em Conversa",value:a.supportHappening,icon:xo.a,loading:f},{title:"Aguardando",value:a.supportPending,icon:Vi.a,loading:f},{title:"Finalizados",value:a.supportFinished,icon:Wt.a,loading:f},{title:"Novos Contatos",value:(e=>{let a={};e&&(a={});const{count:t}=Li(a);return t})(!0),icon:Gi.a,loading:f},{title:"T.M. de Conversa",value:D(a.avgSupportTime),icon:xt.a,loading:f},{title:"T.M. de Espera",value:D(a.avgWaitTime),icon:xt.a,loading:f}].filter(Boolean);return o.a.createElement("div",null,o.a.createElement(Zn.a,{maxWidth:"xl",className:e.container},o.a.createElement(Wi,{setQueueTicket:x,queueTicket:h,setDateStartTicket:u,setDateEndTicket:g,dateStartTicket:m,dateEndTicket:p,loading:f}),o.a.createElement(_t.a,{container:!0,spacing:4,className:e.cardGrid},O.map((a,t)=>o.a.createElement(_t.a,{item:!0,xs:12,sm:6,md:3,lg:3,xl:2,key:t,className:e.cardWrapper},o.a.createElement(li,{icon:a.icon,title:a.title,value:a.value,loading:f})))),o.a.createElement(_t.a,{container:!0,spacing:4},o.a.createElement(_t.a,{item:!0,xs:12,md:6},o.a.createElement("div",{className:e.sectionPaper},o.a.createElement(Bi,null,"Atendimentos por Hora"),o.a.createElement(Ni,{queueTicket:h,dateFrom:m,dateTo:p}))),o.a.createElement(_t.a,{item:!0,xs:12,md:6},o.a.createElement("div",{className:e.sectionPaper},o.a.createElement(Mi,{ticketsData:C,loading:f})))),o.a.createElement(_t.a,{container:!0,spacing:4},o.a.createElement(_t.a,{item:!0,xs:12},o.a.createElement("div",{className:e.sectionPaper},o.a.createElement(Bi,null,"Status dos Atendentes"),o.a.createElement(pi,{attendants:r,loading:f})))),o.a.createElement(_t.a,{container:!0,spacing:4},o.a.createElement(_t.a,{item:!0,xs:12},o.a.createElement("div",{className:e.sectionPaper},o.a.createElement(Di,{ticketsData:N,loading:f}))))))},Qi=t(1253),Yi=t(1254),Xi=t(1255),$i=t(1256),Ji=t(1257);const Zi=Object(Y.a)(e=>({mainWrapper:{minHeight:"100vh",width:"100%",background:"linear-gradient(135deg, #f7f8fa 60%, #e5e0fa 100%)",display:"flex",flexDirection:"column",alignItems:"center",padding:e.spacing(0,0,6,0)},card:{maxWidth:1100,width:"100%",margin:"0 auto",background:"#fff",borderRadius:22,boxShadow:"0 4px 32px rgba(93,63,211,0.10)",padding:e.spacing(3,2,2,2),marginTop:e.spacing(2),marginBottom:e.spacing(2),[e.breakpoints.down("sm")]:{padding:e.spacing(1,.5,1,.5),borderRadius:12}},header:{display:"flex",alignItems:"center",gap:16,marginBottom:e.spacing(2),paddingLeft:e.spacing(1)},title:{fontWeight:700,fontSize:26,color:"#5D3FD3",letterSpacing:.2,display:"flex",alignItems:"center",gap:10},desc:{color:"#888",fontSize:16,fontWeight:400,marginLeft:2,marginTop:2},invoiceCard:{background:"#fff",borderRadius:24,padding:e.spacing(3),boxShadow:"0 4px 20px rgba(93,63,211,0.08)",transition:"all 0.3s ease",border:"1px solid #f0f0f0",position:"relative",overflow:"hidden",display:"flex",flexDirection:"column",height:"100%","&:hover":{transform:"translateY(-4px)",boxShadow:"0 8px 30px rgba(93,63,211,0.15)"}},invoiceCardVencido:{background:"#fff5f5",border:"1px solid #ffebee"},cardHeader:{display:"flex",justifyContent:"space-between",alignItems:"flex-start",marginBottom:e.spacing(2)},cardLeft:{display:"flex",flexDirection:"column",gap:8},cardRight:{display:"flex",flexDirection:"column",alignItems:"flex-end",gap:8},invoiceId:{display:"flex",alignItems:"center",gap:8,color:"#666",fontSize:14,fontWeight:500,background:"#f8f7ff",padding:"6px 14px",borderRadius:12},invoiceValue:{fontSize:32,fontWeight:700,color:"#5D3FD3",display:"flex",alignItems:"center",gap:8,marginTop:e.spacing(1)},invoiceDetail:{color:"#444",fontSize:16,lineHeight:1.5,fontWeight:500,marginTop:e.spacing(2),padding:e.spacing(2),background:"#f8f7ff",borderRadius:12,flex:1},infoSection:{display:"flex",flexDirection:"column",gap:12,marginTop:e.spacing(2)},infoItem:{display:"flex",alignItems:"center",gap:12,color:"#666",fontSize:14,padding:"10px 16px",background:"#f8f7ff",borderRadius:12,"& svg":{color:"#5D3FD3"}},badge:{display:"inline-flex",alignItems:"center",gap:6,borderRadius:12,padding:"8px 16px",fontWeight:600,fontSize:14,boxShadow:"0 2px 8px rgba(93,63,211,0.08)"},badgePago:{background:"#e6fbe6",color:"#2e7d32"},badgeVencido:{background:"#ffebee",color:"#c62828"},badgeAberto:{background:"#e3e6fd",color:"#5D3FD3"},actionSection:{marginTop:"auto",paddingTop:e.spacing(2)},payButton:{borderRadius:16,fontWeight:600,fontSize:16,padding:"12px 24px",textTransform:"none",background:"linear-gradient(90deg, #5D3FD3 0%, #7B68EE 100%)",color:"#fff",boxShadow:"0 4px 12px rgba(93,63,211,0.15)",transition:"all 0.2s","&:hover":{background:"linear-gradient(90deg, #4930A8 0%, #6A5ACD 100%)",boxShadow:"0 6px 16px rgba(93,63,211,0.25)"},width:"100%"},paidButton:{borderRadius:16,fontWeight:600,fontSize:16,padding:"12px 24px",textTransform:"none",background:"#e6fbe6",color:"#2e7d32",boxShadow:"0 2px 8px rgba(46,125,50,0.08)",width:"100%"},emptyBox:{display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",height:320,color:"#888",gap:12,background:"#fff",borderRadius:12,margin:e.spacing(4,0),boxShadow:"0 1px 6px rgba(93,63,211,0.06)"},gridContainer:{marginTop:e.spacing(2)},container:{paddingTop:e.spacing(4),paddingBottom:e.spacing(4),paddingLeft:e.spacing(4),paddingRight:e.spacing(4),[e.breakpoints.down("sm")]:{paddingLeft:e.spacing(1),paddingRight:e.spacing(1)}}})),el=(e,a)=>{if("LOAD_INVOICES"===a.type){const t=a.payload,n=[];return t.forEach(a=>{const t=e.findIndex(e=>e.id===a.id);-1!==t?e[t]=a:n.push(a)}),[...e,...n]}if("UPDATE_USERS"===a.type){const t=a.payload,n=e.findIndex(e=>e.id===t.id);return-1!==n?(e[n]=t,[...e]):[t,...e]}if("DELETE_USER"===a.type){const t=a.payload,n=e.findIndex(e=>e.id===t);return-1!==n&&e.splice(n,1),[...e]}if("RESET"===a.type)return[]};var al=()=>{const e=Zi(),[a,t]=Object(n.useState)(!1),[r,i]=Object(n.useState)(1),[l,s]=Object(n.useState)(!1),[c,d]=Object(n.useState)(""),[m,u]=Object(n.useReducer)(el,[]),[p,E]=o.a.useState([]),[h,x]=Object(n.useState)(null),[v,C]=Object(n.useState)(!1);Object(n.useEffect)(()=>{u({type:"RESET"}),i(1)},[c]),Object(n.useEffect)(()=>{t(!0);const e=setTimeout(()=>{(async()=>{try{const{data:e}=await B.get("/invoices/all",{params:{searchParam:c,pageNumber:r}});u({type:"LOAD_INVOICES",payload:e}),s(e.hasMore),t(!1)}catch(e){y.toast.error(e.message)}})()},500);return()=>clearTimeout(e)},[c,r]);return o.a.createElement(Zn.a,{maxWidth:"xl",className:e.container},o.a.createElement("div",{className:e.card},o.a.createElement("div",{className:e.header},o.a.createElement(Yi.a,{size:36,style:{color:"#5D3FD3"}}),o.a.createElement("div",null,o.a.createElement("div",{className:e.title},"Faturas"),o.a.createElement("div",{className:e.desc},"Gerencie e pague suas faturas de forma simples, r\xe1pida e segura."))),0===m.length?o.a.createElement(g.a,{className:e.emptyBox},o.a.createElement(Xi.a,{size:48}),o.a.createElement(f.a,{variant:"h6",style:{color:"#5D3FD3",fontWeight:600}},"Nenhuma fatura encontrada"),o.a.createElement(f.a,{variant:"body2"},"Suas faturas aparecer\xe3o aqui assim que forem geradas.")):o.a.createElement(_t.a,{container:!0,spacing:3,className:e.gridContainer},m.map(a=>{const t=(a=>{const t=w()(w()()).format("DD/MM/yyyy"),n=w()(a.dueDate).format("DD/MM/yyyy");var r=w()(n,"DD/MM/yyyy").diff(w()(t,"DD/MM/yyyy")),i=w.a.duration(r).asDays();return"paid"===a.status?{label:"Pago",badge:e.badgePago,icon:o.a.createElement(Qn.a,{size:16})}:i<0?{label:"Vencido",badge:e.badgeVencido,icon:o.a.createElement(Qi.a,{size:16})}:{label:"Em Aberto",badge:e.badgeAberto,icon:o.a.createElement(xt.a,{size:16})}})(a),n="Vencido"===t.label;return o.a.createElement(_t.a,{item:!0,xs:12,sm:6,md:4,key:a.id},o.a.createElement(wa.a,{className:`${e.invoiceCard} ${n?e.invoiceCardVencido:""}`,elevation:0},o.a.createElement("div",{className:e.cardHeader},o.a.createElement("div",{className:e.cardLeft},o.a.createElement("div",{className:e.invoiceId},o.a.createElement($i.a,{size:16}),"#",a.id),o.a.createElement("div",{className:e.invoiceValue},o.a.createElement(da.a,{size:28}),a.value.toLocaleString("pt-br",{style:"currency",currency:"BRL"}))),o.a.createElement("div",{className:e.cardRight},o.a.createElement("span",{className:`${e.badge} ${t.badge}`},t.icon," ",t.label))),o.a.createElement("div",{className:e.invoiceDetail},a.detail),o.a.createElement("div",{className:e.infoSection},o.a.createElement("div",{className:e.infoItem},o.a.createElement($e.a,{size:18}),"Vencimento:"," ",w()(a.dueDate).format("DD/MM/YYYY"))),o.a.createElement("div",{className:e.actionSection},"Pago"!==t.label?o.a.createElement(b.a,{variant:"contained",className:e.payButton,startIcon:o.a.createElement(Ji.a,{size:20}),onClick:()=>(e=>{E(e),x(null),C(!0)})(a)},"PAGAR AGORA"):o.a.createElement(b.a,{variant:"outlined",className:e.paidButton,startIcon:o.a.createElement(Qn.a,{size:20}),disabled:!0},"PAGO"))))})),a&&o.a.createElement(_t.a,{container:!0,spacing:3,className:e.gridContainer},[1,2,3].map(e=>o.a.createElement(_t.a,{item:!0,xs:12,sm:6,md:4,key:e},o.a.createElement("table",null,o.a.createElement("tbody",null,o.a.createElement(Yo,{columns:1}))))))))};function tl(e){return o.a.createElement(f.a,{variant:"h5",color:"primary",gutterBottom:!0},e.children)}var nl=()=>({findAll:async e=>{const{data:a}=await B.request({url:"/helps",method:"GET",params:e});return a},list:async e=>{const{data:a}=await B.request({url:"/helps/list",method:"GET",params:e});return a},save:async e=>{const{data:a}=await B.request({url:"/helps",method:"POST",data:e});return a},update:async e=>{const{data:a}=await B.request({url:"/helps/"+e.id,method:"PUT",data:e});return a},remove:async e=>{const{data:a}=await B.request({url:"/helps/"+e,method:"DELETE"});return a}});const ol=Object(Y.a)(e=>({mainPaperContainer:{overflowY:"auto",maxHeight:"calc(100vh - 200px)"},mainPaper:{width:"100%",display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(320px, 1fr))",gap:e.spacing(3),padding:e.spacing(2),marginBottom:e.spacing(3)},helpPaper:{position:"relative",width:"100%",minHeight:"340px",padding:e.spacing(2),boxShadow:e.shadows[3],borderRadius:e.spacing(1),cursor:"pointer",display:"flex",flexDirection:"column",justifyContent:"space-between",maxWidth:"340px"},paperHover:{transition:"transform 0.3s, box-shadow 0.3s","&:hover":{transform:"scale(1.03)",boxShadow:"0 0 8px",color:e.palette.primary.main}},videoThumbnail:{width:"100%",height:"calc(100% - 56px)",objectFit:"cover",borderRadius:`${e.spacing(1)}px ${e.spacing(1)}px 0 0`},videoTitle:{marginTop:e.spacing(1),flex:1},videoDescription:{maxHeight:"100px",overflow:"hidden"},videoModal:{display:"flex",alignItems:"center",justifyContent:"center"},videoModalContent:{outline:"none",width:"90%",maxWidth:1024,aspectRatio:"16/9",position:"relative",backgroundColor:"white",borderRadius:e.spacing(1),overflow:"hidden"},container:{paddingTop:e.spacing(4),paddingBottom:e.spacing(4),paddingLeft:e.spacing(4),paddingRight:e.spacing(4),[e.breakpoints.down("sm")]:{paddingLeft:e.spacing(1),paddingRight:e.spacing(1)}}}));var rl=()=>{const e=ol(),[a,t]=Object(n.useState)([]),{list:r}=nl(),[i,l]=Object(n.useState)(null);Object(n.useEffect)(()=>{!async function(){const e=await r();t(e)}()},[]);const s=()=>{l(null)},c=Object(n.useCallback)(e=>{"Escape"===e.key&&s()},[]);Object(n.useEffect)(()=>(document.addEventListener("keydown",c),()=>{document.removeEventListener("keydown",c)}),[c]);return o.a.createElement(Zn.a,{maxWidth:"xl",className:e.container},o.a.createElement(no,null,o.a.createElement(tl,null,z.a.t("helps.title")," (",a.length,")"),o.a.createElement(ro,null)),o.a.createElement("div",{className:e.mainPaper},o.a.createElement(o.a.Fragment,null,o.a.createElement("div",{className:`${e.mainPaper} ${e.mainPaperContainer}`},a.length?a.map((a,t)=>o.a.createElement(wa.a,{key:t,className:`${e.helpPaper} ${e.paperHover}`,onClick:()=>{return e=a.video,void l(e);var e}},o.a.createElement("img",{src:`https://img.youtube.com/vi/${a.video}/mqdefault.jpg`,alt:"Thumbnail",className:e.videoThumbnail}),o.a.createElement(f.a,{variant:"button",className:e.videoTitle},a.title),o.a.createElement(f.a,{variant:"caption",className:e.videoDescription},a.description))):null))),o.a.createElement(Kt.a,{open:Boolean(i),onClose:s,className:e.videoModal},o.a.createElement("div",{className:e.videoModalContent},i&&o.a.createElement("iframe",{style:{width:"100%",height:"100%",position:"absolute",top:0,left:0},src:"https://www.youtube.com/embed/"+i,title:"YouTube video player",frameBorder:"0",allow:"accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture",allowFullScreen:!0}))))},il=t(1259),ll=t(218),sl=t.n(ll),cl=t(380),dl=t.n(cl);const ml=()=>o.a.createElement(f.a,{variant:"body2",color:"primary",align:"center"}),ul=Object(Y.a)(e=>({root:{width:"100vw",height:"100vh",display:"flex",background:"linear-gradient(to right,rgb(244, 244, 246),rgb(141, 145, 254))",flexDirection:"column",alignItems:"center",justifyContent:"center",textAlign:"center"},paper:{backgroundColor:"white",display:"flex",flexDirection:"column",alignItems:"center",padding:"40px 30px",borderRadius:"8px",boxShadow:"0px 4px 10px rgba(0, 0, 0, 0.1)",width:"400px"},logo:{width:"200px",height:"auto",marginBottom:"20px"},title:{color:"#6151FF",fontWeight:"bold",fontSize:"28px",marginBottom:"10px"},subtitle:{color:"#666",fontSize:"14px",marginBottom:"30px"},form:{width:"100%",marginTop:e.spacing(1)},submit:{margin:e.spacing(3,0,2),padding:"12px",backgroundColor:"#6151FF",borderRadius:"6px",textTransform:"none",fontWeight:"bold",fontSize:"16px","&:hover":{backgroundColor:"#4C3FD9"}},textField:{marginBottom:"15px","& .MuiOutlinedInput-root":{borderRadius:"6px"}},inputIcon:{color:"#6151FF"},forgotPassword:{color:"#6151FF",textAlign:"right",textDecoration:"none",fontSize:"14px",fontWeight:"500"},rememberMe:{fontSize:"14px"}}));var pl=()=>{const e=ul(),[a,t]=Object(n.useState)(!0),[r,i]=Object(n.useState)({email:"",password:""}),[s,c]=Object(n.useState)(!1),[d,m]=Object(n.useState)(!1),{handleLogin:u}=Object(n.useContext)(H);Object(n.useEffect)(()=>(t(!0),()=>{t(!1)}),[]);const E=e=>{a&&i({...r,[e.target.name]:e.target.value})};return o.a.createElement("div",{className:e.root},o.a.createElement(Zn.a,{component:"main",maxWidth:"xs"},o.a.createElement(l.a,null),o.a.createElement("div",{className:e.paper},o.a.createElement("img",{src:dl.a,alt:"Logo",className:e.logo}),o.a.createElement(f.a,{className:e.subtitle,component:"p"},z.a.t("login.title")),o.a.createElement("form",{className:e.form,onSubmit:async e=>{if(e.preventDefault(),a)try{m(!0),await u(r)}catch(o){var t,n;if(a)y.toast.error((null===(t=o.response)||void 0===t||null===(n=t.data)||void 0===n?void 0:n.error)||"Erro ao fazer login")}finally{a&&m(!1)}}},o.a.createElement(Ce.a,{className:e.textField,variant:"outlined",margin:"normal",required:!0,fullWidth:!0,id:"email",placeholder:"your@email.com",label:z.a.t("login.form.email"),name:"email",value:r.email,onChange:E,autoComplete:"email",autoFocus:!0,disabled:d,InputProps:{startAdornment:o.a.createElement(Do.a,{position:"start"},o.a.createElement(zo.a,{className:e.inputIcon}))}}),o.a.createElement(Ce.a,{className:e.textField,variant:"outlined",margin:"normal",required:!0,fullWidth:!0,name:"password",label:z.a.t("login.form.password"),placeholder:"********",type:"password",id:"password",value:r.password,onChange:E,autoComplete:"current-password",disabled:d,InputProps:{startAdornment:o.a.createElement(Do.a,{position:"start"},o.a.createElement(sl.a,{className:e.inputIcon}))}}),o.a.createElement(_t.a,{container:!0,justifyContent:"space-between",alignItems:"center"},o.a.createElement(_t.a,{item:!0},o.a.createElement(go.a,{control:o.a.createElement(_r.a,{checked:s,onChange:e=>{a&&c(e.target.checked)},color:"primary",size:"small",disabled:d}),label:o.a.createElement(f.a,{className:e.rememberMe},"Lembrar-me")})),o.a.createElement(_t.a,{item:!0},o.a.createElement(il.a,{component:p.b,to:"/forgetpsw",className:e.forgotPassword},"Esqueceu sua senha?"))),o.a.createElement(b.a,{type:"submit",fullWidth:!0,variant:"contained",color:"primary",className:e.submit,disabled:d},d?"Entrando...":z.a.t("login.buttons.submit")),o.a.createElement(_t.a,{container:!0},o.a.createElement(_t.a,{item:!0},o.a.createElement(il.a,{href:"#",variant:"body2",component:p.b,to:"/signup",className:e.forgotPassword},z.a.t("login.buttons.register")))))),o.a.createElement(g.a,{mt:8},o.a.createElement(ml,null))))},gl=t(1260),fl=t(1261),bl=t(1262),El=t(1263),hl=t(743);const xl=Object(Y.a)(e=>({mainPaper:{flex:1,padding:e.spacing(4,2,8,2),background:"linear-gradient(135deg, #f7f8fa 60%, #e5e0fa 100%)",minHeight:"100vh"},header:{display:"flex",alignItems:"center",gap:18,marginBottom:e.spacing(3)},headerTitle:{fontWeight:700,fontSize:28,color:"#5D3FD3",letterSpacing:.2},headerDesc:{color:"#888",fontSize:16,fontWeight:400,marginTop:2},card:{borderRadius:18,boxShadow:"0 4px 24px rgba(93,63,211,0.10)",marginBottom:e.spacing(4),background:"#fff",overflow:"hidden"},cardHeader:{background:"linear-gradient(90deg, #5D3FD3 0%, #7B68EE 100%)",color:"#fff",padding:e.spacing(2,3),fontWeight:600,fontSize:20,display:"flex",alignItems:"center",gap:10},cardContent:{padding:e.spacing(3,3,2,3)},exampleBox:{background:"#f8f7ff",borderRadius:10,padding:e.spacing(2),margin:e.spacing(2,0),fontFamily:"monospace",fontSize:15,color:"#5D3FD3",wordBreak:"break-all"},formSection:{marginTop:e.spacing(2),background:"#f7f8fa",borderRadius:12,padding:e.spacing(2,2,2,2)},btnWrapper:{minWidth:120,borderRadius:12,fontWeight:600,fontSize:16,textTransform:"none",background:"linear-gradient(90deg, #5D3FD3 0%, #7B68EE 100%)",color:"#fff",boxShadow:"0 4px 12px rgba(93,63,211,0.10)","&:hover":{background:"linear-gradient(90deg, #4930A8 0%, #6A5ACD 100%)"}},textRight:{textAlign:"right"},labelIcon:{color:"#5D3FD3",marginRight:6,verticalAlign:"middle"},dropzone:{border:"2px dashed #7B68EE",borderRadius:14,background:"#f8f7ff",padding:e.spacing(3),textAlign:"center",color:"#5D3FD3",cursor:"pointer",transition:"border-color 0.2s, background 0.2s",outline:"none",marginTop:e.spacing(1),marginBottom:e.spacing(1),"&:hover, &.active":{borderColor:"#5D3FD3",background:"#e3e6fd"}},dropzoneIcon:{color:"#7B68EE",marginBottom:8},dropzoneFileName:{color:"#444",fontWeight:500,marginTop:8,fontSize:15}}));var yl=()=>{const e=xl(),a=Object(S.useHistory)(),[t]=Object(n.useState)({token:"",number:"",body:""}),[r]=Object(n.useState)({token:"",number:"",medias:""}),[i,l]=Object(n.useState)(null),{getPlanCompany:s}=ua();Object(n.useEffect)(()=>{!async function(){const e=localStorage.getItem("companyId");(await s(void 0,e)).plan.useExternalApi||(y.toast.error("Esta empresa n\xe3o possui permiss\xe3o para acessar essa p\xe1gina! Estamos lhe redirecionando."),setTimeout(()=>{a.push("/")},1e3))}()},[]);const c=Object(n.useCallback)(e=>{l(e[0])},[]),{getRootProps:d,getInputProps:m,isDragActive:u}=Object(hl.a)({onDrop:c,multiple:!1});return o.a.createElement(wa.a,{className:e.mainPaper,variant:"outlined"},o.a.createElement("div",{className:e.header},o.a.createElement(bl.a,{size:36,style:{color:"#5D3FD3"}}),o.a.createElement("div",null,o.a.createElement("div",{className:e.headerTitle},"Envio de Mensagens via API"),o.a.createElement("div",{className:e.headerDesc},"Utilize os m\xe9todos abaixo para enviar mensagens de texto ou m\xeddia via integra\xe7\xe3o direta."))),o.a.createElement(_t.a,{container:!0,spacing:4},o.a.createElement(_t.a,{item:!0,xs:12,md:6},o.a.createElement(hn.a,{className:e.card,elevation:0},o.a.createElement("div",{className:e.cardHeader},o.a.createElement(bl.a,{size:20})," Mensagem de Texto"),o.a.createElement(pr.a,{className:e.cardContent},o.a.createElement(f.a,{variant:"body1",gutterBottom:!0},"Envie mensagens de texto simples para um n\xfamero de WhatsApp."),o.a.createElement(Z.a,{style:{margin:"16px 0"}}),o.a.createElement(f.a,{variant:"subtitle2",color:"primary"},"Exemplo de Requisi\xe7\xe3o"),o.a.createElement("div",{className:e.exampleBox},"Endpoint: ",o.a.createElement("b",null,"http://localhost:8080/api/messages/send"),o.a.createElement("br",null),"M\xe9todo: ",o.a.createElement("b",null,"POST"),o.a.createElement("br",null),"Headers: ",o.a.createElement("b",null,"Authorization")," (Bearer token),"," ",o.a.createElement("b",null,"Content-Type")," (application/json)",o.a.createElement("br",null),"Body:",o.a.createElement("br",null),'{\n  "number": "5599999999999",\n  "body": "Sua mensagem"\n}'),o.a.createElement(f.a,{variant:"subtitle2",color:"primary",style:{marginTop:16}},"Teste de Envio"),o.a.createElement("div",{className:e.formSection},o.a.createElement(Ae.e,{initialValues:t,enableReinitialize:!0,onSubmit:(e,a)=>{setTimeout(async()=>{await(async e=>{const{number:a,body:t}=e,n={number:a,body:t};try{await F.a.request({url:"http://localhost:8080/api/messages/send",method:"POST",data:n,headers:{"Content-type":"application/json",Authorization:"Bearer "+e.token}}),y.toast.success("Mensagem enviada com sucesso")}catch(o){y.toast.error(o.message)}})(e),a.setSubmitting(!1),a.resetForm()},400)}},a=>{let{isSubmitting:t}=a;return o.a.createElement(Ae.d,null,o.a.createElement(_t.a,{container:!0,spacing:2},o.a.createElement(_t.a,{item:!0,xs:12,md:6},o.a.createElement(Ae.b,{as:Ce.a,label:o.a.createElement(o.a.Fragment,null,o.a.createElement(gl.a,{className:e.labelIcon,size:16}),"Token"),name:"token",variant:"outlined",margin:"dense",fullWidth:!0,required:!0})),o.a.createElement(_t.a,{item:!0,xs:12,md:6},o.a.createElement(Ae.b,{as:Ce.a,label:o.a.createElement(o.a.Fragment,null,o.a.createElement(fl.a,{className:e.labelIcon,size:16}),"N\xfamero"),name:"number",variant:"outlined",margin:"dense",fullWidth:!0,required:!0})),o.a.createElement(_t.a,{item:!0,xs:12},o.a.createElement(Ae.b,{as:Ce.a,label:o.a.createElement(o.a.Fragment,null,o.a.createElement(Xe.a,{className:e.labelIcon,size:16}),"Mensagem"),name:"body",variant:"outlined",margin:"dense",fullWidth:!0,required:!0,multiline:!0,minRows:2})),o.a.createElement(_t.a,{item:!0,xs:12,className:e.textRight},o.a.createElement(b.a,{type:"submit",color:"primary",variant:"contained",className:e.btnWrapper,startIcon:o.a.createElement(bl.a,{size:18})},t?o.a.createElement(be.a,{size:24}):"Enviar"))))}))))),o.a.createElement(_t.a,{item:!0,xs:12,md:6},o.a.createElement(hn.a,{className:e.card,elevation:0},o.a.createElement("div",{className:e.cardHeader},o.a.createElement(El.a,{size:20})," Mensagem de M\xeddia"),o.a.createElement(pr.a,{className:e.cardContent},o.a.createElement(f.a,{variant:"body1",gutterBottom:!0},"Envie arquivos de m\xeddia (imagens, documentos, etc) para um n\xfamero de WhatsApp."),o.a.createElement(Z.a,{style:{margin:"16px 0"}}),o.a.createElement(f.a,{variant:"subtitle2",color:"primary"},"Exemplo de Requisi\xe7\xe3o"),o.a.createElement("div",{className:e.exampleBox},"Endpoint: ",o.a.createElement("b",null,"http://localhost:8080/api/messages/send"),o.a.createElement("br",null),"M\xe9todo: ",o.a.createElement("b",null,"POST"),o.a.createElement("br",null),"Headers: ",o.a.createElement("b",null,"Authorization")," (Bearer token),"," ",o.a.createElement("b",null,"Content-Type")," (multipart/form-data)",o.a.createElement("br",null),"FormData:",o.a.createElement("br",null),o.a.createElement("ul",{style:{margin:0,paddingLeft:18}},o.a.createElement("li",null,o.a.createElement("b",null,"number:")," 5599999999999"),o.a.createElement("li",null,o.a.createElement("b",null,"medias:")," arquivo"))),o.a.createElement(f.a,{variant:"subtitle2",color:"primary",style:{marginTop:16}},"Teste de Envio"),o.a.createElement("div",{className:e.formSection},o.a.createElement(Ae.e,{initialValues:r,enableReinitialize:!0,onSubmit:(e,a)=>{setTimeout(async()=>{await(async e=>{try{if(!i)return void y.toast.error("Selecione um arquivo para enviar.");const a=new FormData;a.append("number",e.number),a.append("body",i.name),a.append("medias",i),await F.a.request({url:"http://localhost:8080/api/messages/send",method:"POST",data:a,headers:{"Content-type":"multipart/form-data",Authorization:"Bearer "+e.token}}),y.toast.success("Mensagem enviada com sucesso"),l(null)}catch(a){y.toast.error(a.message)}})(e),a.setSubmitting(!1),a.resetForm(),l(null)},400)}},a=>{let{isSubmitting:t}=a;return o.a.createElement(Ae.d,null,o.a.createElement(_t.a,{container:!0,spacing:2},o.a.createElement(_t.a,{item:!0,xs:12,md:6},o.a.createElement(Ae.b,{as:Ce.a,label:o.a.createElement(o.a.Fragment,null,o.a.createElement(gl.a,{className:e.labelIcon,size:16}),"Token"),name:"token",variant:"outlined",margin:"dense",fullWidth:!0,required:!0})),o.a.createElement(_t.a,{item:!0,xs:12,md:6},o.a.createElement(Ae.b,{as:Ce.a,label:o.a.createElement(o.a.Fragment,null,o.a.createElement(fl.a,{className:e.labelIcon,size:16}),"N\xfamero"),name:"number",variant:"outlined",margin:"dense",fullWidth:!0,required:!0})),o.a.createElement(_t.a,{item:!0,xs:12},o.a.createElement("div",d({className:`${e.dropzone} ${u?"active":""}`}),o.a.createElement("input",m()),o.a.createElement(El.a,{size:36,className:e.dropzoneIcon}),u?o.a.createElement(f.a,{variant:"body2"},"Solte o arquivo aqui..."):o.a.createElement(o.a.Fragment,null,o.a.createElement(f.a,{variant:"body2"},"Arraste e solte um arquivo aqui, ou clique para selecionar"),o.a.createElement(f.a,{variant:"caption",color:"textSecondary"},"Formatos aceitos: imagem, PDF, doc, etc.")),i&&o.a.createElement("div",{className:e.dropzoneFileName},o.a.createElement("b",null,"Arquivo selecionado:")," ",i.name))),o.a.createElement(_t.a,{item:!0,xs:12,className:e.textRight},o.a.createElement(b.a,{type:"submit",color:"primary",variant:"contained",className:e.btnWrapper,startIcon:o.a.createElement(bl.a,{size:18}),disabled:t},t?o.a.createElement(be.a,{size:24}):"Enviar"))))})))))),o.a.createElement(g.a,{mt:6},o.a.createElement(f.a,{variant:"body2",color:"textSecondary"},o.a.createElement("b",null,"Observa\xe7\xf5es importantes:"),o.a.createElement("br",null),'- Antes de enviar mensagens, cadastre o token vinculado \xe0 conex\xe3o no menu "Conex\xf5es".',o.a.createElement("br",null),"- O n\xfamero deve conter apenas d\xedgitos: c\xf3digo do pa\xeds + DDD + n\xfamero.",o.a.createElement("br",null))))},vl=t(1278),Cl=t(1276),kl=t(1277),Sl=t(1274),Nl=t(1269),wl=t(1265),Il=t(1315),Al=t(1267),Tl=t(1268),Dl=t(1270),Ol=t(1271),jl=t(1272),Rl=t(1273),Fl=t(1275),Ml=t(1264),Pl=t(738);var Bl=e=>{let{onChange:a,currentColor:t,handleClose:r,open:i}=e;const[l,s]=Object(n.useState)(t);return o.a.createElement(xe.a,{onClose:r,"aria-labelledby":"simple-dialog-title",open:i},o.a.createElement(Pl.a,{width:"100%",triangle:"hide",color:l,colors:["#B80000","#DB3E00","#FCCB00","#008B02","#006B76","#1273DE","#004DCF","#5300EB","#EB9694","#FAD0C3","#FEF3BD","#C1E1C5","#BEDADC","#C4DEF6","#BED3F3","#D4C4FB","#4D4D4D","#999999","#F44E3B","#FE9200","#FCDC00","#DBDF00","#A4DD00","#68CCCA","#73D8FF","#AEA1FF","#FDA1FF","#333333","#808080","#cccccc","#D33115","#E27300","#FCC400","#B0BC00","#68BC00","#16A5A5","#009CE0","#7B64FF","#FA28FF","#666666","#B3B3B3","#9F0500","#C45100","#FB9E00","#808900","#194D33","#0C797D","#0062B1","#653294","#AB149E"],onChange:e=>{s(e.hex),r()},onChangeComplete:e=>a(e.hex)}))},zl=t(1266);const Wl=Object(Y.a)(e=>({root:{width:"100%",[e.breakpoints.down("sm")]:{maxHeight:"20vh"}},button:{marginRight:e.spacing(1)},input:{marginTop:e.spacing(1),marginBottom:e.spacing(1)},addButton:{marginTop:e.spacing(2),marginBottom:e.spacing(2)}}));function Ll(e){let{queueId:a,options:t,updateOptions:r}=e;const i=Wl(),[l,s]=Object(n.useState)(-1),[c,d]=Object(n.useState)(null),m=Object(n.useRef)(null),[u,p]=Object(n.useState)(!1),g=e=>async()=>{s(e);const n=t[e];if(void 0!==n&&void 0!==n.id)try{const{data:e}=await B.request({url:"/queue-options",method:"GET",params:{queueId:a,parentId:n.id}}),t=e.map(e=>({...e,children:[],edition:!1}));n.children=t,r()}catch(o){y.toast.error(o)}},E=async e=>{try{if(e.id){if(await B.request({url:"/queue-options/"+e.id,method:"PUT",data:e}),null!=c){const a=new FormData;a.append("file",c),await B.post(`/queue-options/${e.id}/media-upload`,a)}}else{const{data:a}=await B.request({url:"/queue-options",method:"POST",data:e});if(null!=c){const a=new FormData;a.append("file",c),await B.post(`/queue-options/${e.id}/media-upload`,a)}e.id=a.id}e.edition=!1,r()}catch(a){y.toast.error(a)}},h=e=>{t[e].edition=!t[e].edition,r()},x=e=>{const a=t[e];return a.edition?o.a.createElement(o.a.Fragment,null,o.a.createElement(Ce.a,{value:a.title,onChange:a=>((e,a)=>{t[a].title=e.target.value,r()})(a,e),size:"small",className:i.input,placeholder:"T\xedtulo da op\xe7\xe3o"}),o.a.createElement("div",{style:{display:"none"}},o.a.createElement("input",{type:"file",ref:m,onChange:e=>(e=>{const a=Object(k.head)(e.target.files);a&&d(a)})(e)})),a.edition&&o.a.createElement(o.a.Fragment,null,o.a.createElement(J.a,{color:"primary",variant:"outlined",size:"small",className:i.button,onClick:()=>E(a)},o.a.createElement(rn.a,null)),o.a.createElement(J.a,{variant:"outlined",color:"secondary",size:"small",className:i.button,onClick:()=>(async e=>{const a=t[e];if(void 0!==a&&void 0!==a.id)try{await B.request({url:"/queue-options/"+a.id,method:"DELETE"})}catch(n){y.toast.error(n)}t.splice(e,1),t.forEach(async(e,a)=>{e.option=a+1,await E(e)}),r()})(e)},o.a.createElement(an.a,null)),!c&&!a.mediaPath&&o.a.createElement(J.a,{variant:"outlined",color:"primary",size:"small",className:i.button,onClick:()=>m.current.click()},o.a.createElement(Ml.a,null)),(a.mediaPath||c)&&o.a.createElement(_t.a,{xs:12,item:!0},o.a.createElement(b.a,{startIcon:o.a.createElement(Ml.a,null)},null!=c?c.name:a.mediaName),o.a.createElement(J.a,{onClick:()=>p(!0),color:"secondary"},o.a.createElement(wl.a,null))))):o.a.createElement(o.a.Fragment,null,o.a.createElement(f.a,null,""!==a.title?a.title:"T\xedtulo n\xe3o definido",o.a.createElement(J.a,{variant:"outlined",size:"small",className:i.button,onClick:()=>h(e)},o.a.createElement(Po.a,null))))},v=e=>{const a=t[e];return a.edition?o.a.createElement(o.a.Fragment,null,o.a.createElement(Ce.a,{style:{width:"100%"},multiline:!0,value:a.message,onChange:a=>((e,a)=>{t[a].message=e.target.value,r()})(a,e),size:"small",className:i.input,placeholder:"Digite o texto da op\xe7\xe3o"})):o.a.createElement(o.a.Fragment,null,o.a.createElement(f.a,{onClick:()=>h(e)},a.message))},C=(e,n)=>o.a.createElement(Eo.a,{key:n},o.a.createElement(ho.a,{style:{cursor:"pointer"},onClick:g(n)},x(n)),o.a.createElement(zl.a,null,v(n),void 0!==e.id&&o.a.createElement(o.a.Fragment,null,o.a.createElement(b.a,{color:"primary",size:"small",onClick:()=>(e=>{const n=t[e].children.length+1;t[e].children.push({title:"",message:"",edition:!1,option:n,queueId:a,parentId:t[e].id,children:[]}),r()})(n),startIcon:o.a.createElement(vr.a,null),variant:"outlined",className:i.addButton},"Adicionar")),o.a.createElement(Ll,{queueId:a,options:e.children,updateOptions:r})));return o.a.createElement(bo.a,{style:{marginBottom:0,paddingBottom:0},nonLinear:!0,activeStep:l,orientation:"vertical"},t.map((e,a)=>C(e,a)))}function ql(e){let{queueId:a}=e;const t=Wl(),[r,i]=Object(n.useState)([]);Object(n.useEffect)(()=>{if(a){(async()=>{try{const{data:e}=await B.request({url:"/queue-options",method:"GET",params:{queueId:a,parentId:-1}}),t=e.map(e=>({...e,children:[],edition:!1}));i(t)}catch(e){y.toast.error(e)}})()}},[]);const l=()=>{i([...r])};return o.a.createElement("div",{className:t.root},o.a.createElement("br",null),o.a.createElement(f.a,null,"Op\xe7\xf5es",o.a.createElement(b.a,{color:"primary",size:"small",onClick:()=>{const e={title:"",message:"",edition:!1,option:r.length+1,queueId:a,parentId:null,children:[]};i([...r,e])},startIcon:o.a.createElement(vr.a,null),style:{marginLeft:10},variant:"outlined"},"Adicionar")),(()=>{if(r.length>0)return o.a.createElement(Ll,{queueId:a,updateOptions:l,options:r})})())}var Hl=t(477);const Ul=Object(Y.a)(e=>({root:{width:"100%"},fullWidth:{width:"100%"},textfield:{width:"100%"},row:{paddingTop:e.spacing(2),paddingBottom:e.spacing(2)},control:{paddingRight:e.spacing(1),paddingLeft:e.spacing(1)},buttonContainer:{textAlign:"right",padding:e.spacing(1)}}));var Vl=function(e){const{initialValues:a,onSubmit:t,loading:r,labelSaveButton:i}=e,l=Ul(),[s,c]=Object(n.useState)([{weekday:"Segunda-feira",weekdayEn:"monday",startTime:"",endTime:""},{weekday:"Ter\xe7a-feira",weekdayEn:"tuesday",startTime:"",endTime:""},{weekday:"Quarta-feira",weekdayEn:"wednesday",startTime:"",endTime:""},{weekday:"Quinta-feira",weekdayEn:"thursday",startTime:"",endTime:""},{weekday:"Sexta-feira",weekdayEn:"friday",startTime:"",endTime:""},{weekday:"S\xe1bado",weekdayEn:"saturday",startTime:"",endTime:""},{weekday:"Domingo",weekdayEn:"sunday",startTime:"",endTime:""}]);return Object(n.useEffect)(()=>{Object(k.isArray)(a)&&a.length>0&&c(a)},[a]),o.a.createElement(Ae.e,{enableReinitialize:!0,className:l.fullWidth,initialValues:{schedules:s},onSubmit:e=>{let{schedules:a}=e;return setTimeout(()=>{t(a)},500)}},e=>{let{values:a}=e;return o.a.createElement(Ae.d,{className:l.fullWidth},o.a.createElement(Ae.c,{name:"schedules",render:e=>o.a.createElement(_t.a,{spacing:4,container:!0},a.schedules.map((e,a)=>o.a.createElement(Zn.a,null,o.a.createElement(Ae.a,{as:Ce.a,label:"Dia da Semana",name:`schedules[${a}].weekday`,disabled:!0,variant:"outlined",style:{marginRight:"3.2%",width:"30%"},margin:"dense"}),o.a.createElement(Ae.a,{name:`schedules[${a}].startTime`},e=>{let{field:a}=e;return o.a.createElement(Hl.a,Object.assign({label:"Hora de Inicial"},a,{variant:"outlined",margin:"dense",customInput:Ce.a,format:"##:##",style:{marginRight:"3.2%",width:"30%"}}))}),o.a.createElement(Ae.a,{name:`schedules[${a}].endTime`},e=>{let{field:a}=e;return o.a.createElement(Hl.a,Object.assign({label:"Hora de Final"},a,{variant:"outlined",margin:"dense",customInput:Ce.a,format:"##:##",style:{marginRight:"3.2%",width:"30%"}}))}))))}),o.a.createElement("div",{style:{textAlign:"center",marginTop:"2%"},className:l.buttonContainer},o.a.createElement(Ya,{loading:r,type:"submit",color:"primary",variant:"contained"},null!==i&&void 0!==i?i:"Salvar")))})};const Gl=Object(Y.a)(e=>({root:{display:"flex",flexWrap:"wrap"},dialog:{"& .MuiDialog-paper":{borderRadius:12}},dialogTitle:{background:"linear-gradient(90deg, #5D3FD3 0%, #6151FF 100%)",color:"white",padding:e.spacing(3),"& h2":{fontSize:"1.5rem",fontWeight:600}},dialogContent:{padding:e.spacing(3)},dialogActions:{padding:e.spacing(2,3)},textField:{marginBottom:e.spacing(2),"& .MuiOutlinedInput-root":{borderRadius:8}},btnWrapper:{position:"relative"},buttonProgress:{color:Ie.a[500],position:"absolute",top:"50%",left:"50%",marginTop:-12,marginLeft:-12},formControl:{width:"100%","& .MuiOutlinedInput-root":{borderRadius:8},marginBottom:e.spacing(2)},colorAdorment:{width:20,height:20,borderRadius:4},colorPickerButton:{color:"#5D3FD3"},tabsContainer:{backgroundColor:"#f5f5f5","& .MuiTab-root":{minWidth:120,padding:e.spacing(1.5)},"& .Mui-selected":{color:"#5D3FD3",fontWeight:500},"& .MuiTabs-indicator":{backgroundColor:"#5D3FD3"}},tabContent:{padding:e.spacing(3)},saveButton:{backgroundColor:"#5D3FD3",color:"white","&:hover":{backgroundColor:"#4b32a8"},borderRadius:8,padding:"8px 24px",fontWeight:600},cancelButton:{color:"#5D3FD3",borderColor:"#5D3FD3","&:hover":{borderColor:"#4b32a8",backgroundColor:"rgba(93, 63, 211, 0.04)"},borderRadius:8,padding:"8px 24px",fontWeight:600},attachButton:{color:"#5D3FD3",borderColor:"#5D3FD3","&:hover":{borderColor:"#4b32a8",backgroundColor:"rgba(93, 63, 211, 0.04)"},borderRadius:8,padding:"8px 16px",marginRight:e.spacing(2)},sectionTitle:{color:"#5D3FD3",fontWeight:600,fontSize:"1rem",marginBottom:e.spacing(2),marginTop:e.spacing(2),position:"relative",display:"inline-block","&::after":{content:'""',position:"absolute",width:"30%",height:2,bottom:-4,left:0,backgroundColor:"#5D3FD3",borderRadius:2}},infoPanel:{backgroundColor:"rgba(93, 63, 211, 0.05)",padding:e.spacing(2),borderRadius:8,marginBottom:e.spacing(3)},attachmentDisplay:{display:"flex",alignItems:"center",padding:e.spacing(1),marginTop:e.spacing(1),backgroundColor:"rgba(0, 0, 0, 0.04)",borderRadius:8,"& .MuiButton-root":{textTransform:"none"}},formSection:{marginBottom:e.spacing(3)},helpText:{fontSize:"0.75rem",color:"rgba(0, 0, 0, 0.6)",marginTop:-e.spacing(1.5),marginBottom:e.spacing(2)}})),_l=Oe.b().shape({name:Oe.d().min(2,"Nome muito curto!").max(50,"Nome muito longo!").required("O nome \xe9 obrigat\xf3rio"),color:Oe.d().min(3,"Cor inv\xe1lida!").max(9,"Cor inv\xe1lida!").required("A cor \xe9 obrigat\xf3ria"),greetingMessage:Oe.d()});var Kl=e=>{let{open:a,onClose:t,queueId:r}=e;const i=Gl(),l={name:"",color:"#5D3FD3",greetingMessage:"",outOfHoursMessage:"",orderQueue:"",integrationId:"",promptId:""},[s,c]=Object(n.useState)(!1),[d,m]=Object(n.useState)(l),[u,p]=Object(n.useState)(0),[E,h]=Object(n.useState)(!1),[x,v]=Object(n.useState)(null),C=Object(n.useRef)(null),S=Object(n.useRef)(),[N,w]=Object(n.useState)([]),[I,A]=Object(n.useState)(!0),[T,D]=Object(n.useState)(!1),[O,j]=Object(n.useState)([{weekday:"Segunda-feira",weekdayEn:"monday",startTime:"08:00",endTime:"18:00"},{weekday:"Ter\xe7a-feira",weekdayEn:"tuesday",startTime:"08:00",endTime:"18:00"},{weekday:"Quarta-feira",weekdayEn:"wednesday",startTime:"08:00",endTime:"18:00"},{weekday:"Quinta-feira",weekdayEn:"thursday",startTime:"08:00",endTime:"18:00"},{weekday:"Sexta-feira",weekdayEn:"friday",startTime:"08:00",endTime:"18:00"},{weekday:"S\xe1bado",weekdayEn:"saturday",startTime:"08:00",endTime:"12:00"},{weekday:"Domingo",weekdayEn:"sunday",startTime:"00:00",endTime:"00:00"}]),[R,F]=Object(n.useState)(null),[M,P]=Object(n.useState)([]);Object(n.useEffect)(()=>{(async()=>{try{const{data:e}=await B.get("/prompt");P(e.prompts)}catch(e){y.toast.error(e.message)}})()},[]),Object(n.useEffect)(()=>{B.get("/settings").then(e=>{let{data:a}=e;if(Array.isArray(a)){const e=a.find(e=>"scheduleType"===e.key);e&&h("queue"===e.value)}})},[]),Object(n.useEffect)(()=>{(async()=>{try{const{data:e}=await B.get("/queueIntegration");w(e.queueIntegrations)}catch(e){y.toast.error(e.message)}})()},[]),Object(n.useEffect)(()=>((async()=>{if(r)try{const{data:e}=await B.get("/queue/"+r);m(a=>({...a,...e})),e.promptId?F(e.promptId):F(null),j(e.schedules)}catch(e){y.toast.error(e.message)}})(),()=>{m({name:"",color:"",greetingMessage:"",outOfHoursMessage:"",orderQueue:"",integrationId:""})}),[r,a]);const z=()=>{t(),m(l)},W=e=>{F(e.target.value)};return o.a.createElement("div",{className:i.root},o.a.createElement(Pt,{title:"Excluir m\xeddia",open:T,onClose:()=>D(!1),onConfirm:async()=>{x&&(v(null),C.current.value=null),d.mediaPath&&(await B.delete(`/queue/${d.id}/media-upload`),m(e=>({...e,mediaPath:null,mediaName:null})),y.toast.success("M\xeddia exclu\xedda com sucesso!"))}},"Tem certeza que deseja excluir esta m\xeddia?"),o.a.createElement(xe.a,{maxWidth:"md",fullWidth:!0,open:a,onClose:z,scroll:"paper",className:i.dialog},o.a.createElement(ye.a,{className:i.dialogTitle},r?"Editar Fila de Atendimento":"Nova Fila de Atendimento",o.a.createElement("div",{style:{display:"none"}},o.a.createElement("input",{type:"file",ref:C,onChange:e=>(e=>{const a=Object(k.head)(e.target.files);a&&v(a)})(e)}))),o.a.createElement(Il.a,{value:u,indicatorColor:"primary",textColor:"primary",onChange:(e,a)=>p(a),className:i.tabsContainer},o.a.createElement(Al.a,{label:"Dados da Fila",icon:o.a.createElement(Tl.a,null)}),E&&o.a.createElement(Al.a,{label:"Hor\xe1rios de Atendimento",icon:o.a.createElement(Nl.a,null)})),0===u&&o.a.createElement(wa.a,null,o.a.createElement(Ae.e,{initialValues:d,enableReinitialize:!0,validationSchema:_l,onSubmit:(e,a)=>{setTimeout(()=>{(async e=>{try{if(r){if(await B.put("/queue/"+r,{...e,schedules:O,promptId:R||null}),null!=x){const e=new FormData;e.append("file",x),await B.post(`/queue/${r}/media-upload`,e)}y.toast.success("Fila atualizada com sucesso!")}else if(await B.post("/queue",{...e,schedules:O,promptId:R||null}),y.toast.success("Fila criada com sucesso!"),null!=x){const e=new FormData;e.append("file",x),await B.post(`/queue/${r}/media-upload`,e)}z()}catch(a){y.toast.error(a.message)}})(e),a.setSubmitting(!1)},400)}},e=>{let{touched:a,errors:t,isSubmitting:n,values:l}=e;return o.a.createElement(Ae.d,null,o.a.createElement(ve.a,{dividers:!0,className:i.dialogContent},o.a.createElement(wa.a,{className:i.infoPanel,elevation:0},o.a.createElement(f.a,{variant:"body2"},o.a.createElement("span",null,"\u2139\ufe0f")," Configure suas filas de atendimento para organizar seus atendentes e mensagens espec\xedficas por departamento.")),o.a.createElement("div",{className:i.formSection},o.a.createElement(f.a,{className:i.sectionTitle},"Informa\xe7\xf5es B\xe1sicas"),o.a.createElement(_t.a,{container:!0,spacing:2},o.a.createElement(_t.a,{item:!0,xs:12,md:6},o.a.createElement(Ae.b,{as:Ce.a,label:"Nome da Fila",autoFocus:!0,name:"name",error:a.name&&Boolean(t.name),helperText:a.name&&t.name,variant:"outlined",fullWidth:!0,className:i.textField,InputProps:{startAdornment:o.a.createElement(Do.a,{position:"start"},o.a.createElement(Tl.a,{style:{color:"#5D3FD3"}}))}})),o.a.createElement(_t.a,{item:!0,xs:12,md:6},o.a.createElement(Ae.b,{as:Ce.a,label:"Cor da Fila",name:"color",id:"color",onFocus:()=>{c(!0),S.current.focus()},error:a.color&&Boolean(t.color),helperText:a.color&&t.color,variant:"outlined",fullWidth:!0,className:i.textField,InputProps:{startAdornment:o.a.createElement(Do.a,{position:"start"},o.a.createElement(Dl.a,{style:{color:"#5D3FD3"}})),endAdornment:o.a.createElement(Do.a,{position:"end"},o.a.createElement("div",{style:{backgroundColor:l.color},className:i.colorAdorment}),o.a.createElement(Sa.a,{title:"Escolher cor",arrow:!0,placement:"top"},o.a.createElement(J.a,{size:"small",className:i.colorPickerButton,onClick:()=>c(!0)},o.a.createElement(Ol.a,null))))}}),o.a.createElement(Bl,{open:s,handleClose:()=>c(!1),onChange:e=>{l.color=e,m(a=>({...a,color:e}))}})),o.a.createElement(_t.a,{item:!0,xs:12,md:6},o.a.createElement(Ae.b,{as:Ce.a,label:"Ordem de Atendimento",name:"orderQueue",variant:"outlined",fullWidth:!0,className:i.textField,InputProps:{startAdornment:o.a.createElement(Do.a,{position:"start"},o.a.createElement(jl.a,{style:{color:"#5D3FD3"}}))}}),o.a.createElement(f.a,{className:i.helpText},"Define a ordem de prioridade desta fila (menor n\xfamero = maior prioridade)")),o.a.createElement(_t.a,{item:!0,xs:12,md:6},o.a.createElement(ke.a,{variant:"outlined",className:i.formControl},o.a.createElement(Se.a,null,"Integra\xe7\xe3o"),o.a.createElement(Ae.b,{as:Ne.a,label:"Integra\xe7\xe3o",name:"integrationId",InputProps:{startAdornment:o.a.createElement(Do.a,{position:"start"},o.a.createElement(Rl.a,{style:{color:"#5D3FD3"}}))}},o.a.createElement(oe.a,{value:""},o.a.createElement("em",null,"Nenhuma")),N.map(e=>o.a.createElement(oe.a,{key:e.id,value:e.id},e.name)))),o.a.createElement(f.a,{className:i.helpText},"Associa esta fila a uma integra\xe7\xe3o existente")))),o.a.createElement(Z.a,{style:{margin:"16px 0"}}),o.a.createElement("div",{className:i.formSection},o.a.createElement(f.a,{className:i.sectionTitle},"Configura\xe7\xe3o de Mensagens"),o.a.createElement(_t.a,{container:!0,spacing:2},o.a.createElement(_t.a,{item:!0,xs:12},o.a.createElement(Ae.b,{as:Ce.a,label:"Mensagem de Sauda\xe7\xe3o",name:"greetingMessage",multiline:!0,inputRef:S,rows:4,fullWidth:!0,variant:"outlined",className:i.textField,error:a.greetingMessage&&Boolean(t.greetingMessage),helperText:a.greetingMessage&&t.greetingMessage,InputProps:{startAdornment:o.a.createElement(Do.a,{position:"start",style:{alignSelf:"flex-start",marginTop:"16px"}},o.a.createElement(Sl.a,{style:{color:"#5D3FD3"}}))}}),o.a.createElement(f.a,{className:i.helpText},"Mensagem exibida quando um cliente entra em contato com esta fila")),E&&o.a.createElement(_t.a,{item:!0,xs:12},o.a.createElement(Ae.b,{as:Ce.a,label:"Mensagem Fora do Hor\xe1rio",name:"outOfHoursMessage",multiline:!0,rows:4,fullWidth:!0,variant:"outlined",className:i.textField,error:a.outOfHoursMessage&&Boolean(t.outOfHoursMessage),helperText:a.outOfHoursMessage&&t.outOfHoursMessage,InputProps:{startAdornment:o.a.createElement(Do.a,{position:"start",style:{alignSelf:"flex-start",marginTop:"16px"}},o.a.createElement(Nl.a,{style:{color:"#5D3FD3"}}))}}),o.a.createElement(f.a,{className:i.helpText},"Mensagem exibida quando um cliente entra em contato fora do hor\xe1rio de atendimento")),o.a.createElement(_t.a,{item:!0,xs:12},o.a.createElement(ke.a,{variant:"outlined",className:i.formControl},o.a.createElement(Se.a,null,"Prompt de IA"),o.a.createElement(Ne.a,{label:"Prompt de IA",name:"promptId",value:R||"",onChange:W,InputProps:{startAdornment:o.a.createElement(Do.a,{position:"start"},o.a.createElement(Fl.a,{style:{color:"#5D3FD3"}}))}},o.a.createElement(oe.a,{value:""},o.a.createElement("em",null,"Nenhum")),M.map(e=>o.a.createElement(oe.a,{key:e.id,value:e.id},e.name)))),o.a.createElement(f.a,{className:i.helpText},"Associa um prompt de IA a esta fila para respostas autom\xe1ticas")))),o.a.createElement(Z.a,{style:{margin:"16px 0"}}),o.a.createElement("div",{className:i.formSection},o.a.createElement(f.a,{className:i.sectionTitle},"Op\xe7\xf5es Avan\xe7adas"),o.a.createElement(ql,{queueId:r}),(d.mediaPath||x)&&o.a.createElement(g.a,{className:i.attachmentDisplay},o.a.createElement(b.a,{startIcon:o.a.createElement(Ml.a,null)},null!=x?x.name:d.mediaName),I&&o.a.createElement(J.a,{onClick:()=>D(!0),color:"secondary"},o.a.createElement(wl.a,null))))),o.a.createElement(we.a,{className:i.dialogActions},!x&&!d.mediaPath&&I&&o.a.createElement(b.a,{startIcon:o.a.createElement(Ml.a,null),onClick:()=>C.current.click(),disabled:n,variant:"outlined",className:i.attachButton},"Anexar Arquivo"),o.a.createElement(b.a,{onClick:z,disabled:n,variant:"outlined",className:i.cancelButton},"Cancelar"),o.a.createElement(b.a,{type:"submit",color:"primary",disabled:n,variant:"contained",className:i.saveButton},r?"Atualizar":"Adicionar",n&&o.a.createElement(be.a,{size:24,className:i.buttonProgress}))))})),1===u&&E&&o.a.createElement(wa.a,{className:i.tabContent},o.a.createElement(Vl,{loading:!1,onSubmit:async e=>{y.toast.success("Clique em salvar para registar as altera\xe7\xf5es"),j(e),p(0)},initialValues:O,labelSaveButton:"Salvar"}))))};const Ql=Object(Y.a)(e=>({container:{paddingTop:e.spacing(4),paddingBottom:e.spacing(4),paddingLeft:e.spacing(4),paddingRight:e.spacing(4),[e.breakpoints.down("sm")]:{paddingLeft:e.spacing(1),paddingRight:e.spacing(1)}},mainPaper:{flex:1,padding:e.spacing(2),overflowY:"scroll",...e.scrollbarStyles},customTableCell:{display:"flex",alignItems:"center",justifyContent:"center"},addButton:{marginLeft:e.spacing(2),height:40,whiteSpace:"nowrap",backgroundColor:"#5D3FD3","&:hover":{backgroundColor:"#4b32a8"},borderRadius:10,[e.breakpoints.down("sm")]:{width:"100%",marginLeft:0}},noQueuesContainer:{display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",padding:e.spacing(8),width:"100%"},noQueuesIcon:{fontSize:80,color:"rgba(0, 0, 0, 0.2)",marginBottom:e.spacing(2)},noQueuesText:{color:"rgba(0, 0, 0, 0.5)",fontSize:"1.1rem",maxWidth:300,textAlign:"center"},pageTitle:{color:"#5D3FD3",fontWeight:600,fontSize:"1.5rem",marginBottom:e.spacing(2),position:"relative",display:"inline-block","&::after":{content:'""',position:"absolute",width:"40%",height:3,bottom:-5,left:0,backgroundColor:"#5D3FD3",borderRadius:2}},titleContainer:{display:"flex",alignItems:"center"},actionButton:{padding:e.spacing(1),color:"#555",transition:"all 0.3s ease","&:hover":{backgroundColor:"rgba(93, 63, 211, 0.08)",transform:"scale(1.1)"}},editButton:{color:"#5D3FD3","&:hover":{color:"#4930A8"}},deleteButton:{color:"#F44336","&:hover":{color:"#D32F2F"}},colorPreview:{width:60,height:20,borderRadius:4},queueCard:{height:"100%",display:"flex",flexDirection:"column",borderRadius:10,transition:"all 0.2s ease-in-out",border:"1px solid rgba(0, 0, 0, 0.09)","&:hover":{transform:"translateY(-5px)",boxShadow:e.shadows[4]}},queueCardContent:{padding:e.spacing(3),flexGrow:1},queueCardHeader:{display:"flex",alignItems:"center",marginBottom:e.spacing(2)},queueColorBar:{width:8,alignSelf:"stretch",borderRadius:"10px 0 0 10px"},queueName:{fontWeight:600,fontSize:"1.1rem",color:"#303030"},queueId:{fontWeight:400,fontSize:"0.8rem",color:"rgba(0, 0, 0, 0.5)",marginLeft:e.spacing(1)},propertyItem:{display:"flex",alignItems:"center",marginBottom:e.spacing(1.5),"& svg":{marginRight:e.spacing(1),color:"#5D3FD3",fontSize:18},"& .MuiTypography-root":{color:"rgba(0, 0, 0, 0.7)",fontSize:"0.9rem"}},cardActions:{padding:e.spacing(1.5),borderTop:"1px solid rgba(0, 0, 0, 0.05)",display:"flex",justifyContent:"flex-end"},loadingContainer:{display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",padding:e.spacing(8),width:"100%"},truncate:{whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis",maxWidth:"100%"},orderChip:{backgroundColor:"rgba(93, 63, 211, 0.1)",color:"#5D3FD3",fontWeight:500,borderRadius:20,marginLeft:"auto",height:22}})),Yl=(e,a)=>{if("LOAD_QUEUES"===a.type){const t=a.payload,n=[];return t.forEach(a=>{const t=e.findIndex(e=>e.id===a.id);-1!==t?e[t]=a:n.push(a)}),[...e,...n]}if("UPDATE_QUEUES"===a.type){const t=a.payload,n=e.findIndex(e=>e.id===t.id);return-1!==n?(e[n]=t,[...e]):[t,...e]}if("DELETE_QUEUE"===a.type){const t=a.payload,n=e.findIndex(e=>e.id===t);return-1!==n&&e.splice(n,1),[...e]}if("RESET"===a.type)return[]};var Xl=()=>{const e=Ql(),[a,t]=Object(n.useReducer)(Yl,[]),[r,i]=Object(n.useState)(!1),[l,s]=Object(n.useState)(!1),[c,d]=Object(n.useState)(null),[m,u]=Object(n.useState)(!1),p=Object(n.useContext)(j);Object(n.useEffect)(()=>{(async()=>{i(!0);try{const{data:e}=await B.get("/queue");t({type:"LOAD_QUEUES",payload:e}),i(!1)}catch(e){y.toast.error(e.message),i(!1)}})()},[]),Object(n.useEffect)(()=>{const e=localStorage.getItem("companyId"),a=p.getSocket(e);return a.on(`company-${e}-queue`,e=>{"update"!==e.action&&"create"!==e.action||t({type:"UPDATE_QUEUES",payload:e.queue}),"delete"===e.action&&t({type:"DELETE_QUEUE",payload:e.queueId})}),()=>{a.disconnect()}},[p]);return o.a.createElement(Zn.a,{maxWidth:"xl",className:e.container},o.a.createElement(Pt,{title:c&&`Excluir fila ${c.name}?`,open:m,onClose:()=>{u(!1),d(null)},onConfirm:()=>(async e=>{try{await B.delete("/queue/"+e),y.toast.success("Fila exclu\xedda com sucesso!")}catch(a){y.toast.error(a.message)}d(null)})(c.id)},"Essa a\xe7\xe3o n\xe3o pode ser desfeita. Deseja continuar?"),o.a.createElement(Kl,{open:l,onClose:()=>{s(!1),d(null)},queueId:null===c||void 0===c?void 0:c.id}),o.a.createElement(no,null,o.a.createElement("div",{className:e.titleContainer},o.a.createElement(f.a,{className:e.pageTitle},"Filas de Atendimento")),o.a.createElement(ro,null,o.a.createElement(b.a,{variant:"contained",color:"primary",onClick:()=>{s(!0),d(null)},className:e.addButton},"Nova Fila"))),o.a.createElement(wa.a,{className:e.mainPaper,variant:"outlined"},0!==a.length||r?r?o.a.createElement("div",{className:e.loadingContainer},o.a.createElement(be.a,{size:40,color:"primary"}),o.a.createElement(f.a,{style:{marginTop:16}},"Carregando filas...")):o.a.createElement(_t.a,{container:!0,spacing:3},a.map(a=>o.a.createElement(Na.a,{in:!0,key:a.id,timeout:500},o.a.createElement(_t.a,{item:!0,xs:12,sm:6,md:4},o.a.createElement(hn.a,{className:e.queueCard},o.a.createElement(g.a,{display:"flex"},o.a.createElement(g.a,{className:e.queueColorBar,style:{backgroundColor:a.color}}),o.a.createElement(pr.a,{className:e.queueCardContent},o.a.createElement("div",{className:e.queueCardHeader},o.a.createElement(f.a,{className:e.queueName},a.name),o.a.createElement(f.a,{className:e.queueId},"#",a.id),a.orderQueue&&o.a.createElement(Fe.a,{size:"small",label:"Prioridade: "+a.orderQueue,className:e.orderChip})),o.a.createElement("div",null,o.a.createElement(g.a,{className:e.propertyItem},o.a.createElement(kl.a,null),o.a.createElement(f.a,null,"Prioridade: ",a.orderQueue||"N\xe3o definida")),a.greetingMessage&&o.a.createElement(g.a,{className:e.propertyItem},o.a.createElement(Sl.a,null),o.a.createElement(Sa.a,{title:a.greetingMessage,arrow:!0,placement:"top"},o.a.createElement(f.a,{className:e.truncate},a.greetingMessage.length>60?a.greetingMessage.substring(0,60)+"...":a.greetingMessage))),a.outOfHoursMessage&&o.a.createElement(g.a,{className:e.propertyItem},o.a.createElement(Nl.a,null),o.a.createElement(Sa.a,{title:a.outOfHoursMessage,arrow:!0,placement:"top"},o.a.createElement(f.a,{className:e.truncate},a.outOfHoursMessage.length>60?a.outOfHoursMessage.substring(0,60)+"...":a.outOfHoursMessage)))))),o.a.createElement(vl.a,{className:e.cardActions},o.a.createElement(Sa.a,{title:"Editar",arrow:!0,placement:"top"},o.a.createElement(J.a,{size:"small",onClick:()=>(e=>{d(e),s(!0)})(a),className:`${e.actionButton} ${e.editButton}`},o.a.createElement(Wr.a,null))),o.a.createElement(Sa.a,{title:"Excluir",arrow:!0,placement:"top"},o.a.createElement(J.a,{size:"small",onClick:()=>{d(a),u(!0)},className:`${e.actionButton} ${e.deleteButton}`},o.a.createElement(wl.a,null))))))))):o.a.createElement("div",{className:e.noQueuesContainer},o.a.createElement(Cl.a,{className:e.noQueuesIcon}),o.a.createElement(f.a,{className:e.noQueuesText},"Nenhuma fila cadastrada. Clique no bot\xe3o acima para adicionar."))))};const $l=Object(Y.a)(e=>({tabPanel:{background:"#faf9fd",borderRadius:8,boxShadow:"0 1px 4px rgba(93, 63, 211, 0.04)",padding:"16px 12px",minHeight:120,transition:"box-shadow 0.2s, background 0.2s",[e.breakpoints.down("xs")]:{padding:"12px 6px",borderRadius:6}},internalTab:{minWidth:70,width:70,padding:4,fontWeight:600,fontSize:13,color:"#666",borderRadius:6,margin:"0 2px",transition:"all 0.2s",background:"#fff",boxShadow:"0 1px 4px rgba(93,63,211,0.04)","&.Mui-selected":{color:"#fff",background:"#5D3FD3",boxShadow:"0 2px 8px rgba(93,63,211,0.10)"}},badgeSelected:{background:"#fff",color:"#5D3FD3",fontWeight:600,fontSize:13,padding:"0 8px",borderRadius:6,boxShadow:"0 1px 4px rgba(93,63,211,0.10)",marginLeft:8},tabGroup:{display:"flex",gap:8,background:"#fff",borderRadius:8,padding:4,boxShadow:"0 1px 4px rgba(93,63,211,0.04)",justifyContent:"flex-start",alignItems:"center"},tabButton:{position:"relative",minWidth:70,fontWeight:600,fontSize:13,borderRadius:6,padding:"6px 12px",background:"#f3f0fa",color:"#5D3FD3",border:"none",cursor:"pointer",transition:"all 0.2s","&.selected":{background:"#5D3FD3",color:"#fff",boxShadow:"0 2px 8px rgba(93,63,211,0.10)"}},badge:{position:"absolute",top:-8,right:-8,background:"#fff",color:"#5D3FD3",fontWeight:700,fontSize:13,padding:"0 7px",borderRadius:12,boxShadow:"0 2px 8px rgba(93,63,211,0.10)",border:"2px solid #5D3FD3"}}));var Jl=e=>{let{children:a,value:t,name:n,...r}=e;const i=$l();return t===n?o.a.createElement("div",Object.assign({role:"tabpanel",id:"simple-tabpanel-"+n,"aria-labelledby":"simple-tab-"+n,className:i.tabPanel},r),o.a.createElement(o.a.Fragment,null,a)):null},Zl=t(1279),es=t(1280);var as=()=>({save:async e=>{const{data:a}=await B.request({url:"/companies",method:"POST",data:e});return a},update:async e=>{const{data:a}=await B.request({url:"/companies/"+e.id,method:"PUT",data:e});return a},remove:async e=>{const{data:a}=await B.request({url:"/companies/"+e,method:"DELETE"});return a},list:async e=>{const{data:a}=await B.request({url:"/companies/list",method:"GET"});return a},find:async e=>{const{data:a}=await B.request({url:"/companies/"+e,method:"GET"});return a},finding:async e=>{const{data:a}=await B.request({url:"/companies/"+e,method:"GET"});return a},findAll:async e=>{const{data:a}=await B.request({url:"/companies",method:"GET"});return a},updateSchedules:async e=>{const{data:a}=await B.request({url:`/companies/${e.id}/schedules`,method:"PUT",data:e});return a}});const ts=Object(Y.a)(e=>({root:{width:"100%"},mainPaper:{width:"100%",flex:1,padding:e.spacing(3),background:"linear-gradient(135deg, #f7f8fa 60%, #e5e0fa 100%)"},fullWidth:{width:"100%"},companyCard:{background:"#fff",borderRadius:24,padding:e.spacing(3),boxShadow:"0 4px 20px rgba(93,63,211,0.08)",transition:"all 0.3s ease",border:"1px solid #f0f0f0",position:"relative",overflow:"hidden",display:"flex",flexDirection:"column",height:"100%","&:hover":{transform:"translateY(-4px)",boxShadow:"0 8px 30px rgba(93,63,211,0.15)"}},cardHeader:{display:"flex",justifyContent:"space-between",alignItems:"flex-start",marginBottom:e.spacing(2)},companyName:{fontSize:22,fontWeight:700,color:"#5D3FD3",marginBottom:e.spacing(1),display:"flex",alignItems:"center",gap:8},infoList:{display:"flex",flexDirection:"column",gap:10,marginBottom:e.spacing(2)},infoItem:{display:"flex",alignItems:"center",gap:10,color:"#666",fontSize:15,background:"#f8f7ff",borderRadius:10,padding:"7px 14px"},badge:{display:"inline-flex",alignItems:"center",gap:6,borderRadius:12,padding:"6px 14px",fontWeight:600,fontSize:13,boxShadow:"0 2px 8px rgba(93,63,211,0.08)"},badgeAtivo:{background:"#e6fbe6",color:"#2e7d32"},badgeInativo:{background:"#ffebee",color:"#c62828"},badgeCampanha:{background:"#e3e6fd",color:"#5D3FD3"},badgeCampanhaOff:{background:"#f0f0f0",color:"#888"},addButton:{position:"fixed",bottom:e.spacing(3),right:e.spacing(3),borderRadius:"50%",width:56,height:56,background:"linear-gradient(90deg, #5D3FD3 0%, #7B68EE 100%)",boxShadow:"0 4px 12px rgba(93,63,211,0.15)","&:hover":{background:"linear-gradient(90deg, #4930A8 0%, #6A5ACD 100%)"},zIndex:10}})),ns=Oe.b().shape({name:Oe.d().min(2,"Muito curto!").max(50,"Muito longo!").required("Obrigat\xf3rio"),password:Oe.d().min(5,"M\xednimo 5 caracteres").max(50,"M\xe1ximo 50 caracteres"),email:Oe.d().email("Email inv\xe1lido").required("Obrigat\xf3rio")});function os(e){let{open:a,onClose:t,userId:r,companyId:i,onUserSaved:l}=e;const[s,c]=Object(n.useState)({name:"",email:"",password:"",profile:"user"}),[d,m]=Object(n.useState)(!1);Object(n.useEffect)(()=>{a&&r?u():a&&!r&&c({name:"",email:"",password:"",profile:"user"})},[a,r]);const u=async()=>{m(!0);try{const{data:e}=await B.get("/users/"+r);c(e)}catch(e){y.toast.error("Erro ao carregar usu\xe1rio")}m(!1)},p=()=>{c({name:"",email:"",password:"",profile:"user"}),t()};return o.a.createElement(xe.a,{open:a,onClose:p,maxWidth:"sm",fullWidth:!0},o.a.createElement(ye.a,{style:{display:"flex",alignItems:"center",gap:10}},o.a.createElement(de.a,{size:28,style:{color:"#5D3FD3"}}),r?"Editar Usu\xe1rio":"Novo Usu\xe1rio"),o.a.createElement(ve.a,{style:{padding:32}},o.a.createElement(Ae.e,{initialValues:s,enableReinitialize:!0,validationSchema:ns,onSubmit:(e,a)=>{setTimeout(()=>{(async e=>{m(!0);try{const a={...e,companyId:i};r?(await B.put("/users/"+r,a),y.toast.success("Usu\xe1rio atualizado com sucesso!")):(await B.post("/users",a),y.toast.success("Usu\xe1rio criado com sucesso!")),l&&l(),p()}catch(a){y.toast.error("Erro ao salvar usu\xe1rio")}m(!1)})(e),a.setSubmitting(!1)},400)}},e=>{let{touched:a,errors:t,isSubmitting:n}=e;return o.a.createElement(Ae.d,null,o.a.createElement(_t.a,{container:!0,spacing:2},o.a.createElement(_t.a,{item:!0,xs:12,md:6},o.a.createElement(Ae.b,{as:Ce.a,label:"Nome",name:"name",error:a.name&&Boolean(t.name),helperText:a.name&&t.name,variant:"outlined",fullWidth:!0,margin:"dense",required:!0})),o.a.createElement(_t.a,{item:!0,xs:12,md:6},o.a.createElement(Ae.b,{as:Ce.a,label:"Email",name:"email",type:"email",error:a.email&&Boolean(t.email),helperText:a.email&&t.email,variant:"outlined",fullWidth:!0,margin:"dense",required:!0})),o.a.createElement(_t.a,{item:!0,xs:12,md:6},o.a.createElement(Ae.b,{as:Ce.a,label:"Senha",name:"password",type:"password",error:a.password&&Boolean(t.password),helperText:a.password&&t.password,variant:"outlined",fullWidth:!0,margin:"dense",required:!r})),o.a.createElement(_t.a,{item:!0,xs:12,md:6},o.a.createElement(ke.a,{variant:"outlined",fullWidth:!0,margin:"dense"},o.a.createElement(Se.a,null,"Perfil"),o.a.createElement(Ae.b,{as:Ne.a,name:"profile",label:"Perfil"},o.a.createElement(oe.a,{value:"admin"},"Admin"),o.a.createElement(oe.a,{value:"user"},"Usu\xe1rio"))))),o.a.createElement(we.a,{style:{marginTop:24}},o.a.createElement(b.a,{onClick:p},"Cancelar"),o.a.createElement(Ya,{loading:d,type:"submit",variant:"contained",color:"primary"},r?"Atualizar":"Criar")))})))}function rs(e){let{open:a,onClose:t,onSubmit:r,initialValue:i,plans:l,loading:s}=e;const[c,d]=Object(n.useState)(0),m=["Dados da Empresa","Configura\xe7\xf5es e Datas"],[u,p]=Object(n.useState)({name:"",email:"",phone:"",planId:"",status:!0,campaignsEnabled:!1,dueDate:"",recurrence:"",...i});Object(n.useEffect)(()=>{p({name:"",email:"",phone:"",planId:"",status:!0,campaignsEnabled:!1,dueDate:"",recurrence:"",...i}),d(0)},[i,a]);const g=e=>{const{name:a,value:t,type:n,checked:o}=e.target;p(e=>({...e,[a]:"checkbox"===n?o:t}))};return o.a.createElement(xe.a,{open:a,onClose:t,maxWidth:"md",fullWidth:!0},o.a.createElement(ye.a,{style:{display:"flex",alignItems:"center",gap:10}},o.a.createElement(de.a,{size:28,style:{color:"#5D3FD3"}}),u.id?"Editar Empresa":"Nova Empresa"),o.a.createElement(ve.a,{style:{padding:32}},o.a.createElement(bo.a,{activeStep:c,style:{marginBottom:24}},m.map(e=>o.a.createElement(Eo.a,{key:e},o.a.createElement(ho.a,null,e)))),o.a.createElement("form",{onSubmit:e=>{e.preventDefault(),r(u)},autoComplete:"off"},0===c&&o.a.createElement(_t.a,{container:!0,spacing:2},o.a.createElement(_t.a,{item:!0,xs:12,md:6},o.a.createElement(Ce.a,{label:"Nome da Empresa",name:"name",value:u.name,onChange:g,variant:"outlined",fullWidth:!0,margin:"dense",required:!0})),o.a.createElement(_t.a,{item:!0,xs:12,md:6},o.a.createElement(Ce.a,{label:"E-mail",name:"email",value:u.email,onChange:g,variant:"outlined",fullWidth:!0,margin:"dense",required:!0})),o.a.createElement(_t.a,{item:!0,xs:12,md:6},o.a.createElement(Ce.a,{label:"Telefone",name:"phone",value:u.phone,onChange:g,variant:"outlined",fullWidth:!0,margin:"dense"})),o.a.createElement(_t.a,{item:!0,xs:12,md:6},o.a.createElement(ke.a,{variant:"outlined",fullWidth:!0,margin:"dense"},o.a.createElement(Se.a,null,"Plano"),o.a.createElement(Ne.a,{name:"planId",value:u.planId,onChange:g,label:"Plano",required:!0},l.map(e=>o.a.createElement(oe.a,{key:e.id,value:e.id},e.name)))))),1===c&&o.a.createElement(_t.a,{container:!0,spacing:2},o.a.createElement(_t.a,{item:!0,xs:12,md:4},o.a.createElement(ke.a,{variant:"outlined",fullWidth:!0,margin:"dense"},o.a.createElement(Se.a,null,"Status"),o.a.createElement(Ne.a,{name:"status",value:u.status,onChange:g,label:"Status"},o.a.createElement(oe.a,{value:!0},"Ativo"),o.a.createElement(oe.a,{value:!1},"Inativo")))),o.a.createElement(_t.a,{item:!0,xs:12,md:4},o.a.createElement(ke.a,{variant:"outlined",fullWidth:!0,margin:"dense"},o.a.createElement(Se.a,null,"Campanhas"),o.a.createElement(Ne.a,{name:"campaignsEnabled",value:u.campaignsEnabled,onChange:g,label:"Campanhas"},o.a.createElement(oe.a,{value:!0},"Habilitadas"),o.a.createElement(oe.a,{value:!1},"Desabilitadas")))),o.a.createElement(_t.a,{item:!0,xs:12,md:4},o.a.createElement(ke.a,{variant:"outlined",fullWidth:!0,margin:"dense"},o.a.createElement(Se.a,null,"Recorr\xeancia"),o.a.createElement(Ne.a,{name:"recurrence",value:u.recurrence,onChange:g,label:"Recorr\xeancia"},o.a.createElement(oe.a,{value:"MENSAL"},"Mensal")))),o.a.createElement(_t.a,{item:!0,xs:12,md:6},o.a.createElement(Ce.a,{label:"Data de Vencimento",name:"dueDate",type:"date",value:u.dueDate,onChange:g,InputLabelProps:{shrink:!0},variant:"outlined",fullWidth:!0,margin:"dense"}))),o.a.createElement(we.a,{style:{marginTop:24}},o.a.createElement(b.a,{onClick:t},"Cancelar"),c>0&&o.a.createElement(b.a,{onClick:()=>d(e=>e-1)},"Voltar"),c<m.length-1?o.a.createElement(b.a,{variant:"contained",color:"primary",onClick:()=>d(e=>e+1)},"Pr\xf3ximo"):o.a.createElement(Ya,{loading:s,type:"submit",variant:"contained",color:"primary"},"Salvar")))))}function is(e){let{open:a,onClose:t,company:r}=e;const i=ts(),[l,s]=Object(n.useState)([]),[c,d]=Object(n.useState)(!1),[m,u]=Object(n.useState)(!1),[p,E]=Object(n.useState)(null),[h,x]=Object(n.useState)(!1),[v,C]=Object(n.useState)(null);Object(n.useEffect)(()=>{a&&(null===r||void 0===r?void 0:r.id)&&k()},[a,r]);const k=async()=>{d(!0);try{const{data:e}=await B.get("/users/list",{params:{companyId:r.id}});s(e),d(!1)}catch(e){y.toast.error("Erro ao carregar usu\xe1rios"),d(!1)}};return o.a.createElement(xe.a,{open:a,onClose:t,maxWidth:"md",fullWidth:!0},o.a.createElement(ye.a,{style:{display:"flex",alignItems:"center",gap:10}},o.a.createElement(Te.a,{size:28,style:{color:"#5D3FD3"}}),"Gerenciar Usu\xe1rios - ",null===r||void 0===r?void 0:r.name),o.a.createElement(ve.a,{style:{padding:32}},o.a.createElement(_t.a,{container:!0,spacing:2},o.a.createElement(_t.a,{item:!0,xs:12},o.a.createElement(g.a,{display:"flex",justifyContent:"space-between",alignItems:"center",mb:2},o.a.createElement(f.a,{variant:"h6"},"Lista de Usu\xe1rios"),o.a.createElement(b.a,{variant:"contained",color:"primary",startIcon:o.a.createElement(Kn.a,{size:20}),onClick:()=>{E(null),u(!0)}},"Adicionar Usu\xe1rio"))),o.a.createElement(_t.a,{item:!0,xs:12},c?o.a.createElement(g.a,{display:"flex",justifyContent:"center",p:3},o.a.createElement(be.a,null)):0===l.length?o.a.createElement(g.a,{display:"flex",justifyContent:"center",p:3},o.a.createElement(f.a,{color:"textSecondary"},"Nenhum usu\xe1rio encontrado")):o.a.createElement(_t.a,{container:!0,spacing:2},l.map(e=>o.a.createElement(_t.a,{item:!0,xs:12,sm:6,md:4,key:e.id},o.a.createElement(wa.a,{className:i.companyCard},o.a.createElement("div",{className:i.cardHeader},o.a.createElement("div",{className:i.companyName},o.a.createElement(de.a,{size:22})," ",e.name),o.a.createElement("div",{style:{display:"flex",gap:"8px"}},o.a.createElement(J.a,{onClick:a=>{a.stopPropagation(),(e=>{E(e),u(!0)})(e)},"aria-label":"edit"},o.a.createElement(De.a,null)),o.a.createElement(J.a,{onClick:a=>{a.stopPropagation(),(e=>{C(e),x(!0)})(e)},"aria-label":"delete",style:{color:"#c62828"}},o.a.createElement(Jn.a,{size:20})))),o.a.createElement("div",{className:i.infoList},o.a.createElement("div",{className:i.infoItem},o.a.createElement(fl.a,{size:16})," ",e.email),o.a.createElement("div",{className:i.infoItem},o.a.createElement(Qe.a,{size:16})," ",e.phone||"-"))))))))),o.a.createElement(we.a,null,o.a.createElement(b.a,{onClick:t},"Fechar")),o.a.createElement(os,{open:m,onClose:()=>u(!1),userId:null===p||void 0===p?void 0:p.id,companyId:null===r||void 0===r?void 0:r.id,onUserSaved:()=>{k()}}),o.a.createElement(Pt,{title:"Exclus\xe3o de Usu\xe1rio",open:h,onClose:()=>x(!1),onConfirm:async()=>{if(v){d(!0);try{await B.delete("/users/"+v.id),y.toast.success("Usu\xe1rio exclu\xeddo com sucesso!"),k(),x(!1),C(null)}catch(e){y.toast.error("Erro ao excluir usu\xe1rio")}d(!1)}}},"Deseja realmente excluir o usu\xe1rio ",null===v||void 0===v?void 0:v.name,"?"))}function ls(e){const{records:a,onSelect:t,onDelete:n,onManageUsers:r}=e,i=ts(),{dateToClient:l}=xa();return o.a.createElement(_t.a,{container:!0,spacing:3},a.map((e,a)=>o.a.createElement(_t.a,{item:!0,xs:12,sm:6,md:4,key:a},o.a.createElement(wa.a,{className:i.companyCard,onClick:()=>r(e),style:{cursor:"pointer"}},o.a.createElement("div",{className:i.cardHeader},o.a.createElement("div",{className:i.companyName},o.a.createElement(de.a,{size:22})," ",e.name||"-"),o.a.createElement("div",{style:{display:"flex",gap:"8px"}},o.a.createElement(J.a,{onClick:a=>{a.stopPropagation(),t(e)},"aria-label":"edit"},o.a.createElement(De.a,null)),o.a.createElement(J.a,{onClick:a=>{a.stopPropagation(),n(e)},"aria-label":"delete",style:{color:"#c62828"}},o.a.createElement(Jn.a,{size:20})))),o.a.createElement("div",{className:i.infoList},o.a.createElement("div",{className:i.infoItem},o.a.createElement(fl.a,{size:16})," ",e.email||"-"),o.a.createElement("div",{className:i.infoItem},o.a.createElement(Qe.a,{size:16})," ",e.phone||"-"),(e=>{var a;return o.a.createElement("span",{className:i.infoItem,style:{background:"#f0f7ff"}},o.a.createElement(Zl.a,{size:16})," ",null!==e.planId?null===(a=e.plan)||void 0===a?void 0:a.name:"-")})(e),o.a.createElement("div",{className:i.infoItem},o.a.createElement($e.a,{size:16})," Vencimento: ",l(e.dueDate)),o.a.createElement("div",{className:i.infoItem},o.a.createElement(es.a,{size:16})," Recorr\xeancia: ",e.recurrence||"-")),o.a.createElement(Z.a,{style:{margin:"12px 0"}}),o.a.createElement(g.a,{display:"flex",flexWrap:"wrap",gap:1},(e=>o.a.createElement("span",{className:`${i.badge} ${e.status?i.badgeAtivo:i.badgeInativo}`},e.status?o.a.createElement(Wt.a,{size:15}):o.a.createElement(Qi.a,{size:15})," ",e.status?"Ativo":"Inativo"))(e),(e=>{let a=!1;if(Object(k.has)(e,"settings")&&Object(k.isArray)(e.settings)&&e.settings.length>0){const t=e.settings.find(e=>"campaignsEnabled"===e.key);t&&(a="true"===t.value)}return o.a.createElement("span",{className:`${i.badge} ${a?i.badgeCampanha:i.badgeCampanhaOff}`},a?o.a.createElement(Wt.a,{size:14}):o.a.createElement(Qi.a,{size:14})," Campanhas"," ",a?"Habilitadas":"Desabilitadas")})(e))))))}function ss(){const e=ts(),{list:a,save:t,update:r,remove:i}=as(),{list:l}=ua(),[s,c]=Object(n.useState)(!1),[d,m]=Object(n.useState)(!1),[u,p]=Object(n.useState)([]),[g,f]=Object(n.useState)({name:"",email:"",phone:"",planId:"",status:!0,campaignsEnabled:!1,dueDate:"",recurrence:""}),[b,E]=Object(n.useState)(!1),[h,x]=Object(n.useState)([]),[v,C]=Object(n.useState)(!1),[k,S]=Object(n.useState)(null);Object(n.useEffect)(()=>{!async function(){const e=await a();p(e);const t=await l();x(t)}()},[]);const N=()=>{f({id:void 0,name:"",email:"",phone:"",planId:"",status:!0,campaignsEnabled:!1,dueDate:"",recurrence:""}),E(!1)};return o.a.createElement(wa.a,{className:e.mainPaper,elevation:0},o.a.createElement(J.a,{className:e.addButton,color:"primary",onClick:()=>{f({}),E(!0)}},o.a.createElement(Kn.a,{size:24,color:"#fff"})),o.a.createElement(rs,{open:b,onClose:N,onSubmit:async e=>{m(!0);try{void 0!==e.id?await r(e):await t(e);const n=await a();p(n),N(),y.toast.success("Opera\xe7\xe3o realizada com sucesso!")}catch(n){y.toast.error("N\xe3o foi poss\xedvel realizar a opera\xe7\xe3o. Verifique se j\xe1 existe uma empresa com o mesmo nome ou se os campos foram preenchidos corretamente")}m(!1)},initialValue:g,plans:h,loading:d}),o.a.createElement(is,{open:v,onClose:()=>{C(!1),S(null)},company:k}),o.a.createElement(_t.a,{spacing:2,container:!0},o.a.createElement(_t.a,{xs:12,item:!0},o.a.createElement(ls,{records:u,onSelect:e=>{var a;let t=!1;const n=null===(a=e.settings)||void 0===a?void 0:a.find(e=>e.key.indexOf("campaignsEnabled")>-1);n&&(t="true"===n.value||"enabled"===n.value),f({id:e.id,name:e.name||"",phone:e.phone||"",email:e.email||"",planId:e.planId||"",status:!1!==e.status,campaignsEnabled:t,dueDate:e.dueDate||"",recurrence:e.recurrence||""}),E(!0)},onDelete:e=>{f(e),c(!0)},onManageUsers:e=>{S(e),C(!0)}}))),o.a.createElement(Pt,{title:"Exclus\xe3o de Registro",open:s,onClose:()=>c(!1),onConfirm:()=>(async()=>{m(!0);try{await i(g.id);const e=await a();p(e),N(),y.toast.success("Opera\xe7\xe3o realizada com sucesso!")}catch(e){y.toast.error("N\xe3o foi poss\xedvel realizar a opera\xe7\xe3o")}m(!1)})()},"Deseja realmente excluir esse registro?"))}var cs=t(1281),ds=t(1282);const ms=Object(Y.a)(e=>({mainPaper:{width:"100%",flex:1,padding:e.spacing(3),background:"linear-gradient(135deg, #f7f8fa 60%, #e5e0fa 100%)"},card:{background:"#fff",borderRadius:22,boxShadow:"0 4px 20px rgba(93,63,211,0.10)",padding:e.spacing(3),margin:"0 auto",transition:"all 0.3s",position:"relative",display:"flex",flexDirection:"column",height:"100%","&:hover":{transform:"translateY(-4px)",boxShadow:"0 8px 30px rgba(93,63,211,0.15)"}},cardHeader:{display:"flex",alignItems:"center",gap:12,marginBottom:e.spacing(2)},cardTitle:{fontWeight:700,fontSize:20,color:"#5D3FD3",display:"flex",alignItems:"center",gap:8},cardDesc:{color:"#444",fontSize:15,marginBottom:e.spacing(1),marginTop:e.spacing(1)},cardVideo:{display:"flex",alignItems:"center",gap:8,color:"#c62828",fontWeight:500,fontSize:15,marginTop:e.spacing(1)},addButton:{position:"fixed",bottom:e.spacing(3),right:e.spacing(3),borderRadius:"50%",width:56,height:56,background:"linear-gradient(90deg, #5D3FD3 0%, #7B68EE 100%)",boxShadow:"0 4px 12px rgba(93,63,211,0.15)","&:hover":{background:"linear-gradient(90deg, #4930A8 0%, #6A5ACD 100%)"},zIndex:10}}));function us(e){let{open:a,onClose:t,onSubmit:r,initialValue:i,loading:l}=e;const[s,c]=Object(n.useState)(0),d=["Informa\xe7\xf5es B\xe1sicas","Conte\xfado do V\xeddeo"],[m,u]=Object(n.useState)({title:"",description:"",video:"",...i});Object(n.useEffect)(()=>{u({title:"",description:"",video:"",...i}),c(0)},[i,a]);const p=e=>{const{name:a,value:t}=e.target;u(e=>({...e,[a]:t}))};return o.a.createElement(xe.a,{open:a,onClose:t,maxWidth:"sm",fullWidth:!0},o.a.createElement(ye.a,{style:{display:"flex",alignItems:"center",gap:10}},o.a.createElement(cs.a,{size:26,style:{color:"#5D3FD3"}}),m.id?"Editar Ajuda":"Nova Ajuda"),o.a.createElement(ve.a,{style:{padding:32}},o.a.createElement(bo.a,{activeStep:s,style:{marginBottom:24}},d.map(e=>o.a.createElement(Eo.a,{key:e},o.a.createElement(ho.a,null,e)))),o.a.createElement("form",{onSubmit:e=>{e.preventDefault(),r(m)},autoComplete:"off"},0===s&&o.a.createElement(_t.a,{container:!0,spacing:2},o.a.createElement(_t.a,{item:!0,xs:12},o.a.createElement(Ce.a,{label:"T\xedtulo",name:"title",value:m.title,onChange:p,variant:"outlined",fullWidth:!0,margin:"dense",required:!0})),o.a.createElement(_t.a,{item:!0,xs:12},o.a.createElement(Ce.a,{label:"Descri\xe7\xe3o",name:"description",value:m.description,onChange:p,variant:"outlined",fullWidth:!0,margin:"dense"}))),1===s&&o.a.createElement(_t.a,{container:!0,spacing:2},o.a.createElement(_t.a,{item:!0,xs:12},o.a.createElement(Ce.a,{label:"C\xf3digo do V\xeddeo (YouTube)",name:"video",value:m.video,onChange:p,variant:"outlined",fullWidth:!0,margin:"dense"}))),o.a.createElement(we.a,{style:{marginTop:24}},o.a.createElement(b.a,{onClick:t},"Cancelar"),s>0&&o.a.createElement(b.a,{onClick:()=>c(e=>e-1)},"Voltar"),s<d.length-1?o.a.createElement(b.a,{variant:"contained",color:"primary",onClick:()=>c(e=>e+1)},"Pr\xf3ximo"):o.a.createElement(Ya,{loading:l,type:"submit",variant:"contained",color:"primary"},"Salvar")))))}function ps(e){let{records:a,onSelect:t,onDelete:n}=e;const r=ms();return o.a.createElement(_t.a,{container:!0,spacing:3},a.map(e=>o.a.createElement(_t.a,{item:!0,xs:12,sm:6,md:4,key:e.id},o.a.createElement(wa.a,{className:r.card},o.a.createElement("div",{className:r.cardHeader},o.a.createElement(cs.a,{size:22}),o.a.createElement("span",{className:r.cardTitle},e.title||"-"),o.a.createElement("div",{style:{marginLeft:"auto",display:"flex",gap:"8px"}},o.a.createElement(J.a,{onClick:()=>t(e),"aria-label":"edit"},o.a.createElement(De.a,null)),o.a.createElement(J.a,{onClick:()=>n(e),"aria-label":"delete",style:{color:"#c62828"}},o.a.createElement(Jn.a,{size:20})))),o.a.createElement("div",{className:r.cardDesc},o.a.createElement(Xe.a,{size:16,style:{marginRight:4}})," ",e.description||"-"),o.a.createElement(Z.a,{style:{margin:"10px 0"}}),o.a.createElement("div",{className:r.cardVideo},o.a.createElement(ds.a,{size:18})," ",e.video||"-")))))}function gs(){const e=ms(),{list:a,save:t,update:r,remove:i}=nl(),[l,s]=Object(n.useState)(!1),[c,d]=Object(n.useState)(!1),[m,u]=Object(n.useState)([]),[p,g]=Object(n.useState)({title:"",description:"",video:""}),[f,b]=Object(n.useState)(!1);Object(n.useEffect)(()=>{!async function(){await E()}()},[]);const E=async()=>{d(!0);try{const e=await a();u(e)}catch(e){y.toast.error("N\xe3o foi poss\xedvel carregar a lista de registros")}d(!1)},h=()=>{g({title:"",description:"",video:""}),b(!1)};return o.a.createElement(wa.a,{className:e.mainPaper,elevation:0},o.a.createElement(J.a,{className:e.addButton,color:"primary",onClick:()=>{g({}),b(!0)}},o.a.createElement(Kn.a,{size:24,color:"#fff"})),o.a.createElement(us,{open:f,onClose:h,onSubmit:async e=>{d(!0);try{void 0!==e.id?await r(e):await t(e),await E(),h(),y.toast.success("Opera\xe7\xe3o realizada com sucesso!")}catch(a){y.toast.error("N\xe3o foi poss\xedvel realizar a opera\xe7\xe3o. Verifique se j\xe1 existe uma ajuda com o mesmo nome ou se os campos foram preenchidos corretamente")}d(!1)},initialValue:p,loading:c}),o.a.createElement(_t.a,{spacing:2,container:!0},o.a.createElement(_t.a,{xs:12,item:!0},o.a.createElement(ps,{records:m,onSelect:e=>{g({id:e.id,title:e.title||"",description:e.description||"",video:e.video||""}),b(!0)},onDelete:e=>{g(e),s(!0)}}))),o.a.createElement(Pt,{title:"Exclus\xe3o de Registro",open:l,onClose:()=>s(!1),onConfirm:()=>(async()=>{d(!0);try{await i(p.id),await E(),h(),y.toast.success("Opera\xe7\xe3o realizada com sucesso!")}catch(e){y.toast.error("N\xe3o foi poss\xedvel realizar a opera\xe7\xe3o")}d(!1)})()},"Deseja realmente excluir esse registro?"))}var fs=t(1283),bs=t(1284),Es=t(1285);const hs=Object(Y.a)(e=>({root:{width:"100%"},mainPaper:{width:"100%",flex:1,padding:e.spacing(3),background:"linear-gradient(135deg, #f7f8fa 60%, #e5e0fa 100%)","&::-webkit-scrollbar":{width:"8px",height:"8px"},"&::-webkit-scrollbar-track":{background:"#f1f1f1",borderRadius:"4px"},"&::-webkit-scrollbar-thumb":{background:"#5D3FD3",borderRadius:"4px","&:hover":{background:"#4930A8"}}},fullWidth:{width:"100%"},planCard:{background:"#fff",borderRadius:24,padding:e.spacing(3),boxShadow:"0 4px 20px rgba(93,63,211,0.08)",transition:"all 0.3s ease",border:"1px solid #f0f0f0",position:"relative",overflow:"hidden",display:"flex",flexDirection:"column",height:"100%","&:hover":{transform:"translateY(-4px)",boxShadow:"0 8px 30px rgba(93,63,211,0.15)"}},planHeader:{display:"flex",justifyContent:"space-between",alignItems:"flex-start",marginBottom:e.spacing(2)},planName:{fontSize:24,fontWeight:700,color:"#5D3FD3",marginBottom:e.spacing(1)},planValue:{fontSize:28,fontWeight:700,color:"#5D3FD3",display:"flex",alignItems:"center",gap:8,marginBottom:e.spacing(2)},planFeatures:{display:"flex",flexDirection:"column",gap:12,marginTop:e.spacing(2)},featureItem:{display:"flex",alignItems:"center",gap:12,padding:"8px 16px",background:"#f8f7ff",borderRadius:12,"& svg":{color:"#5D3FD3"}},featureLabel:{fontSize:14,color:"#666",fontWeight:500},featureValue:{marginLeft:"auto",display:"flex",alignItems:"center",gap:4},addButton:{position:"fixed",bottom:e.spacing(3),right:e.spacing(3),borderRadius:"50%",width:56,height:56,background:"linear-gradient(90deg, #5D3FD3 0%, #7B68EE 100%)",boxShadow:"0 4px 12px rgba(93,63,211,0.15)","&:hover":{background:"linear-gradient(90deg, #4930A8 0%, #6A5ACD 100%)"}},modalContent:{padding:e.spacing(3)},stepContent:{marginTop:e.spacing(3)},formSection:{marginBottom:e.spacing(3)},formTitle:{fontSize:18,fontWeight:600,color:"#5D3FD3",marginBottom:e.spacing(2)},formGrid:{marginBottom:e.spacing(2)},dialogActions:{padding:e.spacing(2,3),borderTop:"1px solid #f0f0f0"}})),xs=["Informa\xe7\xf5es B\xe1sicas","Recursos do Plano"];function ys(e){const{onSubmit:a,onDelete:t,onCancel:r,initialValue:i,loading:l}=e,s=hs(),[c,d]=Object(n.useState)(0),[m,u]=Object(n.useState)(!1),[p,g]=Object(n.useState)({name:"",users:0,connections:0,queues:0,value:0,useCampaigns:!0,useSchedules:!0,useInternalChat:!0,useExternalApi:!0,useKanban:!0,useOpenAi:!0,useIntegrations:!0});Object(n.useEffect)(()=>{g(i),i.id&&u(!0)},[i]);const E=()=>{d(e=>e+1)},h=()=>{d(e=>e-1)},x=()=>{u(!1),d(0),r()};return o.a.createElement(o.a.Fragment,null,o.a.createElement(J.a,{className:s.addButton,color:"primary",onClick:()=>u(!0)},o.a.createElement(Kn.a,{size:24,color:"#fff"})),o.a.createElement(xe.a,{open:m,onClose:x,maxWidth:"md",fullWidth:!0},o.a.createElement(ye.a,null,p.id?"Editar Plano":"Novo Plano"),o.a.createElement(ve.a,{className:s.modalContent},o.a.createElement(bo.a,{activeStep:c},xs.map(e=>o.a.createElement(Eo.a,{key:e},o.a.createElement(ho.a,null,e)))),o.a.createElement("div",{className:s.stepContent},o.a.createElement(Ae.e,{enableReinitialize:!0,initialValues:p,onSubmit:async e=>{a(e),x()}},e=>o.a.createElement(Ae.d,null,(e=>{switch(e){case 0:return o.a.createElement(_t.a,{container:!0,spacing:2},o.a.createElement(_t.a,{item:!0,xs:12},o.a.createElement(f.a,{className:s.formTitle},"Detalhes do Plano")),o.a.createElement(_t.a,{item:!0,xs:12,md:6},o.a.createElement(Ae.b,{as:Ce.a,label:"Nome do Plano",name:"name",variant:"outlined",fullWidth:!0,margin:"dense"})),o.a.createElement(_t.a,{item:!0,xs:12,md:6},o.a.createElement(Ae.b,{as:Ce.a,label:"Valor",name:"value",variant:"outlined",fullWidth:!0,margin:"dense",type:"text"})),o.a.createElement(_t.a,{item:!0,xs:12,md:4},o.a.createElement(Ae.b,{as:Ce.a,label:"Usu\xe1rios",name:"users",variant:"outlined",fullWidth:!0,margin:"dense",type:"number"})),o.a.createElement(_t.a,{item:!0,xs:12,md:4},o.a.createElement(Ae.b,{as:Ce.a,label:"Conex\xf5es",name:"connections",variant:"outlined",fullWidth:!0,margin:"dense",type:"number"})),o.a.createElement(_t.a,{item:!0,xs:12,md:4},o.a.createElement(Ae.b,{as:Ce.a,label:"Filas",name:"queues",variant:"outlined",fullWidth:!0,margin:"dense",type:"number"})));case 1:return o.a.createElement(_t.a,{container:!0,spacing:2},o.a.createElement(_t.a,{item:!0,xs:12},o.a.createElement(f.a,{className:s.formTitle},"Recursos Dispon\xedveis")),o.a.createElement(_t.a,{item:!0,xs:12,md:6},o.a.createElement(ke.a,{fullWidth:!0,margin:"dense",variant:"outlined"},o.a.createElement(Se.a,null,"Campanhas"),o.a.createElement(Ae.b,{as:Ne.a,name:"useCampaigns",label:"Campanhas"},o.a.createElement(oe.a,{value:!0},"Habilitado"),o.a.createElement(oe.a,{value:!1},"Desabilitado")))),o.a.createElement(_t.a,{item:!0,xs:12,md:6},o.a.createElement(ke.a,{fullWidth:!0,margin:"dense",variant:"outlined"},o.a.createElement(Se.a,null,"Agendamentos"),o.a.createElement(Ae.b,{as:Ne.a,name:"useSchedules",label:"Agendamentos"},o.a.createElement(oe.a,{value:!0},"Habilitado"),o.a.createElement(oe.a,{value:!1},"Desabilitado")))),o.a.createElement(_t.a,{item:!0,xs:12,md:6},o.a.createElement(ke.a,{fullWidth:!0,margin:"dense",variant:"outlined"},o.a.createElement(Se.a,null,"Chat Interno"),o.a.createElement(Ae.b,{as:Ne.a,name:"useInternalChat",label:"Chat Interno"},o.a.createElement(oe.a,{value:!0},"Habilitado"),o.a.createElement(oe.a,{value:!1},"Desabilitado")))),o.a.createElement(_t.a,{item:!0,xs:12,md:6},o.a.createElement(ke.a,{fullWidth:!0,margin:"dense",variant:"outlined"},o.a.createElement(Se.a,null,"API Externa"),o.a.createElement(Ae.b,{as:Ne.a,name:"useExternalApi",label:"API Externa"},o.a.createElement(oe.a,{value:!0},"Habilitado"),o.a.createElement(oe.a,{value:!1},"Desabilitado")))),o.a.createElement(_t.a,{item:!0,xs:12,md:6},o.a.createElement(ke.a,{fullWidth:!0,margin:"dense",variant:"outlined"},o.a.createElement(Se.a,null,"Kanban"),o.a.createElement(Ae.b,{as:Ne.a,name:"useKanban",label:"Kanban"},o.a.createElement(oe.a,{value:!0},"Habilitado"),o.a.createElement(oe.a,{value:!1},"Desabilitado")))),o.a.createElement(_t.a,{item:!0,xs:12,md:6},o.a.createElement(ke.a,{fullWidth:!0,margin:"dense",variant:"outlined"},o.a.createElement(Se.a,null,"Open.Ai"),o.a.createElement(Ae.b,{as:Ne.a,name:"useOpenAi",label:"Open.Ai"},o.a.createElement(oe.a,{value:!0},"Habilitado"),o.a.createElement(oe.a,{value:!1},"Desabilitado")))),o.a.createElement(_t.a,{item:!0,xs:12},o.a.createElement(ke.a,{fullWidth:!0,margin:"dense",variant:"outlined"},o.a.createElement(Se.a,null,"Integra\xe7\xf5es"),o.a.createElement(Ae.b,{as:Ne.a,name:"useIntegrations",label:"Integra\xe7\xf5es"},o.a.createElement(oe.a,{value:!0},"Habilitado"),o.a.createElement(oe.a,{value:!1},"Desabilitado")))));default:return null}})(c),o.a.createElement(we.a,{className:s.dialogActions},o.a.createElement(b.a,{onClick:x},"Cancelar"),p.id&&o.a.createElement(b.a,{color:"secondary",onClick:()=>t(p)},"Excluir"),c>0&&o.a.createElement(b.a,{onClick:h},"Voltar"),c<xs.length-1?o.a.createElement(b.a,{variant:"contained",color:"primary",onClick:E},"Pr\xf3ximo"):o.a.createElement(Ya,{loading:l,type:"submit",variant:"contained",color:"primary"},"Salvar"))))))))}function vs(e){const{records:a,onSelect:t,onDelete:n}=e,r=hs(),i=(e,a,t)=>o.a.createElement("div",{className:r.featureItem},a,o.a.createElement("span",{className:r.featureLabel},t),o.a.createElement("div",{className:r.featureValue},e?o.a.createElement(Wt.a,{size:16,color:"#2e7d32"}):o.a.createElement(Qi.a,{size:16,color:"#c62828"})));return o.a.createElement(_t.a,{container:!0,spacing:3},a.map(e=>{var a;return o.a.createElement(_t.a,{item:!0,xs:12,sm:6,md:4,key:e.id},o.a.createElement(wa.a,{className:r.planCard},o.a.createElement("div",{className:r.planHeader},o.a.createElement("div",null,o.a.createElement(f.a,{className:r.planName},e.name),o.a.createElement("div",{className:r.planValue},o.a.createElement(da.a,{size:24}),null===(a=e.value)||void 0===a?void 0:a.toLocaleString("pt-br",{style:"currency",currency:"BRL"}))),o.a.createElement("div",{style:{display:"flex",gap:"8px"}},o.a.createElement(J.a,{onClick:()=>t(e)},o.a.createElement(De.a,null)),o.a.createElement(J.a,{onClick:()=>n(e),style:{color:"#c62828"}},o.a.createElement(Jn.a,{size:20})))),o.a.createElement(Z.a,null),o.a.createElement("div",{className:r.planFeatures},i(e.users>0,o.a.createElement(Te.a,{size:18}),e.users+" Usu\xe1rios"),i(e.connections>0,o.a.createElement(fs.a,{size:18}),e.connections+" Conex\xf5es"),i(e.queues>0,o.a.createElement(na.a,{size:18}),e.queues+" Filas"),i(e.useCampaigns,o.a.createElement(se.a,{size:18}),"Campanhas"),i(e.useSchedules,o.a.createElement($e.a,{size:18}),"Agendamentos"),i(e.useInternalChat,o.a.createElement(ce.a,{size:18}),"Chat Interno"),i(e.useExternalApi,o.a.createElement(ca.a,{size:18}),"API Externa"),i(e.useKanban,o.a.createElement(bs.a,{size:18}),"Kanban"),i(e.useOpenAi,o.a.createElement(Es.a,{size:18}),"Open.Ai"),i(e.useIntegrations,o.a.createElement(sa.a,{size:18}),"Integra\xe7\xf5es"))))}))}function Cs(){const e=hs(),{list:a,save:t,update:r,remove:i}=ua(),[l,s]=Object(n.useState)(!1),[c,d]=Object(n.useState)(!1),[m,u]=Object(n.useState)([]),[p,g]=Object(n.useState)({name:"",users:0,connections:0,queues:0,value:0,useCampaigns:!0,useSchedules:!0,useInternalChat:!0,useExternalApi:!0,useKanban:!0,useOpenAi:!0,useIntegrations:!0});Object(n.useEffect)(()=>{!async function(){await f()}()},[p]);const f=async()=>{d(!0);try{const e=await a();u(e)}catch(e){y.toast.error("N\xe3o foi poss\xedvel carregar a lista de registros")}d(!1)},b=()=>{s(!0)},E=()=>{g({id:void 0,name:"",users:0,connections:0,queues:0,value:0,useCampaigns:!0,useSchedules:!0,useInternalChat:!0,useExternalApi:!0,useKanban:!0,useOpenAi:!0,useIntegrations:!0})};return o.a.createElement(wa.a,{className:e.mainPaper,elevation:0},o.a.createElement(_t.a,{spacing:2,container:!0},o.a.createElement(_t.a,{xs:12,item:!0},o.a.createElement(ys,{initialValue:p,onDelete:b,onSubmit:async e=>{d(!0),console.log(e);try{void 0!==e.id?await r(e):await t(e),await f(),E(),y.toast.success("Opera\xe7\xe3o realizada com sucesso!")}catch(a){y.toast.error("N\xe3o foi poss\xedvel realizar a opera\xe7\xe3o. Verifique se j\xe1 existe uma plano com o mesmo nome ou se os campos foram preenchidos corretamente")}d(!1)},onCancel:E,loading:c})),o.a.createElement(_t.a,{xs:12,item:!0},o.a.createElement(vs,{records:m,onSelect:e=>{var a;let t=!1!==e.useCampaigns,n=!1!==e.useSchedules,o=!1!==e.useInternalChat,r=!1!==e.useExternalApi,i=!1!==e.useKanban,l=!1!==e.useOpenAi,s=!1!==e.useIntegrations;g({id:e.id,name:e.name||"",users:e.users||0,connections:e.connections||0,queues:e.queues||0,value:(null===(a=e.value)||void 0===a?void 0:a.toLocaleString("pt-br",{minimumFractionDigits:0}))||0,useCampaigns:t,useSchedules:n,useInternalChat:o,useExternalApi:r,useKanban:i,useOpenAi:l,useIntegrations:s})},onDelete:e=>{g(e),b()}}))),o.a.createElement(Pt,{title:"Exclus\xe3o de Registro",open:l,onClose:()=>s(!1),onConfirm:()=>(async()=>{d(!0);try{await i(p.id),await f(),E(),y.toast.success("Opera\xe7\xe3o realizada com sucesso!")}catch(e){y.toast.error("N\xe3o foi poss\xedvel realizar a opera\xe7\xe3o")}d(!1)})()},"Deseja realmente excluir esse registro?"))}var ks=t(1103);var Ss=()=>({getAll:async e=>{const{data:a}=await B.request({url:"/settings",method:"GET",params:e});return a},update:async e=>{const{data:a}=await B.request({url:"/settings/"+e.key,method:"PUT",data:e});return a}}),Ns=t(1286),ws=t(1287),Is=t(1288),As=t(1289);const Ts=Object(Y.a)(e=>({mainWrapper:{width:"100%",background:"linear-gradient(135deg, #f7f8fa 60%, #e5e0fa 100%)",padding:e.spacing(4,0,6,0),display:"flex",flexDirection:"column",alignItems:"center"},sectionCard:{background:"#fff",borderRadius:18,boxShadow:"0 4px 32px rgba(93,63,211,0.10)",padding:e.spacing(3,3,2,3),marginBottom:e.spacing(4),maxWidth:1200,width:"100%",[e.breakpoints.down("sm")]:{padding:e.spacing(2,1,1,1),borderRadius:12}},sectionHeader:{display:"flex",alignItems:"center",gap:14,marginBottom:e.spacing(2)},sectionTitle:{fontWeight:700,fontSize:22,color:"#5D3FD3",display:"flex",alignItems:"center",gap:8},sectionDesc:{color:"#888",fontSize:15,fontWeight:400,marginLeft:2,marginTop:2},optionRow:{display:"flex",alignItems:"center",gap:18,background:"#faf9fd",borderRadius:12,boxShadow:"0 1px 6px rgba(93,63,211,0.06)",padding:e.spacing(2,2.5),marginTop:e.spacing(2),marginBottom:e.spacing(1),transition:"box-shadow 0.2s, background 0.2s","&:hover":{background:"#f3f0fa",boxShadow:"0 2px 12px rgba(93,63,211,0.10)"},[e.breakpoints.down("xs")]:{flexDirection:"column",alignItems:"flex-start",gap:8}},optionLabel:{fontWeight:600,color:"#222",fontSize:16,display:"flex",alignItems:"center",gap:8,minWidth:220},select:{marginLeft:"auto",minWidth:140,borderRadius:10,background:"#fff",fontWeight:600,fontSize:15,color:"#5D3FD3","& .MuiOutlinedInput-notchedOutline":{borderColor:"#5D3FD3"},"&:hover .MuiOutlinedInput-notchedOutline":{borderColor:"#4930A8"},"&.Mui-focused .MuiOutlinedInput-notchedOutline":{borderColor:"#4930A8"}},textField:{minWidth:180,borderRadius:10,background:"#fff",fontWeight:500,fontSize:15,color:"#5D3FD3",marginLeft:e.spacing(2)},tab:{backgroundColor:e.palette.options,borderRadius:4,width:"100%",marginBottom:10,"& .MuiTab-wrapper":{color:e.palette.fontecor},"& .MuiTabs-flexContainer":{justifyContent:"center"}}}));function Ds(e){const{settings:a,scheduleTypeChanged:t}=e,r=Ts(),[i,l]=Object(n.useState)("disabled"),[s,c]=Object(n.useState)("disabled"),[d,m]=Object(n.useState)("enabled"),[u,p]=Object(n.useState)(""),[g,f]=Object(n.useState)("enabled"),[b,E]=Object(n.useState)(!1),[h,x]=Object(n.useState)(!1),[v,C]=Object(n.useState)(!1),[k,S]=Object(n.useState)(!1),[N,w]=Object(n.useState)(""),[I,A]=Object(n.useState)(!1),[T,D]=Object(n.useState)(""),[O,j]=Object(n.useState)(!1),[R,F]=Object(n.useState)(""),[M,P]=Object(n.useState)(!1),[B,z]=Object(n.useState)(""),[W,L]=Object(n.useState)(!1),[q,H]=Object(n.useState)(""),[U,V]=Object(n.useState)(!1),[G,_]=Object(n.useState)(""),[K,Q]=Object(n.useState)(!1),[Y,X]=Object(n.useState)(0),[$,J]=Object(n.useState)(0),[Z,ee]=Object(n.useState)(0),[ae,te]=Object(n.useState)("disabled"),[ne,re]=Object(n.useState)(!1),[ie,le]=Object(n.useState)("disabled"),[se,ce]=Object(n.useState)(!1),[de,me]=Object(n.useState)("disabled"),[ue,pe]=Object(n.useState)(!1),{update:ge}=Ss();return Object(n.useEffect)(()=>{if(Array.isArray(a)&&a.length){const e=a.find(e=>"userRating"===e.key);e&&l(e.value);const t=a.find(e=>"scheduleType"===e.key);t&&c(t.value);const n=a.find(e=>"call"===e.key);n&&m(n.value);const o=a.find(e=>"CheckMsgIsGroup"===e.key);o&&f(o.value);const r=a.find(e=>"sendGreetingAccepted"===e.key);r&&te(r.value);const i=a.find(e=>"sendMsgTransfTicket"===e.key);i&&le(i.value);const s=a.find(e=>"sendGreetingMessageOneQueues"===e.key);s&&me(s.value);const d=a.find(e=>"chatBotType"===e.key);d&&p(d.value);const u=a.find(e=>"ipixc"===e.key);u&&w(u.value);const g=a.find(e=>"tokenixc"===e.key);g&&D(g.value);const b=a.find(e=>"ipmkauth"===e.key);b&&F(b.value);const E=a.find(e=>"clientidmkauth"===e.key);E&&z(E.value);const h=a.find(e=>"clientsecretmkauth"===e.key);h&&H(h.value);const x=a.find(e=>"asaas"===e.key);x&&_(x.value)}},[a]),o.a.createElement("div",{className:r.mainWrapper},o.a.createElement(wa.a,{className:r.sectionCard,elevation:0},o.a.createElement("div",{className:r.sectionHeader},o.a.createElement(oa.a,{size:28,style:{color:"#5D3FD3"}}),o.a.createElement("div",null,o.a.createElement("div",{className:r.sectionTitle},"Configura\xe7\xf5es Gerais"),o.a.createElement("div",{className:r.sectionDesc},"Personalize o funcionamento b\xe1sico do sistema."))),o.a.createElement(_t.a,{spacing:3,container:!0},o.a.createElement(_t.a,{xs:12,sm:6,md:4,item:!0},o.a.createElement("div",{className:r.optionRow},o.a.createElement("span",{className:r.optionLabel},o.a.createElement(Ns.a,{size:18})," Avalia\xe7\xf5es"),o.a.createElement(Ne.a,{value:i,onChange:async e=>{!async function(e){l(e),E(!0),await ge({key:"userRating",value:e}),y.toast.success("Opera\xe7\xe3o atualizada com sucesso."),E(!1)}(e.target.value)},className:r.select,variant:"outlined",margin:"dense"},o.a.createElement(oe.a,{value:"disabled"},"Desabilitadas"),o.a.createElement(oe.a,{value:"enabled"},"Habilitadas")),o.a.createElement(ks.a,null,b&&"Atualizando..."))),o.a.createElement(_t.a,{xs:12,sm:6,md:4,item:!0},o.a.createElement("div",{className:r.optionRow},o.a.createElement("span",{className:r.optionLabel},o.a.createElement(ws.a,{size:18})," Gerenciamento de Expediente"),o.a.createElement(Ne.a,{value:s,onChange:async e=>{!async function(e){c(e),x(!0),await ge({key:"scheduleType",value:e}),y.toast.success("Opera\xe7\xe3o atualizada com sucesso.",{position:"top-right",autoClose:2e3,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!1,draggable:!0,theme:"light"}),x(!1),"function"===typeof t&&t(e)}(e.target.value)},className:r.select,variant:"outlined",margin:"dense"},o.a.createElement(oe.a,{value:"disabled"},"Desabilitado"),o.a.createElement(oe.a,{value:"queue"},"Fila"),o.a.createElement(oe.a,{value:"company"},"Empresa")),o.a.createElement(ks.a,null,h&&"Atualizando..."))),o.a.createElement(_t.a,{xs:12,sm:6,md:4,item:!0},o.a.createElement("div",{className:r.optionRow},o.a.createElement("span",{className:r.optionLabel},o.a.createElement(xo.a,{size:18})," Ignorar Mensagens de Grupos"),o.a.createElement(Ne.a,{value:g,onChange:async e=>{!async function(e){f(e),await ge({key:"CheckMsgIsGroup",value:e}),y.toast.success("Opera\xe7\xe3o atualizada com sucesso."),f(!1)}(e.target.value)},className:r.select,variant:"outlined",margin:"dense"},o.a.createElement(oe.a,{value:"disabled"},"Desativado"),o.a.createElement(oe.a,{value:"enabled"},"Ativado")),o.a.createElement(ks.a,null,h&&"Atualizando..."))),o.a.createElement(_t.a,{xs:12,sm:6,md:4,item:!0},o.a.createElement("div",{className:r.optionRow},o.a.createElement("span",{className:r.optionLabel},o.a.createElement(Qe.a,{size:18})," Aceitar Chamada"),o.a.createElement(Ne.a,{value:d,onChange:async e=>{!async function(e){m(e),C(!0),await ge({key:"call",value:e}),y.toast.success("Opera\xe7\xe3o atualizada com sucesso."),C(!1)}(e.target.value)},className:r.select,variant:"outlined",margin:"dense"},o.a.createElement(oe.a,{value:"disabled"},"N\xe3o Aceitar"),o.a.createElement(oe.a,{value:"enabled"},"Aceitar")),o.a.createElement(ks.a,null,v&&"Atualizando..."))),o.a.createElement(_t.a,{xs:12,sm:6,md:4,item:!0},o.a.createElement("div",{className:r.optionRow},o.a.createElement("span",{className:r.optionLabel},o.a.createElement(Is.a,{size:18})," Tipo Chatbot"),o.a.createElement(Ne.a,{value:u,onChange:async e=>{!async function(e){p(e),S(!0),await ge({key:"chatBotType",value:e}),y.toast.success("Opera\xe7\xe3o atualizada com sucesso."),S(!1)}(e.target.value)},className:r.select,variant:"outlined",margin:"dense"},o.a.createElement(oe.a,{value:"text"},"Texto")),o.a.createElement(ks.a,null,k&&"Atualizando..."))),o.a.createElement(_t.a,{xs:12,sm:6,md:4,item:!0},o.a.createElement("div",{className:r.optionRow},o.a.createElement("span",{className:r.optionLabel},o.a.createElement(Ns.a,{size:18})," Enviar sauda\xe7\xe3o ao aceitar o ticket"),o.a.createElement(Ne.a,{value:ae,onChange:async e=>{!async function(e){te(e),re(!0),await ge({key:"sendGreetingAccepted",value:e}),y.toast.success("Opera\xe7\xe3o atualizada com sucesso."),re(!1)}(e.target.value)},className:r.select,variant:"outlined",margin:"dense"},o.a.createElement(oe.a,{value:"disabled"},"Desabilitado"),o.a.createElement(oe.a,{value:"enabled"},"Habilitado")),o.a.createElement(ks.a,null,ne&&"Atualizando..."))),o.a.createElement(_t.a,{xs:12,sm:6,md:4,item:!0},o.a.createElement("div",{className:r.optionRow},o.a.createElement("span",{className:r.optionLabel},o.a.createElement(As.a,{size:18})," Enviar mensagem de transfer\xeancia de Fila/agente"),o.a.createElement(Ne.a,{value:ie,onChange:async e=>{!async function(e){le(e),ce(!0),await ge({key:"sendMsgTransfTicket",value:e}),y.toast.success("Opera\xe7\xe3o atualizada com sucesso."),ce(!1)}(e.target.value)},className:r.select,variant:"outlined",margin:"dense"},o.a.createElement(oe.a,{value:"disabled"},"Desabilitado"),o.a.createElement(oe.a,{value:"enabled"},"Habilitado")),o.a.createElement(ks.a,null,se&&"Atualizando..."))),o.a.createElement(_t.a,{xs:12,sm:6,md:4,item:!0},o.a.createElement("div",{className:r.optionRow},o.a.createElement("span",{className:r.optionLabel},o.a.createElement(Ns.a,{size:18})," Enviar sauda\xe7\xe3o quando houver somente 1 fila"),o.a.createElement(Ne.a,{value:de,onChange:async e=>{!async function(e){me(e),pe(!0),await ge({key:"sendGreetingMessageOneQueues",value:e}),y.toast.success("Opera\xe7\xe3o atualizada com sucesso."),pe(!1)}(e.target.value)},className:r.select,variant:"outlined",margin:"dense"},o.a.createElement(oe.a,{value:"disabled"},"Desabilitado"),o.a.createElement(oe.a,{value:"enabled"},"Habilitado")),o.a.createElement(ks.a,null,ue&&"Atualizando..."))))))}const Os=e=>{let{user:a,yes:t,no:n}=e;return a.super?t():n()};Os.defaultProps={user:{},yes:()=>null,no:()=>null};var js=Os;const Rs=Object(Y.a)(e=>({root:{flex:1,backgroundColor:e.palette.background.paper},mainPaper:{...e.scrollbarStyles,overflowY:"scroll",flex:1},tab:{backgroundColor:e.palette.options,borderRadius:4},paper:{...e.scrollbarStyles,overflowY:"scroll",padding:e.spacing(2),display:"flex",alignItems:"center",width:"100%"},container:{width:"100%",maxHeight:"100%"},control:{padding:e.spacing(1)},textfield:{width:"100%"}}));var Fs=()=>{const e=Rs(),[a,t]=Object(n.useState)("options"),[r,i]=Object(n.useState)([]),[l,s]=Object(n.useState)({}),[c,d]=Object(n.useState)(!1),[m,u]=Object(n.useState)({}),[p,g]=Object(n.useState)({}),[f,b]=Object(n.useState)(!1),{getCurrentUserInfo:E}=q(),{find:h,updateSchedules:x}=as(),{getAll:v}=Ss();Object(n.useEffect)(()=>{!async function(){d(!0);try{const e=localStorage.getItem("companyId"),a=await h(e),t=await v();if(s(a),i(a.schedules),g(t),Array.isArray(t)){const e=t.find(e=>"scheduleType"===e.key);e&&b("company"===e.value)}const n=await E();u(n)}catch(e){y.toast.error(e)}d(!1)}()},[]);const C=()=>m.super;return o.a.createElement(ao,{className:e.root},o.a.createElement(no,null,o.a.createElement(tl,null,z.a.t("settings.title"))),o.a.createElement(wa.a,{className:e.mainPaper,elevation:1},o.a.createElement(Il.a,{value:a,indicatorColor:"primary",textColor:"primary",scrollButtons:"on",variant:"scrollable",onChange:(e,a)=>{!async function(){d(!0);try{const e=localStorage.getItem("companyId"),a=await h(e),t=await v();if(s(a),i(a.schedules),g(t),Array.isArray(t)){const e=t.find(e=>"scheduleType"===e.key);e&&b("company"===e.value)}const n=await E();u(n)}catch(e){y.toast.error(e)}d(!1)}(),t(a)},className:e.tab},o.a.createElement(Al.a,{label:"Op\xe7\xf5es",value:"options"}),f&&o.a.createElement(Al.a,{label:"Hor\xe1rios",value:"schedules"}),C()?o.a.createElement(Al.a,{label:"Empresas",value:"companies"}):null,C()?o.a.createElement(Al.a,{label:"Planos",value:"plans"}):null,C()?o.a.createElement(Al.a,{label:"Ajuda",value:"helps"}):null),o.a.createElement(wa.a,{className:e.paper,elevation:0},o.a.createElement(Jl,{className:e.container,value:a,name:"schedules"},o.a.createElement(Vl,{loading:c,onSubmit:async e=>{d(!0);try{i(e),await x({id:l.id,schedules:e}),y.toast.success("Hor\xe1rios atualizados com sucesso.")}catch(a){y.toast.error(a)}d(!1)},initialValues:r})),o.a.createElement(js,{user:m,yes:()=>o.a.createElement(Jl,{className:e.container,value:a,name:"companies"},o.a.createElement(ss,null))}),o.a.createElement(js,{user:m,yes:()=>o.a.createElement(Jl,{className:e.container,value:a,name:"plans"},o.a.createElement(Cs,null))}),o.a.createElement(js,{user:m,yes:()=>o.a.createElement(Jl,{className:e.container,value:a,name:"helps"},o.a.createElement(gs,null))}),o.a.createElement(Jl,{className:e.container,value:a,name:"options"},o.a.createElement(Ds,{settings:p,scheduleTypeChanged:e=>b("company"===e)})))))},Ms=t(381),Ps=t.n(Ms),Bs=t(682),zs=t.n(Bs),Ws=t(681),Ls=t.n(Ws);const qs=()=>o.a.createElement(f.a,{variant:"body2",color:"primary",align:"center"}),Hs=Object(Y.a)(e=>({root:{width:"100vw",minHeight:"100vh",background:"linear-gradient(to right,rgb(244, 244, 246),rgb(141, 145, 254))",display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",textAlign:"center",padding:"20px 0"},paper:{backgroundColor:"white",display:"flex",flexDirection:"column",alignItems:"center",padding:"40px 30px",borderRadius:"8px",boxShadow:"0px 4px 10px rgba(0, 0, 0, 0.1)",width:"800px",maxWidth:"95%"},logo:{width:"250px",height:"auto",marginBottom:"20px"},title:{color:"#6151FF",fontWeight:"bold",fontSize:"28px",marginBottom:"10px"},subtitle:{color:"#666",fontSize:"14px",marginBottom:"20px"},form:{width:"100%",marginTop:e.spacing(1)},submit:{margin:e.spacing(3,0,2),padding:"12px",backgroundColor:"#6151FF",borderRadius:"6px",textTransform:"none",fontWeight:"bold",fontSize:"16px","&:hover":{backgroundColor:"#4C3FD9"}},textField:{marginBottom:"15px","& .MuiOutlinedInput-root":{borderRadius:"6px"}},inputIcon:{color:"#6151FF"},link:{color:"#6151FF",textDecoration:"none",fontSize:"14px",fontWeight:"500","&:hover":{textDecoration:"underline"}},stepper:{backgroundColor:"transparent",padding:"20px 0 30px",width:"100%","& .MuiStepIcon-root.MuiStepIcon-active":{color:"#6151FF"},"& .MuiStepIcon-root.MuiStepIcon-completed":{color:"#4CAF50"}},planCard:{marginBottom:"15px",border:"1px solid #E0E0E0",borderRadius:"8px",transition:"all 0.3s ease",cursor:"pointer",position:"relative",overflow:"hidden"},planCardSelected:{boxShadow:"0 8px 16px rgba(97, 81, 255, 0.2)",borderColor:"#6151FF","&:before":{content:'""',position:"absolute",top:0,right:0,width:"0",height:"0",borderTop:"40px solid #6151FF",borderLeft:"40px solid transparent"}},planCardHeader:{backgroundColor:"#F5F5F5",padding:"16px",borderBottom:"1px solid #E0E0E0"},planCardHeaderSelected:{backgroundColor:"rgba(97, 81, 255, 0.08)"},planCardTitle:{fontSize:"18px",fontWeight:"bold",marginBottom:"5px",color:"#333"},planCardPrice:{fontSize:"24px",fontWeight:"bold",color:"#6151FF",marginBottom:"8px"},planCardContent:{padding:"16px"},planFeature:{display:"flex",alignItems:"center",marginBottom:"10px",textAlign:"left"},planFeatureIcon:{color:"#4CAF50",marginRight:"8px",fontSize:"18px"},planCardActions:{padding:"16px",justifyContent:"center",borderTop:"1px solid #E0E0E0"},stepButtons:{display:"flex",justifyContent:"space-between",marginTop:"20px"},backButton:{color:"#6151FF",borderColor:"#6151FF",borderRadius:"6px",padding:"10px 20px",textTransform:"none",fontWeight:"500"},nextButton:{backgroundColor:"#6151FF",color:"white",borderRadius:"6px",padding:"10px 20px",textTransform:"none",fontWeight:"500","&:hover":{backgroundColor:"#4C3FD9"}},checkIcon:{position:"absolute",top:"10px",right:"10px",color:"#4CAF50",backgroundColor:"white",borderRadius:"50%",padding:"2px"}})),Us=Oe.b().shape({name:Oe.d().min(2,"Too Short!").max(50,"Too Long!").required("Required"),password:Oe.d().min(5,"Too Short!").max(50,"Too Long!"),email:Oe.d().email("Invalid email").required("Required")});var Vs=()=>{const e=Hs(),a=Object(S.useHistory)(),[t,r]=Object(n.useState)(0),[i,s]=Object(n.useState)(""),[c,d]=Object(n.useState)(!1),m=["Informa\xe7\xf5es da Empresa","Escolha seu Plano","Resumo"];let u=null;const E=Ps.a.parse(window.location.search);void 0!==E.companyId&&(u=E.companyId);const[h,x]=Object(n.useState)({name:"",email:"",phone:"",password:"",planId:""}),v=w()().add(3,"day").format(),[C,k]=Object(n.useState)([]),{list:N}=ua();Object(n.useEffect)(()=>{!async function(){const e=await N();k(e),e.length>0&&s(e[0].id)}()},[]);const I=()=>{r(e=>e+1)},A=()=>{r(e=>e-1)};return o.a.createElement("div",{className:e.root},o.a.createElement(Zn.a,{component:"main",maxWidth:"md"},o.a.createElement(l.a,null),o.a.createElement("div",{className:e.paper},o.a.createElement("img",{src:dl.a,alt:"Logo",className:e.logo}),o.a.createElement(f.a,{className:e.subtitle,component:"p"},z.a.t("signup.title")),o.a.createElement(bo.a,{activeStep:t,className:e.stepper},m.map(e=>o.a.createElement(Eo.a,{key:e},o.a.createElement(ho.a,null,e)))),function(t){switch(t){case 0:return o.a.createElement(Ae.e,{initialValues:h,enableReinitialize:!0,validationSchema:Us,onSubmit:(e,a)=>{x({...h,...e}),I()}},a=>{let{touched:t,errors:n,isSubmitting:r,handleSubmit:i,values:l,handleChange:s}=a;return o.a.createElement(Ae.d,{className:e.form,onSubmit:i},o.a.createElement(_t.a,{container:!0,spacing:2},o.a.createElement(_t.a,{item:!0,xs:12},o.a.createElement(Ae.b,{as:Ce.a,autoComplete:"name",name:"name",error:t.name&&Boolean(n.name),helperText:t.name&&n.name,variant:"outlined",fullWidth:!0,id:"name",label:"Nome da Empresa",className:e.textField,value:l.name,onChange:s,InputProps:{startAdornment:o.a.createElement(Do.a,{position:"start"},o.a.createElement(zs.a,{className:e.inputIcon}))}})),o.a.createElement(_t.a,{item:!0,xs:12},o.a.createElement(Ae.b,{as:Ce.a,variant:"outlined",fullWidth:!0,id:"email",label:z.a.t("signup.form.email"),name:"email",error:t.email&&Boolean(n.email),helperText:t.email&&n.email,autoComplete:"email",className:e.textField,value:l.email,onChange:s,required:!0,InputProps:{startAdornment:o.a.createElement(Do.a,{position:"start"},o.a.createElement(zo.a,{className:e.inputIcon}))}})),o.a.createElement(_t.a,{item:!0,xs:12},o.a.createElement(Ae.b,{as:Ls.a,mask:"(99) 99999-9999",variant:"outlined",fullWidth:!0,id:"phone",name:"phone",error:t.phone&&Boolean(n.phone),helperText:t.phone&&n.phone,autoComplete:"phone",value:l.phone,onChange:s,required:!0},a=>{let{field:t}=a;return o.a.createElement(Ce.a,Object.assign({},t,{variant:"outlined",fullWidth:!0,label:"Telefone",className:e.textField,InputProps:{startAdornment:o.a.createElement(Do.a,{position:"start"},o.a.createElement(Ho.a,{className:e.inputIcon}))}}))})),o.a.createElement(_t.a,{item:!0,xs:12},o.a.createElement(Ae.b,{as:Ce.a,variant:"outlined",fullWidth:!0,name:"password",error:t.password&&Boolean(n.password),helperText:t.password&&n.password,label:z.a.t("signup.form.password"),type:"password",id:"password",autoComplete:"current-password",className:e.textField,value:l.password,onChange:s,required:!0,InputProps:{startAdornment:o.a.createElement(Do.a,{position:"start"},o.a.createElement(sl.a,{className:e.inputIcon}))}}))),o.a.createElement("div",{className:e.stepButtons},o.a.createElement(b.a,{disabled:!0,className:e.backButton,variant:"outlined"},"Voltar"),o.a.createElement(b.a,{type:"submit",variant:"contained",color:"primary",className:e.nextButton},"Pr\xf3ximo")))});case 1:return o.a.createElement(o.a.Fragment,null,o.a.createElement(f.a,{variant:"h6",gutterBottom:!0},"Escolha o plano que melhor atende suas necessidades"),o.a.createElement(_t.a,{container:!0,spacing:3},C.map(a=>o.a.createElement(_t.a,{item:!0,xs:12,md:6,key:a.id},o.a.createElement(hn.a,{className:`${e.planCard} ${i===a.id?e.planCardSelected:""}`,onClick:()=>{return e=a.id,s(e),void x({...h,planId:e});var e}},i===a.id&&o.a.createElement(Rt.a,{className:e.checkIcon}),o.a.createElement(xn.a,{title:o.a.createElement(f.a,{className:e.planCardTitle},a.name),className:`${e.planCardHeader} ${i===a.id?e.planCardHeaderSelected:""}`}),o.a.createElement(pr.a,{className:e.planCardContent},o.a.createElement(f.a,{className:e.planCardPrice},"R$ ",a.value,"/m\xeas"),o.a.createElement(Z.a,{style:{margin:"10px 0"}}),o.a.createElement("div",{className:e.planFeature},o.a.createElement(Rt.a,{className:e.planFeatureIcon}),o.a.createElement(f.a,null,a.users," atendentes")),o.a.createElement("div",{className:e.planFeature},o.a.createElement(Rt.a,{className:e.planFeatureIcon}),o.a.createElement(f.a,null,a.connections," conex\xf5es de WhatsApp")),o.a.createElement("div",{className:e.planFeature},o.a.createElement(Rt.a,{className:e.planFeatureIcon}),o.a.createElement(f.a,null,a.queues," filas"))))))),o.a.createElement("div",{className:e.stepButtons},o.a.createElement(b.a,{onClick:A,className:e.backButton,variant:"outlined"},"Voltar"),o.a.createElement(b.a,{onClick:I,variant:"contained",color:"primary",className:e.nextButton,disabled:!i},"Pr\xf3ximo")));case 2:const t=C.find(e=>e.id===i)||{};return o.a.createElement(o.a.Fragment,null,o.a.createElement(f.a,{variant:"h6",gutterBottom:!0},"Resumo do Cadastro"),o.a.createElement(wa.a,{elevation:0,style:{padding:"20px",backgroundColor:"#f9f9f9",borderRadius:"8px"}},o.a.createElement(_t.a,{container:!0,spacing:2},o.a.createElement(_t.a,{item:!0,xs:12},o.a.createElement(f.a,{variant:"subtitle1",style:{fontWeight:"bold"}},"Dados da Empresa"),o.a.createElement(Z.a,{style:{margin:"8px 0 16px"}})),o.a.createElement(_t.a,{item:!0,xs:12,sm:6},o.a.createElement(f.a,{variant:"body2",color:"textSecondary"},"Nome da Empresa"),o.a.createElement(f.a,{variant:"body1"},h.name)),o.a.createElement(_t.a,{item:!0,xs:12,sm:6},o.a.createElement(f.a,{variant:"body2",color:"textSecondary"},"Email"),o.a.createElement(f.a,{variant:"body1"},h.email)),o.a.createElement(_t.a,{item:!0,xs:12,sm:6},o.a.createElement(f.a,{variant:"body2",color:"textSecondary"},"Telefone"),o.a.createElement(f.a,{variant:"body1"},h.phone)),o.a.createElement(_t.a,{item:!0,xs:12,style:{marginTop:"20px"}},o.a.createElement(f.a,{variant:"subtitle1",style:{fontWeight:"bold"}},"Plano Selecionado"),o.a.createElement(Z.a,{style:{margin:"8px 0 16px"}})),o.a.createElement(_t.a,{item:!0,xs:12},o.a.createElement(hn.a,{style:{border:"1px solid #6151FF",borderRadius:"8px"}},o.a.createElement(xn.a,{title:t.name,style:{backgroundColor:"rgba(97, 81, 255, 0.08)"}}),o.a.createElement(pr.a,null,o.a.createElement(f.a,{variant:"h6",style:{color:"#6151FF",fontWeight:"bold"}},"R$ ",t.value,"/m\xeas"),o.a.createElement(Z.a,{style:{margin:"10px 0"}}),o.a.createElement(_t.a,{container:!0,spacing:2},o.a.createElement(_t.a,{item:!0,xs:4},o.a.createElement(f.a,{variant:"body2",color:"textSecondary"},"Atendentes"),o.a.createElement(f.a,{variant:"body1"},t.users)),o.a.createElement(_t.a,{item:!0,xs:4},o.a.createElement(f.a,{variant:"body2",color:"textSecondary"},"Conex\xf5es"),o.a.createElement(f.a,{variant:"body1"},t.connections)),o.a.createElement(_t.a,{item:!0,xs:4},o.a.createElement(f.a,{variant:"body2",color:"textSecondary"},"Filas"),o.a.createElement(f.a,{variant:"body1"},t.queues)))))))),o.a.createElement("div",{className:e.stepButtons},o.a.createElement(b.a,{onClick:A,className:e.backButton,variant:"outlined"},"Voltar"),o.a.createElement(b.a,{onClick:()=>(async e=>{d(!0),Object.assign(e,{recurrence:"MENSAL"}),Object.assign(e,{dueDate:v}),Object.assign(e,{status:"t"}),Object.assign(e,{campaignsEnabled:!0});try{await P.post("/companies/cadastro",e),y.toast.success(z.a.t("signup.toasts.success")),a.push("/login")}catch(t){console.log(t),y.toast.error(t.message)}finally{d(!1)}})({...h,planId:i}),variant:"contained",color:"primary",className:e.nextButton,disabled:c},c?o.a.createElement(be.a,{size:24,color:"inherit"}):"Finalizar Cadastro")));default:return"Unknown step"}}(t),o.a.createElement(_t.a,{container:!0,justifyContent:"center",style:{marginTop:"20px"}},o.a.createElement(_t.a,{item:!0},o.a.createElement(il.a,{className:e.link,component:p.b,to:"/login"},z.a.t("signup.buttons.login"))))),o.a.createElement(g.a,{mt:5},o.a.createElement(qs,null))))},Gs=t(382),_s=t.n(Gs);const Ks=(e,a)=>{if("LOAD_TAGS"===a.type){const t=a.payload,n=[];return t.forEach(a=>{const t=e.findIndex(e=>e.id===a.id);-1!==t?e[t]=a:n.push(a)}),[...e,...n]}if("UPDATE_TAGS"===a.type){const t=a.payload,n=e.findIndex(e=>e.id===t.id);return-1!==n?(e[n]=t,[...e]):[t,...e]}if("DELETE_TAG"===a.type){const t=a.payload,n=e.findIndex(e=>e.id===t);return-1!==n&&e.splice(n,1),[...e]}if("RESET"===a.type)return[]},Qs=Object(Y.a)(e=>({mainPaper:{flex:1,padding:e.spacing(2),overflowY:"scroll",...e.scrollbarStyles,marginTop:e.spacing(4)},headerContainer:{display:"flex",alignItems:"center",padding:e.spacing(4),[e.breakpoints.down("sm")]:{flexDirection:"column",alignItems:"flex-start"}},searchContainer:{flex:1,maxWidth:480,display:"flex",[e.breakpoints.down("sm")]:{width:"100%",maxWidth:"100%",marginBottom:e.spacing(1)}},searchInput:{flex:1,"& .MuiOutlinedInput-root":{borderRadius:10}},buttonsContainer:{display:"flex",alignItems:"center",[e.breakpoints.down("sm")]:{width:"100%"}},addButton:{marginLeft:e.spacing(2),height:40,whiteSpace:"nowrap",backgroundColor:"#5D3FD3","&:hover":{backgroundColor:"#4b32a8"},borderRadius:10,[e.breakpoints.down("sm")]:{width:"100%",marginLeft:0}},cardContainer:{minWidth:280,transition:"all 0.2s ease-in-out","&:hover":{transform:"translateY(-5px)",boxShadow:e.shadows[5]}},tagCard:{position:"relative",padding:e.spacing(2),borderRadius:10,border:"1px solid rgba(0, 0, 0, 0.09)"},tagName:{fontWeight:600,marginBottom:e.spacing(1),textShadow:"1px 1px 1px rgba(0,0,0,0.2)"},tagCount:{display:"flex",alignItems:"center",justifyContent:"center",position:"absolute",top:12,right:12,width:30,height:30,borderRadius:"50%",backgroundColor:"rgba(0,0,0,0.12)",color:"white",fontSize:"0.8rem",fontWeight:"bold"},cardActions:{justifyContent:"flex-end",paddingTop:0},actionButton:{padding:e.spacing(1),color:"#555",transition:"all 0.3s ease","&:hover":{backgroundColor:"rgba(93, 63, 211, 0.08)",transform:"scale(1.1)"}},editButton:{color:"#5D3FD3","&:hover":{color:"#4930A8"}},deleteButton:{color:"#F44336","&:hover":{color:"#D32F2F"}},gridContainer:{marginTop:e.spacing(2)},noTagsContainer:{display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",padding:e.spacing(8),width:"100%"},noTagsIcon:{fontSize:80,color:"rgba(0, 0, 0, 0.2)",marginBottom:e.spacing(2)},noTagsText:{color:"rgba(0, 0, 0, 0.5)",fontSize:"1.1rem",maxWidth:300,textAlign:"center"},pageTitle:{color:"#5D3FD3",fontWeight:600,fontSize:"1.5rem",marginBottom:e.spacing(2),position:"relative",display:"inline-block","&::after":{content:'""',position:"absolute",width:"40%",height:3,bottom:-5,left:0,backgroundColor:"#5D3FD3",borderRadius:2}},titleContainer:{display:"flex",alignItems:"center"},container:{paddingTop:e.spacing(4),paddingBottom:e.spacing(4),paddingLeft:e.spacing(4),paddingRight:e.spacing(4),[e.breakpoints.down("sm")]:{paddingLeft:e.spacing(1),paddingRight:e.spacing(1)}}}));var Ys=()=>{const e=Qs(),{user:a}=Object(n.useContext)(H),[t,r]=Object(n.useState)(!1),[i,l]=Object(n.useState)(1),[s,c]=Object(n.useState)(!1),[d,m]=Object(n.useState)(null),[u,p]=Object(n.useState)(null),[g,E]=Object(n.useState)(!1),[h,x]=Object(n.useState)(""),[v,C]=Object(n.useReducer)(Ks,[]),[k,S]=Object(n.useState)(!1),[N,w]=Object(n.useState)([]),I=Object(n.useCallback)(async()=>{try{r(!0);const{data:e}=await B.get("/tags/",{params:{searchParam:"",pageNumber:i}});C({type:"LOAD_TAGS",payload:e.tags}),c(e.hasMore),r(!1)}catch(e){y.toast.error(e.message),r(!1)}},[i]),A=Object(n.useContext)(j);Object(n.useEffect)(()=>{C({type:"RESET"}),l(1)},[]),Object(n.useEffect)(()=>{const e=setTimeout(()=>{I()},500);return()=>clearTimeout(e)},[i,I]),Object(n.useEffect)(()=>{if(""!==h.trim()){const e=v.filter(e=>e.name.toLowerCase().includes(h.toLowerCase()));w(e)}else w(v)},[h,v]),Object(n.useEffect)(()=>{const e=A.getSocket(a.companyId);return e.on("user",e=>{"update"!==e.action&&"create"!==e.action||C({type:"UPDATE_TAGS",payload:e.tags}),"delete"===e.action&&C({type:"DELETE_USER",payload:+e.tagId})}),()=>{e.disconnect()}},[A,a]);return o.a.createElement(Zn.a,{maxWidth:"xl",className:e.container},o.a.createElement(Pt,{title:u&&""+z.a.t("tags.confirmationModal.deleteTitle"),open:g,onClose:()=>E(!1),onConfirm:()=>(async e=>{try{await B.delete("/tags/"+e),y.toast.success(z.a.t("tags.toasts.deleted"))}catch(a){y.toast.error(a.message)}p(null),x(""),l(1),C({type:"RESET"}),l(1),await I()})(u.id)},z.a.t("tags.confirmationModal.deleteMessage")),o.a.createElement($r,{open:k,onClose:()=>{m(null),S(!1)},reload:I,"aria-labelledby":"form-dialog-title",tagId:d&&d.id}),o.a.createElement(no,null,o.a.createElement("div",{className:e.titleContainer},o.a.createElement(f.a,{className:e.pageTitle},z.a.t("tags.title"))),o.a.createElement(ro,null,o.a.createElement("div",{className:e.headerContainer},o.a.createElement("div",{className:e.searchContainer},o.a.createElement(Ce.a,{placeholder:z.a.t("contacts.searchPlaceholder"),type:"search",value:h,onChange:e=>{x(e.target.value)},className:e.searchInput,variant:"outlined",size:"small",InputProps:{startAdornment:o.a.createElement(Do.a,{position:"start"},o.a.createElement(jo.a,{style:{color:"gray"}}))}}),o.a.createElement(b.a,{variant:"contained",color:"primary",className:e.addButton,onClick:()=>{m(null),S(!0)},startIcon:o.a.createElement(vr.a,null)},z.a.t("tags.buttons.add")))))),o.a.createElement(wa.a,{className:e.mainPaper,variant:"outlined",onScroll:e=>{if(!s||t)return;const{scrollTop:a,scrollHeight:n,clientHeight:o}=e.currentTarget;n-(a+100)<o&&l(e=>e+1)}},0!==N.length||t?o.a.createElement(_t.a,{container:!0,spacing:3,className:e.gridContainer},N.map(a=>o.a.createElement(Na.a,{in:!0,key:a.id,timeout:500},o.a.createElement(_t.a,{item:!0,xs:12,sm:6,md:4,lg:3},o.a.createElement(hn.a,{className:e.cardContainer,style:{borderLeft:"5px solid "+a.color}},o.a.createElement(pr.a,{className:e.tagCard,style:{backgroundColor:a.color+"15"}},o.a.createElement(f.a,{variant:"h6",className:e.tagName,style:{color:a.color}},a.name),o.a.createElement(Fe.a,{variant:"outlined",style:{backgroundColor:a.color,textShadow:"1px 1px 1px #000",color:"white"},label:a.name,size:"small"}),o.a.createElement("div",{className:e.tagCount,style:{backgroundColor:a.color}},a.ticketsCount)),o.a.createElement(vl.a,{className:e.cardActions},o.a.createElement(Sa.a,{title:z.a.t("tags.buttons.edit"),arrow:!0,placement:"top"},o.a.createElement(J.a,{size:"small",onClick:()=>(e=>{m(e),S(!0)})(a),className:`${e.actionButton} ${e.editButton}`},o.a.createElement(Po.a,null))),o.a.createElement(Sa.a,{title:z.a.t("tags.buttons.delete"),arrow:!0,placement:"top"},o.a.createElement(J.a,{size:"small",onClick:()=>{E(!0),p(a)},className:`${e.actionButton} ${e.deleteButton}`},o.a.createElement(an.a,null)))))))),t&&[...Array(4)].map((e,a)=>o.a.createElement(_t.a,{item:!0,xs:12,sm:6,md:4,lg:3,key:"skeleton-"+a},o.a.createElement(yn.a,{variant:"rect",width:"100%",height:120,animation:"wave",style:{borderRadius:10}})))):o.a.createElement("div",{className:e.noTagsContainer},o.a.createElement(_s.a,{className:e.noTagsIcon}),o.a.createElement(f.a,{className:e.noTagsText},h?z.a.t("tags.noTagsFound"):z.a.t("tags.noTags")))))},Xs=t(1290),$s=t(683),Js=t.n($s);var Zs=e=>{let{classes:a}=e;return o.a.createElement("div",{className:a.content},o.a.createElement(wa.a,{square:!0,variant:"outlined",className:a.contactHeader},o.a.createElement(_t.a,{container:!0},o.a.createElement(_t.a,{item:!0},o.a.createElement(yn.a,{animation:"wave",variant:"circle",width:60,height:60,className:a.contactAvatar})),o.a.createElement(_t.a,{item:!0},o.a.createElement(yn.a,{animation:"wave",height:25,width:90}),o.a.createElement(yn.a,{animation:"wave",height:25,width:80}),o.a.createElement(yn.a,{animation:"wave",height:25,width:80})))),o.a.createElement(wa.a,{square:!0,className:a.contactDetails},o.a.createElement(f.a,{variant:"subtitle1"},z.a.t("contactDrawer.extraInfo")),o.a.createElement(wa.a,{square:!0,variant:"outlined",className:a.contactExtraInfo},o.a.createElement(yn.a,{animation:"wave",height:20,width:60}),o.a.createElement(yn.a,{animation:"wave",height:20,width:160})),o.a.createElement(wa.a,{square:!0,variant:"outlined",className:a.contactExtraInfo},o.a.createElement(yn.a,{animation:"wave",height:20,width:60}),o.a.createElement(yn.a,{animation:"wave",height:20,width:160})),o.a.createElement(wa.a,{square:!0,variant:"outlined",className:a.contactExtraInfo},o.a.createElement(yn.a,{animation:"wave",height:20,width:60}),o.a.createElement(yn.a,{animation:"wave",height:20,width:160}))))};const ec=Object(Y.a)(e=>({root:{display:"flex",flexWrap:"wrap"},textField:{marginRight:e.spacing(1),flex:1},extraAttr:{display:"flex",justifyContent:"center",alignItems:"center"},btnWrapper:{position:"relative"},buttonProgress:{color:Ie.a[500],position:"absolute",top:"50%",left:"50%",marginTop:-12,marginLeft:-12},textCenter:{backgroundColor:"red"}})),ac=Oe.b().shape({name:Oe.d().min(2,"Too Short!").max(50,"Too Long!").required("Required"),number:Oe.d().min(8,"Too Short!").max(50,"Too Long!"),email:Oe.d().email("Invalid email")});function tc(e){let{initialContact:a,onSave:t,onCancel:r}=e;const i=ec(),[l,s]=Object(n.useState)(a);Object(n.useEffect)(()=>{s(a)},[a]);return o.a.createElement(Ae.e,{initialValues:l,enableReinitialize:!0,validationSchema:ac,onSubmit:(e,a)=>{setTimeout(()=>{(async e=>{try{if(l.id)await B.put("/contacts/"+l.id,e);else{const{data:a}=await B.post("/contacts",e);t&&t(a)}y.toast.success(z.a.t("contactModal.success"))}catch(a){y.toast.error(a.message)}})(e),a.setSubmitting(!1)},400)}},e=>{let{values:a,errors:t,touched:n,isSubmitting:s}=e;return o.a.createElement(Ae.d,null,o.a.createElement(_t.a,{container:!0,spacing:1},o.a.createElement(_t.a,{item:!0,xs:12},o.a.createElement(Ae.b,{as:Ce.a,label:z.a.t("contactModal.form.name"),name:"name",autoFocus:!0,error:n.name&&Boolean(t.name),helperText:n.name&&t.name,variant:"outlined",margin:"dense",className:i.textField,fullWidth:!0})),o.a.createElement(_t.a,{item:!0,xs:12},o.a.createElement(Ae.b,{as:Ce.a,label:z.a.t("contactModal.form.number"),name:"number",error:n.number&&Boolean(t.number),helperText:n.number&&t.number,placeholder:"5513912344321",variant:"outlined",margin:"dense",fullWidth:!0})),o.a.createElement(_t.a,{item:!0,xs:12},o.a.createElement(Ae.b,{as:Ce.a,label:z.a.t("contactModal.form.email"),name:"email",error:n.email&&Boolean(t.email),helperText:n.email&&t.email,placeholder:"Email address",fullWidth:!0,margin:"dense",variant:"outlined"})),o.a.createElement(_t.a,{item:!0,xs:12,spacing:1},o.a.createElement(_t.a,{container:!0,spacing:1},o.a.createElement(_t.a,{xs:6,item:!0},o.a.createElement(b.a,{onClick:r,color:"secondary",disabled:s,variant:"outlined",fullWidth:!0},z.a.t("contactModal.buttons.cancel"))),o.a.createElement(_t.a,{classes:i.textCenter,xs:6,item:!0},o.a.createElement(b.a,{type:"submit",color:"primary",disabled:s,variant:"contained",className:i.btnWrapper,fullWidth:!0},l.id?""+z.a.t("contactModal.buttons.okEdit"):""+z.a.t("contactModal.buttons.okAdd"),s&&o.a.createElement(be.a,{size:24,className:i.buttonProgress})))))))})}var nc=t(295),oc=t.n(nc);const rc=Object(Y.a)(e=>({inline:{width:"100%"}}));function ic(e){const{note:a,deleteItem:t}=e,n=rc();return o.a.createElement(Ue.a,{alignItems:"flex-start"},o.a.createElement(Ia.a,null,o.a.createElement(Le.a,{alt:a.user.name,src:"/static/images/avatar/1.jpg"})),o.a.createElement(Ge.a,{primary:o.a.createElement(o.a.Fragment,null,o.a.createElement(f.a,{component:"span",variant:"body2",className:n.inline,color:"textPrimary"},a.note)),secondary:o.a.createElement(o.a.Fragment,null,a.user.name,", ",w()(a.createdAt).format("DD/MM/YY HH:mm"))}),o.a.createElement(qa.a,null,o.a.createElement(J.a,{onClick:()=>{t(a)},edge:"end","aria-label":"delete"},o.a.createElement(oc.a,null))))}var lc=()=>({saveNote:async e=>{const{data:a}=await B.request({url:"/ticket-notes",method:"POST",data:e});return a},deleteNote:async e=>{const{data:a}=await B.request({url:"/ticket-notes/"+e,method:"DELETE"});return a},listNotes:async e=>{const{data:a}=await B.request({url:"/ticket-notes/list",method:"GET",params:e});return a}});const sc=Object(Y.a)(e=>({root:{"& .MuiTextField-root":{margin:e.spacing(1),width:"350px"}},list:{width:"100%",maxWidth:"350px",maxHeight:"200px",backgroundColor:e.palette.background.paper,overflow:"auto"},inline:{width:"100%"}})),cc=Oe.b().shape({note:Oe.d().min(2,"Too Short!").required("Required")});function dc(e){let{ticket:a}=e;const{id:t,contactId:r}=a,i=sc(),[l,s]=Object(n.useState)({note:""}),[c,d]=Object(n.useState)(!1),[m,u]=Object(n.useState)(!1),[p,g]=Object(n.useState)({}),[f,E]=Object(n.useState)([]),{saveNote:h,deleteNote:x,listNotes:v}=lc();Object(n.useEffect)(()=>{!async function(){C(),await N()}()},[]);const C=()=>{s({note:""}),d(!1)},k=e=>{s({note:e.target.value})},S=e=>{g(e),u(!0)},N=async()=>{d(!0);try{const e=await v({ticketId:t,contactId:r});E(e)}catch(e){y.toast.error(e)}d(!1)};return o.a.createElement(o.a.Fragment,null,o.a.createElement(Pt,{title:"Excluir Registro",open:m,onClose:u,onConfirm:async()=>{d(!0);try{await x(p.id),await N(),g({}),y.toast.success("Observa\xe7\xe3o exclu\xedda com sucesso!")}catch(e){y.toast.error(e)}d(!1)}},"Deseja realmente excluir este registro?"),o.a.createElement(Ae.e,{initialValues:l,enableReinitialize:!0,validationSchema:cc,onSubmit:(e,a)=>{setTimeout(()=>{(async e=>{d(!0);try{await h({...e,ticketId:t,contactId:r}),await N(),s({note:""}),y.toast.success("Observa\xe7\xe3o adicionada com sucesso!")}catch(a){y.toast.error(a)}d(!1)})(e),a.setSubmitting(!1)},400)}},e=>{let{touched:a,errors:t,setErrors:n}=e;return o.a.createElement(Ae.d,null,o.a.createElement(_t.a,{container:!0,spacing:2},o.a.createElement(_t.a,{xs:12,item:!0},o.a.createElement(Ae.b,{as:Ce.a,name:"note",rows:3,label:z.a.t("ticketOptionsMenu.appointmentsModal.textarea"),placeholder:z.a.t("ticketOptionsMenu.appointmentsModal.placeholder"),multiline:!0,error:a.note&&Boolean(t.note),helperText:a.note&&t.note,variant:"outlined",onChange:k,fullWidth:!0})),f.length>0&&o.a.createElement(_t.a,{xs:12,item:!0},o.a.createElement(ee.a,{className:i.list},f.map(e=>o.a.createElement(ic,{note:e,key:e.id,deleteItem:S})))),o.a.createElement(_t.a,{xs:12,item:!0},o.a.createElement(_t.a,{container:!0,spacing:2},o.a.createElement(_t.a,{xs:6,item:!0},o.a.createElement(b.a,{onClick:()=>{s(""),n({})},color:"primary",variant:"outlined",fullWidth:!0},"Cancelar")),o.a.createElement(_t.a,{xs:6,item:!0},o.a.createElement(Ya,{loading:c,color:"primary",type:"submit",variant:"contained",autoFocus:!0,fullWidth:!0},"Salvar"))))))}))}const mc=Object(Y.a)(e=>({drawer:{width:320,flexShrink:0},drawerPaper:{width:320,display:"flex",borderTop:"1px solid rgba(0, 0, 0, 0.12)",borderRight:"1px solid rgba(0, 0, 0, 0.12)",borderBottom:"1px solid rgba(0, 0, 0, 0.12)",borderTopRightRadius:4,borderBottomRightRadius:4},header:{display:"flex",borderBottom:"1px solid rgba(0, 0, 0, 0.12)",backgroundColor:e.palette.contactdrawer,alignItems:"center",padding:e.spacing(0,1),minHeight:"73px",justifyContent:"flex-start"},content:{display:"flex",backgroundColor:e.palette.contactdrawer,flexDirection:"column",padding:"8px 0px 8px 8px",height:"100%",overflowY:"scroll",...e.scrollbarStyles},contactAvatar:{margin:15,width:100,height:100},contactHeader:{display:"flex",padding:8,flexDirection:"column",alignItems:"center",justifyContent:"center","& > *":{margin:4}},contactDetails:{marginTop:8,padding:8,display:"flex",flexDirection:"column"},contactExtraInfo:{marginTop:4,padding:6}}));var uc=e=>{var a;let{open:t,handleDrawerClose:r,contact:i,ticket:l,loading:s}=e;const c=mc(),[d,m]=Object(n.useState)(!1),[u,p]=Object(n.useState)(!1);return Object(n.useEffect)(()=>{p(!1)},[t,i]),o.a.createElement(o.a.Fragment,null,o.a.createElement($.a,{className:c.drawer,variant:"persistent",anchor:"right",open:t,PaperProps:{style:{position:"absolute"}},BackdropProps:{style:{position:"absolute"}},ModalProps:{container:document.getElementById("drawer-container"),style:{position:"absolute"}},classes:{paper:c.drawerPaper}},o.a.createElement("div",{className:c.header},o.a.createElement(J.a,{onClick:r},o.a.createElement(ft.a,null)),o.a.createElement(f.a,{style:{justifySelf:"center"}},z.a.t("contactDrawer.header"))),s?o.a.createElement(Zs,{classes:c}):o.a.createElement("div",{className:c.content},o.a.createElement(wa.a,{square:!0,variant:"outlined",className:c.contactHeader},o.a.createElement(xn.a,{onClick:()=>{},style:{cursor:"pointer",width:"100%"},titleTypographyProps:{noWrap:!0},subheaderTypographyProps:{noWrap:!0},avatar:o.a.createElement(Le.a,{src:i.profilePicUrl,alt:"contact_image",style:{width:60,height:60}}),title:o.a.createElement(o.a.Fragment,null,o.a.createElement(f.a,{onClick:()=>p(!0)},i.name,o.a.createElement(Js.a,{style:{fontSize:16,marginLeft:5}}))),subheader:o.a.createElement(o.a.Fragment,null,o.a.createElement(f.a,{style:{fontSize:12}},o.a.createElement(il.a,{href:"tel:"+i.number},i.number)),o.a.createElement(f.a,{style:{fontSize:12}},o.a.createElement(il.a,{href:"mailto:"+i.email},i.email)))}),o.a.createElement(b.a,{variant:"outlined",color:"primary",onClick:()=>m(!u),style:{fontSize:12}},z.a.t("contactDrawer.buttons.edit")),i.id&&u&&o.a.createElement(tc,{initialContact:i,onCancel:()=>p(!1)})),o.a.createElement(wa.a,{square:!0,variant:"outlined",className:c.contactDetails},o.a.createElement(f.a,{variant:"subtitle1",style:{marginBottom:10}},z.a.t("ticketOptionsMenu.appointmentsModal.title")),o.a.createElement(dc,{ticket:l})),o.a.createElement(wa.a,{square:!0,variant:"outlined",className:c.contactDetails},o.a.createElement(dn,{open:d,onClose:()=>m(!1),contactId:i.id}),o.a.createElement(f.a,{variant:"subtitle1"},z.a.t("contactDrawer.extraInfo")),null===i||void 0===i||null===(a=i.extraInfo)||void 0===a?void 0:a.map(e=>o.a.createElement(wa.a,{key:e.id,square:!0,variant:"outlined",className:c.contactExtraInfo},o.a.createElement(Se.a,null,e.name),o.a.createElement(f.a,{component:"div",noWrap:!0,style:{paddingTop:2}},o.a.createElement(et,null,e.value))))))))},pc=t(740),gc=(t(1045),t(684)),fc=t.n(gc),bc=t(122),Ec=t.n(bc),hc=t(687),xc=t.n(hc),yc=t(689),vc=t.n(yc),Cc=t(686),kc=t.n(Cc),Sc=t(688),Nc=t.n(Sc),wc=t(685),Ic=t.n(wc),Ac=t(478),Tc=t.n(Ac);const Dc=Object(Y.a)(e=>({timerBox:{display:"flex",marginLeft:10,marginRight:10,alignItems:"center"}}));var Oc=()=>{const e=Dc(),[a,t]=Object(n.useState)({minutes:0,seconds:0});Object(n.useEffect)(()=>{const e=setInterval(()=>t(e=>59===e.seconds?{...e,minutes:e.minutes+1,seconds:0}:{...e,seconds:e.seconds+1}),1e3);return()=>{clearInterval(e)}},[]);const r=e=>e<10?"0"+e:e;return o.a.createElement("div",{className:e.timerBox},o.a.createElement("span",null,`${r(a.minutes)}:${r(a.seconds)}`))};var jc=()=>({save:async e=>{const{data:a}=await B.request({url:"/quick-messages",method:"POST",data:e});return a},update:async e=>{const{data:a}=await B.request({url:"/quick-messages/"+e.id,method:"PUT",data:e});return a},deleteRecord:async e=>{const{data:a}=await B.request({url:"/quick-messages/"+e,method:"DELETE"});return a},list:async e=>{const{data:a}=await B.request({url:"/quick-messages/list",method:"GET",params:e});return a}});const Rc=new fc.a({bitRate:128}),Fc=Object(Y.a)(e=>({mainWrapper:{backgroundColor:e.palette.bordabox,display:"flex",flexDirection:"column",alignItems:"center",borderTop:"1px solid rgba(0, 0, 0, 0.12)"},newMessageBox:{backgroundColor:e.palette.newmessagebox,width:"100%",display:"flex",padding:"7px",alignItems:"center"},messageInputWrapper:{padding:6,marginRight:7,backgroundColor:e.palette.inputdigita,display:"flex",borderRadius:20,flex:1},messageInput:{paddingLeft:10,flex:1,border:"none"},sendMessageIcons:{color:"grey"},uploadInput:{display:"none"},viewMediaInputWrapper:{display:"flex",padding:"10px 13px",position:"relative",justifyContent:"space-between",alignItems:"center",backgroundColor:"#eee",borderTop:"1px solid rgba(0, 0, 0, 0.12)"},emojiBox:{position:"absolute",bottom:63,width:40,borderTop:"1px solid #e8e8e8"},circleLoading:{color:Ie.a[500],opacity:"70%",position:"absolute",top:"20%",left:"50%",marginLeft:-12},audioLoading:{color:Ie.a[500],opacity:"70%"},recorderWrapper:{display:"flex",alignItems:"center",alignContent:"middle"},cancelAudioIcon:{color:"red"},sendAudioIcon:{color:"green"},replyginMsgWrapper:{display:"flex",width:"100%",alignItems:"center",justifyContent:"center",paddingTop:8,paddingLeft:73,paddingRight:7},replyginMsgContainer:{flex:1,marginRight:5,overflowY:"hidden",backgroundColor:"rgba(0, 0, 0, 0.05)",borderRadius:"7.5px",display:"flex",position:"relative"},replyginMsgBody:{padding:10,height:"auto",display:"block",whiteSpace:"pre-wrap",overflow:"hidden"},replyginContactMsgSideColor:{flex:"none",width:"4px",backgroundColor:"#35cd96"},replyginSelfMsgSideColor:{flex:"none",width:"4px",backgroundColor:"#6bcbef"},messageContactName:{display:"flex",color:"#6bcbef",fontWeight:500}})),Mc=e=>{const{disabled:a,showEmoji:t,setShowEmoji:n,handleAddEmoji:r}=e,i=Fc();return o.a.createElement(o.a.Fragment,null,o.a.createElement(J.a,{"aria-label":"emojiPicker",component:"span",disabled:a,onClick:e=>n(e=>!e)},o.a.createElement(Ic.a,{className:i.sendMessageIcons})),t?o.a.createElement("div",{className:i.emojiBox},o.a.createElement(pc.a,{perLine:16,showPreview:!1,showSkinTones:!1,onSelect:r})):null)},Pc=e=>{const{width:a,setSignMessage:t,signMessage:n}=e;return Object(Xs.b)("md",a)?o.a.createElement(go.a,{style:{marginRight:7,color:"gray"},label:z.a.t("messagesInput.signMessage"),labelPlacement:"start",control:o.a.createElement(fo.a,{size:"small",checked:n,onChange:e=>{t(e.target.checked)},name:"showAllTickets",color:"primary"})}):null},Bc=e=>{const{handleChangeMedias:a,disableOption:t}=e,n=Fc();return o.a.createElement(o.a.Fragment,null,o.a.createElement("input",{multiple:!0,type:"file",id:"upload-button",disabled:t(),className:n.uploadInput,onChange:a}),o.a.createElement("label",{htmlFor:"upload-button"},o.a.createElement(J.a,{"aria-label":"upload",component:"span",disabled:t()},o.a.createElement(Ec.a,{className:n.sendMessageIcons}))))},zc=e=>{const{inputMessage:a,loading:t,recording:n,ticketStatus:r,handleSendMessage:i,handleCancelAudio:l,handleUploadAudio:s,handleStartRecording:c}=e,d=Fc();return a?o.a.createElement(J.a,{"aria-label":"sendMessage",component:"span",onClick:i,disabled:t},o.a.createElement(Tc.a,{className:d.sendMessageIcons})):n?o.a.createElement("div",{className:d.recorderWrapper},o.a.createElement(J.a,{"aria-label":"cancelRecording",component:"span",fontSize:"large",disabled:t,onClick:l},o.a.createElement(kc.a,{className:d.cancelAudioIcon})),t?o.a.createElement("div",null,o.a.createElement(be.a,{className:d.audioLoading})):o.a.createElement(Oc,null),o.a.createElement(J.a,{"aria-label":"sendRecordedAudio",component:"span",onClick:s,disabled:t},o.a.createElement(xc.a,{className:d.sendAudioIcon}))):o.a.createElement(J.a,{"aria-label":"showRecorder",component:"span",disabled:t||"open"!==r,onClick:c},o.a.createElement(Nc.a,{className:d.sendMessageIcons}))},Wc=e=>{const{loading:a,inputRef:t,ticketStatus:r,inputMessage:i,setInputMessage:l,handleSendMessage:s,handleInputPaste:c,disableOption:d,handleQuickAnswersClick:m}=e,u=Fc(),[p,g]=Object(n.useState)([]),[f,b]=Object(n.useState)([]),[E,h]=Object(n.useState)(!1),{user:x}=Object(n.useContext)(H),{list:y}=jc();Object(n.useEffect)(()=>{!async function(){const e=localStorage.getItem("companyId"),a=(await y({companyId:e,userId:x.id})).map(e=>{let a=e.message;return Object(k.isString)(a)&&a.length>35&&(a=e.message.substring(0,35)+"..."),{value:e.message,label:`/${e.shortcode} - ${a}`,mediaPath:e.mediaPath}});g(a)}()},[]),Object(n.useEffect)(()=>{if(Object(k.isString)(i)&&!Object(k.isEmpty)(i)&&i.length>1){const e=i.charAt(0);h(e.indexOf("/")>-1);const a=p.filter(e=>e.label.indexOf(i)>-1);b(a)}else h(!1)},[i]);const v=e=>{e&&(e.focus(),t.current=e)};return o.a.createElement("div",{className:u.messageInputWrapper},o.a.createElement(Yt.a,{freeSolo:!0,open:E,id:"grouped-demo",value:i,options:f,closeIcon:null,getOptionLabel:e=>Object(k.isObject)(e)?e.label:e,onChange:(e,a)=>{Object(k.isObject)(a)&&Object(k.has)(a,"value")&&Object(k.isNil)(a.mediaPath)?(l(a.value),setTimeout(()=>{t.current.scrollTop=t.current.scrollHeight},200)):Object(k.isObject)(a)&&Object(k.has)(a,"value")&&!Object(k.isNil)(a.mediaPath)&&(m(a),setTimeout(()=>{t.current.scrollTop=t.current.scrollHeight},200))},onInputChange:(e,a,t)=>{"input"===t&&l(e.target.value)},onPaste:e=>{"open"===r&&c(e)},onKeyPress:e=>{a||e.shiftKey||"Enter"===e.key&&s()},style:{width:"100%"},renderInput:e=>{const{InputLabelProps:a,InputProps:t,...n}=e;return o.a.createElement(Bt.a,Object.assign({},e.InputProps,n,{disabled:d(),inputRef:v,placeholder:"open"===r?z.a.t("messagesInput.placeholderOpen"):z.a.t("messagesInput.placeholderClosed"),multiline:!0,className:u.messageInput,maxRows:5}))}}))};var Lc=Object(Xs.a)()(e=>{var a;const{ticketStatus:t,ticketId:r}=e,i=Fc(),[l,s]=Object(n.useState)([]),[c,d]=Object(n.useState)(""),[m,u]=Object(n.useState)(!1),[p,g]=Object(n.useState)(!1),[f,b]=Object(n.useState)(!1),E=Object(n.useRef)(),{setReplyingMessage:h,replyingMessage:x}=Object(n.useContext)(bt),{user:v}=Object(n.useContext)(H),[C,k]=function(e,a){const[t,o]=Object(n.useState)(()=>{try{const t=localStorage.getItem(e);return t?JSON.parse(t):a}catch(t){return y.toast.error(t.message),a}});return[t,a=>{try{const n=a instanceof Function?a(t):a;o(n),localStorage.setItem(e,JSON.stringify(n))}catch(n){y.toast.error(n.message)}}]}("signOption",!0);Object(n.useEffect)(()=>{E.current.focus()},[x]),Object(n.useEffect)(()=>(E.current.focus(),()=>{d(""),u(!1),s([]),h(null)}),[r,h]);const S=e=>{let a=e.native;d(e=>e+a)},N=e=>{if(!e.target.files)return;const a=Array.from(e.target.files);s(a)},w=e=>{e.clipboardData.files[0]&&s([e.clipboardData.files[0]])},I=async e=>{if(e.mediaPath)try{const{data:a}=await F.a.get(e.mediaPath,{responseType:"blob"});return(async(e,a)=>{g(!0);try{const t=e.type.split("/")[1],n=new FormData,o=`${(new Date).getTime()}.${t}`;n.append("medias",e,o),n.append("body",a),n.append("fromMe",!0),await B.post("/messages/"+r,n)}catch(t){y.toast.errorr(t.message),g(!1)}g(!1)})(a,e.value),void d("")}catch(a){y.toast.errorr(a.message)}d(""),d(e.value)},A=async()=>{if(""===c.trim())return;g(!0);const e={read:1,fromMe:!0,mediaUrl:"",body:C?`*${null===v||void 0===v?void 0:v.name}:*\n${c.trim()}`:c.trim(),quotedMsg:x};try{await B.post("/messages/"+r,e)}catch(a){y.toast.errorr(a.message)}d(""),u(!1),g(!1),h(null)},T=async()=>{g(!0);try{await navigator.mediaDevices.getUserMedia({audio:!0}),await Rc.start(),b(!0),g(!1)}catch(e){y.toast.errorr(e.message),g(!1)}},D=async()=>{g(!0);try{const[,e]=await Rc.stop().getMp3();if(e.size<1e4)return g(!1),void b(!1);const a=new FormData,t=`audio-record-site-${(new Date).getTime()}.mp3`;a.append("medias",e,t),a.append("body",t),a.append("fromMe",!0),await B.post("/messages/"+r,a)}catch(e){y.toast.errorr(e.message)}b(!1),g(!1)},O=async()=>{try{await Rc.stop().getMp3(),b(!1)}catch(e){y.toast.errorr(e.message)}},j=()=>p||f||"open"!==t;return l.length>0?o.a.createElement(wa.a,{elevation:0,square:!0,className:i.viewMediaInputWrapper},o.a.createElement(J.a,{"aria-label":"cancel-upload",component:"span",onClick:e=>s([])},o.a.createElement(Ot.a,{className:i.sendMessageIcons})),p?o.a.createElement("div",null,o.a.createElement(be.a,{className:i.circleLoading})):o.a.createElement("span",null,null===(a=l[0])||void 0===a?void 0:a.name),o.a.createElement(J.a,{"aria-label":"send-upload",component:"span",onClick:async e=>{g(!0),e.preventDefault();const a=new FormData;a.append("fromMe",!0),l.forEach(e=>{a.append("medias",e),a.append("body",e.name)});try{await B.post("/messages/"+r,a)}catch(t){y.toast.errorr(t.message)}g(!1),s([])},disabled:p},o.a.createElement(Tc.a,{className:i.sendMessageIcons}))):o.a.createElement(wa.a,{square:!0,elevation:0,className:i.mainWrapper},x&&(e=>{var a;return o.a.createElement("div",{className:i.replyginMsgWrapper},o.a.createElement("div",{className:i.replyginMsgContainer},o.a.createElement("span",{className:Object(re.a)(i.replyginContactMsgSideColor,{[i.replyginSelfMsgSideColor]:!e.fromMe})}),o.a.createElement("div",{className:i.replyginMsgBody},!e.fromMe&&o.a.createElement("span",{className:i.messageContactName},null===(a=e.contact)||void 0===a?void 0:a.name),e.body)),o.a.createElement(J.a,{"aria-label":"showRecorder",component:"span",disabled:p||"open"!==t,onClick:()=>h(null)},o.a.createElement(vc.a,{className:i.sendMessageIcons})))})(x),o.a.createElement("div",{className:i.newMessageBox},o.a.createElement(Mc,{disabled:j(),handleAddEmoji:S,showEmoji:m,setShowEmoji:u}),o.a.createElement(Bc,{disableOption:j,handleChangeMedias:N}),o.a.createElement(Pc,{width:e.width,setSignMessage:k,signMessage:C}),o.a.createElement(Wc,{loading:p,inputRef:E,ticketStatus:t,inputMessage:c,setInputMessage:d,handleSendMessage:A,handleInputPaste:w,disableOption:j,handleQuickAnswersClick:I}),o.a.createElement(zc,{inputMessage:c,loading:p,recording:f,ticketStatus:t,handleSendMessage:A,handleCancelAudio:O,handleUploadAudio:D,handleStartRecording:T})))}),qc=t(1291),Hc=t(1293);var Uc=()=>({findAll:async()=>{const{data:e}=await B.get("/queue");return e}});const Vc=Object(Y.a)(e=>({maxWidth:{width:"100%"},dialogPaper:{borderRadius:18,boxShadow:"0 6px 32px rgba(93,63,211,0.13)",padding:0},dialogTitle:{color:"#5D3FD3",fontWeight:700,fontSize:24,padding:"28px 32px 10px 32px",letterSpacing:.2},dialogContent:{padding:"16px 32px 24px 32px",background:"#faf9fd",borderRadius:"0 0 18px 18px",minWidth:340,[e.breakpoints.down("xs")]:{padding:"12px 8px",minWidth:0}},input:{borderRadius:12,background:"#fff",boxShadow:"0 1px 4px rgba(93,63,211,0.07)",marginBottom:24,"& .MuiOutlinedInput-root":{borderRadius:12,fontSize:16,height:48,background:"#fff","& fieldset":{borderColor:"#5D3FD3"},"&:hover fieldset":{borderColor:"#5D3FD3"},"&.Mui-focused fieldset":{borderColor:"#5D3FD3",boxShadow:"0 0 0 2px #e5e0fa"}},"& label":{color:"#5D3FD3",fontWeight:500,fontSize:15,top:0}},select:{borderRadius:12,background:"#fff",boxShadow:"0 1px 4px rgba(93,63,211,0.07)",marginBottom:24,"& .MuiOutlinedInput-root":{borderRadius:12,fontSize:16,height:48,background:"#fff","& fieldset":{borderColor:"#5D3FD3"},"&:hover fieldset":{borderColor:"#5D3FD3"},"&.Mui-focused fieldset":{borderColor:"#5D3FD3",boxShadow:"0 0 0 2px #e5e0fa"}},"& label":{color:"#5D3FD3",fontWeight:500,fontSize:15,top:0}},dialogActions:{padding:"18px 32px 28px 32px",display:"flex",justifyContent:"flex-end",gap:16,background:"#faf9fd",borderRadius:"0 0 18px 18px",[e.breakpoints.down("xs")]:{padding:"12px 8px",gap:8}},buttonOutlined:{borderRadius:10,borderColor:"#5D3FD3",color:"#5D3FD3",fontWeight:600,fontSize:16,padding:"8px 22px",textTransform:"none",transition:"all 0.2s","&:hover":{background:"#f3f0fa",borderColor:"#5D3FD3"}},buttonContained:{borderRadius:10,background:"#5D3FD3",color:"#fff",fontWeight:600,fontSize:16,padding:"8px 22px",textTransform:"none",boxShadow:"0 2px 8px rgba(93,63,211,0.10)","&:hover":{background:"#4b2fc7"}}})),Gc=Object(Qt.a)({trim:!0});var _c=e=>{let{modalOpen:a,onClose:t,ticketid:r}=e;const i=Object(S.useHistory)(),[l,s]=Object(n.useState)([]),[c,d]=Object(n.useState)([]),[m,u]=Object(n.useState)([]),[p,g]=Object(n.useState)(!1),[E,h]=Object(n.useState)(""),[x,v]=Object(n.useState)(null),[C,k]=Object(n.useState)(""),N=Vc(),{findAll:w}=Uc(),I=Object(n.useRef)(!0),[A,T]=Object(n.useState)([]),[D,O]=Object(n.useState)(""),{user:j}=Object(n.useContext)(H),{companyId:R,whatsappId:F}=j;Object(n.useEffect)(()=>()=>{I.current=!1},[]),Object(n.useEffect)(()=>{g(!0);const e=setTimeout(()=>{null!==F&&void 0!==F&&O(F),1===j.queues.length&&k(j.queues[0].id),(async()=>{B.get("/whatsapp",{params:{companyId:R,session:0}}).then(e=>{let{data:a}=e;return T(a)})})(),g(!1)},500);return()=>clearTimeout(e)},[R,j.queues,F]),Object(n.useEffect)(()=>{if(I.current){(async()=>{const e=await w();u(e),d(e)})()}},[]),Object(n.useEffect)(()=>{if(!a||E.length<3)return void g(!1);const e=setTimeout(()=>{g(!0);(async()=>{try{const{data:e}=await B.get("/users/",{params:{searchParam:E}});s(e.users),g(!1)}catch(e){g(!1),y.toast.errorr(e.message)}})()},500);return()=>clearTimeout(e)},[E,a]);const M=()=>{t(),h(""),v(null)};return o.a.createElement(xe.a,{open:a,onClose:M,maxWidth:"lg",scroll:"paper",classes:{paper:N.dialogPaper}},o.a.createElement("form",{onSubmit:async e=>{if(e.preventDefault(),r&&C&&""!==C){g(!0);try{let e={};x&&(e.userId=x.id),C&&null!==C&&(e.queueId=C,x||(e.status="pending",e.userId=null)),D&&(e.whatsappId=D),await B.put("/tickets/"+r,e),i.push("/tickets")}catch(a){g(!1),y.toast.errorr(a.message)}}},autoComplete:"off"},o.a.createElement(ye.a,{id:"form-dialog-title",className:N.dialogTitle},z.a.t("transferTicketModal.title")),o.a.createElement(ve.a,{dividers:!0,className:N.dialogContent},o.a.createElement(Yt.a,{style:{width:"100%",marginBottom:24},getOptionLabel:e=>""+e.name,onChange:(e,a)=>{v(a),null!=a&&Array.isArray(a.queues)?d(a.queues):(d(m),k(""))},options:l,filterOptions:Gc,freeSolo:!0,autoHighlight:!0,noOptionsText:z.a.t("transferTicketModal.noOptions"),loading:p,renderInput:e=>o.a.createElement(Ce.a,Object.assign({},e,{label:z.a.t("transferTicketModal.fieldLabel"),variant:"outlined",autoFocus:!0,onChange:e=>h(e.target.value),className:N.input,InputProps:{...e.InputProps,endAdornment:o.a.createElement(o.a.Fragment,null,p?o.a.createElement(be.a,{color:"inherit",size:20}):null,e.InputProps.endAdornment)}}))}),o.a.createElement(ke.a,{variant:"outlined",className:N.select,fullWidth:!0},o.a.createElement(Se.a,{style:{color:"#5D3FD3"}},z.a.t("transferTicketModal.fieldQueueLabel")),o.a.createElement(Ne.a,{value:C,onChange:e=>k(e.target.value),label:z.a.t("transferTicketModal.fieldQueuePlaceholder")},c.map(e=>o.a.createElement(oe.a,{key:e.id,value:e.id},e.name)))),o.a.createElement(ke.a,{variant:"outlined",className:N.select,fullWidth:!0},o.a.createElement(Se.a,{style:{color:"#5D3FD3"}},"Conex\xe3o"),o.a.createElement(Ne.a,{required:!0,fullWidth:!0,displayEmpty:!0,value:D,onChange:e=>{O(e.target.value)},label:"Conex\xe3o",MenuProps:{anchorOrigin:{vertical:"bottom",horizontal:"left"},transformOrigin:{vertical:"top",horizontal:"left"},getContentAnchorEl:null},renderValue:()=>{if(""===D)return"Selecione uma Conex\xe3o";const e=A.find(e=>e.id===D);return(null===e||void 0===e?void 0:e.name)||""}},(null===A||void 0===A?void 0:A.length)>0&&A.map((e,a)=>o.a.createElement(oe.a,{dense:!0,key:a,value:e.id},o.a.createElement(Ge.a,{primary:o.a.createElement(o.a.Fragment,null,o.a.createElement(f.a,{component:"span",style:{fontSize:14,marginLeft:"10px",display:"inline-flex",alignItems:"center",lineHeight:"2"}},e.name," \xa0"," ",o.a.createElement("span",{style:{color:"CONNECTED"===e.status?"#5D3FD3":"#aaa",fontWeight:600}},"(",e.status,")")))})))))),o.a.createElement(we.a,{className:N.dialogActions},o.a.createElement(b.a,{onClick:M,disabled:p,variant:"outlined",className:N.buttonOutlined},z.a.t("transferTicketModal.buttons.cancel")),o.a.createElement(Ya,{variant:"contained",type:"submit",className:N.buttonContained,loading:p},z.a.t("transferTicketModal.buttons.ok")))))},Kc=t(383),Qc=t.n(Kc),Yc=t(690),Xc=t.n(Yc);const $c=e=>{let{inputRef:a,...t}=e;return o.a.createElement("div",t)};var Jc=e=>{let{InputProps:a,children:t,InputLabelProps:n,label:r,...i}=e;return o.a.createElement(Ce.a,Object.assign({},i,{variant:"outlined",label:r,multiline:!0,InputLabelProps:{shrink:!0,...n},InputProps:{inputComponent:$c,...a},inputProps:{children:t}}))};const Zc=Object(Y.a)(e=>({chip:{margin:e.spacing(.5),cursor:"pointer"}}));var ed=e=>{let{onClick:a,disabled:t}=e;const n=Zc(),r=[{name:z.a.t("messageVariablesPicker.vars.contactFirstName"),value:"{{firstName}}"},{name:z.a.t("messageVariablesPicker.vars.contactName"),value:"{{name}} "},{name:z.a.t("messageVariablesPicker.vars.greeting"),value:"{{ms}} "},{name:z.a.t("messageVariablesPicker.vars.protocolNumber"),value:"{{protocol}} "},{name:z.a.t("messageVariablesPicker.vars.hour"),value:"{{hora}} "},{name:z.a.t("messageVariablesPicker.vars.date"),value:"{{data}} "}];return o.a.createElement(Jc,{margin:"dense",fullWidth:!0,label:z.a.t("messageVariablesPicker.label"),disabled:t},r.map(e=>o.a.createElement(Fe.a,{key:e.value,onMouseDown:n=>((e,n)=>{e.preventDefault(),t||a(n)})(n,e.value),label:e.name,size:"small",className:n.chip,color:"primary"})))};const ad=Object(Y.a)(e=>({root:{display:"flex",flexWrap:"wrap"},multFieldLine:{display:"flex","& > *:not(:last-child)":{marginRight:e.spacing(1)}},btnWrapper:{position:"relative"},buttonProgress:{color:Ie.a[500],position:"absolute",top:"50%",left:"50%",marginTop:-12,marginLeft:-12},formControl:{margin:e.spacing(1),minWidth:120},dialogPaper:{borderRadius:18,boxShadow:"0 8px 32px rgba(93, 63, 211, 0.15)",overflow:"hidden"},dialogTitle:{fontSize:24,fontWeight:700,color:"#5D3FD3",padding:"28px 32px 10px 32px",letterSpacing:.2,[e.breakpoints.down("xs")]:{padding:"20px 16px 8px 16px",fontSize:20}},dialogContent:{padding:"24px 32px",background:"#faf9fd",[e.breakpoints.down("xs")]:{padding:"16px"}},dialogActions:{padding:"18px 32px 28px 32px",justifyContent:"flex-end",gap:16,background:"#faf9fd",[e.breakpoints.down("xs")]:{padding:"12px 16px 20px 16px",gap:8}},input:{"& .MuiOutlinedInput-root":{borderRadius:12,fontSize:16,height:48,background:"#fff","& fieldset":{borderColor:"#5D3FD3"},"&:hover fieldset":{borderColor:"#5D3FD3"},"&.Mui-focused fieldset":{borderColor:"#5D3FD3",boxShadow:"0 0 0 2px #e5e0fa"}},"& label":{color:"#5D3FD3",fontWeight:500,fontSize:15},"& .MuiInputBase-input":{fontSize:16}},textarea:{"& .MuiOutlinedInput-root":{borderRadius:12,fontSize:16,background:"#fff","& fieldset":{borderColor:"#5D3FD3"},"&:hover fieldset":{borderColor:"#5D3FD3"},"&.Mui-focused fieldset":{borderColor:"#5D3FD3",boxShadow:"0 0 0 2px #e5e0fa"}},"& label":{color:"#5D3FD3",fontWeight:500,fontSize:15},"& .MuiInputBase-input":{fontSize:16}},buttonOutlined:{borderRadius:10,borderColor:"#5D3FD3",color:"#5D3FD3",fontWeight:600,fontSize:16,padding:"10px 24px",textTransform:"none",transition:"all 0.2s","&:hover":{background:"#f3f0fa",borderColor:"#5D3FD3"},[e.breakpoints.down("xs")]:{padding:"8px 16px",fontSize:14}},buttonContained:{borderRadius:10,background:"#5D3FD3",color:"#fff",fontWeight:600,fontSize:16,padding:"10px 24px",textTransform:"none",boxShadow:"0 2px 8px rgba(93, 63, 211, 0.15)",transition:"all 0.2s","&:hover":{background:"#4b2fc7",boxShadow:"0 4px 12px rgba(93, 63, 211, 0.2)"},[e.breakpoints.down("xs")]:{padding:"8px 16px",fontSize:14}},attachmentButton:{borderRadius:10,borderColor:"#5D3FD3",color:"#5D3FD3",fontWeight:600,fontSize:16,padding:"10px 24px",textTransform:"none",transition:"all 0.2s","&:hover":{background:"#f3f0fa",borderColor:"#5D3FD3"},"& .MuiButton-startIcon":{color:"#5D3FD3"}},attachmentPreview:{display:"flex",alignItems:"center",gap:8,marginTop:16,padding:"12px 16px",background:"#fff",borderRadius:12,border:"1px solid #e5e0fa","& .MuiButton-root":{color:"#5D3FD3",textTransform:"none",fontWeight:500},"& .MuiIconButton-root":{color:"#e53935",padding:8,"&:hover":{background:"#ffebee"}}}})),td=Oe.b().shape({body:Oe.d().min(5,"Mensagem muito curta").required("Obrigat\xf3rio"),contactId:Oe.a().required("Obrigat\xf3rio"),sendAt:Oe.d().required("Obrigat\xf3rio")});var nd=e=>{let{open:a,onClose:t,scheduleId:r,contactId:i,cleanContact:l,reload:s}=e;const c=ad(),d=Object(S.useHistory)(),{user:m}=Object(n.useContext)(H),u={body:"",contactId:"",sendAt:w()().add(1,"hour").format("YYYY-MM-DDTHH:mm"),sentAt:""},p={id:"",name:""},[g,f]=Object(n.useState)(u),[E,h]=Object(n.useState)(p),[x,v]=Object(n.useState)([p]),[C,N]=Object(n.useState)(null),I=Object(n.useRef)(null),[A,T]=Object(n.useState)(!1),D=Object(n.useRef)();Object(n.useEffect)(()=>{if(i&&x.length){const e=x.find(e=>e.id===i);e&&h(e)}},[i,x]),Object(n.useEffect)(()=>{const{companyId:e}=m;if(a)try{(async()=>{const{data:a}=await B.get("/contacts/list",{params:{companyId:e}});let t=a.map(e=>({id:e.id,name:e.name}));if(Object(k.isArray)(t)&&v([{id:"",name:""},...t]),i&&f(e=>({...e,contactId:i})),!r)return;const{data:n}=await B.get("/schedules/"+r);f(e=>({...e,...n,sendAt:w()(n.sendAt).format("YYYY-MM-DDTHH:mm")})),h(n.contact)})()}catch(t){y.toast.error(t.message)}},[r,i,a,m]);const O=()=>{t(),N(null),f(u)};return o.a.createElement("div",{className:c.root},o.a.createElement(Pt,{title:z.a.t("scheduleModal.confirmationModal.deleteTitle"),open:A,onClose:()=>T(!1),onConfirm:async()=>{C&&(N(null),I.current.value=null),g.mediaPath&&(await B.delete(`/schedules/${g.id}/media-upload`),f(e=>({...e,mediaPath:null})),y.toast.success(z.a.t("scheduleModal.toasts.deleted")),"function"==typeof s&&(console.log(s),console.log("1"),s()))}},z.a.t("scheduleModal.confirmationModal.deleteMessage")),o.a.createElement(xe.a,{open:a,onClose:O,maxWidth:"xs",fullWidth:!0,scroll:"paper",classes:{paper:c.dialogPaper}},o.a.createElement(ye.a,{id:"form-dialog-title",className:c.dialogTitle},"ERRO"===g.status?"Erro de Envio":"Mensagem "+Object(k.capitalize)(g.status)),o.a.createElement("div",{style:{display:"none"}},o.a.createElement("input",{type:"file",accept:".png,.jpg,.jpeg",ref:I,onChange:e=>(e=>{const a=Object(k.head)(e.target.files);a&&N(a)})(e)})),o.a.createElement(Ae.e,{initialValues:g,enableReinitialize:!0,validationSchema:td,onSubmit:(e,a)=>{setTimeout(()=>{(async e=>{const a={...e,userId:m.id};try{if(r){if(await B.put("/schedules/"+r,a),null!=C){const e=new FormData;e.append("file",C),await B.post(`/schedules/${r}/media-upload`,e)}}else{const{data:e}=await B.post("/schedules",a);if(null!=C){const a=new FormData;a.append("file",C),await B.post(`/schedules/${e.id}/media-upload`,a)}}y.toast.success(z.a.t("scheduleModal.success")),"function"==typeof s&&s(),i&&"function"===typeof l&&(l(),d.push("/schedules"))}catch(t){y.toast.error(t.message)}h(p),f(u),O()})(e),a.setSubmitting(!1)},400)}},e=>{let{touched:a,errors:t,isSubmitting:n,values:i,setFieldValue:l}=e;return o.a.createElement(Ae.d,null,o.a.createElement(ve.a,{dividers:!0,className:c.dialogContent},o.a.createElement("div",{className:c.multFieldLine},o.a.createElement(ke.a,{variant:"outlined",fullWidth:!0},o.a.createElement(Yt.a,{fullWidth:!0,value:E,options:x,onChange:(e,a)=>{const t=a?a.id:"";f({...g,contactId:t}),h(a||p)},getOptionLabel:e=>e.name,getOptionSelected:(e,a)=>a.id===e.id,renderInput:e=>o.a.createElement(Ce.a,Object.assign({},e,{variant:"outlined",placeholder:"Contato",className:c.input}))}))),o.a.createElement("br",null),o.a.createElement("div",{className:c.multFieldLine},o.a.createElement(Ae.b,{as:Ce.a,rows:9,multiline:!0,label:z.a.t("scheduleModal.form.body"),name:"body",inputRef:D,error:a.body&&Boolean(t.body),helperText:a.body&&t.body,variant:"outlined",margin:"dense",fullWidth:!0,className:c.textarea})),o.a.createElement(_t.a,{item:!0},o.a.createElement(ed,{disabled:n,onClick:e=>(async(e,a)=>{const t=D.current,n=t.value.substring(0,t.selectionStart),o=t.value.substring(t.selectionEnd),r=t.selectionStart+e.length;a("body",`${n}${e}${o}`),await new Promise(e=>setTimeout(e,100)),D.current.setSelectionRange(r,r)})(e,l)})),o.a.createElement("br",null),o.a.createElement("div",{className:c.multFieldLine},o.a.createElement(Ae.b,{as:Ce.a,label:z.a.t("scheduleModal.form.sendAt"),type:"datetime-local",name:"sendAt",InputLabelProps:{shrink:!0},error:a.sendAt&&Boolean(t.sendAt),helperText:a.sendAt&&t.sendAt,variant:"outlined",fullWidth:!0,className:c.input})),(g.mediaPath||C)&&o.a.createElement("div",{className:c.attachmentPreview},o.a.createElement(b.a,{startIcon:o.a.createElement(Ec.a,null)},C?C.name:g.mediaName),o.a.createElement(J.a,{onClick:()=>T(!0),size:"small"},o.a.createElement(an.a,null)))),o.a.createElement(we.a,{className:c.dialogActions},!C&&!g.mediaPath&&o.a.createElement(b.a,{onClick:()=>I.current.click(),disabled:n,variant:"outlined",className:c.attachmentButton,startIcon:o.a.createElement(Ec.a,null)},z.a.t("quickMessages.buttons.attach")),o.a.createElement(b.a,{onClick:O,disabled:n,variant:"outlined",className:c.buttonOutlined},z.a.t("scheduleModal.buttons.cancel")),(null===g.sentAt||""===g.sentAt)&&o.a.createElement(b.a,{type:"submit",disabled:n,variant:"contained",className:`${c.buttonContained} ${c.btnWrapper}`},r?""+z.a.t("scheduleModal.buttons.okEdit"):""+z.a.t("scheduleModal.buttons.okAdd"),n&&o.a.createElement(be.a,{size:24,className:c.buttonProgress}))))})))};const od=Object(Y.a)(e=>({menuPaper:{borderRadius:14,boxShadow:"0 4px 24px rgba(93,63,211,0.10)",minWidth:220,padding:0},menuItem:{display:"flex",alignItems:"center",gap:12,fontWeight:600,fontSize:15,padding:"12px 20px",borderRadius:10,margin:"4px 8px",transition:"background 0.2s","&:hover":{background:"#f3f0fa"}},iconSchedule:{color:"#5D3FD3",fontSize:22},iconTransfer:{color:"#1976d2",fontSize:22},iconDelete:{color:"#e53935",fontSize:22}}));var rd=e=>{let{ticket:a,menuOpen:t,handleClose:r,anchorEl:i}=e;const[l,s]=Object(n.useState)(!1),[c,d]=Object(n.useState)(!1),m=Object(n.useRef)(!0),{user:u}=Object(n.useContext)(H),[p,g]=Object(n.useState)(!1),[f,b]=Object(n.useState)(null),E=od();Object(n.useEffect)(()=>()=>{m.current=!1},[]);const h=e=>{s(!0),r()};return o.a.createElement(o.a.Fragment,null,o.a.createElement(ne.a,{id:"menu-appbar",anchorEl:i,getContentAnchorEl:null,anchorOrigin:{vertical:"bottom",horizontal:"right"},keepMounted:!0,transformOrigin:{vertical:"top",horizontal:"right"},open:t,onClose:r,PaperProps:{className:E.menuPaper}},o.a.createElement(oe.a,{onClick:()=>{r(),b(a.contact.id),g(!0)},className:E.menuItem},o.a.createElement(Qc.a,{className:E.iconSchedule}),z.a.t("ticketOptionsMenu.schedule")),o.a.createElement(oe.a,{onClick:e=>{d(!0),r()},className:E.menuItem},o.a.createElement(Xc.a,{className:E.iconTransfer}),z.a.t("ticketOptionsMenu.transfer")),o.a.createElement(Re,{role:u.profile,perform:"ticket-options:deleteTicket",yes:()=>o.a.createElement(oe.a,{onClick:h,className:E.menuItem},o.a.createElement(an.a,{className:E.iconDelete}),z.a.t("ticketOptionsMenu.delete"))})),o.a.createElement(Pt,{title:`${z.a.t("ticketOptionsMenu.confirmationModal.title")}${a.id} ${z.a.t("ticketOptionsMenu.confirmationModal.titleFrom")} ${a.contact.name}?`,open:l,onClose:s,onConfirm:async()=>{try{await B.delete("/tickets/"+a.id)}catch(e){y.toast.errorr(e.message)}}},z.a.t("ticketOptionsMenu.confirmationModal.message")),o.a.createElement(_c,{modalOpen:c,onClose:()=>{m.current&&d(!1)},ticketid:a.id}),o.a.createElement(nd,{open:p,onClose:()=>{g(!1),b(null)},"aria-labelledby":"form-dialog-title",contactId:f}))},id=t(691),ld=t.n(id);const sd=Object(Y.a)(e=>({actionButtons:{marginRight:6,flex:"none",alignSelf:"center",marginLeft:"auto","& > *":{margin:e.spacing(.5)}}}));var cd=e=>{let{ticket:a}=e;const t=sd(),r=Object(S.useHistory)(),[i,l]=Object(n.useState)(null),[s,c]=Object(n.useState)(!1),u=Boolean(i),{user:p}=Object(n.useContext)(H),{setCurrentTicket:g}=Object(n.useContext)(_a),f=Object(d.a)({palette:{primary:Ie.a}}),b=async(e,t,n)=>{c(!0);try{await B.put("/tickets/"+a.id,{status:t,userId:n||null,useIntegration:"closed"!==t&&a.useIntegration,promptId:"closed"!==t&&a.promptId,integrationId:"closed"!==t&&a.integrationId}),c(!1),"open"===t?g({...a,code:"#open"}):(g({id:null,code:null}),r.push("/tickets"))}catch(o){c(!1),y.toast.errorr(o.message)}};return o.a.createElement("div",{className:t.actionButtons},"closed"===a.status&&o.a.createElement(Ya,{loading:s,startIcon:o.a.createElement(qc.a,null),size:"small",onClick:e=>b(0,"open",null===p||void 0===p?void 0:p.id)},z.a.t("messagesList.header.buttons.reopen")),"open"===a.status&&o.a.createElement(o.a.Fragment,null,o.a.createElement(Sa.a,{title:z.a.t("messagesList.header.buttons.return")},o.a.createElement(J.a,{onClick:e=>b(0,"pending",null)},o.a.createElement(ld.a,null))),o.a.createElement(m.a,{theme:f},o.a.createElement(Sa.a,{title:z.a.t("messagesList.header.buttons.resolve")},o.a.createElement(J.a,{onClick:e=>b(0,"closed",null===p||void 0===p?void 0:p.id),color:"primary"},o.a.createElement(Rt.a,null)))),o.a.createElement(J.a,{onClick:e=>{l(e.currentTarget)}},o.a.createElement(Hc.a,null)),o.a.createElement(rd,{ticket:a,anchorEl:i,menuOpen:u,handleClose:e=>{l(null)}})),"pending"===a.status&&o.a.createElement(Ya,{loading:s,size:"small",variant:"contained",color:"primary",onClick:e=>b(0,"open",null===p||void 0===p?void 0:p.id)},z.a.t("messagesList.header.buttons.accept")))};const dd=Object(Y.a)(e=>({root:{display:"flex",height:"100%",position:"relative",overflow:"hidden"},mainWrapper:{flex:1,height:"100%",display:"flex",flexDirection:"column",overflow:"hidden",borderTopLeftRadius:0,borderBottomLeftRadius:0,borderLeft:"0",marginRight:-320,transition:e.transitions.create("margin",{easing:e.transitions.easing.sharp,duration:e.transitions.duration.leavingScreen})},mainWrapperShift:{borderTopRightRadius:0,borderBottomRightRadius:0,transition:e.transitions.create("margin",{easing:e.transitions.easing.easeOut,duration:e.transitions.duration.enteringScreen}),marginRight:0}}));var md=()=>{const{ticketId:e}=Object(S.useParams)(),a=Object(S.useHistory)(),t=dd(),{user:r}=Object(n.useContext)(H),[i,l]=Object(n.useState)(!1),[s,c]=Object(n.useState)(!0),[d,m]=Object(n.useState)({}),[u,p]=Object(n.useState)({}),g=Object(n.useContext)(j);Object(n.useEffect)(()=>{c(!0);const t=setTimeout(()=>{(async()=>{try{const{data:t}=await B.get("/tickets/u/"+e),{queueId:n}=t,{queues:o,profile:i}=r;if(void 0===o.find(e=>e.id===n)&&"admin"!==i)return y.toast.error("Acesso n\xe3o permitido"),void a.push("/tickets");m(t.contact),p(t),c(!1)}catch(t){c(!1),y.toast.error(t.message)}})()},500);return()=>clearTimeout(t)},[e,r,a]),Object(n.useEffect)(()=>{const e=localStorage.getItem("companyId"),t=g.getSocket(e);return t.on("ready",()=>t.emit("joinChatBox",""+u.id)),t.on(`company-${e}-ticket`,e=>{"update"===e.action&&e.ticket.id===u.id&&p(e.ticket),"delete"===e.action&&e.ticketId===u.id&&a.push("/tickets")}),t.on(`company-${e}-contact`,e=>{"update"===e.action&&m(a=>{var t;return a.id===(null===(t=e.contact)||void 0===t?void 0:t.id)?{...a,...e.contact}:a})}),()=>{t.disconnect()}},[e,u,a,g]);const f=()=>{l(!0)};return o.a.createElement("div",{className:t.root,id:"drawer-container"},o.a.createElement(wa.a,{variant:"outlined",elevation:0,className:Object(re.a)(t.mainWrapper,{[t.mainWrapperShift]:i})},o.a.createElement(Sn,{loading:s},(()=>{if(void 0!==u.user)return o.a.createElement(wn,{contact:d,ticket:u,onClick:f})})(),o.a.createElement(cd,{ticket:u})),o.a.createElement(wa.a,null,o.a.createElement(Jr,{ticket:u})),o.a.createElement(Et,null,o.a.createElement(o.a.Fragment,null,o.a.createElement(En,{ticket:u,ticketId:u.id,isGroup:u.isGroup}),o.a.createElement(Lc,{ticketId:u.id,ticketStatus:u.status})))),o.a.createElement(uc,{open:i,handleDrawerClose:()=>{l(!1)},contact:d,loading:s,ticket:u}))},ud=t(1294),pd=t(1295),gd=t(1296);const fd=Object(Y.a)(e=>({skeletonItem:{display:"flex",alignItems:"center",padding:"18px 20px",borderRadius:14,background:"#fff",marginBottom:14,boxShadow:"0 2px 8px rgba(93, 63, 211, 0.07)",[e.breakpoints.down("xs")]:{padding:"12px 10px",marginBottom:10}},avatar:{marginRight:18,boxShadow:"0 2px 8px rgba(93, 63, 211, 0.10)",borderRadius:"50%",background:"#f3f0fa"},text:{flex:1},divider:{border:0,height:8,background:"transparent"}}));var bd=()=>{const e=fd();return o.a.createElement(o.a.Fragment,null,[1,2,3].map(a=>o.a.createElement(o.a.Fragment,{key:a},o.a.createElement(g.a,{className:e.skeletonItem},o.a.createElement("div",{className:e.avatar},o.a.createElement(yn.a,{animation:"wave",variant:"circle",width:48,height:48,style:{background:"#e5e0fa"}})),o.a.createElement("div",{className:e.text},o.a.createElement(yn.a,{animation:"wave",height:22,width:90,style:{borderRadius:8,background:"#e5e0fa"}}),o.a.createElement(yn.a,{animation:"wave",height:18,width:140,style:{marginTop:8,borderRadius:8,background:"#f3f0fa"}}))),a<3&&o.a.createElement("div",{className:e.divider}))))};const Ed=Object(Y.a)(e=>({ticketsListWrapper:{position:"relative",display:"flex",height:"100%",flexDirection:"column",overflow:"hidden",borderTopRightRadius:0,borderBottomRightRadius:0,background:"#faf9fd"},ticketsList:{flex:1,maxHeight:"100%",overflowY:"auto",padding:"8px","&::-webkit-scrollbar":{width:"8px"},"&::-webkit-scrollbar-track":{background:"#f1f1f1",borderRadius:"10px"},"&::-webkit-scrollbar-thumb":{background:"#5D3FD3",borderRadius:"10px","&:hover":{background:"#4b2fc7"}}},ticketsListHeader:{color:"#5D3FD3",zIndex:2,backgroundColor:"white",borderBottom:"1px solid #e5e0fa",display:"flex",alignItems:"center",justifyContent:"space-between",padding:"16px 24px",boxShadow:"0 2px 8px rgba(93, 63, 211, 0.05)"},ticketsCount:{fontWeight:600,color:"#5D3FD3",marginLeft:"8px",fontSize:"15px",background:"#f3f0fa",padding:"4px 12px",borderRadius:"20px"},noTicketsText:{textAlign:"center",color:"#666",fontSize:"15px",lineHeight:"1.6",marginTop:"12px"},noTicketsTitle:{textAlign:"center",fontSize:"20px",fontWeight:"700",color:"#5D3FD3",margin:"0px"},noTicketsDiv:{display:"flex",height:"200px",margin:"40px 24px",flexDirection:"column",alignItems:"center",justifyContent:"center",background:"white",borderRadius:"16px",boxShadow:"0 4px 16px rgba(93, 63, 211, 0.08)",padding:"32px",[e.breakpoints.down("xs")]:{margin:"24px 16px",padding:"24px"}},listItem:{marginBottom:"8px",borderRadius:"12px",transition:"all 0.2s","&:hover":{transform:"translateY(-2px)",boxShadow:"0 4px 12px rgba(93, 63, 211, 0.1)"}}})),hd=(e,a)=>{if("LOAD_TICKETS"===a.type){return a.payload.forEach(a=>{const t=e.findIndex(e=>e.id===a.id);-1!==t?(e[t]=a,a.unreadMessages>0&&e.unshift(e.splice(t,1)[0])):e.push(a)}),[...e]}if("RESET_UNREAD"===a.type){const t=a.payload,n=e.findIndex(e=>e.id===t);return-1!==n&&(e[n].unreadMessages=0),[...e]}if("UPDATE_TICKET"===a.type){const t=a.payload,n=e.findIndex(e=>e.id===t.id);return-1!==n?e[n]=t:e.unshift(t),[...e]}if("UPDATE_TICKET_UNREAD_MESSAGES"===a.type){const t=a.payload,n=e.findIndex(e=>e.id===t.id);return-1!==n?(e[n]=t,e.unshift(e.splice(n,1)[0])):e.unshift(t),[...e]}if("UPDATE_TICKET_CONTACT"===a.type){const t=a.payload,n=e.findIndex(e=>e.contactId===t.id);return-1!==n&&(e[n].contact=t),[...e]}if("DELETE_TICKET"===a.type){const t=a.payload,n=e.findIndex(e=>e.id===t);return-1!==n&&e.splice(n,1),[...e]}if("RESET"===a.type)return[]};var xd=e=>{const{status:a,searchParam:t,tags:r,users:i,showAll:l,selectedQueueIds:s,updateCount:c,style:d}=e,m=Ed(),[u,p]=Object(n.useState)(1),[g,f]=Object(n.useReducer)(hd,[]),{user:b}=Object(n.useContext)(H),{profile:E,queues:h}=b,x=Object(n.useContext)(j);Object(n.useEffect)(()=>{f({type:"RESET"}),p(1)},[a,t,f,l,r,i,s]);const{tickets:y,hasMore:v,loading:C}=La({pageNumber:u,searchParam:t,status:a,showAll:l,tags:JSON.stringify(r),users:JSON.stringify(i),queueIds:JSON.stringify(s)});Object(n.useEffect)(()=>{const e=h.map(e=>e.id),a=y.filter(a=>e.indexOf(a.queueId)>-1);f("user"===E?{type:"LOAD_TICKETS",payload:a}:{type:"LOAD_TICKETS",payload:y})},[y,a,t,h,E]),Object(n.useEffect)(()=>{const e=localStorage.getItem("companyId"),t=x.getSocket(e),n=e=>(!e.userId||e.userId===(null===b||void 0===b?void 0:b.id)||l)&&(!e.queueId||s.indexOf(e.queueId)>-1);return t.on("ready",()=>{a?t.emit("joinTickets",a):t.emit("joinNotification")}),t.on(`company-${e}-ticket`,e=>{var t;"updateUnread"===e.action&&f({type:"RESET_UNREAD",payload:e.ticketId}),"update"===e.action&&n(e.ticket)&&e.ticket.status===a&&f({type:"UPDATE_TICKET",payload:e.ticket}),"update"===e.action&&((t=e.ticket).queueId&&-1===s.indexOf(t.queueId))&&f({type:"DELETE_TICKET",payload:e.ticket.id}),"delete"===e.action&&f({type:"DELETE_TICKET",payload:e.ticketId})}),t.on(`company-${e}-appMessage`,e=>{var t,o;const r=h.map(e=>e.id);("user"!==E||-1!==r.indexOf(null===(t=e.ticket)||void 0===t||null===(o=t.queue)||void 0===o?void 0:o.id)&&null!==e.ticket.queue)&&("create"!==e.action||!n(e.ticket)||void 0!==a&&e.ticket.status!==a||f({type:"UPDATE_TICKET_UNREAD_MESSAGES",payload:e.ticket}))}),t.on(`company-${e}-contact`,e=>{"update"===e.action&&f({type:"UPDATE_TICKET_CONTACT",payload:e.contact})}),()=>{t.disconnect()}},[a,l,b,s,r,i,E,h,x]),Object(n.useEffect)(()=>{"function"===typeof c&&c(g.length)},[g]);return o.a.createElement(wa.a,{className:m.ticketsListWrapper,style:d},o.a.createElement(wa.a,{square:!0,name:"closed",elevation:0,className:m.ticketsList,onScroll:e=>{if(!v||C)return;const{scrollTop:a,scrollHeight:t,clientHeight:n}=e.currentTarget;t-(a+100)<n&&p(e=>e+1)}},o.a.createElement(ee.a,{style:{padding:0}},0!==g.length||C?o.a.createElement(o.a.Fragment,null,g.map(e=>o.a.createElement("div",{key:e.id,className:m.listItem},o.a.createElement(Dn,{ticket:e})))):o.a.createElement("div",{className:m.noTicketsDiv},o.a.createElement("span",{className:m.noTicketsTitle},z.a.t("ticketsList.noTicketsTitle")),o.a.createElement("p",{className:m.noTicketsText},z.a.t("ticketsList.noTicketsMessage"))),C&&o.a.createElement(bd,null))))};const yd=Object(Y.a)(e=>({root:{padding:16,[e.breakpoints.down("xs")]:{padding:8}},chip:{borderRadius:10,fontWeight:600,fontSize:14,boxShadow:"0 2px 8px rgba(93, 63, 211, 0.10)",background:"#e5e0fa",color:"#5D3FD3",margin:2,border:"none","& .MuiChip-label":{padding:"0 10px"}},chipColored:{borderRadius:10,fontWeight:600,fontSize:14,boxShadow:"0 2px 8px rgba(93, 63, 211, 0.10)",color:"#fff",margin:2,border:"none","& .MuiChip-label":{padding:"0 10px"}},autocomplete:{"& .MuiOutlinedInput-root":{borderRadius:12,background:"#fff","& fieldset":{borderColor:"#5D3FD3"},"&:hover fieldset":{borderColor:"#5D3FD3"},"&.Mui-focused fieldset":{borderColor:"#5D3FD3",boxShadow:"0 0 0 2px #e5e0fa"}},"& .MuiInputBase-input":{fontSize:15}}}));function vd(e){let{onFiltered:a}=e;const t=yd(),[r,i]=Object(n.useState)([]),[l,s]=Object(n.useState)([]);Object(n.useEffect)(()=>{!async function(){await c()}()},[]);const c=async()=>{try{const{data:e}=await B.get("/tags/list");i(e)}catch(e){y.toast.error(e.message)}};return o.a.createElement(g.a,{className:t.root},o.a.createElement(Yt.a,{multiple:!0,size:"small",options:r,value:l,onChange:(e,t,n)=>(async e=>{s(e),a(e)})(t),getOptionLabel:e=>e.name,className:t.autocomplete,renderTags:(e,a)=>e.map((e,n)=>o.a.createElement(Fe.a,Object.assign({variant:"default",className:e.color?t.chipColored:t.chip,style:e.color?{backgroundColor:e.color}:{},label:e.name},a({index:n}),{size:"small"}))),renderInput:e=>o.a.createElement(Ce.a,Object.assign({},e,{variant:"outlined",placeholder:"Filtro por Tags"}))}))}const Cd=Object(Y.a)(e=>({formControl:{width:"100%",minWidth:120,marginTop:0,[e.breakpoints.down("xs")]:{minWidth:80}},select:{borderRadius:12,background:"#fff","& .MuiOutlinedInput-root":{borderRadius:12,fontSize:15,background:"#fff","& fieldset":{borderColor:"#5D3FD3"},"&:hover fieldset":{borderColor:"#5D3FD3"},"&.Mui-focused fieldset":{borderColor:"#5D3FD3",boxShadow:"0 0 0 2px #e5e0fa"}},"& .MuiSelect-select":{fontSize:15,padding:"12px 10px"}},menuItem:{borderRadius:10,margin:"2px 0",transition:"background 0.2s","&:hover":{background:"#f3f0fa"}},checkbox:{color:"#5D3FD3 !important",transition:"all 0.2s","&.Mui-checked":{color:"#5D3FD3"}}}));var kd=e=>{let{userQueues:a,selectedQueueIds:t=[],onChange:n}=e;const r=Cd();return o.a.createElement("div",{style:{width:140,marginTop:0}},o.a.createElement(ke.a,{fullWidth:!0,margin:"dense",className:r.formControl},o.a.createElement(Ne.a,{multiple:!0,displayEmpty:!0,variant:"outlined",value:t,onChange:e=>{n(e.target.value)},className:r.select,MenuProps:{anchorOrigin:{vertical:"bottom",horizontal:"left"},transformOrigin:{vertical:"top",horizontal:"left"},getContentAnchorEl:null,PaperProps:{style:{borderRadius:14,boxShadow:"0 4px 16px rgba(93, 63, 211, 0.08)"}}},renderValue:()=>z.a.t("ticketsQueueSelect.placeholder")},(null===a||void 0===a?void 0:a.length)>0&&a.map(e=>o.a.createElement(oe.a,{dense:!0,key:e.id,value:e.id,className:r.menuItem,style:{borderLeft:"5px solid "+e.color}},o.a.createElement(_r.a,{className:r.checkbox,size:"small",color:"primary",checked:t.indexOf(e.id)>-1}),o.a.createElement(Ge.a,{primary:e.name}))))))};const Sd=Object(Y.a)(e=>({root:{padding:"0 16px 16px",[e.breakpoints.down("xs")]:{padding:"0 8px 8px"}},chip:{borderRadius:10,fontWeight:600,fontSize:14,boxShadow:"0 2px 8px rgba(93, 63, 211, 0.10)",background:"#5D3FD3",color:"#fff",margin:2,border:"none","& .MuiChip-label":{padding:"0 10px"}},autocomplete:{"& .MuiOutlinedInput-root":{borderRadius:12,background:"#fff","& fieldset":{borderColor:"#5D3FD3"},"&:hover fieldset":{borderColor:"#5D3FD3"},"&.Mui-focused fieldset":{borderColor:"#5D3FD3",boxShadow:"0 0 0 2px #e5e0fa"}},"& .MuiInputBase-input":{fontSize:15}}}));function Nd(e){let{onFiltered:a,initialUsers:t}=e;const r=Sd(),[i,l]=Object(n.useState)([]),[s,c]=Object(n.useState)([]);Object(n.useEffect)(()=>{!async function(){await d()}()},[]),Object(n.useEffect)(()=>{c([]),Array.isArray(t)&&Array.isArray(i)&&i.length>0&&m(t)},[t,i]);const d=async()=>{try{const{data:e}=await B.get("/users/list"),a=e.map(e=>({id:e.id,name:e.name}));l(a)}catch(e){y.toast.error(e.message)}},m=async e=>{c(e),a(e)};return o.a.createElement(g.a,{className:r.root},o.a.createElement(Yt.a,{multiple:!0,size:"small",options:i,value:s,onChange:(e,a,t)=>m(a),getOptionLabel:e=>e.name,getOptionSelected:(e,a)=>(null===e||void 0===e?void 0:e.id)===(null===a||void 0===a?void 0:a.id)||(null===e||void 0===e?void 0:e.name.toLowerCase())===(null===a||void 0===a?void 0:a.name.toLowerCase()),className:r.autocomplete,renderTags:(e,a)=>e.map((e,t)=>o.a.createElement(Fe.a,Object.assign({variant:"default",className:r.chip,label:e.name},a({index:t}),{size:"small"}))),renderInput:e=>o.a.createElement(Ce.a,Object.assign({},e,{variant:"outlined",placeholder:"Filtro por Usu\xe1rios"}))}))}const wd=Object(Y.a)(e=>({ticketsWrapper:{position:"relative",display:"flex",height:"100%",flexDirection:"column",overflow:"hidden",borderRadius:8,background:"#faf9fd",boxShadow:"0 2px 12px rgba(93,63,211,0.06)",padding:e.spacing(.5,0,.5,0)},tabsHeader:{flex:"none",backgroundColor:"#fff",borderRadius:8,margin:e.spacing(.5,.5,0,.5),boxShadow:"0 1px 4px rgba(93,63,211,0.04)",padding:e.spacing(.25,.25,.25,.25)},tabsInternal:{flex:"none",backgroundColor:"#fff",borderRadius:8,margin:e.spacing(.5,.5,0,.5),boxShadow:"0 1px 4px rgba(93,63,211,0.04)",padding:e.spacing(.25,.25,.25,.25)},tab:{minWidth:70,width:70,fontSize:13,fontWeight:600,color:"#666",borderRadius:6,margin:"0 2px",padding:"4px 6px",transition:"all 0.2s","& .MuiTab-wrapper":{flexDirection:"row",gap:4},"& svg":{width:16,height:16},"&.Mui-selected":{color:"#5D3FD3",background:"#f3f0fa"}},internalTab:{minWidth:70,width:70,fontSize:13,padding:4,fontWeight:600,color:"#666",borderRadius:6,margin:"0 2px",transition:"all 0.2s","&.Mui-selected":{color:"#5D3FD3",background:"#f3f0fa"}},ticketOptionsBox:{display:"flex",justifyContent:"space-between",alignItems:"center",background:"#fff",padding:e.spacing(.75,1,.75,1),borderRadius:8,margin:e.spacing(.5,.5,.5,.5),boxShadow:"0 1px 4px rgba(93,63,211,0.04)",gap:8,[e.breakpoints.down("xs")]:{flexDirection:"column",gap:8,padding:e.spacing(1,.75,1,.75)}},serachInputWrapper:{flex:1,background:"#fff",display:"flex",borderRadius:6,padding:2,marginRight:e.spacing(.5),boxShadow:"0 1px 4px rgba(93,63,211,0.06)",border:"1px solid #5D3FD3",transition:"box-shadow 0.2s","&:focus-within":{boxShadow:"0 2px 8px rgba(93,63,211,0.10)"}},searchIcon:{color:"#5D3FD3",marginLeft:8,marginRight:8,alignSelf:"center",width:18,height:18},searchInput:{flex:1,border:"none",borderRadius:4,padding:"8px 12px",outline:"none",fontSize:14,background:"transparent",color:"#333"},badge:{right:0,background:"#5D3FD3",color:"#fff",fontWeight:600,fontSize:12,padding:"0 6px",borderRadius:6,boxShadow:"0 1px 4px rgba(93,63,211,0.10)"},show:{display:"block"},hide:{display:"none !important"},insiderTabPanel:{height:"100%",marginTop:"-72px",paddingTop:"72px"},insiderDoubleTabPanel:{display:"flex",flexDirection:"column",marginTop:"-72px",paddingTop:"72px",height:"100%"},labelContainer:{width:"auto",padding:0},iconLabelWrapper:{flexDirection:"row","& > *:first-child":{marginBottom:"3px !important",marginRight:16}},insiderTabLabel:{[e.breakpoints.down(1600)]:{display:"none"}},smallFormControl:{"& .MuiOutlinedInput-input":{padding:"12px 10px"},"& .MuiInputLabel-outlined":{marginTop:"-6px"}}}));var Id=()=>{const e=wd(),a=Object(S.useHistory)(),[t,r]=Object(n.useState)(""),[i,l]=Object(n.useState)("open"),[s,c]=Object(n.useState)("open"),[d,m]=Object(n.useState)(!1),[u,p]=Object(n.useState)(!1),g=Object(n.useRef)(),{user:f}=Object(n.useContext)(H),{profile:E}=f,[h,x]=Object(n.useState)(0),[y,v]=Object(n.useState)(0),C=f.queues.map(e=>e.id),[k,N]=Object(n.useState)(C||[]),[w,I]=Object(n.useState)([]),[A,T]=Object(n.useState)([]);let D;Object(n.useEffect)(()=>{"ADMIN"===f.profile.toUpperCase()&&p(!0)},[]),Object(n.useEffect)(()=>{"search"===i&&g.current.focus()},[i]);const O=e=>{if(s!==e)return{width:0,height:0}};return o.a.createElement(wa.a,{elevation:0,variant:"outlined",className:e.ticketsWrapper},o.a.createElement(pn,{modalOpen:d,onClose:e=>{(e=>{m(!1),void 0!==e&&void 0!==e.uuid&&a.push("/tickets/"+e.uuid)})(e)}}),o.a.createElement(wa.a,{elevation:0,square:!0,className:e.tabsHeader},o.a.createElement(Il.a,{value:i,onChange:(e,a)=>{l(a)},variant:"fullWidth",indicatorColor:"primary",textColor:"primary","aria-label":"icon label tabs example"},o.a.createElement(Al.a,{value:"open",icon:o.a.createElement(ud.a,{size:16}),label:z.a.t("tickets.tabs.open.title"),classes:{root:e.tab}}),o.a.createElement(Al.a,{value:"closed",icon:o.a.createElement(pd.a,{size:16}),label:z.a.t("tickets.tabs.closed.title"),classes:{root:e.tab}}),o.a.createElement(Al.a,{value:"search",icon:o.a.createElement(gd.a,{size:16}),label:z.a.t("tickets.tabs.search.title"),classes:{root:e.tab}}))),o.a.createElement(wa.a,{square:!0,elevation:0,className:e.ticketOptionsBox},"search"===i?o.a.createElement("div",{className:e.serachInputWrapper},o.a.createElement(gd.a,{size:18,className:e.searchIcon}),o.a.createElement(Bt.a,{className:e.searchInput,inputRef:g,placeholder:z.a.t("tickets.search.placeholder"),type:"search",onChange:e=>{const a=e.target.value.toLowerCase();if(clearTimeout(D),""===a)return r(a),void l("open");D=setTimeout(()=>{r(a)},500)}})):o.a.createElement(o.a.Fragment,null,o.a.createElement(b.a,{variant:"contained",style:{background:"#5D3FD3",color:"#fff",fontWeight:600,borderRadius:6,padding:"6px 16px",fontSize:14,boxShadow:"0 1px 4px rgba(93,63,211,0.10)",transition:"all 0.2s",display:"flex",alignItems:"center",gap:6},onClick:()=>m(!0)},z.a.t("ticketsManager.buttons.newTicket")),o.a.createElement(Re,{role:f.profile,perform:"tickets-manager:showall",yes:()=>o.a.createElement(go.a,{label:z.a.t("tickets.buttons.showAll"),labelPlacement:"start",control:o.a.createElement(fo.a,{size:"small",checked:u,onChange:()=>p(e=>!e),name:"showAllTickets",color:"primary"})})})),o.a.createElement(kd,{style:{marginLeft:6},selectedQueueIds:k,userQueues:null===f||void 0===f?void 0:f.queues,onChange:e=>N(e)})),o.a.createElement(Jl,{value:i,name:"open",className:e.ticketsWrapper},o.a.createElement(Il.a,{value:s,onChange:(e,a)=>{c(a)},indicatorColor:"primary",textColor:"primary",variant:"fullWidth",className:e.tabsInternal,TabIndicatorProps:{style:{height:0}}},o.a.createElement(Al.a,{label:o.a.createElement(qe.a,{className:e.badge,badgeContent:h,color:"primary"},z.a.t("ticketsList.assignedHeader")),value:"open",classes:{root:e.internalTab}}),o.a.createElement(Al.a,{label:o.a.createElement(qe.a,{className:e.badge,badgeContent:y,color:"secondary"},z.a.t("ticketsList.pendingHeader")),value:"pending",classes:{root:e.internalTab}})),o.a.createElement(wa.a,{className:e.ticketsWrapper},o.a.createElement(xd,{status:"open",showAll:u,selectedQueueIds:k,updateCount:e=>x(e),style:O("open")}),o.a.createElement(xd,{status:"pending",selectedQueueIds:k,updateCount:e=>v(e),style:O("pending")}))),o.a.createElement(Jl,{value:i,name:"closed",className:e.ticketsWrapper},o.a.createElement(xd,{status:"closed",showAll:!0,selectedQueueIds:k})),o.a.createElement(Jl,{value:i,name:"search",className:e.ticketsWrapper},o.a.createElement(vd,{onFiltered:e=>{const a=e.map(e=>e.id);I(a)}}),"admin"===E&&o.a.createElement(Nd,{onFiltered:e=>{const a=e.map(e=>e.id);T(a)}}),o.a.createElement(xd,{searchParam:t,showAll:!0,tags:w,users:A,selectedQueueIds:k})))};const Ad=Object(Y.a)(e=>({chatContainer:{flex:1,padding:e.spacing(1),height:"calc(100% - 48px)",overflowY:"hidden"},chatPapper:{display:"flex",height:"100%"},contactsWrapper:{display:"flex",height:"100%",flexDirection:"column",overflowY:"hidden"},messagesWrapper:{display:"flex",height:"100%",flexDirection:"column"},welcomeMsg:{backgroundColor:e.palette.boxticket,display:"flex",justifyContent:"space-evenly",alignItems:"center",height:"100%",textAlign:"center"}}));var Td=()=>{const e=Ad(),{ticketId:a}=Object(S.useParams)();return o.a.createElement("div",{className:e.chatContainer},o.a.createElement("div",{className:e.chatPapper},o.a.createElement(_t.a,{container:!0,spacing:0},o.a.createElement(_t.a,{item:!0,xs:4,className:e.contactsWrapper},o.a.createElement(Id,null)),o.a.createElement(_t.a,{item:!0,xs:8,className:e.messagesWrapper},a?o.a.createElement(o.a.Fragment,null,o.a.createElement(md,null)):o.a.createElement(wa.a,{square:!0,variant:"outlined",className:e.welcomeMsg},o.a.createElement("div",null,o.a.createElement("center",null,o.a.createElement(ce.a,{size:100,color:"#5D3FD3",style:{margin:"0 auto"}}))))))))},Dd=t(1297),Od=t(1298),jd=t(693),Rd=t.n(jd),Fd=t(692),Md=t.n(Fd),Pd=t(746);var Bd=Object(Pd.a)(wa.a)({height:"calc(100% - 48px)",display:"grid",gridTemplateRows:"56px 1fr"});const zd=Object(Y.a)(e=>({header:{},content:{overflow:"auto"},placeholderContainer:{display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",height:"100%",backgroundColor:e.palette.boxticket},placeholderItem:{}}));var Wd=e=>{const a=zd(),{ticketId:t}=Object(S.useParams)(),[r,i]=Object(n.useState)(0),{currentTicket:l,setCurrentTicket:s}=Object(n.useContext)(_a);Object(n.useEffect)(()=>(null!==l.id&&s({id:l.id,code:"#open"}),t||i(1),()=>{s({id:null,code:null})}),[]),Object(n.useEffect)(()=>{null!==l.id&&i(0)},[l]);return o.a.createElement(Bd,null,o.a.createElement(g.a,{className:a.header},o.a.createElement(Dd.a,{value:r,onChange:(e,a)=>{i(a)},showLabels:!0,className:a.root},o.a.createElement(Od.a,{label:"Ticket",icon:o.a.createElement(Fa.a,null)}),o.a.createElement(Od.a,{label:"Atendimentos",icon:o.a.createElement(Rd.a,null)}))),o.a.createElement(g.a,{className:a.content},0===r?t?o.a.createElement(md,null):o.a.createElement(g.a,{className:a.placeholderContainer},o.a.createElement("div",{className:a.placeholderItem},z.a.t("chat.noTicketMessage")),o.a.createElement("div",null,o.a.createElement("center",null,o.a.createElement("img",{style:{margin:"0 auto",width:"70%"},src:Md.a,alt:"logologin"}))),o.a.createElement("br",null),o.a.createElement(b.a,{onClick:()=>i(1),variant:"contained",color:"primary"},"Selecionar Ticket")):o.a.createElement(Id,null)))};var Ld=Object(Xs.a)()((function(e){return Object(Xs.b)("md",e.width)?o.a.createElement(Td,null):o.a.createElement(Wd,null)}));const qd=Object(Y.a)(e=>({container:{paddingTop:e.spacing(4),paddingBottom:e.spacing(4),paddingLeft:e.spacing(4),paddingRight:e.spacing(4),[e.breakpoints.down("sm")]:{paddingLeft:e.spacing(1),paddingRight:e.spacing(1)}},mainPaper:{flex:1,padding:e.spacing(3),background:"linear-gradient(135deg, #f7f8fa 60%, #e5e0fa 100%)",minHeight:"100vh"},searchContainer:{flex:1,maxWidth:480,display:"flex",[e.breakpoints.down("sm")]:{width:"100%",maxWidth:"100%",marginBottom:e.spacing(1)}},searchInput:{flex:1,"& .MuiOutlinedInput-root":{borderRadius:10}},addButton:{position:"fixed",bottom:e.spacing(3),right:e.spacing(3),borderRadius:"50%",width:56,height:56,background:"linear-gradient(90deg, #5D3FD3 0%, #7B68EE 100%)",boxShadow:"0 4px 12px rgba(93,63,211,0.15)","&:hover":{background:"linear-gradient(90deg, #4930A8 0%, #6A5ACD 100%)"},zIndex:10},headerContainer:{display:"flex",alignItems:"center",marginBottom:e.spacing(3),[e.breakpoints.down("sm")]:{flexDirection:"column",alignItems:"flex-start"}},pageTitle:{color:"#5D3FD3",fontWeight:600,fontSize:"1.5rem",marginBottom:e.spacing(2),position:"relative",display:"inline-block","&::after":{content:'""',position:"absolute",width:"40%",height:3,bottom:-5,left:0,backgroundColor:"#5D3FD3",borderRadius:2}},card:{background:"#fff",borderRadius:12,boxShadow:"0 4px 20px rgba(93,63,211,0.10)",padding:e.spacing(2),height:"100%",transition:"all 0.3s ease","&:hover":{transform:"translateY(-4px)",boxShadow:"0 8px 30px rgba(93,63,211,0.15)"}},cardHeader:{display:"flex",alignItems:"center",marginBottom:e.spacing(2),gap:e.spacing(1)},userAvatar:{width:48,height:48,background:"linear-gradient(45deg, #5D3FD3 30%, #7B68EE 90%)",fontSize:"1.2rem"},userInfo:{flex:1},userName:{fontWeight:600,color:"#333",fontSize:"1.1rem",marginBottom:2},userEmail:{color:"#666",fontSize:"0.9rem"},cardContent:{padding:e.spacing(1,0)},infoRow:{display:"flex",alignItems:"center",marginBottom:e.spacing(1),"&:last-child":{marginBottom:0}},infoLabel:{color:"#666",fontSize:"0.9rem",width:80},infoValue:{color:"#333",fontSize:"0.9rem",fontWeight:500},cardActions:{display:"flex",justifyContent:"flex-end",gap:e.spacing(1),marginTop:e.spacing(2),paddingTop:e.spacing(2),borderTop:"1px solid #e3e6fd"},actionButton:{padding:e.spacing(1),color:"#555",transition:"all 0.3s ease","&:hover":{backgroundColor:"rgba(93, 63, 211, 0.08)",transform:"scale(1.1)"}},editButton:{color:"#5D3FD3","&:hover":{color:"#4930A8"}},deleteButton:{color:"#F44336","&:hover":{color:"#D32F2F"}},noUsersContainer:{display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",padding:e.spacing(8),width:"100%"},noUsersIcon:{fontSize:80,color:"rgba(0, 0, 0, 0.2)",marginBottom:e.spacing(2)},noUsersText:{color:"rgba(0, 0, 0, 0.5)",fontSize:"1.1rem",maxWidth:300,textAlign:"center"}})),Hd=(e,a)=>{if("LOAD_USERS"===a.type){const t=a.payload,n=[];return t.forEach(a=>{const t=e.findIndex(e=>e.id===a.id);-1!==t?e[t]=a:n.push(a)}),[...e,...n]}if("UPDATE_USERS"===a.type){const t=a.payload,n=e.findIndex(e=>e.id===t.id);return-1!==n?(e[n]=t,[...e]):[t,...e]}if("DELETE_USER"===a.type){const t=a.payload,n=e.findIndex(e=>e.id===t);return-1!==n&&e.splice(n,1),[...e]}if("RESET"===a.type)return[]};var Ud=()=>{const e=qd(),[a,t]=Object(n.useState)(!1),[r,i]=Object(n.useState)(1),[l,s]=Object(n.useState)(!1),[c,d]=Object(n.useState)(null),[m,u]=Object(n.useState)(null),[p,b]=Object(n.useState)(!1),[E,h]=Object(n.useState)(!1),[x,v]=Object(n.useState)(""),[C,k]=Object(n.useReducer)(Hd,[]),S=Object(n.useContext)(j);Object(n.useEffect)(()=>{k({type:"RESET"}),i(1)},[x]),Object(n.useEffect)(()=>{t(!0);const e=setTimeout(()=>{(async()=>{try{const{data:e}=await B.get("/users/",{params:{searchParam:x,pageNumber:r}}),a=e.users.map(e=>({...e,whatsapp:e.whatsapp||null,allTicket:e.allTicket||"desabled",queues:e.queues||[]}));k({type:"LOAD_USERS",payload:a}),s(e.hasMore),t(!1)}catch(e){y.toast.error(e.message)}})()},500);return()=>clearTimeout(e)},[x,r]),Object(n.useEffect)(()=>{const e=localStorage.getItem("companyId"),a=S.getSocket(e);return a.on(`company-${e}-user`,e=>{"update"!==e.action&&"create"!==e.action||k({type:"UPDATE_USERS",payload:e.user}),"delete"===e.action&&k({type:"DELETE_USER",payload:+e.userId})}),()=>{a.disconnect()}},[S]);return o.a.createElement(Zn.a,{maxWidth:"xl",className:e.container},o.a.createElement(wa.a,{className:e.mainPaper,elevation:0},o.a.createElement(J.a,{className:e.addButton,color:"primary",onClick:()=>{d(null),b(!0)}},o.a.createElement(Kn.a,{size:24,color:"#fff"})),o.a.createElement(Pt,{title:m&&`${z.a.t("users.confirmationModal.deleteTitle")} ${m.name}?`,open:E,onClose:()=>h(!1),onConfirm:()=>(async e=>{try{await B.delete("/users/"+e),y.toast.success(z.a.t("users.toasts.deleted"))}catch(a){y.toast.error(a.message)}u(null),v(""),i(1)})(m.id)},z.a.t("users.confirmationModal.deleteMessage")),o.a.createElement(We,{open:p,onClose:()=>{d(null),b(!1)},"aria-labelledby":"form-dialog-title",userId:c&&c.id}),o.a.createElement(g.a,{className:e.headerContainer},o.a.createElement(g.a,{display:"flex",alignItems:"center",gap:2},o.a.createElement(Te.a,{size:32,style:{color:"#5D3FD3"}}),o.a.createElement(f.a,{className:e.pageTitle,component:"h1"},z.a.t("users.title")," ",o.a.createElement("span",{style:{color:"#888",fontWeight:400}},"(",C.length,")"))),o.a.createElement(g.a,{className:e.searchContainer},o.a.createElement(Ce.a,{placeholder:z.a.t("contacts.searchPlaceholder"),type:"search",value:x,onChange:e=>{v(e.target.value.toLowerCase())},className:e.searchInput,InputProps:{startAdornment:o.a.createElement(Do.a,{position:"start"},o.a.createElement(jo.a,{style:{color:"gray"}}))}}))),0!==C.length||a?o.a.createElement(_t.a,{container:!0,spacing:3},C.map(a=>o.a.createElement(_t.a,{item:!0,xs:12,sm:6,md:4,key:a.id},o.a.createElement(wa.a,{className:e.card},o.a.createElement("div",{className:e.cardHeader},o.a.createElement(Le.a,{className:e.userAvatar},a.name.split(" ").map(e=>e[0]).join("").toUpperCase()),o.a.createElement("div",{className:e.userInfo},o.a.createElement(f.a,{className:e.userName},a.name),o.a.createElement(f.a,{className:e.userEmail},a.email))),o.a.createElement("div",{className:e.cardContent},o.a.createElement("div",{className:e.infoRow},o.a.createElement(f.a,{className:e.infoLabel},"Perfil:"),o.a.createElement(f.a,{className:e.infoValue},"admin"===a.profile?"Administrador":"Usu\xe1rio")),o.a.createElement("div",{className:e.infoRow},o.a.createElement(f.a,{className:e.infoLabel},"Filas:"),o.a.createElement(f.a,{className:e.infoValue},a.queues&&a.queues.length>0?a.queues.map(e=>e.name).join(", "):"Nenhuma fila")),o.a.createElement("div",{className:e.infoRow},o.a.createElement(f.a,{className:e.infoLabel},"Conex\xe3o:"),o.a.createElement(f.a,{className:e.infoValue},a.whatsapp&&a.whatsapp.name?a.whatsapp.name:"Sem conex\xe3o")),o.a.createElement("div",{className:e.infoRow},o.a.createElement(f.a,{className:e.infoLabel},"Tickets sem fila:"),o.a.createElement(f.a,{className:e.infoValue},"enabled"===a.allTicket?"Permitido":"N\xe3o permitido"))),o.a.createElement("div",{className:e.cardActions},o.a.createElement(Sa.a,{title:"Editar",arrow:!0,placement:"top"},o.a.createElement(J.a,{size:"small",className:`${e.actionButton} ${e.editButton}`,onClick:()=>(e=>{d(e),b(!0)})(a)},o.a.createElement(De.a,{size:18}))),o.a.createElement(Sa.a,{title:"Excluir",arrow:!0,placement:"top"},o.a.createElement(J.a,{size:"small",className:`${e.actionButton} ${e.deleteButton}`,onClick:()=>{h(!0),u(a)}},o.a.createElement(Jn.a,{size:18})))))))):o.a.createElement("div",{className:e.noUsersContainer},o.a.createElement(Te.a,{className:e.noUsersIcon}),o.a.createElement(f.a,{className:e.noUsersText},x?"Nenhum usu\xe1rio encontrado com esse termo.":"Nenhum usu\xe1rio cadastrado. Clique no bot\xe3o abaixo para adicionar."))))},Vd=t(695),Gd=t.n(Vd),_d=t(694),Kd=t.n(_d);const Qd=Object(Y.a)(e=>({root:{display:"flex",flexWrap:"wrap"},dialog:{"& .MuiDialog-paper":{borderRadius:12}},dialogTitle:{background:"linear-gradient(90deg, #5D3FD3 0%, #6151FF 100%)",color:"white",padding:e.spacing(3),"& h2":{fontSize:"1.5rem",fontWeight:600}},dialogContent:{padding:e.spacing(3)},dialogActions:{padding:e.spacing(2,3)},textField:{marginBottom:e.spacing(2),"& .MuiOutlinedInput-root":{borderRadius:8}},btnWrapper:{position:"relative"},buttonProgress:{color:Ie.a[500],position:"absolute",top:"50%",left:"50%",marginTop:-12,marginLeft:-12},formControl:{width:"100%","& .MuiOutlinedInput-root":{borderRadius:8},marginBottom:e.spacing(2)},saveButton:{backgroundColor:"#5D3FD3",color:"white","&:hover":{backgroundColor:"#4b32a8"},borderRadius:8,padding:"8px 24px",fontWeight:600},cancelButton:{color:"#5D3FD3",borderColor:"#5D3FD3","&:hover":{borderColor:"#4b32a8",backgroundColor:"rgba(93, 63, 211, 0.04)"},borderRadius:8,padding:"8px 24px",fontWeight:600},attachButton:{color:"#5D3FD3",borderColor:"#5D3FD3","&:hover":{borderColor:"#4b32a8",backgroundColor:"rgba(93, 63, 211, 0.04)"},borderRadius:8,padding:"8px 16px",marginRight:e.spacing(2)},sectionTitle:{color:"#5D3FD3",fontWeight:600,fontSize:"1rem",marginBottom:e.spacing(2),marginTop:e.spacing(2),position:"relative",display:"inline-block","&::after":{content:'""',position:"absolute",width:"30%",height:2,bottom:-4,left:0,backgroundColor:"#5D3FD3",borderRadius:2}},infoPanel:{backgroundColor:"rgba(93, 63, 211, 0.05)",padding:e.spacing(2),borderRadius:8,marginBottom:e.spacing(3)},attachmentDisplay:{display:"flex",alignItems:"center",padding:e.spacing(1),marginTop:e.spacing(1),backgroundColor:"rgba(0, 0, 0, 0.04)",borderRadius:8,"& .MuiButton-root":{textTransform:"none"}},formSection:{marginBottom:e.spacing(3)},helpText:{fontSize:"0.75rem",color:"rgba(0, 0, 0, 0.6)",marginTop:-e.spacing(1.5),marginBottom:e.spacing(2)}})),Yd=Oe.b().shape({title:Oe.d().required("Obrigat\xf3rio"),text:Oe.d().required("Obrigat\xf3rio")});var Xd=e=>{let{open:a,onClose:t,announcementId:r,reload:i}=e;const l=Qd(),s={title:"",text:"",priority:3,status:!0},[c,d]=Object(n.useState)(!1),[m,u]=Object(n.useState)(s),[p,E]=Object(n.useState)(null),h=Object(n.useRef)(null);Object(n.useEffect)(()=>{try{(async()=>{if(!r)return;const{data:e}=await B.get("/announcements/"+r);u(a=>({...a,...e}))})()}catch(e){y.toast.error(e.message)}},[r,a]);const x=()=>{u(s),E(null),t()};return o.a.createElement("div",{className:l.root},o.a.createElement(Pt,{title:z.a.t("announcements.confirmationModal.deleteTitle"),open:c,onClose:()=>d(!1),onConfirm:async()=>{p&&(E(null),h.current.value=null),m.mediaPath&&(await B.delete(`/announcements/${m.id}/media-upload`),u(e=>({...e,mediaPath:null})),y.toast.success(z.a.t("announcements.toasts.deleted")),"function"===typeof i&&i())}},z.a.t("announcements.confirmationModal.deleteMessage")),o.a.createElement(xe.a,{open:a,onClose:x,maxWidth:"sm",fullWidth:!0,scroll:"paper",className:l.dialog},o.a.createElement(ye.a,{className:l.dialogTitle},r?""+z.a.t("announcements.dialog.edit"):""+z.a.t("announcements.dialog.add")),o.a.createElement("div",{style:{display:"none"}},o.a.createElement("input",{type:"file",accept:".png,.jpg,.jpeg",ref:h,onChange:e=>(e=>{const a=Object(k.head)(e.target.files);a&&E(a)})(e)})),o.a.createElement(Ae.e,{initialValues:m,enableReinitialize:!0,validationSchema:Yd,onSubmit:(e,a)=>{setTimeout(()=>{(async e=>{const a={...e};try{if(r){if(await B.put("/announcements/"+r,a),null!=p){const e=new FormData;e.append("file",p),await B.post(`/announcements/${r}/media-upload`,e)}y.toast.success(z.a.t("announcements.toasts.success"))}else{const{data:e}=await B.post("/announcements",a);if(null!=p){const a=new FormData;a.append("file",p),await B.post(`/announcements/${e.id}/media-upload`,a)}y.toast.success(z.a.t("announcements.toasts.success"))}"function"===typeof i&&i(),x()}catch(t){y.toast.error(t.message)}})(e),a.setSubmitting(!1)},400)}},e=>{let{touched:a,errors:t,isSubmitting:n,values:i}=e;return o.a.createElement(Ae.d,null,o.a.createElement(ve.a,{className:l.dialogContent},o.a.createElement(wa.a,{className:l.infoPanel,elevation:0},o.a.createElement(f.a,{variant:"body2"},o.a.createElement("span",null,"\u2139\ufe0f")," Crie e gerencie an\xfancios para manter sua equipe e clientes informados sobre atualiza\xe7\xf5es importantes.")),o.a.createElement("div",{className:l.formSection},o.a.createElement(f.a,{className:l.sectionTitle},"Informa\xe7\xf5es do An\xfancio"),o.a.createElement(_t.a,{container:!0,spacing:2},o.a.createElement(_t.a,{item:!0,xs:12},o.a.createElement(Ae.b,{as:Ce.a,label:z.a.t("announcements.dialog.form.title"),name:"title",error:a.title&&Boolean(t.title),helperText:a.title&&t.title,variant:"outlined",fullWidth:!0,className:l.textField,InputProps:{startAdornment:o.a.createElement(Do.a,{position:"start"},o.a.createElement(Ca.a,{style:{color:"#5D3FD3"}}))}})),o.a.createElement(_t.a,{item:!0,xs:12},o.a.createElement(Ae.b,{as:Ce.a,label:z.a.t("announcements.dialog.form.text"),name:"text",error:a.text&&Boolean(t.text),helperText:a.text&&t.text,variant:"outlined",margin:"dense",multiline:!0,rows:7,fullWidth:!0,className:l.textField})),o.a.createElement(_t.a,{item:!0,xs:12,md:6},o.a.createElement(ke.a,{variant:"outlined",className:l.formControl},o.a.createElement(Se.a,{id:"status-selection-label"},z.a.t("announcements.dialog.form.status")),o.a.createElement(Ae.b,{as:Ne.a,label:z.a.t("announcements.dialog.form.status"),labelId:"status-selection-label",id:"status",name:"status",error:a.status&&Boolean(t.status),InputProps:{startAdornment:o.a.createElement(Do.a,{position:"start"},o.a.createElement(Kd.a,{style:{color:"#5D3FD3"}}))}},o.a.createElement(oe.a,{value:!0},"Ativo"),o.a.createElement(oe.a,{value:!1},"Inativo")))),o.a.createElement(_t.a,{item:!0,xs:12,md:6},o.a.createElement(ke.a,{variant:"outlined",className:l.formControl},o.a.createElement(Se.a,{id:"priority-selection-label"},z.a.t("announcements.dialog.form.priority")),o.a.createElement(Ae.b,{as:Ne.a,label:z.a.t("announcements.dialog.form.priority"),labelId:"priority-selection-label",id:"priority",name:"priority",error:a.priority&&Boolean(t.priority),InputProps:{startAdornment:o.a.createElement(Do.a,{position:"start"},o.a.createElement(Gd.a,{style:{color:"#5D3FD3"}}))}},o.a.createElement(oe.a,{value:1},"Alta"),o.a.createElement(oe.a,{value:2},"M\xe9dia"),o.a.createElement(oe.a,{value:3},"Baixa")))),(m.mediaPath||p)&&o.a.createElement(_t.a,{item:!0,xs:12},o.a.createElement(g.a,{className:l.attachmentDisplay},o.a.createElement(b.a,{startIcon:o.a.createElement(Ec.a,null)},p?p.name:m.mediaName),o.a.createElement(J.a,{onClick:()=>d(!0),color:"secondary"},o.a.createElement(an.a,null))))))),o.a.createElement(we.a,{className:l.dialogActions},!p&&!m.mediaPath&&o.a.createElement(b.a,{color:"primary",onClick:()=>h.current.click(),disabled:n,variant:"outlined",className:l.attachButton,startIcon:o.a.createElement(Ec.a,null)},z.a.t("announcements.dialog.buttons.attach")),o.a.createElement(b.a,{onClick:x,color:"secondary",disabled:n,variant:"outlined",className:l.cancelButton},z.a.t("announcements.dialog.buttons.cancel")),o.a.createElement(b.a,{type:"submit",color:"primary",disabled:n,variant:"contained",className:`${l.btnWrapper} ${l.saveButton}`},r?""+z.a.t("announcements.dialog.buttons.edit"):""+z.a.t("announcements.dialog.buttons.add"),n&&o.a.createElement(be.a,{size:24,className:l.buttonProgress}))))})))},$d=t(696),Jd=t.n($d);const Zd=(e,a)=>{if("LOAD_ANNOUNCEMENTS"===a.type){const t=a.payload,n=[];return Object(k.isArray)(t)&&t.forEach(a=>{const t=e.findIndex(e=>e.id===a.id);-1!==t?e[t]=a:n.push(a)}),[...e,...n]}if("UPDATE_ANNOUNCEMENTS"===a.type){const t=a.payload,n=e.findIndex(e=>e.id===t.id);return-1!==n?(e[n]=t,[...e]):[t,...e]}if("DELETE_ANNOUNCEMENT"===a.type){const t=a.payload,n=e.findIndex(e=>e.id===t);return-1!==n&&e.splice(n,1),[...e]}if("RESET"===a.type)return[]},em=Object(Y.a)(e=>({mainPaper:{flex:1,padding:e.spacing(3),overflowY:"scroll",background:"linear-gradient(135deg, #f7f8fa 60%, #e5e0fa 100%)",borderRadius:16,boxShadow:"0 4px 20px rgba(93,63,211,0.10)",...e.scrollbarStyles,marginTop:e.spacing(4)},container:{paddingTop:e.spacing(4),paddingBottom:e.spacing(4),paddingLeft:e.spacing(4),paddingRight:e.spacing(4),[e.breakpoints.down("sm")]:{paddingLeft:e.spacing(1),paddingRight:e.spacing(1)}},headerContainer:{display:"flex",alignItems:"center",gap:e.spacing(2),marginBottom:e.spacing(3),padding:e.spacing(2.5,3),background:"#fff",borderRadius:18,boxShadow:"0 4px 24px rgba(93,63,211,0.13)",minHeight:64},headerIcon:{color:"#5D3FD3",fontSize:32},headerTitle:{fontWeight:700,fontSize:24,color:"#5D3FD3",letterSpacing:.2},searchContainer:{flex:1,maxWidth:480,display:"flex",[e.breakpoints.down("sm")]:{width:"100%",maxWidth:"100%",marginBottom:e.spacing(1)}},searchInput:{flex:1,background:"#f7f8fa",borderRadius:12,marginRight:e.spacing(2),"& .MuiOutlinedInput-root":{borderRadius:12}},addButton:{borderRadius:12,fontWeight:600,minWidth:120,boxShadow:"0 2px 8px rgba(93,63,211,0.10)",textTransform:"none",fontSize:15,background:"#5D3FD3",color:"#fff",marginLeft:e.spacing(2),height:40,"&:hover":{background:"#4930A8"},[e.breakpoints.down("sm")]:{width:"100%",marginLeft:0,marginTop:e.spacing(1)}},table:{background:"#f7f8fa",borderRadius:12,marginTop:e.spacing(2)},tableHead:{background:"#e5e0fa"},tableCell:{fontWeight:600,color:"#5D3FD3",fontSize:15}}));var am=()=>{const e=em(),a=Object(S.useHistory)(),{user:t}=Object(n.useContext)(H),[r,i]=Object(n.useState)(!1),[l,s]=Object(n.useState)(1),[c,d]=Object(n.useState)(!1),[m,u]=Object(n.useState)(null),[p,g]=Object(n.useState)(null),[f,E]=Object(n.useState)(!1),[h,x]=Object(n.useState)(!1),[v,C]=Object(n.useState)(""),[k,N]=Object(n.useReducer)(Zd,[]),w=Object(n.useContext)(j);Object(n.useEffect)(()=>{!async function(){t.super||(y.toast.error("Esta empresa n\xe3o possui permiss\xe3o para acessar essa p\xe1gina! Estamos lhe redirecionando."),setTimeout(()=>{a.push("/")},1e3))}()},[]),Object(n.useEffect)(()=>{N({type:"RESET"}),s(1)},[v]),Object(n.useEffect)(()=>{i(!0);const e=setTimeout(()=>{I()},500);return()=>clearTimeout(e)},[v,l]),Object(n.useEffect)(()=>{const e=t.companyId,a=w.getSocket(e);return a.on("company-announcement",e=>{"update"!==e.action&&"create"!==e.action||N({type:"UPDATE_ANNOUNCEMENTS",payload:e.record}),"delete"===e.action&&N({type:"DELETE_ANNOUNCEMENT",payload:+e.id})}),()=>{a.disconnect()}},[w,t.companyId]);const I=async()=>{try{const{data:e}=await B.get("/announcements/",{params:{searchParam:v,pageNumber:l}});N({type:"LOAD_ANNOUNCEMENTS",payload:e.records}),d(e.hasMore),i(!1)}catch(e){y.toast.error(e.message)}};return o.a.createElement(Zn.a,{maxWidth:"xl",className:e.container},o.a.createElement(Pt,{title:p&&`${z.a.t("announcements.confirmationModal.deleteTitle")} ${p.name}?`,open:h,onClose:()=>x(!1),onConfirm:()=>(async e=>{try{e.mediaName&&await B.delete(`/announcements/${e.id}/media-upload`),await B.delete("/announcements/"+e.id),N({type:"DELETE_ANNOUNCEMENT",payload:e.id}),y.toast.success(z.a.t("announcements.toasts.deleted")),g(null),x(!1),s(1),I()}catch(a){y.toast.error(a.message)}})(p)},z.a.t("announcements.confirmationModal.deleteMessage")),o.a.createElement(Xd,{open:f,onClose:()=>{u(null),E(!1),I()},"aria-labelledby":"form-dialog-title",announcementId:m&&m.id,reload:I}),o.a.createElement(no,null,o.a.createElement("div",{className:e.headerContainer},o.a.createElement(Jd.a,{className:e.headerIcon}),o.a.createElement("span",{className:e.headerTitle},z.a.t("announcements.title")," (",k.length,")"),o.a.createElement("div",{className:e.searchContainer},o.a.createElement(Ce.a,{placeholder:z.a.t("announcements.searchPlaceholder"),type:"search",value:v,onChange:e=>{C(e.target.value.toLowerCase())},className:e.searchInput,variant:"outlined",size:"small",InputProps:{startAdornment:o.a.createElement(Do.a,{position:"start"},o.a.createElement(jo.a,{style:{color:"gray"}}))}}),o.a.createElement(b.a,{variant:"contained",color:"primary",className:e.addButton,onClick:()=>{u(null),E(!0)},startIcon:o.a.createElement(vr.a,null)},z.a.t("announcements.buttons.add"))))),o.a.createElement(wa.a,{className:e.mainPaper,variant:"outlined",onScroll:e=>{if(!c||r)return;const{scrollTop:a,scrollHeight:t,clientHeight:n}=e.currentTarget;t-(a+100)<n&&s(e=>e+1)}},o.a.createElement(Er.a,{size:"small",className:e.table},o.a.createElement(xr.a,{className:e.tableHead},o.a.createElement(Ko.a,null,o.a.createElement(_o.a,{align:"center",className:e.tableCell},z.a.t("announcements.table.title")),o.a.createElement(_o.a,{align:"center",className:e.tableCell},z.a.t("announcements.table.priority")),o.a.createElement(_o.a,{align:"center",className:e.tableCell},z.a.t("announcements.table.mediaName")),o.a.createElement(_o.a,{align:"center",className:e.tableCell},z.a.t("announcements.table.status")),o.a.createElement(_o.a,{align:"center",className:e.tableCell},z.a.t("announcements.table.actions")))),o.a.createElement(hr.a,null,o.a.createElement(o.a.Fragment,null,k.map(e=>{var a,t;return o.a.createElement(Ko.a,{key:e.id},o.a.createElement(_o.a,{align:"center"},e.title),o.a.createElement(_o.a,{align:"center"},1===(t=e.priority)?"Alta":2===t?"M\xe9dia":3===t?"Baixa":void 0),o.a.createElement(_o.a,{align:"center"},null!==(a=e.mediaName)&&void 0!==a?a:z.a.t("quickMessages.noAttachment")),o.a.createElement(_o.a,{align:"center"},e.status?z.a.t("announcements.active"):z.a.t("announcements.inactive")),o.a.createElement(_o.a,{align:"center"},o.a.createElement(J.a,{size:"small",onClick:()=>(e=>{u(e),E(!0)})(e)},o.a.createElement(Po.a,null)),o.a.createElement(J.a,{size:"small",onClick:a=>{x(!0),g(e)}},o.a.createElement(an.a,null))))}),r&&o.a.createElement(Yo,{columns:5}))))))},tm=t(1299),nm=t(698),om=t.n(nm),rm=t(699),im=t.n(rm),lm=t(701),sm=t.n(lm),cm=t(697),dm=t.n(cm),mm=t(700),um=t.n(mm);const pm=Object(Y.a)(e=>({mainPaper:{flex:1,padding:e.spacing(2),overflowY:"scroll",...e.scrollbarStyles},textRight:{textAlign:"right"},tabPanelsContainer:{padding:e.spacing(2)},container:{paddingTop:e.spacing(4),paddingBottom:e.spacing(4),paddingLeft:e.spacing(4),paddingRight:e.spacing(4),[e.breakpoints.down("sm")]:{paddingLeft:e.spacing(1),paddingRight:e.spacing(1)}}}));var gm=()=>{const e=pm(),{campaignId:a}=Object(S.useParams)(),[t,r]=Object(n.useState)({}),[i,l]=Object(n.useState)(0),[s,c]=Object(n.useState)(0),[d,m]=Object(n.useState)(0),[u,p]=Object(n.useState)(0),[g,b]=Object(n.useState)(0),[E,h]=Object(n.useState)(!1),x=Object(n.useRef)(!0),{datetimeToClient:y}=xa(),v=Object(n.useContext)(j);Object(n.useEffect)(()=>(x.current&&C(),()=>{x.current=!1}),[]),Object(n.useEffect)(()=>{if(x.current&&Object(k.has)(t,"shipping")){if(Object(k.has)(t,"contactList")){const e=Object(k.get)(t,"contactList").contacts.filter(e=>e.isWhatsappValid);l(e.length)}if(Object(k.has)(t,"shipping")){const e=Object(k.get)(t,"shipping"),a=e.filter(e=>!Object(k.isNull)(e.deliveredAt)),n=e.filter(e=>!Object(k.isNull)(e.confirmationRequestedAt)),o=e.filter(e=>!Object(k.isNull)(e.deliveredAt)&&!Object(k.isNull)(e.confirmationRequestedAt));c(a.length),m(n.length),p(o.length),c(a.length)}}},[t]),Object(n.useEffect)(()=>{b(s/i*100)},[s,i]),Object(n.useEffect)(()=>{const e=localStorage.getItem("companyId"),t=v.getSocket(e);return t.on(`company-${e}-campaign`,e=>{e.record.id===+a&&(r(e.record),"FINALIZADA"===e.record.status&&setTimeout(()=>{C()},5e3))}),()=>{t.disconnect()}},[a,v]);const C=async()=>{h(!0);const{data:e}=await B.get("/campaigns/"+a);r(e),h(!1)};return o.a.createElement(Zn.a,{maxWidth:"xl",className:e.container},o.a.createElement(no,null,o.a.createElement(_t.a,{style:{width:"99.6%"},container:!0},o.a.createElement(_t.a,{xs:12,item:!0},o.a.createElement(tl,null,"Relat\xf3rio da ",t.name||"Campanha")))),o.a.createElement(wa.a,{className:e.mainPaper,variant:"outlined"},o.a.createElement(f.a,{variant:"h6",component:"h2"},"Status: ",(e=>{switch(e){case"INATIVA":return"Inativa";case"PROGRAMADA":return"Programada";case"EM_ANDAMENTO":return"Em Andamento";case"CANCELADA":return"Cancelada";case"FINALIZADA":return"Finalizada";default:return e}})(t.status)," ",s," de ",i),o.a.createElement(_t.a,{spacing:2,container:!0},o.a.createElement(_t.a,{xs:12,item:!0},o.a.createElement(tm.a,{variant:"determinate",style:{height:15,borderRadius:3,margin:"20px 0"},value:g})),o.a.createElement(_t.a,{xs:12,md:4,item:!0},o.a.createElement(li,{icon:o.a.createElement(dm.a,{fontSize:"inherit"}),title:"Contatos V\xe1lidos",value:i,loading:E})),t.confirmation&&o.a.createElement(o.a.Fragment,null,o.a.createElement(_t.a,{xs:12,md:4,item:!0},o.a.createElement(li,{icon:o.a.createElement(om.a,{fontSize:"inherit"}),title:"Confirma\xe7\xf5es Solicitadas",value:d,loading:E})),o.a.createElement(_t.a,{xs:12,md:4,item:!0},o.a.createElement(li,{icon:o.a.createElement(im.a,{fontSize:"inherit"}),title:"Confirma\xe7\xf5es",value:u,loading:E}))),o.a.createElement(_t.a,{xs:12,md:4,item:!0},o.a.createElement(li,{icon:o.a.createElement(Rt.a,{fontSize:"inherit"}),title:"Entregues",value:s,loading:E})),t.whatsappId&&o.a.createElement(_t.a,{xs:12,md:4,item:!0},o.a.createElement(li,{icon:o.a.createElement(Mr.a,{fontSize:"inherit"}),title:"Conex\xe3o",value:t.whatsapp.name,loading:E})),t.contactListId&&o.a.createElement(_t.a,{xs:12,md:4,item:!0},o.a.createElement(li,{icon:o.a.createElement(um.a,{fontSize:"inherit"}),title:"Lista de Contatos",value:t.contactList.name,loading:E})),o.a.createElement(_t.a,{xs:12,md:4,item:!0},o.a.createElement(li,{icon:o.a.createElement(Qc.a,{fontSize:"inherit"}),title:"Agendamento",value:y(t.scheduledAt),loading:E})),o.a.createElement(_t.a,{xs:12,md:4,item:!0},o.a.createElement(li,{icon:o.a.createElement(sm.a,{fontSize:"inherit"}),title:"Conclus\xe3o",value:y(t.completedAt),loading:E})))))},fm=t(705),bm=t.n(fm),Em=t(702),hm=t.n(Em),xm=t(703),ym=t.n(xm),vm=t(704),Cm=t.n(vm);const km=Object(Y.a)(e=>({root:{display:"flex",flexWrap:"wrap",backgroundColor:"#fff"},dialogTitle:{background:"linear-gradient(135deg, #f7f8fa 60%, #e5e0fa 100%)",padding:e.spacing(3),borderBottom:"1px solid rgba(93,63,211,0.1)"},dialogContent:{padding:e.spacing(3),background:"#fff"},dialogActions:{padding:e.spacing(2,3),background:"#f8f7ff",borderTop:"1px solid rgba(93,63,211,0.1)"},textField:{marginRight:e.spacing(1),flex:1,"& .MuiOutlinedInput-root":{borderRadius:12,"&:hover fieldset":{borderColor:"#5D3FD3"}}},formControl:{"& .MuiOutlinedInput-root":{borderRadius:12,"&:hover fieldset":{borderColor:"#5D3FD3"}}},tabRoot:{backgroundColor:"#f8f7ff",borderRadius:"12px 12px 0 0",minHeight:48,"& .MuiTab-root":{minHeight:48,color:"#666","&.Mui-selected":{color:"#5D3FD3",fontWeight:600}},"& .MuiTabs-indicator":{backgroundColor:"#5D3FD3",height:3}},messageBox:{padding:e.spacing(3),background:"#f8f7ff",borderRadius:"0 0 12px 12px",marginTop:-1},btnWrapper:{position:"relative"},buttonProgress:{color:Ie.a[500],position:"absolute",top:"50%",left:"50%",marginTop:-12,marginLeft:-12},actionButton:{borderRadius:8,textTransform:"none",fontWeight:600,padding:"8px 24px"},attachButton:{display:"flex",alignItems:"center",gap:8,padding:e.spacing(1,2),borderRadius:8,background:"#f8f7ff",color:"#5D3FD3","&:hover":{background:"#e5e0fa"}},deleteButton:{color:"#ff4d4f","&:hover":{background:"rgba(255,77,79,0.1)"}}})),Sm=Oe.b().shape({name:Oe.d().min(2,"Too Short!").max(50,"Too Long!").required("Required")});var Nm=e=>{let{open:a,onClose:t,campaignId:r,initialValues:i,onSave:l,resetPagination:s}=e;const c=km(),d=Object(n.useRef)(!0),{user:m}=Object(n.useContext)(H),{companyId:u}=m,[p,E]=Object(n.useState)(null),h={name:"",message1:"",message2:"",message3:"",message4:"",message5:"",confirmationMessage1:"",confirmationMessage2:"",confirmationMessage3:"",confirmationMessage4:"",confirmationMessage5:"",status:"INATIVA",confirmation:!1,scheduledAt:"",whatsappId:"",contactListId:"",tagListId:"Nenhuma",companyId:u},[x,v]=Object(n.useState)(h),[C,S]=Object(n.useState)([]),[N,I]=Object(n.useState)([]),[A,T]=Object(n.useState)(0),[D,O]=Object(n.useState)(null),[j,R]=Object(n.useState)(!1),[F,M]=Object(n.useState)(!0),P=Object(n.useRef)(null),[W,L]=Object(n.useState)([]);Object(n.useEffect)(()=>()=>{d.current=!1},[]),Object(n.useEffect)(()=>{(async()=>{try{const{data:e}=await B.get("/files/",{params:{companyId:u}});E(e.files)}catch(e){y.toast.error(e.message)}})()},[]),Object(n.useEffect)(()=>{if(d.current){if(i&&v(e=>({...e,...i})),B.get("/contact-lists/list",{params:{companyId:u}}).then(e=>{let{data:a}=e;return I(a)}),B.get("/whatsapp",{params:{companyId:u,session:0}}).then(e=>{let{data:a}=e;return S(a)}),B.get("/tags",{params:{companyId:u}}).then(e=>{let{data:a}=e;const t=a.tags.map(e=>({id:e.id,name:e.name}));L(t)}).catch(e=>{console.error("Error retrieving tags:",e)}),!r)return;B.get("/campaigns/"+r).then(e=>{let{data:a}=e;v(e=>{let t=Object.assign({},e);return Object.entries(a).forEach(e=>{let[a,n]=e;t[a]="scheduledAt"===a&&""!==n&&null!==n?w()(n).format("YYYY-MM-DDTHH:mm"):null===n?"":n}),t})})}},[r,a,i,u]),Object(n.useEffect)(()=>{const e=w()(),a=w()(x.scheduledAt),t=!Number.isNaN(a.diff(e))&&a.diff(e,"hour")>1,n="INATIVA"===x.status||"PROGRAMADA"===x.status&&t;M(n)},[x.status,x.scheduledAt]);const q=()=>{t(),v(h)},U=e=>o.a.createElement(Ae.b,{as:Ce.a,id:e,name:e,fullWidth:!0,rows:5,label:z.a.t("campaigns.dialog.form."+e),placeholder:z.a.t("campaigns.dialog.form.messagePlaceholder"),multiline:!0,variant:"outlined",helperText:"Utilize vari\xe1veis como {nome}, {numero}, {email} ou defina vari\xe1veis personalziadas.",disabled:!F&&"CANCELADA"!==x.status}),V=e=>o.a.createElement(Ae.b,{as:Ce.a,id:e,name:e,fullWidth:!0,rows:5,label:z.a.t("campaigns.dialog.form."+e),placeholder:z.a.t("campaigns.dialog.form.messagePlaceholder"),multiline:!0,variant:"outlined",disabled:!F&&"CANCELADA"!==x.status});return o.a.createElement("div",{className:c.root},o.a.createElement(Pt,{title:z.a.t("campaigns.confirmationModal.deleteTitle"),open:j,onClose:()=>R(!1),onConfirm:async()=>{D&&(O(null),P.current.value=null),x.mediaPath&&(await B.delete(`/campaigns/${x.id}/media-upload`),v(e=>({...e,mediaPath:null,mediaName:null})),y.toast.success(z.a.t("campaigns.toasts.deleted")))}},z.a.t("campaigns.confirmationModal.deleteMessage")),o.a.createElement(xe.a,{open:a,onClose:q,fullWidth:!0,maxWidth:"md",scroll:"paper",PaperProps:{style:{borderRadius:16,boxShadow:"0 8px 32px rgba(93,63,211,0.1)"}}},o.a.createElement(ye.a,{className:c.dialogTitle},o.a.createElement(f.a,{variant:"h6",style:{color:"#5D3FD3",fontWeight:600}},F?r?""+z.a.t("campaigns.dialog.update"):""+z.a.t("campaigns.dialog.new"):""+z.a.t("campaigns.dialog.readonly"))),o.a.createElement("div",{style:{display:"none"}},o.a.createElement("input",{type:"file",ref:P,onChange:e=>(e=>{const a=Object(k.head)(e.target.files);a&&O(a)})(e)})),o.a.createElement(Ae.e,{initialValues:x,enableReinitialize:!0,validationSchema:Sm,onSubmit:(e,a)=>{setTimeout(()=>{(async e=>{try{const a={};if(Object.entries(e).forEach(e=>{let[t,n]=e;a[t]="scheduledAt"===t&&""!==n&&null!==n?w()(n).format("YYYY-MM-DD HH:mm:ss"):""===n?null:n}),r){if(await B.put("/campaigns/"+r,a),null!=D){const e=new FormData;e.append("file",D),await B.post(`/campaigns/${r}/media-upload`,e)}q()}else{const{data:e}=await B.post("/campaigns",a);if(null!=D){const a=new FormData;a.append("file",D),await B.post(`/campaigns/${e.id}/media-upload`,a)}l&&l(e),q()}y.toast.success(z.a.t("campaigns.toasts.success"))}catch(a){console.log(a),y.toast.error(a.message)}})(e),a.setSubmitting(!1)},400)}},e=>{let{values:a,errors:t,touched:n,isSubmitting:i}=e;return o.a.createElement(Ae.d,null,o.a.createElement(ve.a,{className:c.dialogContent},o.a.createElement(_t.a,{spacing:3,container:!0},o.a.createElement(_t.a,{xs:12,item:!0},o.a.createElement(Ae.b,{as:Ce.a,label:z.a.t("campaigns.dialog.form.name"),name:"name",error:n.name&&Boolean(t.name),helperText:n.name&&t.name,variant:"outlined",margin:"dense",fullWidth:!0,className:c.textField,disabled:!F})),o.a.createElement(_t.a,{xs:12,md:4,item:!0},o.a.createElement(ke.a,{variant:"outlined",margin:"dense",fullWidth:!0,className:c.formControl},o.a.createElement(Se.a,{id:"contactList-selection-label"},z.a.t("campaigns.dialog.form.contactList")),o.a.createElement(Ae.b,{as:Ne.a,label:z.a.t("campaigns.dialog.form.contactList"),placeholder:z.a.t("campaigns.dialog.form.contactList"),labelId:"contactList-selection-label",id:"contactListId",name:"contactListId",error:n.contactListId&&Boolean(t.contactListId),disabled:!F},o.a.createElement(oe.a,{value:""},"Nenhuma"),N&&N.map(e=>o.a.createElement(oe.a,{key:e.id,value:e.id},e.name))))),o.a.createElement(_t.a,{xs:12,md:4,item:!0},o.a.createElement(ke.a,{variant:"outlined",margin:"dense",fullWidth:!0,className:c.formControl},o.a.createElement(Se.a,{id:"tagList-selection-label"},z.a.t("campaigns.dialog.form.tagList")),o.a.createElement(Ae.b,{as:Ne.a,label:z.a.t("campaigns.dialog.form.tagList"),placeholder:z.a.t("campaigns.dialog.form.tagList"),labelId:"tagList-selection-label",id:"tagListId",name:"tagListId",error:n.tagListId&&Boolean(t.tagListId),disabled:!F},o.a.createElement(oe.a,{value:""},"Nenhuma"),Array.isArray(W)&&W.map(e=>o.a.createElement(oe.a,{key:e.id,value:e.id},e.name))))),o.a.createElement(_t.a,{xs:12,md:4,item:!0},o.a.createElement(ke.a,{variant:"outlined",margin:"dense",fullWidth:!0,className:c.formControl},o.a.createElement(Se.a,{id:"whatsapp-selection-label"},z.a.t("campaigns.dialog.form.whatsapp")),o.a.createElement(Ae.b,{as:Ne.a,label:z.a.t("campaigns.dialog.form.whatsapp"),placeholder:z.a.t("campaigns.dialog.form.whatsapp"),labelId:"whatsapp-selection-label",id:"whatsappId",name:"whatsappId",error:n.whatsappId&&Boolean(t.whatsappId),disabled:!F},o.a.createElement(oe.a,{value:""},"Nenhuma"),C&&C.map(e=>o.a.createElement(oe.a,{key:e.id,value:e.id},e.name))))),o.a.createElement(_t.a,{xs:12,md:4,item:!0},o.a.createElement(Ae.b,{as:Ce.a,label:z.a.t("campaigns.dialog.form.scheduledAt"),name:"scheduledAt",error:n.scheduledAt&&Boolean(t.scheduledAt),helperText:n.scheduledAt&&t.scheduledAt,variant:"outlined",margin:"dense",type:"datetime-local",InputLabelProps:{shrink:!0},fullWidth:!0,className:c.textField,disabled:!F})),o.a.createElement(_t.a,{xs:12,md:4,item:!0},o.a.createElement(ke.a,{variant:"outlined",margin:"dense",className:c.FormControl,fullWidth:!0},o.a.createElement(Se.a,{id:"fileListId-selection-label"},z.a.t("campaigns.dialog.form.fileList")),o.a.createElement(Ae.b,{as:Ne.a,label:z.a.t("campaigns.dialog.form.fileList"),name:"fileListId",id:"fileListId",placeholder:z.a.t("campaigns.dialog.form.fileList"),labelId:"fileListId-selection-label",value:a.fileListId||""},o.a.createElement(oe.a,{value:""},"Nenhum"),p.map(e=>o.a.createElement(oe.a,{key:e.id,value:e.id},e.name))))),o.a.createElement(_t.a,{xs:12,item:!0},o.a.createElement(Il.a,{value:A,indicatorColor:"primary",textColor:"primary",className:c.tabRoot,onChange:(e,a)=>T(a),variant:"fullWidth",centered:!0},o.a.createElement(Al.a,{label:"Msg. 1"}),o.a.createElement(Al.a,{label:"Msg. 2"}),o.a.createElement(Al.a,{label:"Msg. 3"}),o.a.createElement(Al.a,{label:"Msg. 4"}),o.a.createElement(Al.a,{label:"Msg. 5"})),o.a.createElement(g.a,{className:c.messageBox},0===A&&o.a.createElement(o.a.Fragment,null,a.confirmation?o.a.createElement(_t.a,{spacing:2,container:!0},o.a.createElement(_t.a,{xs:12,md:8,item:!0},o.a.createElement(o.a.Fragment,null,U("message1"))),o.a.createElement(_t.a,{xs:12,md:4,item:!0},o.a.createElement(o.a.Fragment,null,V("confirmationMessage1")))):o.a.createElement(o.a.Fragment,null,U("message1"))),1===A&&o.a.createElement(o.a.Fragment,null,a.confirmation?o.a.createElement(_t.a,{spacing:2,container:!0},o.a.createElement(_t.a,{xs:12,md:8,item:!0},o.a.createElement(o.a.Fragment,null,U("message2"))),o.a.createElement(_t.a,{xs:12,md:4,item:!0},o.a.createElement(o.a.Fragment,null,V("confirmationMessage2")))):o.a.createElement(o.a.Fragment,null,U("message2"))),2===A&&o.a.createElement(o.a.Fragment,null,a.confirmation?o.a.createElement(_t.a,{spacing:2,container:!0},o.a.createElement(_t.a,{xs:12,md:8,item:!0},o.a.createElement(o.a.Fragment,null,U("message3"))),o.a.createElement(_t.a,{xs:12,md:4,item:!0},o.a.createElement(o.a.Fragment,null,V("confirmationMessage3")))):o.a.createElement(o.a.Fragment,null,U("message3"))),3===A&&o.a.createElement(o.a.Fragment,null,a.confirmation?o.a.createElement(_t.a,{spacing:2,container:!0},o.a.createElement(_t.a,{xs:12,md:8,item:!0},o.a.createElement(o.a.Fragment,null,U("message4"))),o.a.createElement(_t.a,{xs:12,md:4,item:!0},o.a.createElement(o.a.Fragment,null,V("confirmationMessage4")))):o.a.createElement(o.a.Fragment,null,U("message4"))),4===A&&o.a.createElement(o.a.Fragment,null,a.confirmation?o.a.createElement(_t.a,{spacing:2,container:!0},o.a.createElement(_t.a,{xs:12,md:8,item:!0},o.a.createElement(o.a.Fragment,null,U("message5"))),o.a.createElement(_t.a,{xs:12,md:4,item:!0},o.a.createElement(o.a.Fragment,null,V("confirmationMessage5")))):o.a.createElement(o.a.Fragment,null,U("message5"))))),(x.mediaPath||D)&&o.a.createElement(_t.a,{xs:12,item:!0},o.a.createElement(g.a,{display:"flex",alignItems:"center",gap:2},o.a.createElement(b.a,{startIcon:o.a.createElement(Ec.a,null),className:c.attachButton},null!=D?D.name:x.mediaName),F&&o.a.createElement(J.a,{onClick:()=>R(!0),className:c.deleteButton},o.a.createElement(an.a,null)))))),o.a.createElement(we.a,{className:c.dialogActions},"CANCELADA"===x.status&&o.a.createElement(b.a,{color:"primary",onClick:()=>(async()=>{try{await B.post(`/campaigns/${x.id}/restart`),y.toast.success(z.a.t("campaigns.toasts.restart")),v(e=>({...e,status:"EM_ANDAMENTO"})),s()}catch(e){y.toast.error(e.message)}})(),variant:"outlined",className:c.actionButton},z.a.t("campaigns.dialog.buttons.restart")),"EM_ANDAMENTO"===x.status&&o.a.createElement(b.a,{color:"primary",onClick:()=>(async()=>{try{await B.post(`/campaigns/${x.id}/cancel`),y.toast.success(z.a.t("campaigns.toasts.cancel")),v(e=>({...e,status:"CANCELADA"})),s()}catch(e){y.toast.error(e.message)}})(),variant:"outlined",className:c.actionButton},z.a.t("campaigns.dialog.buttons.cancel")),!D&&!x.mediaPath&&F&&o.a.createElement(b.a,{color:"primary",onClick:()=>P.current.click(),disabled:i,variant:"outlined",className:c.actionButton},z.a.t("campaigns.dialog.buttons.attach")),o.a.createElement(b.a,{onClick:q,color:"secondary",disabled:i,variant:"outlined",className:c.actionButton},z.a.t("campaigns.dialog.buttons.close")),(F||"CANCELADA"===x.status)&&o.a.createElement(b.a,{type:"submit",color:"primary",disabled:i,variant:"contained",className:`${c.actionButton} ${c.btnWrapper}`},r?""+z.a.t("campaigns.dialog.buttons.edit"):""+z.a.t("campaigns.dialog.buttons.add"),i&&o.a.createElement(be.a,{size:24,className:c.buttonProgress}))))})))};const wm=(e,a)=>{if("LOAD_CAMPAIGNS"===a.type){const t=a.payload,n=[];return Object(k.isArray)(t)&&t.forEach(a=>{const t=e.findIndex(e=>e.id===a.id);-1!==t?e[t]=a:n.push(a)}),[...e,...n]}if("UPDATE_CAMPAIGNS"===a.type){const t=a.payload,n=e.findIndex(e=>e.id===t.id);return-1!==n?(e[n]=t,[...e]):[t,...e]}if("DELETE_CAMPAIGN"===a.type){const t=a.payload,n=e.findIndex(e=>e.id===t);return-1!==n&&e.splice(n,1),[...e]}if("RESET"===a.type)return[]},Im=Object(Y.a)(e=>({mainPaper:{flex:1,padding:e.spacing(3),overflowY:"scroll",background:"linear-gradient(135deg, #f7f8fa 60%, #e5e0fa 100%)",borderRadius:16,boxShadow:"0 4px 20px rgba(93,63,211,0.10)",...e.scrollbarStyles},container:{paddingTop:e.spacing(4),paddingBottom:e.spacing(4),paddingLeft:e.spacing(4),paddingRight:e.spacing(4),[e.breakpoints.down("sm")]:{paddingLeft:e.spacing(2),paddingRight:e.spacing(2)}},headerContainer:{display:"flex",alignItems:"center",gap:e.spacing(2),marginBottom:e.spacing(3),padding:e.spacing(2.5,3),background:"#fff",borderRadius:18,boxShadow:"0 4px 24px rgba(93,63,211,0.13)",minHeight:64},headerIcon:{color:"#5D3FD3",fontSize:32},headerTitle:{fontWeight:700,fontSize:24,color:"#5D3FD3",letterSpacing:.2},searchField:{minWidth:220,maxWidth:320,background:"#f7f8fa",borderRadius:12,marginRight:e.spacing(2),"& .MuiOutlinedInput-root":{borderRadius:12,background:"#fff","&:hover fieldset":{borderColor:"#5D3FD3"}}},addButton:{borderRadius:12,textTransform:"none",fontWeight:600,minWidth:120,boxShadow:"0 4px 12px rgba(93,63,211,0.15)",fontSize:15,background:"#5D3FD3",color:"#fff","&:hover":{background:"#4930A8"},padding:"10px 24px"},campaignCard:{background:"#fff",borderRadius:16,boxShadow:"0 4px 20px rgba(93,63,211,0.10)",padding:e.spacing(3),margin:"0 auto",transition:"all 0.3s ease",position:"relative",display:"flex",flexDirection:"column",height:"100%",minHeight:220,"&:hover":{transform:"translateY(-4px)",boxShadow:"0 8px 30px rgba(93,63,211,0.15)"}},cardHeader:{display:"flex",alignItems:"center",gap:12,marginBottom:e.spacing(2),justifyContent:"space-between"},cardTitle:{fontWeight:700,fontSize:20,color:"#5D3FD3",display:"flex",alignItems:"center",gap:8},cardStatus:{fontWeight:600,fontSize:14,color:"#666",background:"#f8f7ff",borderRadius:10,padding:"6px 16px",marginLeft:8},infoList:{display:"flex",flexDirection:"column",gap:12,marginBottom:e.spacing(2)},infoItem:{display:"flex",alignItems:"center",gap:10,color:"#666",fontSize:14,background:"#f8f7ff",borderRadius:10,padding:"8px 16px","& b":{color:"#5D3FD3",fontWeight:600}},actions:{display:"flex",gap:8,marginTop:"auto",justifyContent:"flex-end",paddingTop:e.spacing(2),borderTop:"1px solid rgba(93,63,211,0.1)"},actionButton:{color:"#666","&:hover":{background:"rgba(93,63,211,0.1)",color:"#5D3FD3"}},pauseButton:{color:"#ff9800","&:hover":{background:"rgba(255,152,0,0.1)"}},playButton:{color:"#4caf50","&:hover":{background:"rgba(76,175,80,0.1)"}},deleteButton:{color:"#ff4d4f","&:hover":{background:"rgba(255,77,79,0.1)"}}}));var Am=()=>{const e=Im(),a=Object(S.useHistory)(),[t,r]=Object(n.useState)(!1),[i,l]=Object(n.useState)(1),[s,c]=Object(n.useState)(!1),[d,m]=Object(n.useState)(null),[u,p]=Object(n.useState)(null),[g,E]=Object(n.useState)(!1),[h,x]=Object(n.useState)(!1),[v,C]=Object(n.useState)(""),[k,N]=Object(n.useReducer)(wm,[]),{datetimeToClient:w}=xa(),I=Object(n.useContext)(j);Object(n.useEffect)(()=>{N({type:"RESET"}),l(1)},[v]),Object(n.useEffect)(()=>{r(!0);const e=setTimeout(()=>{A()},500);return()=>clearTimeout(e)},[v,i]),Object(n.useEffect)(()=>{const e=localStorage.getItem("companyId"),a=I.getSocket(e);return a.on(`company-${e}-campaign`,e=>{"update"!==e.action&&"create"!==e.action||N({type:"UPDATE_CAMPAIGNS",payload:e.record}),"delete"===e.action&&N({type:"DELETE_CAMPAIGN",payload:+e.id})}),()=>{a.disconnect()}},[I]);const A=async()=>{try{const{data:e}=await B.get("/campaigns/",{params:{searchParam:v,pageNumber:i}});N({type:"LOAD_CAMPAIGNS",payload:e.records}),c(e.hasMore),r(!1)}catch(e){y.toast.error(e.message)}};return o.a.createElement(Zn.a,{maxWidth:"xl",className:e.container},o.a.createElement(Pt,{title:u&&`${z.a.t("campaigns.confirmationModal.deleteTitle")} ${u.name}?`,open:h,onClose:x,onConfirm:()=>(async e=>{try{await B.delete("/campaigns/"+e),y.toast.success(z.a.t("campaigns.toasts.deleted"))}catch(a){y.toast.error(a.message)}p(null),C(""),l(1)})(u.id)},z.a.t("campaigns.confirmationModal.deleteMessage")),o.a.createElement(Nm,{resetPagination:()=>{l(1),A()},open:g,onClose:()=>{m(null),E(!1)},"aria-labelledby":"form-dialog-title",campaignId:d&&d.id}),o.a.createElement(no,null,o.a.createElement("div",{className:e.headerContainer},o.a.createElement(hm.a,{className:e.headerIcon}),o.a.createElement("span",{className:e.headerTitle},z.a.t("campaigns.title")),o.a.createElement(Ce.a,{placeholder:z.a.t("campaigns.searchPlaceholder"),type:"search",value:v,onChange:e=>{C(e.target.value.toLowerCase())},className:e.searchField,InputProps:{startAdornment:o.a.createElement(Do.a,{position:"start"},o.a.createElement(jo.a,{style:{color:"#5D3FD3"}}))}}),o.a.createElement(b.a,{variant:"contained",onClick:()=>{m(null),E(!0)},color:"primary",className:e.addButton},z.a.t("campaigns.buttons.add")))),o.a.createElement(wa.a,{className:e.mainPaper,variant:"outlined",onScroll:e=>{if(!s||t)return;const{scrollTop:a,scrollHeight:n,clientHeight:o}=e.currentTarget;n-(a+100)<o&&l(e=>e+1)}},o.a.createElement(_t.a,{container:!0,spacing:3},k.map(t=>o.a.createElement(_t.a,{item:!0,xs:12,sm:6,md:4,key:t.id},o.a.createElement(wa.a,{className:e.campaignCard,elevation:0},o.a.createElement("div",{className:e.cardHeader},o.a.createElement(f.a,{className:e.cardTitle},t.name),o.a.createElement("span",{className:e.cardStatus},(e=>{switch(e){case"INATIVA":return"Inativa";case"PROGRAMADA":return"Programada";case"EM_ANDAMENTO":return"Em Andamento";case"CANCELADA":return"Cancelada";case"FINALIZADA":return"Finalizada";default:return e}})(t.status))),o.a.createElement("div",{className:e.infoList},o.a.createElement("div",{className:e.infoItem},o.a.createElement("b",null,z.a.t("campaigns.table.contactList"),":"),"\xa0",t.contactListId?t.contactList.name:"N\xe3o definida"),o.a.createElement("div",{className:e.infoItem},o.a.createElement("b",null,z.a.t("campaigns.table.whatsapp"),":"),"\xa0",t.whatsappId?t.whatsapp.name:"N\xe3o definido"),o.a.createElement("div",{className:e.infoItem},o.a.createElement("b",null,z.a.t("campaigns.table.scheduledAt"),":"),"\xa0",t.scheduledAt?w(t.scheduledAt):"Sem agendamento"),o.a.createElement("div",{className:e.infoItem},o.a.createElement("b",null,z.a.t("campaigns.table.completedAt"),":"),"\xa0",t.completedAt?w(t.completedAt):"N\xe3o conclu\xedda")),o.a.createElement("div",{className:e.actions},"EM_ANDAMENTO"===t.status&&o.a.createElement(J.a,{onClick:()=>(async e=>{try{await B.post(`/campaigns/${e.id}/cancel`),y.toast.success(z.a.t("campaigns.toasts.cancel")),l(1),A()}catch(a){y.toast.error(a.message)}})(t),title:"Parar Campanha",size:"small",className:e.pauseButton},o.a.createElement(ym.a,null)),"CANCELADA"===t.status&&o.a.createElement(J.a,{onClick:()=>(async e=>{try{await B.post(`/campaigns/${e.id}/restart`),y.toast.success(z.a.t("campaigns.toasts.restart")),l(1),A()}catch(a){y.toast.error(a.message)}})(t),title:"Reiniciar Campanha",size:"small",className:e.playButton},o.a.createElement(Cm.a,null)),o.a.createElement(J.a,{onClick:()=>a.push("/campaign-report/"+t.id),size:"small",className:e.actionButton},o.a.createElement(bm.a,null)),o.a.createElement(J.a,{size:"small",onClick:()=>(e=>{m(e),E(!0)})(t),className:e.actionButton},o.a.createElement(Po.a,null)),o.a.createElement(J.a,{size:"small",onClick:e=>{x(!0),p(t)},className:e.deleteButton},o.a.createElement(an.a,null)))))),t&&o.a.createElement(_t.a,{item:!0,xs:12},o.a.createElement("table",null,o.a.createElement("tbody",null,o.a.createElement(Yo,{columns:8})))))))},Tm=t(296),Dm=t.n(Tm);const Om=Object(Y.a)(e=>({mainPaper:{flex:1,padding:e.spacing(3),overflowY:"scroll",background:"linear-gradient(135deg, #f7f8fa 60%, #e5e0fa 100%)",borderRadius:16,boxShadow:"0 4px 20px rgba(93,63,211,0.10)",...e.scrollbarStyles},textRight:{textAlign:"right"},tabPanelsContainer:{padding:e.spacing(2)},container:{paddingTop:e.spacing(4),paddingBottom:e.spacing(4),paddingLeft:e.spacing(4),paddingRight:e.spacing(4),[e.breakpoints.down("sm")]:{paddingLeft:e.spacing(1),paddingRight:e.spacing(1)}},headerContainer:{display:"flex",alignItems:"center",gap:e.spacing(2),marginBottom:e.spacing(3),padding:e.spacing(2.5,3),background:"#fff",borderRadius:18,boxShadow:"0 4px 24px rgba(93,63,211,0.13)",minHeight:64},headerIcon:{color:"#5D3FD3",fontSize:32},headerTitle:{fontWeight:700,fontSize:24,color:"#5D3FD3",letterSpacing:.2},cardSection:{background:"#fff",borderRadius:16,boxShadow:"0 2px 12px rgba(93,63,211,0.08)",padding:e.spacing(3),marginBottom:e.spacing(3)},formControl:{borderRadius:12,background:"#f7f8fa",marginBottom:e.spacing(2)},input:{borderRadius:12,background:"#f7f8fa"},button:{borderRadius:12,fontWeight:600,minWidth:120,boxShadow:"0 2px 8px rgba(93,63,211,0.10)",textTransform:"none",fontSize:15,marginRight:e.spacing(2)},addButton:{borderRadius:12,fontWeight:600,minWidth:120,boxShadow:"0 2px 8px rgba(93,63,211,0.10)",textTransform:"none",fontSize:15,background:"#5D3FD3",color:"#fff",marginRight:e.spacing(2),"&:hover":{background:"#4930A8"}},table:{background:"#f7f8fa",borderRadius:12,marginTop:e.spacing(2)},tableHead:{background:"#e5e0fa"},tableCell:{fontWeight:600,color:"#5D3FD3",fontSize:15}})),jm={messageInterval:20,longerIntervalAfter:20,greaterInterval:60,variables:[]};var Rm=()=>{const e=Om(),[a,t]=Object(n.useState)(jm),[r,i]=Object(n.useState)(!1),[l,s]=Object(n.useState)(!1),[c,d]=Object(n.useState)(null),[m,u]=Object(n.useState)({key:"",value:""});Object(n.useEffect)(()=>{B.get("/campaign-settings").then(e=>{let{data:a}=e;const n=[];Array.isArray(a)&&a.length>0&&(a.forEach(e=>{n.push([e.key,JSON.parse(e.value)])}),t(Object.fromEntries(n)))})},[]);const p=e=>{if(null!==e.target.value){const a={};a[e.target.name]=e.target.value,u(e=>({...e,...a}))}},E=e=>{const a={};a[e.target.name]=e.target.value,t(e=>({...e,...a}))};return o.a.createElement(Zn.a,{maxWidth:"xl",className:e.container},o.a.createElement(Pt,{title:z.a.t("campaigns.confirmationModal.deleteTitle"),open:l,onClose:()=>s(!1),onConfirm:()=>{const e=a.variables.filter(e=>e.key!==c);t(a=>({...a,variables:e})),d(null)}},z.a.t("campaigns.confirmationModal.deleteMessage")),o.a.createElement(no,null,o.a.createElement("div",{className:e.headerContainer},o.a.createElement(Dm.a,{className:e.headerIcon}),o.a.createElement("span",{className:e.headerTitle},z.a.t("campaignsConfig.title")))),o.a.createElement(wa.a,{className:e.mainPaper,variant:"outlined"},o.a.createElement(g.a,{className:e.tabPanelsContainer},o.a.createElement("div",{className:e.cardSection},o.a.createElement(f.a,{component:"h3",style:{marginBottom:16,fontWeight:700,color:"#5D3FD3"}},"Intervalos"),o.a.createElement(_t.a,{spacing:2,container:!0},o.a.createElement(_t.a,{xs:12,md:4,item:!0},o.a.createElement(ke.a,{variant:"outlined",className:e.formControl,fullWidth:!0},o.a.createElement(Se.a,{id:"messageInterval-label"},"Intervalo Rand\xf4mico de Disparo"),o.a.createElement(Ne.a,{name:"messageInterval",id:"messageInterval",labelId:"messageInterval-label",label:"Intervalo Rand\xf4mico de Disparo",value:a.messageInterval,onChange:e=>E(e),className:e.input},o.a.createElement(oe.a,{value:0},"Sem Intervalo"),o.a.createElement(oe.a,{value:5},"5 segundos"),o.a.createElement(oe.a,{value:10},"10 segundos"),o.a.createElement(oe.a,{value:15},"15 segundos"),o.a.createElement(oe.a,{value:20},"20 segundos")))),o.a.createElement(_t.a,{xs:12,md:4,item:!0},o.a.createElement(ke.a,{variant:"outlined",className:e.formControl,fullWidth:!0},o.a.createElement(Se.a,{id:"longerIntervalAfter-label"},"Intervalo Maior Ap\xf3s"),o.a.createElement(Ne.a,{name:"longerIntervalAfter",id:"longerIntervalAfter",labelId:"longerIntervalAfter-label",label:"Intervalo Maior Ap\xf3s",value:a.longerIntervalAfter,onChange:e=>E(e),className:e.input},o.a.createElement(oe.a,{value:0},"N\xe3o definido"),o.a.createElement(oe.a,{value:1},"1 segundo"),o.a.createElement(oe.a,{value:5},"5 segundos"),o.a.createElement(oe.a,{value:10},"10 segundos"),o.a.createElement(oe.a,{value:15},"15 segundos"),o.a.createElement(oe.a,{value:20},"20 segundos"),o.a.createElement(oe.a,{value:30},"30 segundos"),o.a.createElement(oe.a,{value:40},"40 segundos"),o.a.createElement(oe.a,{value:60},"60 segundos"),o.a.createElement(oe.a,{value:80},"80 segundos"),o.a.createElement(oe.a,{value:100},"100 segundos"),o.a.createElement(oe.a,{value:120},"120 segundos")))),o.a.createElement(_t.a,{xs:12,md:4,item:!0},o.a.createElement(ke.a,{variant:"outlined",className:e.formControl,fullWidth:!0},o.a.createElement(Se.a,{id:"greaterInterval-label"},"Intervalo de Disparo Maior"),o.a.createElement(Ne.a,{name:"greaterInterval",id:"greaterInterval",labelId:"greaterInterval-label",label:"Intervalo de Disparo Maior",value:a.greaterInterval,onChange:e=>E(e),className:e.input},o.a.createElement(oe.a,{value:0},"Sem Intervalo"),o.a.createElement(oe.a,{value:1},"1 segundo"),o.a.createElement(oe.a,{value:5},"5 segundos"),o.a.createElement(oe.a,{value:10},"10 segundos"),o.a.createElement(oe.a,{value:15},"15 segundos"),o.a.createElement(oe.a,{value:20},"20 segundos"),o.a.createElement(oe.a,{value:30},"30 segundos"),o.a.createElement(oe.a,{value:40},"40 segundos"),o.a.createElement(oe.a,{value:60},"60 segundos"),o.a.createElement(oe.a,{value:80},"80 segundos"),o.a.createElement(oe.a,{value:100},"100 segundos"),o.a.createElement(oe.a,{value:120},"120 segundos")))),o.a.createElement(_t.a,{xs:12,className:e.textRight,item:!0},o.a.createElement(b.a,{onClick:()=>i(!r),color:"primary",className:e.button},"Adicionar Vari\xe1vel"),o.a.createElement(b.a,{onClick:async()=>{await B.post("/campaign-settings",{settings:a}),y.toast.success("Configura\xe7\xf5es salvas")},color:"primary",variant:"contained",className:e.addButton},"Salvar Configura\xe7\xf5es")))),r&&o.a.createElement("div",{className:e.cardSection},o.a.createElement(f.a,{component:"h3",style:{marginBottom:16,fontWeight:700,color:"#5D3FD3"}},"Nova Vari\xe1vel"),o.a.createElement(_t.a,{spacing:2,container:!0},o.a.createElement(_t.a,{xs:12,md:6,item:!0},o.a.createElement(Ce.a,{label:"Atalho",variant:"outlined",value:m.key,name:"key",onChange:p,fullWidth:!0,className:e.input})),o.a.createElement(_t.a,{xs:12,md:6,item:!0},o.a.createElement(Ce.a,{label:"Conte\xfado",variant:"outlined",value:m.value,name:"value",onChange:p,fullWidth:!0,className:e.input})),o.a.createElement(_t.a,{xs:12,className:e.textRight,item:!0},o.a.createElement(b.a,{onClick:()=>i(!r),color:"primary",className:e.button},"Fechar"),o.a.createElement(b.a,{onClick:()=>{t(e=>{const t=a.variables.filter(e=>e.key===m.key),n=e.variables;return 0===t.length&&(n.push(Object.assign({},m)),u({key:"",value:""})),{...e,variables:n}})},color:"primary",variant:"contained",className:e.addButton},"Adicionar")))),a.variables.length>0&&o.a.createElement("div",{className:e.cardSection},o.a.createElement(f.a,{component:"h3",style:{marginBottom:16,fontWeight:700,color:"#5D3FD3"}},"Vari\xe1veis"),o.a.createElement(Er.a,{size:"small",className:e.table},o.a.createElement(xr.a,{className:e.tableHead},o.a.createElement(Ko.a,null,o.a.createElement(_o.a,{style:{width:"1%"}}),o.a.createElement(_o.a,{className:e.tableCell},"Atalho"),o.a.createElement(_o.a,{className:e.tableCell},"Conte\xfado"))),o.a.createElement(hr.a,null,Array.isArray(a.variables)&&a.variables.map((e,a)=>o.a.createElement(Ko.a,{key:a},o.a.createElement(_o.a,null,o.a.createElement(J.a,{size:"small",onClick:()=>{d(e.key),s(!0)}},o.a.createElement(an.a,null))),o.a.createElement(_o.a,null,"{"+e.key+"}"),o.a.createElement(_o.a,null,e.value)))))))))},Fm=t(1300);const Mm=Object(Y.a)(e=>({mainContainer:{display:"flex",flexDirection:"column",position:"relative",flex:1,height:"calc(100% - 58px)",overflow:"hidden",borderRadius:0,backgroundColor:e.palette.boxlist},chatList:{display:"flex",flexDirection:"column",position:"relative",flex:1,overflowY:"scroll",...e.scrollbarStyles},listItem:{cursor:"pointer",borderRadius:10,margin:e.spacing(.5,1),transition:"background 0.2s, box-shadow 0.2s","&:hover":{background:"rgba(93,63,211,0.07)",boxShadow:"0 2px 8px rgba(93,63,211,0.08)"}},selectedItem:{borderLeft:"6px solid #5D3FD3",background:"rgba(93,63,211,0.04)"},chip:{marginLeft:5,fontWeight:600,background:"#5D3FD3",color:"#fff"},actionButton:{color:"#5D3FD3","&:hover":{color:"#4930A8",background:"rgba(93,63,211,0.08)"},marginRight:5},deleteButton:{color:"#F44336","&:hover":{color:"#D32F2F",background:"rgba(244,67,54,0.08)"}},primaryText:{fontWeight:600,color:"#222",fontSize:15,display:"flex",alignItems:"center"},secondaryText:{color:"#666",fontSize:13,marginTop:2}}));function Pm(e){let{chats:a,handleSelectChat:t,handleDeleteChat:r,handleEditChat:i,pageInfo:l,loading:s}=e;const c=Mm(),d=Object(S.useHistory)(),{user:m}=Object(n.useContext)(H),{datetimeToClient:u}=xa(),[p,g]=Object(n.useState)(!1),[f,b]=Object(n.useState)({}),{id:E}=Object(S.useParams)(),h=async e=>{if(x(e)>0)try{await B.post(`/chats/${e.id}/read`,{userId:m.id})}catch(a){}E!==e.uuid&&(d.push("/chats/"+e.uuid),t(e))},x=e=>e.users.find(e=>e.userId===m.id).unreads,y=e=>{const a=e.title,t=x(e);return o.a.createElement("span",{className:c.primaryText},a,t>0&&o.a.createElement(Fe.a,{size:"small",label:t,className:c.chip}))},v=e=>""!==e.lastMessage?o.a.createElement("span",{className:c.secondaryText},u(e.updatedAt),": ",e.lastMessage):"",C=e=>e.uuid===E?c.selectedItem:"";return o.a.createElement(o.a.Fragment,null,o.a.createElement(Pt,{title:"Excluir Conversa",open:p,onClose:g,onConfirm:()=>{r(f)}},"Esta a\xe7\xe3o n\xe3o pode ser revertida, confirmar?"),o.a.createElement("div",{className:c.mainContainer},o.a.createElement("div",{className:c.chatList},o.a.createElement(ee.a,null,Array.isArray(a)&&a.length>0&&a.map((e,a)=>o.a.createElement(Ue.a,{onClick:()=>h(e),key:a,className:`${c.listItem} ${C(e)}`,button:!0},o.a.createElement(Ge.a,{primary:y(e),secondary:v(e)}),e.ownerId===m.id&&o.a.createElement(qa.a,null,o.a.createElement(Sa.a,{title:"Editar",arrow:!0},o.a.createElement(J.a,{onClick:()=>{h(e).then(()=>{i(e)})},edge:"end","aria-label":"edit",size:"small",className:c.actionButton},o.a.createElement(Fm.a,{size:18}))),o.a.createElement(Sa.a,{title:"Excluir",arrow:!0},o.a.createElement(J.a,{onClick:()=>{b(e),g(!0)},edge:"end","aria-label":"delete",size:"small",className:c.deleteButton},o.a.createElement(Jn.a,{size:18}))))))))))}var Bm=t(1099);const zm=Object(Y.a)(e=>({mainContainer:{display:"flex",flexDirection:"column",position:"relative",flex:1,overflow:"hidden",borderRadius:0,height:"100%",borderLeft:"1px solid rgba(0, 0, 0, 0.12)",background:e.palette.chatlist},messageList:{position:"relative",overflowY:"auto",height:"100%",...e.scrollbarStyles,backgroundColor:e.palette.chatlist,padding:e.spacing(2,1,2,1),display:"flex",flexDirection:"column"},inputArea:{position:"relative",height:"auto",background:"#fff",borderTop:"1px solid #eee",padding:e.spacing(1,2)},input:{padding:"16px",fontSize:15,borderRadius:8,background:"#f7f8fa"},buttonSend:{margin:e.spacing(1),color:"#5D3FD3",background:"rgba(93,63,211,0.07)",borderRadius:8,"&:hover":{background:"#5D3FD3",color:"#fff"}},boxLeft:{padding:"12px 16px 8px 16px",margin:"8px 0 8px 8px",position:"relative",backgroundColor:"#f1f1f7",maxWidth:340,borderRadius:16,borderBottomLeftRadius:4,border:"1px solid #e0e0e0",alignSelf:"flex-start",boxShadow:"0 1px 4px rgba(93,63,211,0.04)"},boxRight:{padding:"12px 16px 8px 16px",margin:"8px 8px 8px 0",position:"relative",backgroundColor:"#5D3FD3",color:"#fff",textAlign:"right",maxWidth:340,borderRadius:16,borderBottomRightRadius:4,border:"1px solid #e0e0e0",alignSelf:"flex-end",boxShadow:"0 1.5px 6px rgba(93,63,211,0.08)"},senderName:{fontWeight:600,fontSize:14,marginBottom:2,color:"#5D3FD3"},senderNameRight:{fontWeight:600,fontSize:14,marginBottom:2,color:"#fff"},messageText:{fontSize:15,marginBottom:4,wordBreak:"break-word"},messageTime:{fontSize:11,color:"#888",marginTop:2,textAlign:"right"},messageTimeRight:{fontSize:11,color:"#e0e0e0",marginTop:2,textAlign:"right"}}));function Wm(e){let{chat:a,messages:t,handleSendMessage:r,handleLoadMore:i,scrollToBottomRef:l,pageInfo:s,loading:c}=e;const d=zm(),{user:m}=Object(n.useContext)(H),{datetimeToClient:u}=xa(),p=Object(n.useRef)(),[b,E]=Object(n.useState)(""),h=()=>{p.current&&p.current.scrollIntoView({})};o.a.useEffect(()=>{if((e=>{if(void 0!==e){return e.users.find(e=>e.userId===m.id).unreads>0}return 0})(a)>0)try{B.post(`/chats/${a.id}/read`,{userId:m.id})}catch(e){}l.current=h},[]);return o.a.createElement(wa.a,{className:d.mainContainer},o.a.createElement("div",{onScroll:e=>{const{scrollTop:a}=e.currentTarget;s.hasMore&&!c&&a<600&&i()},className:d.messageList},Array.isArray(t)&&t.map((e,a)=>e.senderId===m.id?o.a.createElement(g.a,{key:a,className:d.boxRight},o.a.createElement(f.a,{className:d.senderNameRight},e.sender.name),o.a.createElement("div",{className:d.messageText},e.message),o.a.createElement(f.a,{className:d.messageTimeRight,display:"block"},u(e.createdAt))):o.a.createElement(g.a,{key:a,className:d.boxLeft},o.a.createElement(f.a,{className:d.senderName},e.sender.name),o.a.createElement("div",{className:d.messageText},e.message),o.a.createElement(f.a,{className:d.messageTime,display:"block"},u(e.createdAt)))),o.a.createElement("div",{ref:p})),o.a.createElement("div",{className:d.inputArea},o.a.createElement(ke.a,{variant:"outlined",fullWidth:!0},o.a.createElement(Bm.a,{multiline:!0,value:b,onKeyUp:e=>{"Enter"===e.key&&""!==b.trim()&&(r(b),E(""))},onChange:e=>E(e.target.value),className:d.input,endAdornment:o.a.createElement(Do.a,{position:"end"},o.a.createElement(J.a,{onClick:()=>{""!==b.trim()&&(r(b),E(""))},className:d.buttonSend},o.a.createElement(bl.a,{size:22})))}))))}const Lm=Object(Y.a)(e=>({container:{paddingTop:e.spacing(4),paddingBottom:e.spacing(4),paddingLeft:e.spacing(4),paddingRight:e.spacing(4),[e.breakpoints.down("sm")]:{paddingLeft:e.spacing(1),paddingRight:e.spacing(1)}},gridContainer:{flex:1,height:"100%",border:"1px solid rgba(0, 0, 0, 0.12)",backgroundColor:e.palette.dark},gridItem:{height:"100%"},gridItemTab:{height:"92%",width:"100%"},btnContainer:{textAlign:"right",padding:10}}));function qm(e){let{open:a,chat:t,type:r,handleClose:i,handleLoadNewChat:l}=e;const[s,c]=Object(n.useState)([]),[d,m]=Object(n.useState)("");Object(n.useEffect)(()=>{if(m(""),c([]),"edit"===r){const e=t.users.map(e=>({id:e.user.id,name:e.user.name}));c(e),m(t.title)}},[t,a,r]);return o.a.createElement(xe.a,{open:a,onClose:i,"aria-labelledby":"alert-dialog-title","aria-describedby":"alert-dialog-description"},o.a.createElement(ye.a,{id:"alert-dialog-title"},"Conversa"),o.a.createElement(ve.a,null,o.a.createElement(_t.a,{spacing:2,container:!0},o.a.createElement(_t.a,{xs:12,style:{padding:18},item:!0},o.a.createElement(Ce.a,{label:"T\xedtulo",placeholder:"T\xedtulo",value:d,onChange:e=>m(e.target.value),variant:"outlined",size:"small",fullWidth:!0})),o.a.createElement(_t.a,{xs:12,item:!0},o.a.createElement(Nd,{onFiltered:e=>c(e),initialUsers:s})))),o.a.createElement(we.a,null,o.a.createElement(b.a,{onClick:i,color:"primary"},"Fechar"),o.a.createElement(b.a,{onClick:async()=>{try{if(!d)return void alert("Por favor, preencha o t\xedtulo da conversa.");if(!s||0===s.length)return void alert("Por favor, selecione pelo menos um usu\xe1rio.");if("edit"===r)await B.put("/chats/"+t.id,{users:s,title:d});else{const{data:e}=await B.post("/chats",{users:s,title:d});l(e)}i()}catch(e){}},color:"primary",variant:"contained"},"Salvar")))}var Hm=Object(Xs.a)()((function(e){const a=Lm(),{user:t}=Object(n.useContext)(H),r=Object(S.useHistory)(),[i,l]=Object(n.useState)(!1),[s,c]=Object(n.useState)("new"),[d,m]=Object(n.useState)({}),[u,p]=Object(n.useState)([]),[g,f]=Object(n.useState)({hasMore:!1}),[E,h]=Object(n.useState)([]),[x,y]=Object(n.useState)({hasMore:!1}),[v,C]=Object(n.useState)(1),[N,w]=Object(n.useState)(!1),[I,A]=Object(n.useState)(0),T=Object(n.useRef)(!0),D=Object(n.useRef)(),{id:O}=Object(S.useParams)(),R=Object(n.useContext)(j);Object(n.useEffect)(()=>()=>{T.current=!1},[]),Object(n.useEffect)(()=>{T.current&&L().then(e=>{const{records:a}=e;if(a.length>0&&(p(a),f(e),O&&a.length)){const e=a.find(e=>e.uuid===O);F(e)}})},[]),Object(n.useEffect)(()=>{Object(k.isObject)(d)&&Object(k.has)(d,"id")&&z(d.id).then(()=>{"function"===typeof D.current&&setTimeout(()=>{D.current()},300)})},[d]),Object(n.useEffect)(()=>{const e=localStorage.getItem("companyId"),a=R.getSocket(e);return a.on(`company-${e}-chat-user-${t.id}`,e=>{if("create"===e.action&&p(a=>[e.record,...a]),"update"===e.action){const a=u.map(a=>a.id===e.record.id?(m(e.record),{...e.record}):a);p(a)}}),a.on(`company-${e}-chat`,e=>{if("delete"===e.action){const a=u.filter(a=>a.id!==+e.id);p(a),h([]),C(1),y({hasMore:!1}),m({}),r.push("/chats")}}),Object(k.isObject)(d)&&Object(k.has)(d,"id")&&a.on(`company-${e}-chat-${d.id}`,e=>{if("new-message"===e.action){h(a=>[...a,e.newMessage]);const a=u.map(a=>a.id===e.newMessage.chatId?{...e.chat}:a);p(a),D.current()}if("update"===e.action){const a=u.map(a=>a.id===e.chat.id?{...e.chat}:a);p(a),D.current()}}),()=>{a.disconnect()}},[d,R]);const F=e=>{try{h([]),C(1),m(e),A(1)}catch(a){}},M=async e=>{w(!0);try{await B.post(`/chats/${d.id}/messages`,{message:e})}catch(a){}w(!1)},P=async e=>{try{await B.delete("/chats/"+e.id)}catch(a){}},z=async e=>{w(!0);try{const{data:a}=await B.get(`/chats/${e}/messages?pageNumber=${v}`);C(e=>e+1),y(a),h(e=>[...a.records,...e])}catch(a){}w(!1)},W=async()=>{N||z(d.id)},L=async()=>{try{const{data:e}=await B.get("/chats");return e}catch(e){console.log(e)}};return o.a.createElement(o.a.Fragment,null,o.a.createElement(qm,{type:s,open:i,chat:d,handleLoadNewChat:e=>{h([]),C(1),m(e),A(1),r.push("/chats/"+e.uuid)},handleClose:()=>l(!1)}),o.a.createElement(Zn.a,{maxWidth:"xl",className:a.container},Object(Xs.b)("md",e.width)?o.a.createElement(_t.a,{className:a.gridContainer,container:!0},o.a.createElement(_t.a,{className:a.gridItem,md:3,item:!0},o.a.createElement("div",{className:a.btnContainer},o.a.createElement(b.a,{onClick:()=>{c("new"),l(!0)},color:"primary",variant:"contained"},"Nova")),o.a.createElement(Pm,{chats:u,pageInfo:g,loading:N,handleSelectChat:e=>F(e),handleDeleteChat:e=>P(e),handleEditChat:()=>{c("edit"),l(!0)}})),o.a.createElement(_t.a,{className:a.gridItem,md:9,item:!0},Object(k.isObject)(d)&&Object(k.has)(d,"id")&&o.a.createElement(Wm,{chat:d,scrollToBottomRef:D,pageInfo:x,messages:E,loading:N,handleSendMessage:M,handleLoadMore:W}))):o.a.createElement(_t.a,{className:a.gridContainer,container:!0},o.a.createElement(_t.a,{md:12,item:!0},o.a.createElement(Il.a,{value:I,indicatorColor:"primary",textColor:"primary",onChange:(e,a)=>A(a),"aria-label":"disabled tabs example"},o.a.createElement(Al.a,{label:"Chats"}),o.a.createElement(Al.a,{label:"Mensagens"}))),0===I&&o.a.createElement(_t.a,{className:a.gridItemTab,md:12,item:!0},o.a.createElement("div",{className:a.btnContainer},o.a.createElement(b.a,{onClick:()=>l(!0),color:"primary",variant:"contained"},"Novo")),o.a.createElement(Pm,{chats:u,pageInfo:g,loading:N,handleSelectChat:e=>F(e),handleDeleteChat:e=>P(e)})),1===I&&o.a.createElement(_t.a,{className:a.gridItemTab,md:12,item:!0},Object(k.isObject)(d)&&Object(k.has)(d,"id")&&o.a.createElement(Wm,{scrollToBottomRef:D,pageInfo:x,messages:E,loading:N,handleSendMessage:M,handleLoadMore:W})))))})),Um=t(1301);const Vm=Object(Y.a)(e=>({root:{display:"flex",flexWrap:"wrap",gap:4},multFieldLine:{display:"flex","& > *:not(:last-child)":{marginRight:e.spacing(1)}},textField:{marginRight:e.spacing(1),flex:1},extraAttr:{display:"flex",justifyContent:"center",alignItems:"center",marginBottom:4,background:"#faf9fd",borderRadius:8,padding:"8px 0 4px 0"},btnWrapper:{position:"relative"},buttonProgress:{color:Ie.a[500],position:"absolute",top:"50%",left:"50%",marginTop:-12,marginLeft:-12},fileIconButton:{padding:6,color:"#5D3FD3",borderRadius:8,transition:"background 0.2s","&:hover":{background:"#f3f0fa"}},deleteIconButton:{padding:6,color:"#e53935",borderRadius:8,transition:"background 0.2s","&:hover":{background:"#fbe9e7"}},fileName:{fontSize:13,color:"#666",marginLeft:8,fontStyle:"italic",maxWidth:180,overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},addOptionButton:{flex:1,marginTop:8,borderRadius:8,textTransform:"none",fontWeight:600,fontSize:14}})),Gm=Oe.b().shape({name:Oe.d().min(3,"nome muito curto").required("Obrigat\xf3rio"),message:Oe.d().required("Obrigat\xf3rio")});var _m=e=>{let{open:a,onClose:t,fileListId:r,reload:i}=e;const l=Vm(),{user:s}=Object(n.useContext)(H),[c,d]=Object(n.useState)([]),m={name:"",message:"",options:[{name:"",path:"",mediaType:""}]},[u,p]=Object(n.useState)(m);Object(n.useEffect)(()=>{try{(async()=>{if(!r)return;const{data:e}=await B.get("/files/"+r);p(e)})()}catch(e){y.toast.error(e.message)}},[r,a]);const g=()=>{p(m),t()};return o.a.createElement("div",{className:l.root},o.a.createElement(xe.a,{open:a,onClose:g,maxWidth:"md",fullWidth:!0,scroll:"paper"},o.a.createElement(ye.a,{id:"form-dialog-title"},r?""+z.a.t("fileModal.title.edit"):""+z.a.t("fileModal.title.add")),o.a.createElement(Ae.e,{initialValues:u,enableReinitialize:!0,validationSchema:Gm,onSubmit:(e,a)=>{setTimeout(()=>{(async e=>{const a=async(e,a,t)=>{const n=new FormData;n.append("fileId",t),n.append("typeArch","fileList"),a.forEach((a,t)=>{a.file&&(n.append("files",a.file),n.append("mediaType",a.file.type),n.append("name",e[t].name),n.append("id",e[t].id))});try{const{data:e}=await B.post("/files/uploadList/"+t,n);return e}catch(o){y.toast.error(o.message)}},t={...e,userId:s.id};try{if(r){const{data:n}=await B.put("/files/"+r,t);n.options.length>0&&a(n.options,e.options,r)}else{const{data:n}=await B.post("/files",t);n.options.length>0&&a(n.options,e.options,n.id)}y.toast.success(z.a.t("fileModal.success")),"function"==typeof i&&i()}catch(n){y.toast.error((null===n||void 0===n?void 0:n.message)||"Erro desconhecido")}})(e),a.setSubmitting(!1)},400)}},e=>{let{touched:a,errors:t,isSubmitting:n,values:i}=e;return o.a.createElement(Ae.d,null,o.a.createElement(ve.a,{dividers:!0},o.a.createElement("div",{className:l.multFieldLine},o.a.createElement(Ae.b,{as:Ce.a,label:z.a.t("fileModal.form.name"),name:"name",error:a.name&&Boolean(t.name),helperText:a.name&&t.name,variant:"outlined",margin:"dense",fullWidth:!0})),o.a.createElement("br",null),o.a.createElement("div",{className:l.multFieldLine},o.a.createElement(Ae.b,{as:Ce.a,label:z.a.t("fileModal.form.message"),type:"message",multiline:!0,minRows:5,fullWidth:!0,name:"message",error:a.message&&Boolean(t.message),helperText:a.message&&t.message,variant:"outlined",margin:"dense"})),o.a.createElement(f.a,{style:{marginBottom:8,marginTop:12},variant:"subtitle1"},z.a.t("fileModal.form.fileOptions")),o.a.createElement(Ae.c,{name:"options"},e=>{let{push:a,remove:t}=e;return o.a.createElement(o.a.Fragment,null,i.options&&i.options.length>0&&i.options.map((e,a)=>o.a.createElement("div",{className:l.extraAttr,key:a+"-info"},o.a.createElement(_t.a,{container:!0,spacing:0,alignItems:"center"},o.a.createElement(_t.a,{xs:6,md:10,item:!0},o.a.createElement(Ae.b,{as:Ce.a,label:z.a.t("fileModal.form.extraName"),name:`options[${a}].name`,variant:"outlined",margin:"dense",multiline:!0,fullWidth:!0,minRows:2,className:l.textField})),o.a.createElement(_t.a,{xs:2,md:2,item:!0,style:{display:"flex",alignItems:"center",justifyContent:"flex-end"}},o.a.createElement("input",{type:"file",onChange:e=>{const t=e.target.files[0];[...i.options][a].file=t;const n=[...c];n[a]=t?t.name:"",d(n)},style:{display:"none"},name:`options[${a}].file`,id:"file-upload-"+a}),o.a.createElement("label",{htmlFor:"file-upload-"+a},o.a.createElement(J.a,{component:"span",className:l.fileIconButton},o.a.createElement(Um.a,{size:18}))),o.a.createElement(J.a,{size:"small",className:l.deleteIconButton,onClick:()=>t(a)},o.a.createElement(Jn.a,{size:18}))),o.a.createElement(_t.a,{xs:12,md:12,item:!0},o.a.createElement("span",{className:l.fileName},e.path?e.path:c[a]))))),o.a.createElement("div",{className:l.extraAttr},o.a.createElement(b.a,{className:l.addOptionButton,variant:"outlined",color:"primary",onClick:()=>{a({name:"",path:""}),d([...c,""])}},"+ "+z.a.t("fileModal.buttons.fileOptions"))))})),o.a.createElement(we.a,null,o.a.createElement(b.a,{onClick:g,color:"secondary",disabled:n,variant:"outlined"},z.a.t("fileModal.buttons.cancel")),o.a.createElement(b.a,{type:"submit",color:"primary",disabled:n,variant:"contained",className:l.btnWrapper},r?""+z.a.t("fileModal.buttons.okEdit"):""+z.a.t("fileModal.buttons.okAdd"),n&&o.a.createElement(be.a,{size:24,className:l.buttonProgress}))))})))};const Km=(e,a)=>{if("LOAD_FILES"===a.type){const t=a.payload,n=[];return t.forEach(a=>{const t=e.findIndex(e=>e.id===a.id);-1!==t?e[t]=a:n.push(a)}),[...e,...n]}if("UPDATE_FILES"===a.type){const t=a.payload,n=e.findIndex(e=>e.id===t.id);return-1!==n?(e[n]=t,[...e]):[t,...e]}if("DELETE_TAG"===a.type){const t=a.payload,n=e.findIndex(e=>e.id===t);return-1!==n&&e.splice(n,1),[...e]}if("RESET"===a.type)return[]},Qm=Object(Y.a)(e=>({mainPaper:{flex:1,padding:e.spacing(3),overflowY:"auto",...e.scrollbarStyles,marginTop:e.spacing(4),background:"#faf9fd",borderRadius:16,boxShadow:"0 2px 12px rgba(93,63,211,0.07)",minHeight:400},container:{paddingTop:e.spacing(4),paddingBottom:e.spacing(4),paddingLeft:e.spacing(4),paddingRight:e.spacing(4),[e.breakpoints.down("sm")]:{paddingLeft:e.spacing(1),paddingRight:e.spacing(1)}},header:{display:"flex",alignItems:"center",justifyContent:"space-between",marginBottom:e.spacing(2),flexWrap:"wrap",gap:e.spacing(2)},searchInput:{minWidth:240,background:"#fff",borderRadius:10,boxShadow:"0 1px 4px rgba(93,63,211,0.04)","& .MuiOutlinedInput-root":{borderRadius:10}},addButton:{marginLeft:e.spacing(2),height:40,whiteSpace:"nowrap",backgroundColor:"#5D3FD3",color:"#fff",fontWeight:600,borderRadius:10,boxShadow:"0 2px 8px rgba(93,63,211,0.08)",transition:"background 0.2s, box-shadow 0.2s","&:hover":{backgroundColor:"#4b32a8",boxShadow:"0 4px 16px rgba(93,63,211,0.12)"},[e.breakpoints.down("sm")]:{width:"100%",marginLeft:0}},tableHead:{background:"#f3f0fa",position:"sticky",top:0,zIndex:1},tableRow:{"&:nth-of-type(odd)":{backgroundColor:"#f8f6fc"},"&:hover":{backgroundColor:"#ede7fa"}},actionCell:{display:"flex",justifyContent:"center",gap:e.spacing(1)},iconButton:{color:"#5D3FD3",background:"#f3f0fa",borderRadius:8,transition:"background 0.2s, color 0.2s","&:hover":{background:"#e0d7fa",color:"#4b32a8"}}}));var Ym=()=>{const e=Qm(),{user:a}=Object(n.useContext)(H),[t,r]=Object(n.useState)(!1),[i,l]=Object(n.useState)(1),[s,c]=Object(n.useState)(!1),[d,m]=Object(n.useState)(null),[u,p]=Object(n.useState)(null),[g,f]=Object(n.useState)(!1),[E,h]=Object(n.useState)(""),[x,v]=Object(n.useReducer)(Km,[]),[C,k]=Object(n.useState)(!1),S=Object(n.useCallback)(async()=>{try{const{data:e}=await B.get("/files/",{params:{searchParam:E,pageNumber:i}});v({type:"LOAD_FILES",payload:e.files}),c(e.hasMore),r(!1)}catch(e){y.toast.error(e.message)}},[E,i]),N=Object(n.useContext)(j);Object(n.useEffect)(()=>{v({type:"RESET"}),l(1)},[E]),Object(n.useEffect)(()=>{r(!0);const e=setTimeout(()=>{S()},500);return()=>clearTimeout(e)},[E,i,S]),Object(n.useEffect)(()=>{const e=N.getSocket(a.companyId);return e.on(`company-${a.companyId}-file`,e=>{"update"!==e.action&&"create"!==e.action||v({type:"UPDATE_FILES",payload:e.files}),"delete"===e.action&&v({type:"DELETE_USER",payload:+e.fileId})}),()=>{e.disconnect()}},[N,a]);return o.a.createElement(Zn.a,{maxWidth:"xl",className:e.container},o.a.createElement(Pt,{title:u&&""+z.a.t("files.confirmationModal.deleteTitle"),open:g,onClose:()=>f(!1),onConfirm:()=>(async e=>{try{await B.delete("/files/"+e),y.toast.success(z.a.t("files.toasts.deleted"))}catch(a){y.toast.error(a.message)}p(null),h(""),l(1),v({type:"RESET"}),l(1),await S()})(u.id)},z.a.t("files.confirmationModal.deleteMessage")),o.a.createElement(_m,{open:C,onClose:()=>{m(null),k(!1)},reload:S,"aria-labelledby":"form-dialog-title",fileListId:d&&d.id}),o.a.createElement(no,null,o.a.createElement("div",{className:e.header},o.a.createElement(tl,null,z.a.t("files.title")," (",x.length,")"),o.a.createElement("div",{style:{display:"flex",gap:16,alignItems:"center"}},o.a.createElement(Ce.a,{placeholder:z.a.t("contacts.searchPlaceholder"),type:"search",value:E,onChange:e=>{h(e.target.value.toLowerCase())},className:e.searchInput,variant:"outlined",size:"small",InputProps:{startAdornment:o.a.createElement(Do.a,{position:"start"},o.a.createElement(jo.a,{style:{color:"gray"}}))}}),o.a.createElement(b.a,{variant:"contained",color:"primary",className:e.addButton,onClick:()=>{m(null),k(!0)},startIcon:o.a.createElement(Po.a,null)},z.a.t("files.buttons.add"))))),o.a.createElement(wa.a,{className:e.mainPaper,variant:"outlined",onScroll:e=>{if(!s||t)return;const{scrollTop:a,scrollHeight:n,clientHeight:o}=e.currentTarget;n-(a+100)<o&&l(e=>e+1)}},o.a.createElement(Er.a,{size:"small"},o.a.createElement(xr.a,{className:e.tableHead},o.a.createElement(Ko.a,null,o.a.createElement(_o.a,{align:"center"},z.a.t("files.table.name")),o.a.createElement(_o.a,{align:"center"},z.a.t("files.table.actions")))),o.a.createElement(hr.a,null,o.a.createElement(o.a.Fragment,null,x.map(a=>o.a.createElement(Ko.a,{key:a.id,className:e.tableRow},o.a.createElement(_o.a,{align:"center"},a.name),o.a.createElement(_o.a,{align:"center",className:e.actionCell},o.a.createElement(J.a,{size:"small",className:e.iconButton,onClick:()=>(e=>{m(e),k(!0)})(a)},o.a.createElement(Po.a,null)),o.a.createElement(J.a,{size:"small",className:e.iconButton,onClick:()=>{f(!0),p(a)}},o.a.createElement(an.a,null))))),t&&o.a.createElement(Yo,{columns:4}))))))},Xm=t(479),$m=t.n(Xm),Jm=t(384),Zm=t.n(Jm);const eu=Object(Y.a)(e=>({root:{width:"100vw",height:"100vh",background:"linear-gradient(to right,rgb(244, 244, 246),rgb(141, 145, 254))",display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",textAlign:"center"},paper:{backgroundColor:"white",display:"flex",flexDirection:"column",alignItems:"center",padding:"40px 30px",borderRadius:"8px",boxShadow:"0px 4px 10px rgba(0, 0, 0, 0.1)",width:"400px"},title:{color:"#6151FF",fontWeight:"bold",fontSize:"28px",marginBottom:"10px"},subtitle:{color:"#666",fontSize:"14px",marginBottom:"30px"},form:{width:"100%",marginTop:e.spacing(1)},submit:{margin:e.spacing(3,0,2),padding:"12px",backgroundColor:"#6151FF",borderRadius:"6px",textTransform:"none",fontWeight:"bold",fontSize:"16px","&:hover":{backgroundColor:"#4C3FD9"}},textField:{marginBottom:"15px","& .MuiOutlinedInput-root":{borderRadius:"6px"}},inputIcon:{color:"#6151FF"},link:{color:"#6151FF",textDecoration:"none",fontSize:"14px",fontWeight:"500","&:hover":{textDecoration:"underline"}}})),au=/^(?=.*\d)(?=.*[a-z])(?=.*[A-Z]).{8,}$/;var tu=()=>{const e=eu(),a=Object(S.useHistory)(),[t,r]=Object(n.useState)(!1),[i,s]=Object(n.useState)(!1),[c,d]=Object(n.useState)(!1),[m,u]=Object(n.useState)(!1),[E,h]=Object(n.useState)(""),x=()=>{d(!c)},v=()=>{u(!m)};Ps.a.parse(window.location.search).companyId;const C=i,k=Oe.b().shape({email:Oe.d().email("Invalid email").required("Required"),newPassword:C?Oe.d().required("Campo obrigat\xf3rio").matches(au,"Sua senha precisa ter no m\xednimo 8 caracteres, sendo uma letra mai\xfascula, uma min\xfascula e um n\xfamero."):Oe.d(),confirmPassword:Oe.d().when("newPassword",{is:e=>C&&e,then:Oe.d().oneOf([Oe.c("newPassword"),null],"As senhas n\xe3o correspondem").required("Campo obrigat\xf3rio"),otherwise:Oe.d()})});return o.a.createElement("div",{className:e.root},o.a.createElement(Zn.a,{component:"main",maxWidth:"xs"},o.a.createElement(l.a,null),o.a.createElement("div",{className:e.paper},o.a.createElement(f.a,{className:e.title,component:"h1",variant:"h5"},"Conecta Atende",o.a.createElement("span",{style:{color:"#4C3FD9"}},"CRM")),o.a.createElement(f.a,{className:e.subtitle,component:"p"},z.a.t("Redefinir senha")),o.a.createElement(Ae.e,{initialValues:{email:"",token:"",newPassword:"",confirmPassword:""},enableReinitialize:!0,validationSchema:k,onSubmit:(e,n)=>{setTimeout(()=>{i?(async e=>{const t=e.email,n=e.token,o=e.newPassword;if(o===e.confirmPassword)try{await B.post(`http://localhost:8080/resetpasswords/${t}/${n}/${o}`),h(""),y.toast.success(z.a.t("Senha redefinida com sucesso.")),a.push("/login")}catch(r){console.log(r)}})(e):(async e=>{const a=e.email;try{const e=await B.post("http://localhost:8080/forgetpassword/"+a);console.log("API Response:",e.data),404===e.data.status?y.toast.error("Email n\xe3o encontrado"):y.toast.success(z.a.t("Email enviado com sucesso!"))}catch(t){console.log("API Error:",t),y.toast.error(t.message)}})(e),n.setSubmitting(!1),r(!t),s(!t)},400)}},a=>{let{touched:n,errors:r,isSubmitting:l}=a;return o.a.createElement(Ae.d,{className:e.form},o.a.createElement(_t.a,{container:!0,spacing:2},o.a.createElement(_t.a,{item:!0,xs:12},o.a.createElement(Ae.b,{as:Ce.a,variant:"outlined",fullWidth:!0,className:e.textField,id:"email",label:z.a.t("signup.form.email"),name:"email",error:n.email&&Boolean(r.email),helperText:n.email&&r.email,autoComplete:"email",required:!0,InputProps:{startAdornment:o.a.createElement(Do.a,{position:"start"},o.a.createElement(zo.a,{className:e.inputIcon}))}})),t&&o.a.createElement(o.a.Fragment,null,o.a.createElement(_t.a,{item:!0,xs:12},o.a.createElement(Ae.b,{as:Ce.a,variant:"outlined",fullWidth:!0,className:e.textField,id:"token",label:"C\xf3digo de Verifica\xe7\xe3o",name:"token",error:n.token&&Boolean(r.token),helperText:n.token&&r.token,autoComplete:"off",required:!0,InputProps:{startAdornment:o.a.createElement(Do.a,{position:"start"},o.a.createElement(Zm.a,{className:e.inputIcon}))}})),o.a.createElement(_t.a,{item:!0,xs:12},o.a.createElement(Ae.b,{as:Ce.a,variant:"outlined",fullWidth:!0,className:e.textField,type:c?"text":"password",id:"newPassword",label:"Nova senha",name:"newPassword",error:n.newPassword&&Boolean(r.newPassword),helperText:n.newPassword&&r.newPassword,autoComplete:"off",required:!0,InputProps:{startAdornment:o.a.createElement(Do.a,{position:"start"},o.a.createElement(sl.a,{className:e.inputIcon})),endAdornment:o.a.createElement(Do.a,{position:"end"},o.a.createElement(J.a,{onClick:x},c?o.a.createElement(dt.a,null):o.a.createElement($m.a,null)))}})),o.a.createElement(_t.a,{item:!0,xs:12},o.a.createElement(Ae.b,{as:Ce.a,variant:"outlined",fullWidth:!0,className:e.textField,type:m?"text":"password",id:"confirmPassword",label:"Confirme a senha",name:"confirmPassword",error:n.confirmPassword&&Boolean(r.confirmPassword),helperText:n.confirmPassword&&r.confirmPassword,autoComplete:"off",required:!0,InputProps:{startAdornment:o.a.createElement(Do.a,{position:"start"},o.a.createElement(sl.a,{className:e.inputIcon})),endAdornment:o.a.createElement(Do.a,{position:"end"},o.a.createElement(J.a,{onClick:v},m?o.a.createElement(dt.a,null):o.a.createElement($m.a,null)))}})))),o.a.createElement(b.a,{type:"submit",fullWidth:!0,variant:"contained",color:"primary",className:e.submit},i?"Redefinir Senha":"Enviar Email"),o.a.createElement(_t.a,{container:!0,justifyContent:"center"},o.a.createElement(_t.a,{item:!0},o.a.createElement(il.a,{className:e.link,component:p.b,to:"/login"},"Voltar para o login"))),E&&o.a.createElement(f.a,{variant:"body2",color:"error"},E))})),o.a.createElement(g.a,{mt:5})))},nu=t(706),ou=t.n(nu);const ru=Object(Y.a)(e=>({root:{display:"flex",alignItems:"flex-start",padding:e.spacing(2),background:"#f7f8fa",minHeight:"100vh",[e.breakpoints.down("sm")]:{padding:e.spacing(1)},"&::-webkit-scrollbar":{width:"8px",height:"8px"},"&::-webkit-scrollbar-track":{background:"#f1f1f1",borderRadius:"4px"},"&::-webkit-scrollbar-thumb":{background:"#5D3FD3",borderRadius:"4px","&:hover":{background:"#4930A8"}}},kanbanColumn:{background:"#fff",borderRadius:12,boxShadow:"0 2px 12px rgba(93,63,211,0.07)",margin:e.spacing(1),minWidth:320,maxWidth:370,flex:1,display:"flex",flexDirection:"column","&::-webkit-scrollbar":{width:"8px",height:"8px"},"&::-webkit-scrollbar-track":{background:"#f1f1f1",borderRadius:"4px"},"&::-webkit-scrollbar-thumb":{background:"#5D3FD3",borderRadius:"4px","&:hover":{background:"#4930A8"}}},kanbanHeader:{display:"flex",alignItems:"center",justifyContent:"space-between",padding:e.spacing(2,2,1,2),borderBottom:"1px solid #eee",background:"rgba(93,63,211,0.04)",borderTopLeftRadius:12,borderTopRightRadius:12},kanbanTitle:{fontWeight:700,fontSize:18,color:"#fff",display:"flex",alignItems:"center",gap:8},kanbanBadge:{background:"#5D3FD3",color:"#fff",fontWeight:600,borderRadius:12,fontSize:13,padding:"2px 10px"},kanbanCard:{margin:e.spacing(2,2,1,2),borderRadius:10,boxShadow:"0 1px 6px rgba(93,63,211,0.08)",background:"#fafbfc",transition:"box-shadow 0.2s","&:hover":{boxShadow:"0 4px 16px rgba(93,63,211,0.13)"}},cardContent:{padding:e.spacing(2),display:"flex",flexDirection:"column",gap:e.spacing(1)},cardTitle:{fontWeight:600,fontSize:16,color:"#222",display:"flex",alignItems:"center",gap:6},cardInfo:{display:"flex",alignItems:"center",gap:8,color:"#555",fontSize:14},cardButton:{marginTop:e.spacing(1),background:"#5D3FD3",color:"#fff",fontWeight:600,borderRadius:8,textTransform:"none","&:hover":{background:"#4930A8"},display:"flex",alignItems:"center",gap:6},tagChip:{marginTop:e.spacing(1),background:"#5D3FD3",color:"#fff",fontWeight:500},loadingBox:{width:"100%",display:"flex",justifyContent:"center",alignItems:"center",minHeight:300}})),iu=e=>{let{ticket:a,tag:t,onViewTicket:n}=e;const r=ru();return o.a.createElement(hn.a,{className:r.kanbanCard,elevation:0},o.a.createElement(pr.a,{className:r.cardContent},o.a.createElement("div",{className:r.cardTitle},o.a.createElement(de.a,{size:16})," ",a.contact.name),o.a.createElement("div",{className:r.cardInfo},o.a.createElement(Qe.a,{size:15})," ",a.contact.number),o.a.createElement("div",{className:r.cardInfo},o.a.createElement(ce.a,{size:15}),o.a.createElement(Sa.a,{title:a.lastMessage||"",arrow:!0},o.a.createElement("span",{style:{maxWidth:180,overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap",display:"inline-block"}},a.lastMessage?a.lastMessage.length>40?a.lastMessage.substring(0,40)+"...":a.lastMessage:"Sem mensagem"))),t&&o.a.createElement(Fe.a,{label:t.name,className:r.tagChip,size:"small"}),o.a.createElement(b.a,{className:r.cardButton,onClick:()=>n(a.uuid),startIcon:o.a.createElement(vo.a,{size:18}),fullWidth:!0},"Ver Ticket")))};var lu=()=>{const e=ru(),a=Object(S.useHistory)(),[t,r]=Object(n.useState)([]),[i]=Object(n.useState)(!1),[l,s]=Object(n.useState)(!0),[c,d]=Object(n.useState)({lanes:[]}),[m,u]=Object(n.useState)([]),{user:p}=Object(n.useContext)(H),f=p.queues.map(e=>e.UserQueue.queueId);Object(n.useEffect)(()=>{(async()=>{try{s(!0);const e=(await B.get("/tags/kanban")).data.lista||[];r(e),await b(f),s(!1)}catch(e){s(!1),y.toast.error("Erro ao buscar tags do Kanban")}})()},[]);const b=async e=>{try{const{data:a}=await B.get("/ticket/kanban",{params:{queueIds:JSON.stringify(e),teste:!0}});u(a.tickets)}catch(a){u([]),y.toast.error("Erro ao buscar tickets do Kanban")}},E=(e,a)=>({id:e.id.toString(),label:"Ticket n\xba "+e.id,description:e.lastMessage||"Sem mensagem",ticket:e,tag:a}),h=e=>{a.push("/tickets/"+e)};Object(n.useEffect)(()=>{(e=>{const a=m.filter(e=>0===e.tags.length),n=[{id:"lane0",title:z.a.t("Em aberto"),label:a.length.toString(),cards:a.map(e=>E(e))},...t.map(e=>{const a=m.filter(a=>a.tags.map(e=>e.id).includes(e.id));return{id:e.id.toString(),title:e.name,label:a.length.toString(),cards:a.map(a=>E(a,e)),style:{backgroundColor:e.color,color:"white"}}})];d({lanes:n})})()},[t,m,i]);return l?o.a.createElement(g.a,{className:e.loadingBox},o.a.createElement(be.a,{color:"primary"})):o.a.createElement("div",{className:e.root},o.a.createElement(ou.a,{data:c,onCardMoveAcrossLanes:async(e,a,t)=>{try{await B.delete("/ticket-tags/"+t),y.toast.success("Ticket Tag Removido!"),await B.put(`/ticket-tags/${t}/${a}`),y.toast.success("Ticket Tag Adicionado com Sucesso!")}catch(n){y.toast.error("Erro ao mover o ticket!")}},style:{backgroundColor:"rgba(252, 252, 252, 0.03)"},components:{LaneHeader:a=>{let{title:t,label:n,id:r}=a;return o.a.createElement("div",{className:e.kanbanHeader},o.a.createElement("span",{className:e.kanbanTitle,style:{color:"lane0"===r?"#5D3FD3":"#fff"}},t),o.a.createElement("span",{className:e.kanbanBadge},n))},Card:e=>{let{ticket:a,tag:t}=e;return o.a.createElement(iu,{ticket:a,tag:t,onViewTicket:h})}},draggable:!0,laneStyle:{borderRadius:12,margin:8,minWidth:320,maxWidth:370,background:"#fff",boxShadow:"0 2px 12px rgba(93,63,211,0.07)"},cardStyle:{borderRadius:10,background:"#fafbfc",boxShadow:"0 1px 6px rgba(93,63,211,0.08)"}}))},su=t(712),cu=t.n(su),du=t(385),mu=t(1302),uu=t(1303),pu=t(1304),gu=t(1305),fu=t(1306),bu=t(1307),Eu=t(1308);const hu=Object(Y.a)(e=>({formControl:{margin:e.spacing(1),minWidth:120}}));var xu=()=>{const e=hu(),[a,t]=Object(n.useState)([]);return Object(n.useEffect)(()=>{(async()=>{try{const{data:e}=await B.get("/queue");t(e)}catch(e){y.toast.error("QUEUESELETSINGLE >>> "+e)}})()},[]),o.a.createElement("div",{style:{marginTop:6}},o.a.createElement(ke.a,{variant:"outlined",className:e.FormControl,margin:"dense",fullWidth:!0},o.a.createElement("div",null,o.a.createElement(f.a,null,z.a.t("queueSelect.inputLabel")),o.a.createElement(Ae.b,{as:Ne.a,label:z.a.t("queueSelect.inputLabel"),name:"queueId",labelId:"queue-selection-label",id:"queue-selection",fullWidth:!0},a.map(e=>o.a.createElement(oe.a,{key:e.id,value:e.id},e.name))))))};const yu=Object(Y.a)(e=>({root:{display:"flex",flexWrap:"wrap"},dialog:{"& .MuiDialog-paper":{borderRadius:12}},dialogTitle:{background:"linear-gradient(90deg, #5D3FD3 0%, #6151FF 100%)",color:"white",padding:e.spacing(3),"& h2":{fontSize:"1.5rem",fontWeight:600}},dialogContent:{padding:e.spacing(3)},dialogActions:{padding:e.spacing(2,3)},multFieldLine:{display:"flex","& > *:not(:last-child)":{marginRight:e.spacing(1)}},btnWrapper:{position:"relative"},buttonProgress:{color:Ie.a[500],position:"absolute",top:"50%",left:"50%",marginTop:-12,marginLeft:-12},formControl:{margin:e.spacing(1),minWidth:120},colorAdorment:{width:20,height:20},textField:{"& .MuiOutlinedInput-root":{borderRadius:8},marginBottom:e.spacing(2)},formSection:{marginBottom:e.spacing(3)},sectionTitle:{color:"#5D3FD3",fontWeight:600,fontSize:"1rem",marginBottom:e.spacing(2),position:"relative",display:"inline-block","&::after":{content:'""',position:"absolute",width:"30%",height:2,bottom:-4,left:0,backgroundColor:"#5D3FD3",borderRadius:2}},fieldIcon:{color:"#5D3FD3"},saveButton:{backgroundColor:"#5D3FD3",color:"white","&:hover":{backgroundColor:"#4b32a8"},borderRadius:8,padding:"8px 24px",fontWeight:600},cancelButton:{color:"#5D3FD3",borderColor:"#5D3FD3","&:hover":{borderColor:"#4b32a8",backgroundColor:"rgba(93, 63, 211, 0.04)"},borderRadius:8,padding:"8px 24px",fontWeight:600},infoPanel:{backgroundColor:"rgba(93, 63, 211, 0.05)",padding:e.spacing(2),borderRadius:8,marginBottom:e.spacing(3)},infoIcon:{color:"#5D3FD3",marginRight:e.spacing(1),fontSize:20},selectRoot:{"& .MuiOutlinedInput-root":{borderRadius:8},marginBottom:e.spacing(2)},helpText:{fontSize:"0.75rem",color:"rgba(0, 0, 0, 0.6)",marginTop:-e.spacing(1.5),marginBottom:e.spacing(2)}})),vu=Oe.b().shape({name:Oe.d().min(5,"Muito curto!").max(100,"Muito longo!").required("Obrigat\xf3rio"),prompt:Oe.d().min(50,"Muito curto!").required("Descreva o treinamento para Intelig\xeancia Artificial"),voice:Oe.d().required("Informe o modo para Voz"),maxTokens:Oe.a().required("Informe o n\xfamero m\xe1ximo de tokens"),temperature:Oe.a().required("Informe a temperatura"),apiKey:Oe.d().required("Informe a API Key"),queueId:Oe.a().required("Informe a fila"),maxMessages:Oe.a().required("Informe o n\xfamero m\xe1ximo de mensagens")});var Cu=e=>{let{open:a,onClose:t,promptId:r}=e;const i=yu(),[l,s]=Object(n.useState)("texto"),[c,d]=Object(n.useState)(!1),m=()=>{d(!c)},u={name:"",prompt:"",voice:"texto",voiceKey:"",voiceRegion:"",maxTokens:100,temperature:1,apiKey:"",queueId:null,maxMessages:10},[p,E]=Object(n.useState)(u);Object(n.useEffect)(()=>{(async()=>{if(r)try{const{data:e}=await B.get("/prompt/"+r);E(a=>({...a,...e})),s(e.voice)}catch(e){y.toast.error((null===e||void 0===e?void 0:e.message)||"Erro desconhecido")}else E(u)})()},[r,a]);const h=()=>{E(u),s("texto"),t()},x=e=>{s(e.target.value)};return o.a.createElement("div",{className:i.root},o.a.createElement(xe.a,{open:a,onClose:h,maxWidth:"md",scroll:"paper",fullWidth:!0,className:i.dialog},o.a.createElement(ye.a,{id:"form-dialog-title",className:i.dialogTitle},r?""+z.a.t("promptModal.title.edit"):""+z.a.t("promptModal.title.add")),o.a.createElement(Ae.e,{initialValues:p,enableReinitialize:!0,validationSchema:vu,onSubmit:(e,a)=>{setTimeout(()=>{(async e=>{const a={...e,voice:l};if(e.queueId){try{r?await B.put("/prompt/"+r,a):await B.post("/prompt",a),y.toast.success(z.a.t("promptModal.success"))}catch(t){y.toast.error((null===t||void 0===t?void 0:t.message)||"Erro desconhecido")}h()}else y.toast.error("Informe o setor")})(e),a.setSubmitting(!1)},400)}},e=>{let{touched:a,errors:t,isSubmitting:n,values:s}=e;return o.a.createElement(Ae.d,{style:{width:"100%"}},o.a.createElement(ve.a,{dividers:!0,className:i.dialogContent},o.a.createElement(wa.a,{className:i.infoPanel,elevation:0},o.a.createElement(f.a,{variant:"body2"},o.a.createElement("span",{className:i.infoIcon},"\u2139\ufe0f")," Os prompts permitem que voc\xea configure como a IA do OpenAI ir\xe1 interagir em suas conversas. Defina as instru\xe7\xf5es de comportamento, tom de voz e conhecimentos espec\xedficos para seu atendimento.")),o.a.createElement("div",{className:i.formSection},o.a.createElement(f.a,{className:i.sectionTitle},"Informa\xe7\xf5es B\xe1sicas"),o.a.createElement(Ae.b,{as:Ce.a,label:z.a.t("promptModal.form.name"),name:"name",error:a.name&&Boolean(t.name),helperText:a.name&&t.name,variant:"outlined",margin:"dense",fullWidth:!0,className:i.textField,InputProps:{startAdornment:o.a.createElement(Do.a,{position:"start"},o.a.createElement(Fl.a,{className:i.fieldIcon}))}}),o.a.createElement(ke.a,{fullWidth:!0,margin:"dense",variant:"outlined",className:i.textField},o.a.createElement(Ae.b,{as:Ce.a,label:z.a.t("promptModal.form.apikey"),name:"apiKey",type:c?"text":"password",error:a.apiKey&&Boolean(t.apiKey),helperText:a.apiKey&&t.apiKey,variant:"outlined",margin:"dense",fullWidth:!0,InputProps:{startAdornment:o.a.createElement(Do.a,{position:"start"},o.a.createElement(mu.a,{className:i.fieldIcon})),endAdornment:o.a.createElement(Do.a,{position:"end"},o.a.createElement(J.a,{onClick:m},c?o.a.createElement(uu.a,null):o.a.createElement(pu.a,null)))}}))),o.a.createElement("div",{className:i.formSection},o.a.createElement(f.a,{className:i.sectionTitle},"Configura\xe7\xe3o do Prompt"),o.a.createElement(Ae.b,{as:Ce.a,label:z.a.t("promptModal.form.prompt"),name:"prompt",error:a.prompt&&Boolean(t.prompt),helperText:a.prompt&&t.prompt,variant:"outlined",margin:"dense",fullWidth:!0,rows:8,multiline:!0,className:i.textField,placeholder:"Descreva como a IA deve se comportar, que tipo de respostas deve fornecer, e qual conhecimento espec\xedfico ela deve demonstrar..."}),o.a.createElement(f.a,{className:i.helpText},"Seja detalhado nas instru\xe7\xf5es para obter melhores resultados da IA"),o.a.createElement(g.a,{mb:2},o.a.createElement(f.a,{variant:"subtitle2",style:{marginBottom:8}},"Selecione a fila de atendimento"),o.a.createElement(xu,null))),o.a.createElement("div",{className:i.formSection},o.a.createElement(f.a,{className:i.sectionTitle},"Configura\xe7\xe3o de Voz"),o.a.createElement(_t.a,{container:!0,spacing:2},o.a.createElement(_t.a,{item:!0,xs:12,md:6},o.a.createElement(ke.a,{fullWidth:!0,variant:"outlined",className:i.selectRoot},o.a.createElement(Se.a,null,z.a.t("promptModal.form.voice")),o.a.createElement(Ne.a,{id:"type-select",labelWidth:60,name:"voice",value:l,onChange:x,multiple:!1,startAdornment:o.a.createElement(Do.a,{position:"start"},o.a.createElement(gu.a,{className:i.fieldIcon}))},o.a.createElement(oe.a,{key:"texto",value:"texto"},"Texto"),o.a.createElement(oe.a,{key:"pt-BR-FranciscaNeural",value:"pt-BR-FranciscaNeural"},"Francisa"),o.a.createElement(oe.a,{key:"pt-BR-AntonioNeural",value:"pt-BR-AntonioNeural"},"Ant\xf4nio"),o.a.createElement(oe.a,{key:"pt-BR-BrendaNeural",value:"pt-BR-BrendaNeural"},"Brenda"),o.a.createElement(oe.a,{key:"pt-BR-DonatoNeural",value:"pt-BR-DonatoNeural"},"Donato"),o.a.createElement(oe.a,{key:"pt-BR-ElzaNeural",value:"pt-BR-ElzaNeural"},"Elza"),o.a.createElement(oe.a,{key:"pt-BR-FabioNeural",value:"pt-BR-FabioNeural"},"F\xe1bio"),o.a.createElement(oe.a,{key:"pt-BR-GiovannaNeural",value:"pt-BR-GiovannaNeural"},"Giovanna"),o.a.createElement(oe.a,{key:"pt-BR-HumbertoNeural",value:"pt-BR-HumbertoNeural"},"Humberto"),o.a.createElement(oe.a,{key:"pt-BR-JulioNeural",value:"pt-BR-JulioNeural"},"Julio"),o.a.createElement(oe.a,{key:"pt-BR-LeilaNeural",value:"pt-BR-LeilaNeural"},"Leila"),o.a.createElement(oe.a,{key:"pt-BR-LeticiaNeural",value:"pt-BR-LeticiaNeural"},"Let\xedcia"),o.a.createElement(oe.a,{key:"pt-BR-ManuelaNeural",value:"pt-BR-ManuelaNeural"},"Manuela"),o.a.createElement(oe.a,{key:"pt-BR-NicolauNeural",value:"pt-BR-NicolauNeural"},"Nicolau"),o.a.createElement(oe.a,{key:"pt-BR-ValerioNeural",value:"pt-BR-ValerioNeural"},"Val\xe9rio"),o.a.createElement(oe.a,{key:"pt-BR-YaraNeural",value:"pt-BR-YaraNeural"},"Yara")))),"texto"!==l&&o.a.createElement(o.a.Fragment,null,o.a.createElement(_t.a,{item:!0,xs:12,md:6},o.a.createElement(Ae.b,{as:Ce.a,label:z.a.t("promptModal.form.voiceKey"),name:"voiceKey",error:a.voiceKey&&Boolean(t.voiceKey),helperText:a.voiceKey&&t.voiceKey,variant:"outlined",margin:"dense",fullWidth:!0,className:i.textField})),o.a.createElement(_t.a,{item:!0,xs:12,md:6},o.a.createElement(Ae.b,{as:Ce.a,label:z.a.t("promptModal.form.voiceRegion"),name:"voiceRegion",error:a.voiceRegion&&Boolean(t.voiceRegion),helperText:a.voiceRegion&&t.voiceRegion,variant:"outlined",margin:"dense",fullWidth:!0,className:i.textField}))))),o.a.createElement("div",{className:i.formSection},o.a.createElement(f.a,{className:i.sectionTitle},"Par\xe2metros Avan\xe7ados"),o.a.createElement(_t.a,{container:!0,spacing:2},o.a.createElement(_t.a,{item:!0,xs:12,md:4},o.a.createElement(Ae.b,{as:Ce.a,label:z.a.t("promptModal.form.temperature"),name:"temperature",error:a.temperature&&Boolean(t.temperature),helperText:a.temperature&&t.temperature,variant:"outlined",margin:"dense",fullWidth:!0,className:i.textField,InputProps:{startAdornment:o.a.createElement(Do.a,{position:"start"},o.a.createElement(fu.a,{className:i.fieldIcon}))}}),o.a.createElement(f.a,{className:i.helpText},"Valores mais altos (ex: 1) geram respostas mais criativas")),o.a.createElement(_t.a,{item:!0,xs:12,md:4},o.a.createElement(Ae.b,{as:Ce.a,label:z.a.t("promptModal.form.max_tokens"),name:"maxTokens",error:a.maxTokens&&Boolean(t.maxTokens),helperText:a.maxTokens&&t.maxTokens,variant:"outlined",margin:"dense",fullWidth:!0,className:i.textField,InputProps:{startAdornment:o.a.createElement(Do.a,{position:"start"},o.a.createElement(bu.a,{className:i.fieldIcon}))}}),o.a.createElement(f.a,{className:i.helpText},"Limite m\xe1ximo de caracteres gerados por resposta")),o.a.createElement(_t.a,{item:!0,xs:12,md:4},o.a.createElement(Ae.b,{as:Ce.a,label:z.a.t("promptModal.form.max_messages"),name:"maxMessages",error:a.maxMessages&&Boolean(t.maxMessages),helperText:a.maxMessages&&t.maxMessages,variant:"outlined",margin:"dense",fullWidth:!0,className:i.textField,InputProps:{startAdornment:o.a.createElement(Do.a,{position:"start"},o.a.createElement(Eu.a,{className:i.fieldIcon}))}}),o.a.createElement(f.a,{className:i.helpText},"N\xfamero m\xe1ximo de mensagens consideradas no hist\xf3rico"))))),o.a.createElement(we.a,{className:i.dialogActions},o.a.createElement(b.a,{onClick:h,color:"secondary",disabled:n,variant:"outlined",className:i.cancelButton},z.a.t("promptModal.buttons.cancel")),o.a.createElement(b.a,{type:"submit",color:"primary",disabled:n,variant:"contained",className:`${i.btnWrapper} ${i.saveButton}`},r?""+z.a.t("promptModal.buttons.okEdit"):""+z.a.t("promptModal.buttons.okAdd"),n&&o.a.createElement(be.a,{size:24,className:i.buttonProgress}))))})))};const ku=Object(Y.a)(e=>({container:{paddingTop:e.spacing(4),paddingBottom:e.spacing(4),paddingLeft:e.spacing(4),paddingRight:e.spacing(4),[e.breakpoints.down("sm")]:{paddingLeft:e.spacing(1),paddingRight:e.spacing(1)}},mainPaper:{flex:1,padding:e.spacing(2),overflowY:"scroll",...e.scrollbarStyles,marginTop:e.spacing(4)},headerContainer:{display:"flex",alignItems:"center",padding:e.spacing(4),[e.breakpoints.down("sm")]:{flexDirection:"column",alignItems:"flex-start"}},searchContainer:{flex:1,maxWidth:480,display:"flex",[e.breakpoints.down("sm")]:{width:"100%",maxWidth:"100%",marginBottom:e.spacing(1)}},searchInput:{flex:1,"& .MuiOutlinedInput-root":{borderRadius:10}},buttonsContainer:{display:"flex",alignItems:"center",[e.breakpoints.down("sm")]:{width:"100%"}},addButton:{marginLeft:e.spacing(2),height:40,whiteSpace:"nowrap",backgroundColor:"#5D3FD3","&:hover":{backgroundColor:"#4b32a8"},borderRadius:10,[e.breakpoints.down("sm")]:{width:"100%",marginLeft:0}},redBox:{backgroundColor:"rgba(244, 67, 54, 0.08)",padding:e.spacing(2),borderRadius:10,marginBottom:e.spacing(2),border:"1px solid rgba(244, 67, 54, 0.5)"},redBoxTitle:{color:e.palette.error.main,fontWeight:600,marginBottom:e.spacing(1)},redBoxText:{color:"rgba(0, 0, 0, 0.7)",marginBottom:e.spacing(1)},linksContainer:{marginTop:e.spacing(1),padding:e.spacing(1),backgroundColor:"rgba(0, 0, 0, 0.03)",borderRadius:4},linkItem:{display:"flex",alignItems:"center",marginBottom:e.spacing(.5),"& a":{color:e.palette.primary.main,textDecoration:"none","&:hover":{textDecoration:"underline"}}},cardContainer:{minWidth:280,transition:"all 0.2s ease-in-out","&:hover":{transform:"translateY(-5px)",boxShadow:e.shadows[5]}},promptCard:{position:"relative",padding:e.spacing(2),borderRadius:10,border:"1px solid rgba(0, 0, 0, 0.09)",height:"100%",display:"flex",flexDirection:"column"},promptName:{fontWeight:600,marginBottom:e.spacing(1),color:"#5D3FD3"},promptDetails:{display:"flex",flexDirection:"column",marginTop:e.spacing(1),flexGrow:1,"& > div":{marginBottom:e.spacing(1)}},detailItem:{display:"flex",alignItems:"center",marginBottom:e.spacing(.5),"& svg":{marginRight:e.spacing(1),color:"#5D3FD3",fontSize:20}},queueChip:{backgroundColor:"rgba(93, 63, 211, 0.1)",color:"#5D3FD3",fontWeight:500,marginTop:e.spacing(1)},cardActions:{justifyContent:"flex-end",paddingTop:e.spacing(1),marginTop:"auto"},actionButton:{padding:e.spacing(1),color:"#555",transition:"all 0.3s ease","&:hover":{backgroundColor:"rgba(93, 63, 211, 0.08)",transform:"scale(1.1)"}},editButton:{color:"#5D3FD3","&:hover":{color:"#4930A8"}},deleteButton:{color:"#F44336","&:hover":{color:"#D32F2F"}},gridContainer:{marginTop:e.spacing(2)},noPromptsContainer:{display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",padding:e.spacing(8),width:"100%"},noPromptsIcon:{fontSize:80,color:"rgba(0, 0, 0, 0.2)",marginBottom:e.spacing(2)},noPromptsText:{color:"rgba(0, 0, 0, 0.5)",fontSize:"1.1rem",maxWidth:300,textAlign:"center"},pageTitle:{color:"#5D3FD3",fontWeight:600,fontSize:"1.5rem",marginBottom:e.spacing(2),position:"relative",display:"inline-block","&::after":{content:'""',position:"absolute",width:"40%",height:3,bottom:-5,left:0,backgroundColor:"#5D3FD3",borderRadius:2}},titleContainer:{display:"flex",alignItems:"center"}})),Su=(e,a)=>{if("LOAD_PROMPTS"===a.type){const t=a.payload,n=[];return t.forEach(a=>{const t=e.findIndex(e=>e.id===a.id);-1!==t?e[t]=a:n.push(a)}),[...e,...n]}if("UPDATE_PROMPTS"===a.type){const t=a.payload,n=e.findIndex(e=>e.id===t.id);return-1!==n?(e[n]=t,[...e]):[t,...e]}if("DELETE_PROMPT"===a.type){const t=a.payload,n=e.findIndex(e=>e.id===t);return-1!==n&&e.splice(n,1),[...e]}if("RESET"===a.type)return[]};var Nu=()=>{const e=ku(),[a,t]=Object(n.useReducer)(Su,[]),[r,i]=Object(n.useState)(!1),[l,s]=Object(n.useState)(""),[c,d]=Object(n.useState)([]),[m,u]=Object(n.useState)(!1),[p,E]=Object(n.useState)(null),[h,x]=Object(n.useState)(!1),{user:v}=Object(n.useContext)(H),{getPlanCompany:C}=ua(),k=Object(du.useHistory)(),S=v.companyId,N=Object(n.useContext)(j);Object(n.useEffect)(()=>{!async function(){(await C(void 0,S)).plan.useOpenAi||(y.toast.error("Esta empresa n\xe3o possui permiss\xe3o para acessar essa p\xe1gina! Estamos lhe redirecionando."),setTimeout(()=>{k.push("/")},1e3))}()},[]),Object(n.useEffect)(()=>{(async()=>{i(!0);try{const{data:e}=await B.get("/prompt");t({type:"LOAD_PROMPTS",payload:e.prompts}),i(!1)}catch(e){y.toast.error(e.message),i(!1)}})()},[]),Object(n.useEffect)(()=>{if(""!==l.trim()){const e=a.filter(e=>e.name.toLowerCase().includes(l.toLowerCase()));d(e)}else d(a)},[l,a]),Object(n.useEffect)(()=>{const e=N.getSocket(S);return e.on(`company-${S}-prompt`,e=>{"update"!==e.action&&"create"!==e.action||t({type:"UPDATE_PROMPTS",payload:e.prompt}),"delete"===e.action&&t({type:"DELETE_PROMPT",payload:e.promptId})}),()=>{e.disconnect()}},[S,N]);return o.a.createElement(Zn.a,{maxWidth:"xl",className:e.container},o.a.createElement(Pt,{title:p&&`${z.a.t("prompts.confirmationModal.deleteTitle")} ${p.name}?`,open:h,onClose:()=>{x(!1),E(null)},onConfirm:()=>(async e=>{try{const{data:a}=await B.delete("/prompt/"+e);y.toast.info(z.a.t(a.message))}catch(a){y.toast.error(a.message)}E(null)})(p.id)},z.a.t("prompts.confirmationModal.deleteMessage")),o.a.createElement(Cu,{open:m,onClose:()=>{u(!1),E(null)},promptId:null===p||void 0===p?void 0:p.id}),o.a.createElement(no,null,o.a.createElement("div",{className:e.titleContainer},o.a.createElement(f.a,{className:e.pageTitle},z.a.t("prompts.title"))),o.a.createElement(ro,null,o.a.createElement("div",{className:e.headerContainer},o.a.createElement("div",{className:e.searchContainer},o.a.createElement(Ce.a,{placeholder:z.a.t("contacts.searchPlaceholder"),type:"search",value:l,onChange:e=>{s(e.target.value)},className:e.searchInput,variant:"outlined",size:"small",InputProps:{startAdornment:o.a.createElement(Do.a,{position:"start"},o.a.createElement(jo.a,{style:{color:"gray"}}))}}),o.a.createElement(b.a,{variant:"contained",color:"primary",className:e.addButton,onClick:()=>{u(!0),E(null)},startIcon:o.a.createElement(vr.a,null)},z.a.t("prompts.buttons.add")))))),o.a.createElement(wa.a,{className:e.mainPaper,variant:"outlined"},0!==c.length||r?o.a.createElement(_t.a,{container:!0,spacing:3,className:e.gridContainer},c.map(a=>{var t;return o.a.createElement(Na.a,{in:!0,key:a.id,timeout:500},o.a.createElement(_t.a,{item:!0,xs:12,sm:6,md:4},o.a.createElement(hn.a,{className:e.cardContainer},o.a.createElement(pr.a,{className:e.promptCard},o.a.createElement(f.a,{variant:"h6",className:e.promptName},a.name),o.a.createElement(Fe.a,{label:(null===(t=a.queue)||void 0===t?void 0:t.name)||"Sem fila",className:e.queueChip,size:"small",icon:o.a.createElement(cu.a,{style:{fontSize:16}})}),o.a.createElement(Z.a,{style:{margin:"12px 0"}}),o.a.createElement("div",{className:e.promptDetails},o.a.createElement(g.a,{className:e.detailItem},o.a.createElement(Zm.a,{fontSize:"small"}),o.a.createElement(f.a,{variant:"body2"},"M\xe1x. Tokens: ",a.maxTokens)),o.a.createElement(g.a,{className:e.detailItem},o.a.createElement(Dm.a,{fontSize:"small"}),o.a.createElement(f.a,{variant:"body2"},"Temperatura: ",a.temperature)),o.a.createElement(g.a,{className:e.detailItem},o.a.createElement(f.a,{variant:"body2",style:{color:"#555"}},"Modo:"," ",o.a.createElement("strong",null,"texto"===a.voice?"Texto":"Voz")))),o.a.createElement(vl.a,{className:e.cardActions},o.a.createElement(Sa.a,{title:z.a.t("prompts.table.actions.edit"),arrow:!0,placement:"top"},o.a.createElement(J.a,{size:"small",onClick:()=>(e=>{E(e),u(!0)})(a),className:`${e.actionButton} ${e.editButton}`},o.a.createElement(Po.a,null))),o.a.createElement(Sa.a,{title:z.a.t("prompts.table.actions.delete"),arrow:!0,placement:"top"},o.a.createElement(J.a,{size:"small",onClick:()=>{x(!0),E(a)},className:`${e.actionButton} ${e.deleteButton}`},o.a.createElement(an.a,null))))))))}),r&&[...Array(3)].map((e,a)=>o.a.createElement(_t.a,{item:!0,xs:12,sm:6,md:4,key:"skeleton-"+a},o.a.createElement(yn.a,{variant:"rect",width:"100%",height:200,animation:"wave",style:{borderRadius:10}})))):o.a.createElement("div",{className:e.noPromptsContainer},o.a.createElement(Dm.a,{className:e.noPromptsIcon}),o.a.createElement(f.a,{className:e.noPromptsText},l?"Nenhum prompt encontrado com esse termo.":"Nenhum prompt cadastrado. Clique no bot\xe3o acima para adicionar."))))},wu=t(713),Iu=t.n(wu),Au=t(714),Tu=t.n(Au),Du=t(715),Ou=t.n(Du),ju=t(716),Ru=t.n(ju);const Fu=Object(Y.a)(e=>({root:{display:"flex",flexWrap:"wrap",gap:4},textField:{marginRight:e.spacing(1),flex:1},btnWrapper:{position:"relative"},buttonProgress:{color:Ie.a[500],position:"absolute",top:"50%",left:"50%",marginTop:-12,marginLeft:-12},btnLeft:{display:"flex",marginRight:"auto",marginLeft:12},colorAdorment:{width:20,height:20},dialog:{"& .MuiDialog-paper":{borderRadius:12}},dialogTitle:{background:"linear-gradient(90deg, #5D3FD3 0%, #6151FF 100%)",color:"white",padding:e.spacing(3),"& h2":{fontSize:"1.5rem",fontWeight:600}},dialogContent:{padding:e.spacing(3)},dialogActions:{padding:e.spacing(2,3)},formControl:{width:"100%","& .MuiOutlinedInput-root":{borderRadius:8},marginBottom:e.spacing(2)},saveButton:{backgroundColor:"#5D3FD3",color:"white","&:hover":{backgroundColor:"#4b32a8"},borderRadius:8,padding:"8px 24px",fontWeight:600},cancelButton:{color:"#5D3FD3",borderColor:"#5D3FD3","&:hover":{borderColor:"#4b32a8",backgroundColor:"rgba(93, 63, 211, 0.04)"},borderRadius:8,padding:"8px 24px",fontWeight:600},sectionTitle:{color:"#5D3FD3",fontWeight:600,fontSize:"1rem",marginBottom:e.spacing(2),position:"relative",display:"inline-block","&::after":{content:'""',position:"absolute",width:"30%",height:2,bottom:-4,left:0,backgroundColor:"#5D3FD3",borderRadius:2}},infoPanel:{backgroundColor:"rgba(93, 63, 211, 0.05)",padding:e.spacing(2),borderRadius:8,marginBottom:e.spacing(3)},formSection:{marginBottom:e.spacing(3)},helpText:{fontSize:"0.75rem",color:"rgba(0, 0, 0, 0.6)",marginTop:-e.spacing(1.5),marginBottom:e.spacing(2)}})),Mu=Oe.b().shape({name:Oe.d().min(2,"Nome muito curto!").max(50,"Nome muito longo!").required("O nome \xe9 obrigat\xf3rio")});var Pu=e=>{let{open:a,onClose:t,integrationId:r}=e;const i=Fu(),l={type:"typebot",name:"",projectName:"",jsonContent:"",language:"",urlN8N:"",typebotDelayMessage:1e3,typebotExpires:1,typebotKeywordFinish:"",typebotKeywordRestart:"",typebotRestartMessage:"",typebotSlug:"",typebotUnknownMessage:""},[s,c]=Object(n.useState)(l);Object(n.useEffect)(()=>((async()=>{if(r)try{const{data:e}=await B.get("/queueIntegration/"+r);c(a=>({...a,...e}))}catch(e){y.toast.error((null===e||void 0===e?void 0:e.message)||"Erro desconhecido")}})(),()=>{c({type:"dialogflow",name:"",projectName:"",jsonContent:"",language:"",urlN8N:"",typebotDelayMessage:1e3})}),[r,a]);const d=()=>{t(),c(l)};return o.a.createElement("div",{className:i.root},o.a.createElement(xe.a,{open:a,onClose:d,fullWidth:!0,maxWidth:"md",scroll:"paper",className:i.dialog},o.a.createElement(ye.a,{className:i.dialogTitle},r?"Editar Integra\xe7\xe3o":"Nova Integra\xe7\xe3o"),o.a.createElement(Ae.e,{initialValues:s,enableReinitialize:!0,validationSchema:Mu,onSubmit:(e,a,t)=>{setTimeout(()=>{(async e=>{try{"n8n"!==e.type&&"webhook"!==e.type&&"typebot"!==e.type||(e.projectName=e.name),r?(await B.put("/queueIntegration/"+r,e),y.toast.success("Integra\xe7\xe3o atualizada com sucesso!")):(await B.post("/queueIntegration",e),y.toast.success("Integra\xe7\xe3o criada com sucesso!")),d()}catch(a){y.toast.error(a.message)}})(e),a.setSubmitting(!1)},400)}},e=>{let{touched:a,errors:t,isSubmitting:n,values:l}=e;return o.a.createElement(Ae.d,null,o.a.createElement(ve.a,{dividers:!0,className:i.dialogContent},o.a.createElement(wa.a,{className:i.infoPanel,elevation:0},o.a.createElement(f.a,{variant:"body2"},o.a.createElement("span",null,"\u2139\ufe0f")," As integra\xe7\xf5es permitem conectar seu atendimento a ferramentas externas como chatbots, automa\xe7\xf5es e webhooks.")),o.a.createElement("div",{className:i.formSection},o.a.createElement(f.a,{className:i.sectionTitle},"Informa\xe7\xf5es B\xe1sicas"),o.a.createElement(_t.a,{container:!0,spacing:2},o.a.createElement(_t.a,{item:!0,xs:12,md:6},o.a.createElement(ke.a,{variant:"outlined",className:i.formControl,margin:"dense",fullWidth:!0},o.a.createElement(Se.a,{id:"type-selection-input-label"},"Tipo de Integra\xe7\xe3o"),o.a.createElement(Ae.b,{as:Ne.a,label:"Tipo de Integra\xe7\xe3o",name:"type",labelId:"profile-selection-label",error:a.type&&Boolean(t.type),helpertext:a.type&&t.type,id:"type",required:!0},o.a.createElement(oe.a,{value:"dialogflow"},"DialogFlow"),o.a.createElement(oe.a,{value:"n8n"},"N8N"),o.a.createElement(oe.a,{value:"webhook"},"WebHooks"),o.a.createElement(oe.a,{value:"typebot"},"Typebot")))),o.a.createElement(_t.a,{item:!0,xs:12,md:6},o.a.createElement(Ae.b,{as:Ce.a,label:"Nome da Integra\xe7\xe3o",autoFocus:!0,name:"name",fullWidth:!0,error:a.name&&Boolean(t.name),helpertext:a.name&&t.name,variant:"outlined",margin:"dense",className:i.formControl})))),"dialogflow"===l.type&&o.a.createElement("div",{className:i.formSection},o.a.createElement(f.a,{className:i.sectionTitle},"Configura\xe7\xe3o do DialogFlow"),o.a.createElement(_t.a,{container:!0,spacing:2},o.a.createElement(_t.a,{item:!0,xs:12,md:6},o.a.createElement(ke.a,{variant:"outlined",className:i.formControl,margin:"dense",fullWidth:!0},o.a.createElement(Se.a,{id:"language-selection-input-label"},"Idioma"),o.a.createElement(Ae.b,{as:Ne.a,label:"Idioma",name:"language",labelId:"profile-selection-label",fullWidth:!0,error:a.language&&Boolean(t.language),helpertext:a.language&&t.language},o.a.createElement(oe.a,{value:"pt-BR"},"Portugu\xeas (Brasil)"),o.a.createElement(oe.a,{value:"en"},"Ingl\xeas"),o.a.createElement(oe.a,{value:"es"},"Espanhol")))),o.a.createElement(_t.a,{item:!0,xs:12},o.a.createElement(Ae.b,{as:Ce.a,label:"Nome do Projeto",name:"projectName",variant:"outlined",margin:"dense",fullWidth:!0,className:i.formControl,error:a.projectName&&Boolean(t.projectName),helpertext:a.projectName&&t.projectName})),o.a.createElement(_t.a,{item:!0,xs:12},o.a.createElement(Ae.b,{as:Ce.a,label:"JSON de Autentica\xe7\xe3o",multiline:!0,rows:5,name:"jsonContent",variant:"outlined",margin:"dense",fullWidth:!0,className:i.formControl,error:a.jsonContent&&Boolean(t.jsonContent),helpertext:a.jsonContent&&t.jsonContent}),o.a.createElement(f.a,{className:i.helpText},"Cole aqui o conte\xfado do JSON com as credenciais de servi\xe7o do DialogFlow"))),o.a.createElement(g.a,{display:"flex",justifyContent:"flex-start",mt:2},o.a.createElement(b.a,{color:"primary",variant:"outlined",onClick:e=>(async(e,a)=>{try{const{projectName:e,jsonContent:t,language:n}=a;await B.post("/queueIntegration/testSession",{projectName:e,jsonContent:t,language:n}),y.toast.success("Teste de sess\xe3o realizado com sucesso!")}catch(t){y.toast.error((null===t||void 0===t?void 0:t.message)||"Erro desconhecido")}})(0,l)},"Testar Conex\xe3o"))),"n8n"===l.type&&o.a.createElement("div",{className:i.formSection},o.a.createElement(f.a,{className:i.sectionTitle},"Configura\xe7\xe3o do N8N"),o.a.createElement(_t.a,{container:!0,spacing:2},o.a.createElement(_t.a,{item:!0,xs:12},o.a.createElement(Ae.b,{as:Ce.a,label:"URL do N8N",name:"urlN8N",variant:"outlined",margin:"dense",fullWidth:!0,className:i.formControl,placeholder:"https://seu-n8n.com/webhook/...",error:a.urlN8N&&Boolean(t.urlN8N),helpertext:a.urlN8N&&t.urlN8N}),o.a.createElement(f.a,{className:i.helpText},"Informe a URL completa do webhook do N8N")))),"webhook"===l.type&&o.a.createElement("div",{className:i.formSection},o.a.createElement(f.a,{className:i.sectionTitle},"Configura\xe7\xe3o do Webhook"),o.a.createElement(_t.a,{container:!0,spacing:2},o.a.createElement(_t.a,{item:!0,xs:12},o.a.createElement(Ae.b,{as:Ce.a,label:"URL do Webhook",name:"urlN8N",variant:"outlined",margin:"dense",fullWidth:!0,className:i.formControl,placeholder:"https://exemplo.com/api/webhook",error:a.urlN8N&&Boolean(t.urlN8N),helpertext:a.urlN8N&&t.urlN8N}),o.a.createElement(f.a,{className:i.helpText},"Informe a URL que receber\xe1 as notifica\xe7\xf5es")))),"typebot"===l.type&&o.a.createElement("div",{className:i.formSection},o.a.createElement(f.a,{className:i.sectionTitle},"Configura\xe7\xe3o do Typebot"),o.a.createElement(_t.a,{container:!0,spacing:2},o.a.createElement(_t.a,{item:!0,xs:12,md:6},o.a.createElement(Ae.b,{as:Ce.a,label:"URL do Typebot",name:"urlN8N",variant:"outlined",margin:"dense",fullWidth:!0,className:i.formControl,placeholder:"https://bot.typebot.io/meu-bot",error:a.urlN8N&&Boolean(t.urlN8N),helpertext:a.urlN8N&&t.urlN8N})),o.a.createElement(_t.a,{item:!0,xs:12,md:6},o.a.createElement(Ae.b,{as:Ce.a,label:"Slug do Typebot",name:"typebotSlug",variant:"outlined",margin:"dense",fullWidth:!0,className:i.formControl,error:a.typebotSlug&&Boolean(t.typebotSlug),helpertext:a.typebotSlug&&t.typebotSlug})),o.a.createElement(_t.a,{item:!0,xs:12,md:6},o.a.createElement(Ae.b,{as:Ce.a,label:"Tempo de Expira\xe7\xe3o (dias)",name:"typebotExpires",variant:"outlined",margin:"dense",fullWidth:!0,className:i.formControl,type:"number",error:a.typebotExpires&&Boolean(t.typebotExpires),helpertext:a.typebotExpires&&t.typebotExpires})),o.a.createElement(_t.a,{item:!0,xs:12,md:6},o.a.createElement(Ae.b,{as:Ce.a,label:"Atraso da Mensagem (ms)",name:"typebotDelayMessage",variant:"outlined",margin:"dense",fullWidth:!0,className:i.formControl,type:"number",error:a.typebotDelayMessage&&Boolean(t.typebotDelayMessage),helpertext:a.typebotDelayMessage&&t.typebotDelayMessage})),o.a.createElement(_t.a,{item:!0,xs:12},o.a.createElement(Z.a,{style:{margin:"12px 0"}}),o.a.createElement(f.a,{variant:"subtitle2",style:{marginBottom:8}},"Configura\xe7\xf5es de Comandos")),o.a.createElement(_t.a,{item:!0,xs:12,md:6},o.a.createElement(Ae.b,{as:Ce.a,label:"Palavra-chave para Reiniciar",name:"typebotKeywordRestart",variant:"outlined",margin:"dense",fullWidth:!0,className:i.formControl,error:a.typebotKeywordRestart&&Boolean(t.typebotKeywordRestart),helpertext:a.typebotKeywordRestart&&t.typebotKeywordRestart})),o.a.createElement(_t.a,{item:!0,xs:12,md:6},o.a.createElement(Ae.b,{as:Ce.a,label:"Palavra-chave para Finalizar",name:"typebotKeywordFinish",variant:"outlined",margin:"dense",fullWidth:!0,className:i.formControl,error:a.typebotKeywordFinish&&Boolean(t.typebotKeywordFinish),helpertext:a.typebotKeywordFinish&&t.typebotKeywordFinish})),o.a.createElement(_t.a,{item:!0,xs:12},o.a.createElement(Ae.b,{as:Ce.a,label:"Mensagem de Rein\xedcio",name:"typebotRestartMessage",variant:"outlined",margin:"dense",fullWidth:!0,multiline:!0,rows:2,className:i.formControl,error:a.typebotRestartMessage&&Boolean(t.typebotRestartMessage),helpertext:a.typebotRestartMessage&&t.typebotRestartMessage})),o.a.createElement(_t.a,{item:!0,xs:12},o.a.createElement(Ae.b,{as:Ce.a,label:"Mensagem para Comandos Desconhecidos",name:"typebotUnknownMessage",variant:"outlined",margin:"dense",fullWidth:!0,multiline:!0,rows:2,className:i.formControl,error:a.typebotUnknownMessage&&Boolean(t.typebotUnknownMessage),helpertext:a.typebotUnknownMessage&&t.typebotUnknownMessage}))))),o.a.createElement(we.a,{className:i.dialogActions},o.a.createElement(b.a,{onClick:d,variant:"outlined",className:i.cancelButton,disabled:n},"Cancelar"),o.a.createElement(b.a,{type:"submit",color:"primary",disabled:n,variant:"contained",className:i.saveButton},r?"Atualizar":"Adicionar",n&&o.a.createElement(be.a,{size:24,className:i.buttonProgress}))))})))};const Bu=(e,a)=>{if("LOAD_INTEGRATIONS"===a.type){const t=a.payload,n=[];return t.forEach(a=>{const t=e.findIndex(e=>e.id===a.id);-1!==t?e[t]=a:n.push(a)}),[...e,...n]}if("UPDATE_INTEGRATIONS"===a.type){const t=a.payload,n=e.findIndex(e=>e.id===t.id);return-1!==n?(e[n]=t,[...e]):[t,...e]}if("DELETE_INTEGRATION"===a.type){const t=a.payload,n=e.findIndex(e=>e.id===t);return-1!==n&&e.splice(n,1),[...e]}if("RESET"===a.type)return[]},zu=Object(Y.a)(e=>({mainPaper:{flex:1,padding:e.spacing(3),background:"linear-gradient(135deg, #f7f8fa 60%, #e5e0fa 100%)",minHeight:"100vh"},avatar:{width:"140px",height:"40px",borderRadius:4},searchContainer:{flex:1,maxWidth:480,display:"flex",[e.breakpoints.down("sm")]:{width:"100%",maxWidth:"100%",marginBottom:e.spacing(1)}},searchInput:{flex:1,"& .MuiOutlinedInput-root":{borderRadius:10}},addButton:{position:"fixed",bottom:e.spacing(3),right:e.spacing(3),borderRadius:"50%",width:56,height:56,background:"linear-gradient(90deg, #5D3FD3 0%, #7B68EE 100%)",boxShadow:"0 4px 12px rgba(93,63,211,0.15)","&:hover":{background:"linear-gradient(90deg, #4930A8 0%, #6A5ACD 100%)"},zIndex:10},headerContainer:{display:"flex",alignItems:"center",[e.breakpoints.down("sm")]:{flexDirection:"column",alignItems:"flex-start"}},buttonsContainer:{display:"flex",alignItems:"center",[e.breakpoints.down("sm")]:{width:"100%"}},actionButton:{padding:e.spacing(1),color:"#555",transition:"all 0.3s ease","&:hover":{backgroundColor:"rgba(93, 63, 211, 0.08)",transform:"scale(1.1)"}},editButton:{color:"#5D3FD3","&:hover":{color:"#4930A8"}},deleteButton:{color:"#F44336","&:hover":{color:"#D32F2F"}},noIntegrationsContainer:{display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",padding:e.spacing(8),width:"100%"},noIntegrationsIcon:{fontSize:80,color:"rgba(0, 0, 0, 0.2)",marginBottom:e.spacing(2)},noIntegrationsText:{color:"rgba(0, 0, 0, 0.5)",fontSize:"1.1rem",maxWidth:300,textAlign:"center"},pageTitle:{color:"#5D3FD3",fontWeight:600,fontSize:"1.5rem",marginBottom:e.spacing(2),position:"relative",display:"inline-block","&::after":{content:'""',position:"absolute",width:"40%",height:3,bottom:-5,left:0,backgroundColor:"#5D3FD3",borderRadius:2}},titleContainer:{display:"flex",alignItems:"center"},card:{background:"#fff",borderRadius:22,boxShadow:"0 4px 20px rgba(93,63,211,0.10)",padding:e.spacing(3),margin:"0 auto",transition:"all 0.3s",position:"relative",display:"flex",flexDirection:"column",height:"100%","&:hover":{transform:"translateY(-4px)",boxShadow:"0 8px 30px rgba(93,63,211,0.15)"}},cardHeader:{display:"flex",alignItems:"center",gap:12,marginBottom:e.spacing(2),justifyContent:"space-between"},cardTitle:{fontWeight:700,fontSize:20,color:"#5D3FD3",display:"flex",alignItems:"center",gap:8},cardType:{display:"inline-flex",alignItems:"center",gap:6,borderRadius:12,padding:"6px 14px",fontWeight:600,fontSize:13,background:"#e3e6fd",color:"#5D3FD3",boxShadow:"0 2px 8px rgba(93,63,211,0.08)"},actions:{display:"flex",gap:8,marginTop:e.spacing(2)},container:{paddingTop:e.spacing(4),paddingBottom:e.spacing(4),paddingLeft:e.spacing(4),paddingRight:e.spacing(4),[e.breakpoints.down("sm")]:{paddingLeft:e.spacing(1),paddingRight:e.spacing(1)}}}));var Wu=()=>{const e=zu(),[a,t]=Object(n.useState)(!1),[r,i]=Object(n.useState)(1),[l,s]=Object(n.useState)(!1),[c,d]=Object(n.useState)(null),[m,u]=Object(n.useState)(null),[p,b]=Object(n.useState)(!1),[E,h]=Object(n.useState)(!1),[x,v]=Object(n.useState)(""),[C,k]=Object(n.useReducer)(Bu,[]),{user:S}=Object(n.useContext)(H),{getPlanCompany:N}=ua(),w=S.companyId,I=Object(du.useHistory)(),A=Object(n.useContext)(j);Object(n.useEffect)(()=>{!async function(){(await N(void 0,w)).plan.useIntegrations||(y.toast.error("Esta empresa n\xe3o possui permiss\xe3o para acessar essa p\xe1gina! Estamos lhe redirecionando."),setTimeout(()=>{I.push("/")},1e3))}()},[]),Object(n.useEffect)(()=>{k({type:"RESET"}),i(1)},[x]),Object(n.useEffect)(()=>{t(!0);const e=setTimeout(()=>{(async()=>{try{const{data:e}=await B.get("/queueIntegration/",{params:{searchParam:x,pageNumber:r}});k({type:"LOAD_INTEGRATIONS",payload:e.queueIntegrations}),s(e.hasMore),t(!1)}catch(e){y.toast.errorr(e.message)}})()},500);return()=>clearTimeout(e)},[x,r]),Object(n.useEffect)(()=>{const e=localStorage.getItem("companyId"),a=A.getSocket(e);return a.on(`company-${e}-queueIntegration`,e=>{"update"!==e.action&&"create"!==e.action||k({type:"UPDATE_INTEGRATIONS",payload:e.queueIntegration}),"delete"===e.action&&k({type:"DELETE_INTEGRATION",payload:+e.integrationId})}),()=>{a.disconnect()}},[A]);return o.a.createElement(Zn.a,{maxWidth:"xl",className:e.container},o.a.createElement(wa.a,{className:e.mainPaper,elevation:0},o.a.createElement(J.a,{className:e.addButton,color:"primary",onClick:()=>{d(null),b(!0)}},o.a.createElement(Kn.a,{size:24,color:"#fff"})),o.a.createElement(Pt,{title:m&&`Excluir integra\xe7\xe3o ${m.name}?`,open:E,onClose:()=>h(!1),onConfirm:()=>(async e=>{try{await B.delete("/queueIntegration/"+e),y.toast.success(z.a.t("queueIntegration.toasts.deleted"))}catch(a){y.toast.errorr(a.message)}u(null),v(""),i(1)})(m.id)},"Essa a\xe7\xe3o n\xe3o pode ser desfeita. Deseja continuar?"),o.a.createElement(Pu,{open:p,onClose:()=>{d(null),b(!1)},integrationId:c&&c.id}),o.a.createElement(g.a,{mb:4,display:"flex",alignItems:"center",gap:2},o.a.createElement(oa.a,{size:32,style:{color:"#5D3FD3"}}),o.a.createElement(f.a,{className:e.pageTitle,component:"h1"},"Integra\xe7\xf5es"," ",o.a.createElement("span",{style:{color:"#888",fontWeight:400}},"(",C.length,")"))),0!==C.length||a?o.a.createElement(_t.a,{container:!0,spacing:3},C.map(a=>o.a.createElement(_t.a,{item:!0,xs:12,sm:6,md:4,key:a.id},o.a.createElement(wa.a,{className:e.card},o.a.createElement("div",{className:e.cardHeader},o.a.createElement(g.a,{display:"flex",alignItems:"center",gap:1},o.a.createElement(Le.a,{src:"dialogflow"===a.type?Iu.a:"n8n"===a.type?Tu.a:"webhook"===a.type?Ru.a:Ou.a,className:e.avatar,variant:"rounded"}),o.a.createElement("span",{className:e.cardTitle},a.name)),o.a.createElement("span",{className:e.cardType},a.type)),o.a.createElement(Z.a,{style:{margin:"10px 0"}}),o.a.createElement(g.a,{className:e.actions},o.a.createElement(Sa.a,{title:"Editar",arrow:!0,placement:"top"},o.a.createElement(J.a,{size:"small",onClick:()=>(e=>{d(e),b(!0)})(a)},o.a.createElement(De.a,{size:18}))),o.a.createElement(Sa.a,{title:"Excluir",arrow:!0,placement:"top"},o.a.createElement(J.a,{size:"small",onClick:()=>{h(!0),u(a)}},o.a.createElement(Jn.a,{size:18})))))))):o.a.createElement("div",{className:e.noIntegrationsContainer},o.a.createElement(oa.a,{className:e.noIntegrationsIcon}),o.a.createElement(f.a,{className:e.noIntegrationsText},x?"Nenhuma integra\xe7\xe3o encontrada com esse termo.":"Nenhuma integra\xe7\xe3o cadastrada. Clique no bot\xe3o abaixo para adicionar."))))},Lu=t(717),qu=t.n(Lu);const Hu=t(1083),Uu=Object(Y.a)(e=>({root:{display:"flex",flexWrap:"wrap"},dialog:{borderRadius:12,padding:e.spacing(1)},dialogTitle:{background:"linear-gradient(90deg, #5D3FD3 0%, #6A5ACD 100%)",color:"#ffffff",padding:e.spacing(2),marginBottom:e.spacing(2),borderRadius:"12px 12px 0 0",display:"flex",alignItems:"center",justifyContent:"space-between"},closeButton:{color:"white"},titleText:{fontWeight:600,fontSize:"1.2rem"},multFieldLine:{display:"flex","& > *:not(:last-child)":{marginRight:e.spacing(1)}},btnWrapper:{position:"relative"},buttonProgress:{color:Ie.a[500],position:"absolute",top:"50%",left:"50%",marginTop:-12,marginLeft:-12},formControl:{margin:e.spacing(1),minWidth:120},colorAdorment:{width:20,height:20},shortcodeInput:{"& .MuiOutlinedInput-root":{borderRadius:10,"&:hover fieldset":{borderColor:"#5D3FD3"},"&.Mui-focused fieldset":{borderColor:"#5D3FD3"}},"& .MuiFormLabel-root.Mui-focused":{color:"#5D3FD3"}},messageInput:{"& .MuiOutlinedInput-root":{borderRadius:10,"&:hover fieldset":{borderColor:"#5D3FD3"},"&.Mui-focused fieldset":{borderColor:"#5D3FD3"}},"& .MuiFormLabel-root.Mui-focused":{color:"#5D3FD3"}},attachButton:{backgroundColor:"#5D3FD3",color:"white",borderRadius:10,padding:e.spacing(1,2),transition:"all 0.3s ease","&:hover":{backgroundColor:"#4b32a8",transform:"translateY(-2px)",boxShadow:e.shadows[3]}},cancelButton:{borderRadius:10,padding:e.spacing(1,2),transition:"all 0.3s ease","&:hover":{backgroundColor:"rgba(244, 67, 54, 0.08)",transform:"translateY(-2px)"}},saveButton:{backgroundColor:"#5D3FD3",color:"white",borderRadius:10,padding:e.spacing(1,2),transition:"all 0.3s ease","&:hover":{backgroundColor:"#4b32a8",transform:"translateY(-2px)",boxShadow:e.shadows[3]}},dialogActions:{padding:e.spacing(2),justifyContent:"space-between"},filePreview:{backgroundColor:"rgba(93, 63, 211, 0.08)",borderRadius:10,padding:e.spacing(1,2),display:"flex",alignItems:"center",justifyContent:"space-between",marginTop:e.spacing(1)},fileName:{display:"flex",alignItems:"center",color:"#5D3FD3",fontWeight:500,"& svg":{marginRight:e.spacing(1),color:"#5D3FD3"}},deleteButton:{color:"#F44336","&:hover":{backgroundColor:"rgba(244, 67, 54, 0.08)"}},variablesSection:{marginTop:e.spacing(2),padding:e.spacing(2),backgroundColor:"#f8f9fa",borderRadius:10,border:"1px dashed #5D3FD3"},variablesTitle:{display:"flex",alignItems:"center",fontSize:"0.9rem",color:"#555",marginBottom:e.spacing(1),"& svg":{marginRight:e.spacing(1),color:"#5D3FD3"}},variableChips:{display:"flex",flexWrap:"wrap","& > *":{margin:e.spacing(.5),backgroundColor:"rgba(93, 63, 211, 0.08)",color:"#5D3FD3",fontWeight:500,cursor:"pointer",transition:"all 0.3s ease","&:hover":{backgroundColor:"rgba(93, 63, 211, 0.15)",transform:"translateY(-2px)"}}}})),Vu=Oe.b().shape({shortcode:Oe.d().required("Obrigat\xf3rio")});var Gu=e=>{let{open:a,onClose:t,quickemessageId:r,reload:i}=e;const l=Uu(),{user:s}=Object(n.useContext)(H),{profile:c}=s,d=Object(n.useRef)(),m={shortcode:"",message:"",geral:!1,status:!0},[u,p]=Object(n.useState)(!1),[E,h]=Object(n.useState)(m),[x,v]=Object(n.useState)(null),C=Object(n.useRef)(null);Object(n.useEffect)(()=>{try{(async()=>{if(!r)return;const{data:e}=await B.get("/quick-messages/"+r);h(a=>({...a,...e}))})()}catch(e){y.toast.error(e.message)}},[r,a]);const S=()=>{h(m),v(null),t()},N=async(e,a)=>{const t=d.current,n=t.value.substring(0,t.selectionStart),o=t.value.substring(t.selectionEnd),r=t.selectionStart+e.length;a("message",`${n}${e}${o}`),await new Promise(e=>setTimeout(e,100)),d.current.setSelectionRange(r,r)};return o.a.createElement("div",{className:l.root},o.a.createElement(Pt,{title:z.a.t("quickMessages.confirmationModal.deleteTitle"),open:u,onClose:()=>p(!1),onConfirm:async()=>{x&&(y.toast.error("Erro ao excluir m\xeddia"),C.current.value=null),E.mediaPath&&(await B.delete(`/quick-messages/${E.id}/media-upload`),h(e=>({...e,mediaPath:null})),y.toast.success(z.a.t("quickMessages.toasts.deleted")),"function"==typeof i&&i())}},z.a.t("quickMessages.confirmationModal.deleteMessage")),o.a.createElement(xe.a,{open:a,onClose:S,maxWidth:"sm",fullWidth:!0,scroll:"paper",PaperProps:{className:l.dialog,elevation:8},TransitionComponent:Na.a,transitionDuration:300},o.a.createElement(ye.a,{disableTypography:!0,className:l.dialogTitle},o.a.createElement(f.a,{className:l.titleText},r?z.a.t("quickMessages.dialog.edit"):z.a.t("quickMessages.dialog.add")),o.a.createElement(J.a,{onClick:S,className:l.closeButton},o.a.createElement(ft.a,null))),o.a.createElement("div",{style:{display:"none"}},o.a.createElement("input",{type:"file",ref:C,onChange:e=>(e=>{const a=Object(k.head)(e.target.files);a&&v(a)})(e)})),o.a.createElement(Ae.e,{initialValues:E,enableReinitialize:!0,validationSchema:Vu,onSubmit:(e,a)=>{setTimeout(()=>{(async e=>{const a={...e,isMedia:!0,mediaPath:x?String(x.name).replace(/ /g,"_"):e.mediaPath?Hu.basename(e.mediaPath).replace(/ /g,"_"):null};try{if(r){if(await B.put("/quick-messages/"+r,a),null!=x){const e=new FormData;e.append("typeArch","quickMessage"),e.append("file",x),await B.post(`/quick-messages/${r}/media-upload`,e)}}else{const{data:e}=await B.post("/quick-messages",a);if(null!=x){const a=new FormData;a.append("typeArch","quickMessage"),a.append("file",x),await B.post(`/quick-messages/${e.id}/media-upload`,a)}}y.toast.success(z.a.t("quickMessages.toasts.success")),"function"==typeof i&&i()}catch(t){y.toast.error(t.message)}S()})(e),a.setSubmitting(!1)},400)}},e=>{let{touched:a,errors:t,isSubmitting:n,setFieldValue:i,values:s}=e;return o.a.createElement(Ae.d,null,o.a.createElement(ve.a,null,o.a.createElement(_t.a,{spacing:3,container:!0},o.a.createElement(_t.a,{xs:12,item:!0},o.a.createElement(Ae.b,{as:Ce.a,autoFocus:!0,label:z.a.t("quickMessages.dialog.shortcode"),name:"shortcode",error:a.shortcode&&Boolean(t.shortcode),helperText:a.shortcode&&t.shortcode,variant:"outlined",InputProps:{startAdornment:o.a.createElement(f.a,{variant:"h6",style:{color:"#5D3FD3",marginRight:8}},"!")},fullWidth:!0,className:l.shortcodeInput})),o.a.createElement(_t.a,{xs:12,item:!0},o.a.createElement(Ae.b,{as:Ce.a,label:z.a.t("quickMessages.dialog.message"),name:"message",inputRef:d,error:a.message&&Boolean(t.message),helperText:a.message&&t.message,variant:"outlined",multiline:!0,rows:7,fullWidth:!0,className:l.messageInput,placeholder:z.a.t("quickMessages.dialog.messagePlaceholder")})),o.a.createElement(_t.a,{xs:12,item:!0},o.a.createElement(g.a,{className:l.variablesSection},o.a.createElement(f.a,{className:l.variablesTitle},o.a.createElement(qu.a,null),z.a.t("messageVariablesPicker.label")),o.a.createElement(g.a,{className:l.variableChips},o.a.createElement(Sa.a,{title:"{name}",arrow:!0,placement:"top"},o.a.createElement(Fe.a,{label:z.a.t("messageVariablesPicker.vars.contactName"),onClick:()=>N("{{name}}",i)})),o.a.createElement(Sa.a,{title:"{{firstName}}",arrow:!0,placement:"top"},o.a.createElement(Fe.a,{label:z.a.t("messageVariablesPicker.vars.contactFirstName"),onClick:()=>N("{{firstName}}",i)})),o.a.createElement(Sa.a,{title:"{{ms}}",arrow:!0,placement:"top"},o.a.createElement(Fe.a,{label:z.a.t("messageVariablesPicker.vars.greeting"),onClick:()=>N("{{ms}}",i)})),o.a.createElement(Sa.a,{title:"{{protocol}}",arrow:!0,placement:"top"},o.a.createElement(Fe.a,{label:z.a.t("messageVariablesPicker.vars.protocolNumber"),onClick:()=>N("{{protocol}}",i)})),o.a.createElement(Sa.a,{title:"{{date}}",arrow:!0,placement:"top"},o.a.createElement(Fe.a,{label:z.a.t("messageVariablesPicker.vars.date"),onClick:()=>N("{{date}}",i)})),o.a.createElement(Sa.a,{title:"{{hour}}",arrow:!0,placement:"top"},o.a.createElement(Fe.a,{label:z.a.t("messageVariablesPicker.vars.hour"),onClick:()=>N("{{hour}}",i)}))))),(E.mediaPath||x)&&o.a.createElement(_t.a,{xs:12,item:!0},o.a.createElement(wa.a,{elevation:0,className:l.filePreview},o.a.createElement(f.a,{className:l.fileName},o.a.createElement(Ec.a,null),x?x.name:E.mediaName),o.a.createElement(J.a,{onClick:()=>p(!0),className:l.deleteButton,size:"small"},o.a.createElement(an.a,null)))))),o.a.createElement(Z.a,null),o.a.createElement(we.a,{className:l.dialogActions},o.a.createElement("div",null,!x&&!E.mediaPath&&o.a.createElement(b.a,{color:"primary",onClick:()=>C.current.click(),disabled:n,className:l.attachButton,startIcon:o.a.createElement(Ec.a,null)},z.a.t("quickMessages.buttons.attach"))),o.a.createElement("div",null,o.a.createElement(b.a,{onClick:S,disabled:n,className:l.cancelButton,style:{marginRight:8}},z.a.t("quickMessages.buttons.cancel")),o.a.createElement(b.a,{type:"submit",disabled:n,className:l.saveButton,startIcon:r?o.a.createElement(rn.a,null):o.a.createElement(vr.a,null)},r?z.a.t("quickMessages.buttons.edit"):z.a.t("quickMessages.buttons.add"),n&&o.a.createElement(be.a,{size:24,className:l.buttonProgress})))))})))};const _u=(e,a)=>{if("LOAD_QUICKMESSAGES"===a.type){const t=a.payload,n=[];return Object(k.isArray)(t)&&t.forEach(a=>{const t=e.findIndex(e=>e.id===a.id);-1!==t?e[t]=a:n.push(a)}),[...e,...n]}if("UPDATE_QUICKMESSAGES"===a.type){const t=a.payload,n=e.findIndex(e=>e.id===t.id);return-1!==n?(e[n]=t,[...e]):[t,...e]}if("DELETE_QUICKMESSAGE"===a.type){const t=a.payload,n=e.findIndex(e=>e.id===t);return-1!==n&&e.splice(n,1),[...e]}if("RESET"===a.type)return[]},Ku=Object(Y.a)(e=>({mainPaper:{flex:1,padding:e.spacing(2),overflowY:"scroll",...e.scrollbarStyles,marginTop:e.spacing(4)},headerContainer:{display:"flex",alignItems:"center",padding:e.spacing(4),[e.breakpoints.down("sm")]:{flexDirection:"column",alignItems:"flex-start"}},searchContainer:{flex:1,maxWidth:480,display:"flex",[e.breakpoints.down("sm")]:{width:"100%",maxWidth:"100%",marginBottom:e.spacing(1)}},searchInput:{flex:1,"& .MuiOutlinedInput-root":{borderRadius:10}},buttonsContainer:{display:"flex",alignItems:"center",[e.breakpoints.down("sm")]:{width:"100%"}},addButton:{marginLeft:e.spacing(2),height:40,whiteSpace:"nowrap",backgroundColor:"#5D3FD3","&:hover":{backgroundColor:"#4b32a8"},borderRadius:10,[e.breakpoints.down("sm")]:{width:"100%",marginLeft:0}},cardContainer:{minWidth:280,transition:"all 0.2s ease-in-out","&:hover":{transform:"translateY(-5px)",boxShadow:e.shadows[5]}},quickMessageCard:{position:"relative",padding:e.spacing(2),borderRadius:10,border:"1px solid rgba(0, 0, 0, 0.09)"},shortcode:{fontWeight:600,marginBottom:e.spacing(1),textShadow:"1px 1px 1px rgba(0,0,0,0.2)"},messageContent:{height:100,overflow:"hidden",textOverflow:"ellipsis",display:"-webkit-box","-webkit-line-clamp":3,"-webkit-box-orient":"vertical",fontSize:"0.9rem",color:"rgba(0, 0, 0, 0.7)",marginBottom:e.spacing(1)},mediaIndicator:{display:"flex",alignItems:"center",fontSize:"0.8rem",color:"#555",marginTop:e.spacing(1)},cardActions:{justifyContent:"flex-end",paddingTop:0},actionButton:{padding:e.spacing(1),color:"#555",transition:"all 0.3s ease","&:hover":{backgroundColor:"rgba(93, 63, 211, 0.08)",transform:"scale(1.1)"}},editButton:{color:"#5D3FD3","&:hover":{color:"#4930A8"}},deleteButton:{color:"#F44336","&:hover":{color:"#D32F2F"}},gridContainer:{marginTop:e.spacing(2)},noMessagesContainer:{display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",padding:e.spacing(8),width:"100%"},noMessagesIcon:{fontSize:80,color:"rgba(0, 0, 0, 0.2)",marginBottom:e.spacing(2)},noMessagesText:{color:"rgba(0, 0, 0, 0.5)",fontSize:"1.1rem",maxWidth:300,textAlign:"center"},pageTitle:{color:"#5D3FD3",fontWeight:600,fontSize:"1.5rem",marginBottom:e.spacing(2),position:"relative",display:"inline-block","&::after":{content:'""',position:"absolute",width:"40%",height:3,bottom:-5,left:0,backgroundColor:"#5D3FD3",borderRadius:2}},titleContainer:{display:"flex",alignItems:"center"},container:{paddingTop:e.spacing(4),paddingBottom:e.spacing(4),paddingLeft:e.spacing(4),paddingRight:e.spacing(4),[e.breakpoints.down("sm")]:{paddingLeft:e.spacing(1),paddingRight:e.spacing(1)}}}));var Qu=()=>{const e=Ku(),[a,t]=Object(n.useState)(!1),[r,i]=Object(n.useState)(1),[l,s]=Object(n.useState)(!1),[c,d]=Object(n.useState)(null),[m,u]=Object(n.useState)(null),[p,g]=Object(n.useState)(!1),[E,h]=Object(n.useState)(!1),[x,v]=Object(n.useState)(""),[C,k]=Object(n.useReducer)(_u,[]),[S,N]=Object(n.useState)([]),{user:w}=Object(n.useContext)(H),{profile:I}=w,A=Object(n.useContext)(j);Object(n.useEffect)(()=>{k({type:"RESET"}),i(1)},[x]),Object(n.useEffect)(()=>{t(!0);const e=setTimeout(()=>{T()},500);return()=>clearTimeout(e)},[x,r]),Object(n.useEffect)(()=>{if(""!==x.trim()){const e=C.filter(e=>e.shortcode.toLowerCase().includes(x.toLowerCase())||e.message&&e.message.toLowerCase().includes(x.toLowerCase()));N(e)}else N(C)},[x,C]),Object(n.useEffect)(()=>{const e=w.companyId,a=A.getSocket(e);return a.on(`company${e}-quickemessage`,e=>{"update"!==e.action&&"create"!==e.action||k({type:"UPDATE_QUICKMESSAGES",payload:e.record}),"delete"===e.action&&k({type:"DELETE_QUICKMESSAGE",payload:+e.id})}),()=>{a.disconnect()}},[A,w.companyId]);const T=async()=>{try{w.companyId;const{data:e}=await B.get("/quick-messages",{params:{searchParam:x,pageNumber:r,userId:w.id}});k({type:"LOAD_QUICKMESSAGES",payload:e.records}),s(e.hasMore),t(!1)}catch(e){y.toast.error(e.message)}};return o.a.createElement(Zn.a,{maxWidth:"xl",className:e.container},o.a.createElement(Pt,{title:m&&`${z.a.t("quickMessages.confirmationModal.deleteTitle")} ${m.shortcode}?`,open:E,onClose:()=>h(!1),onConfirm:()=>(async e=>{try{await B.delete("/quick-messages/"+e),y.toast.success(z.a.t("quickemessages.toasts.deleted"))}catch(a){y.toast.error(a.message)}u(null),v(""),i(1),T(),k({type:"RESET"})})(m.id)},z.a.t("quickMessages.confirmationModal.deleteMessage")),o.a.createElement(Gu,{resetPagination:()=>{i(1),T()},open:p,onClose:()=>{d(null),g(!1),T()},"aria-labelledby":"form-dialog-title",quickemessageId:c&&c.id}),o.a.createElement(no,null,o.a.createElement("div",{className:e.titleContainer},o.a.createElement(f.a,{className:e.pageTitle},z.a.t("quickMessages.title"))),o.a.createElement(ro,null,o.a.createElement("div",{className:e.headerContainer},o.a.createElement("div",{className:e.searchContainer},o.a.createElement(Ce.a,{placeholder:z.a.t("quickMessages.searchPlaceholder"),type:"search",value:x,onChange:e=>{v(e.target.value.toLowerCase())},className:e.searchInput,variant:"outlined",size:"small",InputProps:{startAdornment:o.a.createElement(Do.a,{position:"start"},o.a.createElement(jo.a,{style:{color:"gray"}}))}}),o.a.createElement(b.a,{variant:"contained",color:"primary",className:e.addButton,onClick:()=>{d(null),g(!0)},startIcon:o.a.createElement(vr.a,null)},z.a.t("quickMessages.buttons.add")))))),o.a.createElement(wa.a,{className:e.mainPaper,variant:"outlined",onScroll:e=>{if(!l||a)return;const{scrollTop:t,scrollHeight:n,clientHeight:o}=e.currentTarget;n-(t+100)<o&&i(e=>e+1)}},0!==S.length||a?o.a.createElement(_t.a,{container:!0,spacing:3,className:e.gridContainer},S.map(a=>{const t=(()=>{const e=["#5D3FD3","#6A5ACD","#9370DB","#8A2BE2","#9932CC","#BA55D3","#7B68EE","#4B0082"];return e[Math.floor(Math.random()*e.length)]})();return o.a.createElement(Na.a,{in:!0,key:a.id,timeout:500},o.a.createElement(_t.a,{item:!0,xs:12,sm:6,md:4,lg:3},o.a.createElement(hn.a,{className:e.cardContainer,style:{borderLeft:"5px solid "+t}},o.a.createElement(pr.a,{className:e.quickMessageCard,style:{backgroundColor:t+"15"}},o.a.createElement(f.a,{variant:"h6",className:e.shortcode,style:{color:t}},"/",a.shortcode),o.a.createElement(f.a,{className:e.messageContent},a.message||z.a.t("quickMessages.noMessage")),a.mediaName&&o.a.createElement("div",{className:e.mediaIndicator},o.a.createElement(Rt.a,{style:{fontSize:"1rem",marginRight:"4px",color:t}}),a.mediaName)),o.a.createElement(vl.a,{className:e.cardActions},o.a.createElement(Sa.a,{title:z.a.t("quickMessages.buttons.edit"),arrow:!0,placement:"top"},o.a.createElement(J.a,{size:"small",onClick:()=>(d(a),void g(!0)),className:`${e.actionButton} ${e.editButton}`},o.a.createElement(Po.a,null))),o.a.createElement(Sa.a,{title:z.a.t("quickMessages.buttons.delete"),arrow:!0,placement:"top"},o.a.createElement(J.a,{size:"small",onClick:()=>{h(!0),u(a)},className:`${e.actionButton} ${e.deleteButton}`},o.a.createElement(an.a,null)))))))}),a&&[...Array(4)].map((e,a)=>o.a.createElement(_t.a,{item:!0,xs:12,sm:6,md:4,lg:3,key:"skeleton-"+a},o.a.createElement(yn.a,{variant:"rect",width:"100%",height:160,animation:"wave",style:{borderRadius:10}})))):o.a.createElement("div",{className:e.noMessagesContainer},o.a.createElement(Fa.a,{className:e.noMessagesIcon}),o.a.createElement(f.a,{className:e.noMessagesText},x?z.a.t("quickMessages.noMessagesFound"):z.a.t("quickMessages.noMessages")))))},Yu=t(1309),Xu=t(1310),$u=(t(1084),t(482));t(1088),t(1089),t(1090);const Ju={fontSize:"15px",fontWeight:600,overflow:"hidden",whiteSpace:"nowrap",textOverflow:"ellipsis",color:"#222",display:"flex",alignItems:"center",gap:8},Zu=Object($u.b)(w.a);var ep={date:"Data",time:"Hora",event:"Evento",allDay:"Dia Todo",week:"Semana",work_week:"Agendamentos",day:"Dia",month:"M\xeas",previous:"Anterior",next:"Pr\xf3ximo",yesterday:"Ontem",tomorrow:"Amanh\xe3",today:"Hoje",agenda:"Agenda",noEventsInRange:"N\xe3o h\xe1 agendamentos no per\xedodo.",showMore:function(e){return"+"+e+" mais"}};const ap=(e,a)=>{if("LOAD_SCHEDULES"===a.type)return[...e,...a.payload];if("UPDATE_SCHEDULES"===a.type){const t=a.payload,n=e.findIndex(e=>e.id===t.id);return-1!==n?(e[n]=t,[...e]):[t,...e]}if("DELETE_SCHEDULE"===a.type){const t=a.payload;return e.filter(e=>e.id!==t)}return"RESET"===a.type?[]:e},tp=Object(Y.a)(e=>({mainPaper:{flex:1,padding:e.spacing(1),overflowY:"scroll",...e.scrollbarStyles,background:"#faf9fd",borderRadius:16,boxShadow:"0 2px 12px rgba(93,63,211,0.07)",marginTop:e.spacing(2)},emptyBox:{display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",height:320,color:"#888",gap:12,background:"#fff",borderRadius:12,margin:e.spacing(4,0),boxShadow:"0 1px 6px rgba(93,63,211,0.06)"},addButton:{borderRadius:10,fontWeight:600,fontSize:16,padding:"10px 24px",textTransform:"none",background:"#5D3FD3",color:"#fff",boxShadow:"0 2px 8px rgba(93, 63, 211, 0.15)",transition:"all 0.2s","&:hover":{background:"#4930A8",boxShadow:"0 4px 12px rgba(93, 63, 211, 0.2)"},marginLeft:e.spacing(2)},searchInput:{borderRadius:10,background:"#fff",fontSize:15,minWidth:220,marginRight:e.spacing(2)},container:{paddingTop:e.spacing(4),paddingBottom:e.spacing(4),paddingLeft:e.spacing(4),paddingRight:e.spacing(4),[e.breakpoints.down("sm")]:{paddingLeft:e.spacing(1),paddingRight:e.spacing(1)}}}));var np=()=>{const e=tp(),{user:a}=Object(n.useContext)(H),[t,r]=Object(n.useState)(!1),[i,l]=Object(n.useState)(1),[s,c]=Object(n.useState)(!1),[d,m]=Object(n.useState)(null),[u,p]=Object(n.useState)(null),[E,h]=Object(n.useState)(!1),[x,v]=Object(n.useState)(""),[C,k]=Object(n.useReducer)(ap,[]),[S,N]=Object(n.useState)(!1),[w,I]=Object(n.useState)((A="contactId",+new URLSearchParams(window.location.search).get(A)));var A;const T=Object(n.useCallback)(async()=>{try{const{data:e}=await B.get("/schedules/",{params:{searchParam:x,pageNumber:i}});k({type:"LOAD_SCHEDULES",payload:e.schedules}),c(e.hasMore),r(!1)}catch(e){y.toast.error(e.message)}},[x,i]),D=Object(n.useCallback)(()=>{w&&R()},[w]),O=Object(n.useContext)(j);Object(n.useEffect)(()=>{k({type:"RESET"}),l(1)},[x]),Object(n.useEffect)(()=>{r(!0);const e=setTimeout(()=>{T()},500);return()=>clearTimeout(e)},[x,i,w,T,D]),Object(n.useEffect)(()=>{D();const e=O.getSocket(a.companyId);return e.on(`company${a.companyId}-schedule`,e=>{"update"!==e.action&&"create"!==e.action||k({type:"UPDATE_SCHEDULES",payload:e.schedule}),"delete"===e.action&&k({type:"DELETE_SCHEDULE",payload:+e.scheduleId})}),()=>{e.disconnect()}},[D,O,a]);const R=()=>{m(null),N(!0)},F=async e=>{try{await B.delete("/schedules/"+e),y.toast.success(z.a.t("schedules.toasts.deleted"))}catch(a){y.toast.error(a.message)}p(null),v(""),l(1),k({type:"RESET"}),l(1),await T()};return o.a.createElement(Zn.a,{maxWidth:"xl",className:e.container},o.a.createElement(Pt,{title:u&&""+z.a.t("schedules.confirmationModal.deleteTitle"),open:E,onClose:()=>h(!1),onConfirm:()=>F(u.id)},z.a.t("schedules.confirmationModal.deleteMessage")),o.a.createElement(nd,{open:S,onClose:()=>{m(null),N(!1)},reload:T,"aria-labelledby":"form-dialog-title",scheduleId:d&&d.id,contactId:w,cleanContact:()=>{I("")}}),o.a.createElement(no,null,o.a.createElement(tl,null,z.a.t("schedules.title")," (",C.length,")"),o.a.createElement(ro,null,o.a.createElement(Ce.a,{placeholder:z.a.t("contacts.searchPlaceholder"),type:"search",value:x,onChange:e=>{v(e.target.value.toLowerCase())},InputProps:{startAdornment:o.a.createElement(Do.a,{position:"start"},o.a.createElement(jo.a,{style:{color:"gray"}}))},className:e.searchInput,variant:"outlined",size:"small","aria-label":"Buscar agendamento"}),o.a.createElement(b.a,{variant:"contained",color:"primary",onClick:R,className:e.addButton,startIcon:o.a.createElement(Yu.a,{size:22}),"aria-label":"Adicionar agendamento"},z.a.t("schedules.buttons.add")))),o.a.createElement(wa.a,{className:e.mainPaper,variant:"outlined",onScroll:e=>{if(!s||t)return;const{scrollTop:a,scrollHeight:n,clientHeight:o}=e.currentTarget;n-(a+100)<o&&l(e=>e+1)}},t?o.a.createElement(g.a,{display:"flex",justifyContent:"center",alignItems:"center",height:400},o.a.createElement(be.a,{color:"primary"})):0===C.length?o.a.createElement(g.a,{className:e.emptyBox},o.a.createElement(Xu.a,{size:48}),o.a.createElement(f.a,{variant:"h6",style:{color:"#5D3FD3",fontWeight:600}},"Nenhum agendamento encontrado"),o.a.createElement(f.a,{variant:"body2"},'Clique em "Adicionar" para criar um novo agendamento.')):o.a.createElement($u.a,{messages:ep,formats:{agendaDateFormat:"DD/MM ddd",weekdayFormat:"dddd"},localizer:Zu,events:C.map(e=>({title:o.a.createElement("div",{className:"event-container"},o.a.createElement("span",{style:Ju},e.contact.name),o.a.createElement("span",{className:"event-icons"},o.a.createElement("span",{className:"edit-icon",onClick:a=>{a.stopPropagation(),(e=>{m(e),N(!0)})(e),N(!0)}},o.a.createElement(Fm.a,{size:18})),o.a.createElement("span",{className:"delete-icon",onClick:a=>{a.stopPropagation(),F(e.id)}},o.a.createElement(Jn.a,{size:18})))),start:new Date(e.sendAt),end:new Date(e.sendAt)})),startAccessor:"start",endAccessor:"end",style:{height:500}})))},op=t(730),rp=t(483),ip=t(731),lp=t.n(ip),sp=t(169);sp.default.div`
  footer {
    margin-top: 30px;
    display: flex;
    justify-content: space-between;
    align-items: center;
    width: 100%;

    @media (max-width: 768px) {
      flex-direction: column;
      .checkout-buttons {
        display: flex;
        flex-direction: column-reverse;
        width: 100%;

        button {
          width: 100%;
          margin-top: 16px;
          margin-left: 0;
        }
      }
    }

    button {
      margin-left: 16px;
    }
  }
`;const cp=sp.default.div`
  display: flex;
  align-items: baseline;

  span {
    color: #333;
    font-weight: bold;
  }

  strong {
    color: #333;
    font-size: 28px;
    margin-left: 5px;
  }

  @media (max-width: 768px) {
    min-width: 100%;
    justify-content: space-between;
  }
`,dp=sp.default.div`
  display: flex;
  flex-direction: column;
  justify-content: center;
  align-items: center;

  > h2 {
    text-align: center;
  }

  > svg {
    margin-top: 16px;
  }

  > span {
    margin-top: 24px;
    text-align: center;
  }

  > p,
  strong {
    margin-top: 8px;
    font-size: 9px;
    color: #999;
  }

  .copy-button {
    font-size: 14px;
    cursor: pointer;
    text-align: center;
    user-select: none;
    min-height: 56px;
    display: inline-flex;
    -webkit-box-pack: center;
    justify-content: center;
    -webkit-box-align: center;
    align-items: center;
    background-color: #f9f9f9;
    color: #000;
    -webkit-appearance: none !important;
    outline: none;
    margin-top: 16px;
    width: 256px;
    font-weight: 600;
    text-transform: uppercase;
    border: none;

    > span {
      margin-right: 8px;
    }
  }
`;sp.default.div`
  width: 100%;
  margin: 0 auto 0;
  max-width: 1110px;
  display: flex;
  flex-direction: column;
  -webkit-box-align: center;
  align-items: center;
  padding: 50px 95px;
  background: #fff;
  @media (max-width: 768px) {
    padding: 16px 24px;
`;var mp=function(e){const{pix:a}=e,[t]=Object(n.useState)(a.qrcode.qrcode),[r,i]=Object(n.useState)(!1),l=Object(S.useHistory)(),{dateToClient:s}=xa(),c=Object(n.useContext)(j);return Object(n.useEffect)(()=>{const e=localStorage.getItem("companyId");c.getSocket(e).on(`company-${e}-payment`,e=>{"CONCLUIDA"===e.action&&(y.toast.success(`Sua licen\xe7a foi renovada at\xe9 ${s(e.company.dueDate)}!`),setTimeout(()=>{l.push("/")},4e3))})},[l,c]),o.a.createElement(o.a.Fragment,null,o.a.createElement(cp,null,o.a.createElement("span",null,"TOTAL"),o.a.createElement("strong",null,"R$",a.valor.original.toLocaleString("pt-br",{minimumFractionDigits:2}))),o.a.createElement(dp,null,o.a.createElement(lp.a,{value:t}),o.a.createElement(op.CopyToClipboard,{text:t,onCopy:()=>{setTimeout(()=>{i(!1)},1e3),i(!0)}},o.a.createElement("button",{className:"copy-button",type:"button"},r?o.a.createElement(o.a.Fragment,null,o.a.createElement("span",null,"Copiado"),o.a.createElement(rp.a,{size:18})):o.a.createElement(o.a.Fragment,null,o.a.createElement("span",null,"Copiar c\xf3digo QR"),o.a.createElement(rp.b,{size:18})))),o.a.createElement("span",null,"Para finalizar, basta realizar o pagamento escaneando ou colando o c\xf3digo Pix acima :)")))};function up(e){const{errorText:a,...t}=e,[n,r]=Object(Ae.f)(e);return o.a.createElement(Ce.a,Object.assign({type:"text",error:r.touched&&r.error&&!0,helperText:function(){const[e,a]=Object(k.at)(r,"touched","error");if(e&&a)return a}()},n,t))}function pp(e){const{label:a,data:t,...n}=e,[r,i]=Object(Ae.f)(e),{value:l}=r,[s,c]=Object(k.at)(i,"touched","error"),d=s&&c&&!0;return o.a.createElement(ke.a,Object.assign({},n,{error:d}),o.a.createElement(Se.a,null,a),o.a.createElement(Ne.a,Object.assign({},r,{value:l||""}),t.map((e,a)=>o.a.createElement(oe.a,{key:a,value:e.value},e.label))),function(){if(d)return o.a.createElement(ks.a,null,c)}())}pp.defaultProps={data:[]};var gp=pp;t(100),t(1314),t(739);const fp=[{value:"BR",label:"Brasil"},{value:"usa",label:"United States"}];function bp(e){const{user:a}=Object(n.useContext)(H),[t,r]=Object(n.useState)(a.company.billingName),[i,l]=Object(n.useState)(a.company.addressZipCode),[s,c]=Object(n.useState)(a.company.addressStreet),[d,m]=Object(n.useState)(a.company.addressState),[u,p]=Object(n.useState)(a.company.addressCity),[g,b]=Object(n.useState)(a.company.addressDistrict),{formField:{firstName:E,address1:h,city:x,state:y,zipcode:v,country:C},setFieldValue:k}=e;return Object(n.useEffect)(()=>{k("firstName",t),k("zipcode",i),k("address2",s),k("state",d),k("city",u),k("country",g)},[]),o.a.createElement(o.a.Fragment,null,o.a.createElement(f.a,{variant:"h6",gutterBottom:!0},"Vamos precisar de algumas informa\xe7\xf5es"),o.a.createElement(_t.a,{container:!0,spacing:3},o.a.createElement(_t.a,{item:!0,xs:6,sm:6},o.a.createElement(up,{name:E.name,label:E.label,fullWidth:!0,value:t,onChange:e=>{r(e.target.value),k("firstName",e.target.value)}})),o.a.createElement(_t.a,{item:!0,xs:6,sm:6},o.a.createElement(gp,{name:C.name,label:C.label,data:fp,fullWidth:!0,value:g,onChange:e=>{b(e.target.value),k("country",e.target.value)}})),o.a.createElement(_t.a,{item:!0,xs:4},o.a.createElement(up,{name:v.name,label:v.label,fullWidth:!0,value:i,onChange:e=>{l(e.target.value),k("zipcode",e.target.value)}})),o.a.createElement(_t.a,{item:!0,xs:8},o.a.createElement(up,{name:h.name,label:h.label,fullWidth:!0,value:s,onChange:e=>{c(e.target.value),k("address2",e.target.value)}})),o.a.createElement(_t.a,{item:!0,xs:4},o.a.createElement(up,{name:y.name,label:y.label,fullWidth:!0,value:d,onChange:e=>{m(e.target.value),k("state",e.target.value)}})),o.a.createElement(_t.a,{item:!0,xs:8},o.a.createElement(up,{name:x.name,label:x.label,fullWidth:!0,value:u,onChange:e=>{p(e.target.value),k("city",e.target.value)}}))))}var Ep=t(733),hp=t.n(Ep);const xp=Object(Y.a)(e=>({"@global":{ul:{margin:0,padding:0,listStyle:"none"}},margin:{margin:e.spacing(1)},cardHeader:{backgroundColor:"light"===e.palette.type?e.palette.grey[200]:e.palette.grey[700]},cardPricing:{display:"flex",justifyContent:"center",alignItems:"baseline",marginBottom:e.spacing(2)},footer:{borderTop:"1px solid "+e.palette.divider,marginTop:e.spacing(8),paddingTop:e.spacing(3),paddingBottom:e.spacing(3),[e.breakpoints.up("sm")]:{paddingTop:e.spacing(6),paddingBottom:e.spacing(6)}},customCard:{display:"flex",marginTop:"16px",alignItems:"center",flexDirection:"column"},custom:{display:"flex",alignItems:"center",justifyContent:"space-between"}}));function yp(e){const{setFieldValue:a,setActiveStep:t,activeStep:r}=e,{finder:i}=ua(),{find:l}=as(),s=xp(),[c,d]=o.a.useState(3),[m,u]=o.a.useState(3),[p,g]=o.a.useState([]),[E,h]=o.a.useState(49),x=localStorage.getItem("companyId");Object(n.useEffect)(()=>{!async function(){await y()}()},[y]);const y=async()=>{try{const e=(await l(x)).planId;await v(e)}catch(e){console.log(e)}},v=async e=>{try{const a=await i(e),t=[];t.push({title:a.name,planId:a.id,price:a.value,description:[a.users+" Usu\xe1rios",a.connections+" Conex\xe3o",a.queues+" Filas"],users:a.users,connections:a.connections,queues:a.queues,buttonText:"SELECIONAR",buttonVariant:"outlined"}),g(t)}catch(a){console.log(a)}},C=p;return o.a.createElement(o.a.Fragment,null,o.a.createElement(_t.a,{container:!0,spacing:3},C.map(e=>o.a.createElement(_t.a,{item:!0,key:e.title,xs:12,sm:(e.title,12),md:12},o.a.createElement(hn.a,null,o.a.createElement(xn.a,{title:e.title,subheader:e.subheader,titleTypographyProps:{align:"center"},subheaderTypographyProps:{align:"center"},action:"Pro"===e.title?o.a.createElement(hp.a,null):null,className:s.cardHeader}),o.a.createElement(pr.a,null,o.a.createElement("div",{className:s.cardPricing},o.a.createElement(f.a,{component:"h2",variant:"h3",color:"textPrimary"},o.a.createElement(o.a.Fragment,null,"R$",e.price.toLocaleString("pt-br",{minimumFractionDigits:2}))),o.a.createElement(f.a,{variant:"h6",color:"textSecondary"},"/m\xeas")),o.a.createElement("ul",null,e.description.map(e=>o.a.createElement(f.a,{component:"li",variant:"subtitle1",align:"center",key:e},e)))),o.a.createElement(vl.a,null,o.a.createElement(b.a,{fullWidth:!0,variant:e.buttonVariant,color:"primary",onClick:()=>{e.custom?a("plan",JSON.stringify({users:c,connections:m,price:E})):a("plan",JSON.stringify(e)),t(r+1)}},e.buttonText)))))))}var vp=Object(Y.a)(e=>({listItem:{padding:e.spacing(1,0)},total:{fontWeight:"700"},title:{marginTop:e.spacing(2)}}));var Cp=function(e){const{formValues:a}=e,t=vp(),{plan:n}=a,r=JSON.parse(n),{users:i,connections:l,price:s}=r;return o.a.createElement(_t.a,{item:!0,xs:12,sm:12},o.a.createElement(f.a,{variant:"h6",gutterBottom:!0,className:t.title},"Detalhes do plano"),o.a.createElement(f.a,{gutterBottom:!0},"Usu\xe1rios: ",i),o.a.createElement(f.a,{gutterBottom:!0},"Whatsapps: ",l),o.a.createElement(f.a,{gutterBottom:!0},"Cobran\xe7a: Mensal"),o.a.createElement(f.a,{gutterBottom:!0},"Total: R$",s.toLocaleString("pt-br",{minimumFractionDigits:2})))};var kp=function(){const{values:e}=Object(Ae.g)();return o.a.createElement(o.a.Fragment,null,o.a.createElement(f.a,{variant:"h6",gutterBottom:!0},"Resumo da assinatura"),o.a.createElement(_t.a,{container:!0,spacing:2},o.a.createElement(Cp,{formValues:e})))},Sp={formId:"checkoutForm",formField:{firstName:{name:"firstName",label:"Nome completo*",requiredErrorMsg:"O nome completo \xe9 obrigat\xf3rio"},lastName:{name:"lastName",label:"Last name*",requiredErrorMsg:"Last name is required"},address1:{name:"address2",label:"Endere\xe7o*",requiredErrorMsg:"O Endere\xe7o \xe9 obrigat\xf3rio"},city:{name:"city",label:"Cidade*",requiredErrorMsg:"Cidade \xe9 obrigat\xf3ria"},state:{name:"state",label:"Estado*",requiredErrorMsg:"Cidade \xe9 obrigat\xf3ria"},zipcode:{name:"zipcode",label:"CEP*",requiredErrorMsg:"CEP \xe9 obrigat\xf3rio",invalidErrorMsg:"Formato de CEP inv\xe1lido"},country:{name:"country",label:"Pa\xeds*",requiredErrorMsg:"Pa\xeds \xe9 obrigat\xf3rio"},useAddressForPaymentDetails:{name:"useAddressForPaymentDetails",label:"Use this address for payment details"},invoiceId:{name:"invoiceId",label:"Use this invoiceId"},nameOnCard:{name:"nameOnCard",label:"Name on card*",requiredErrorMsg:"Name on card is required"},cardNumber:{name:"cardNumber",label:"Card number*",requiredErrorMsg:"Card number is required",invalidErrorMsg:"Card number is not valid (e.g. 4111111111111)"},expiryDate:{name:"expiryDate",label:"Expiry date*",requiredErrorMsg:"Expiry date is required",invalidErrorMsg:"Expiry date is not valid"},cvv:{name:"cvv",label:"CVV*",requiredErrorMsg:"CVV is required",invalidErrorMsg:"CVV is invalid (e.g. 357)"}}};const{formField:{firstName:Np,lastName:wp,address1:Ip,city:Ap,state:Tp,zipcode:Dp,country:Op,useAddressForPaymentDetails:jp,nameOnCard:Rp,cardNumber:Fp,invoiceId:Mp,cvv:Pp}}=Sp;var Bp={[Np.name]:"",[wp.name]:"",[Ip.name]:"",[Ap.name]:"",[Tp.name]:"",[Dp.name]:"",[Op.name]:"",[jp.name]:!1,[Rp.name]:"",[Fp.name]:"",[Mp.name]:"",[Pp.name]:""};const{formField:{firstName:zp,address1:Wp,city:Lp,zipcode:qp,country:Hp}}=Sp;var Up=[Oe.b().shape({[zp.name]:Oe.d().required(""+zp.requiredErrorMsg),[Wp.name]:Oe.d().required(""+Wp.requiredErrorMsg),[Lp.name]:Oe.d().nullable().required(""+Lp.requiredErrorMsg),[qp.name]:Oe.d().required(""+qp.requiredErrorMsg),[Hp.name]:Oe.d().nullable().required(""+Hp.requiredErrorMsg)})],Vp=Object(Y.a)(e=>({stepper:{padding:e.spacing(3,0,5)},buttons:{display:"flex",justifyContent:"flex-end"},button:{marginTop:e.spacing(3),marginLeft:e.spacing(1)},wrapper:{margin:e.spacing(1),position:"relative"},buttonProgress:{position:"absolute",top:"50%",left:"50%"}}));var Gp=function(e){const a=["Dados","Personalizar","Revisar"],{formId:t,formField:r}=Sp,i=Vp(),[l,s]=Object(n.useState)(1),[c,d]=Object(n.useState)(null),[m,u]=Object(n.useState)(e.Invoice.id),p=Up[l],g=l===a.length-1,{user:E}=Object(n.useContext)(H);function h(){s(l-1)}return o.a.createElement(o.a.Fragment,null,o.a.createElement(f.a,{component:"h1",variant:"h4",align:"center"},"Falta pouco!"),o.a.createElement(bo.a,{activeStep:l,className:i.stepper},a.map(e=>o.a.createElement(Eo.a,{key:e},o.a.createElement(ho.a,null,e)))),o.a.createElement(o.a.Fragment,null,l===a.length?o.a.createElement(mp,{pix:c}):o.a.createElement(Ae.e,{initialValues:{...E,...Bp},validationSchema:p,onSubmit:function(e,a){g?async function(e,a){try{const t=JSON.parse(e.plan),n={firstName:e.firstName,lastName:e.lastName,address2:e.address2,city:e.city,state:e.state,zipcode:e.zipcode,country:e.country,useAddressForPaymentDetails:e.useAddressForPaymentDetails,nameOnCard:e.nameOnCard,cardNumber:e.cardNumber,cvv:e.cvv,plan:e.plan,price:t.price,users:t.users,connections:t.connections,invoiceId:m},{data:o}=await B.post("/subscription",n);d(o),a.setSubmitting(!1),s(l+1),y.toast.success("Assinatura realizada com sucesso!, aguardando a realiza\xe7\xe3o do pagamento")}catch(t){y.toast.error(t.message)}}(e,a):(s(l+1),a.setTouched({}),a.setSubmitting(!1))}},e=>{let{isSubmitting:a,setFieldValue:n,values:c}=e;return o.a.createElement(Ae.d,{id:t},function(e,a,t,n){switch(e){case 0:return o.a.createElement(bp,{formField:r,values:n,setFieldValue:a});case 1:return o.a.createElement(yp,{formField:r,setFieldValue:a,setActiveStep:t,activeStep:e,invoiceId:m,values:n});case 2:return o.a.createElement(kp,null);default:return o.a.createElement("div",null,"Not Found")}}(l,n,s,c),o.a.createElement("div",{className:i.buttons},1!==l&&o.a.createElement(b.a,{onClick:h,className:i.button},"VOLTAR"),o.a.createElement("div",{className:i.wrapper},1!==l&&o.a.createElement(b.a,{disabled:a,type:"submit",variant:"contained",color:"primary",className:i.button},g?"PAGAR":"PR\xd3XIMO"),a&&o.a.createElement(be.a,{size:24,className:i.buttonProgress}))))})))};const _p=Object(Y.a)(e=>({root:{display:"flex",flexWrap:"wrap"},textField:{marginRight:e.spacing(1),flex:1},extraAttr:{display:"flex",justifyContent:"center",alignItems:"center"},btnWrapper:{position:"relative"},buttonProgress:{color:Ie.a[500],position:"absolute",top:"50%",left:"50%",marginTop:-12,marginLeft:-12}}));var Kp=e=>{let{open:a,onClose:t,Invoice:r,contactId:i,initialValues:l,onSave:s}=e;const c=_p(),d=Object(n.useRef)(!0);Object(n.useEffect)(()=>()=>{d.current=!1},[]);return o.a.createElement("div",{className:c.root},o.a.createElement(xe.a,{open:a,onClose:()=>{t()},maxWidth:"md",scroll:"paper"},o.a.createElement(ve.a,{dividers:!0},o.a.createElement(Gp,{Invoice:r}))))};const Qp=Object(Y.a)(e=>({mainPaper:{flex:1,padding:e.spacing(1),overflowY:"scroll",...e.scrollbarStyles}})),Yp=e=>{const a=new Date,t=new Date(e),n=Math.abs(a.getTime()-t.getTime());return Math.ceil(n/864e5)};var Xp=()=>{var e,a;const t=Qp(),{user:r}=Object(n.useContext)(H),[i]=Object(n.useState)(!1),[,l]=Object(n.useState)(1),[s,c]=Object(n.useState)(null),[d,m]=Object(n.useState)(!1),[u]=Object(n.useState)(!1);return o.a.createElement(ao,{className:t.mainContainer},o.a.createElement(Kp,{open:d,onClose:()=>{c(null),m(!1)},"aria-labelledby":"form-dialog-title",contactId:s}),o.a.createElement(no,null,o.a.createElement(tl,null,"Assinatura")),o.a.createElement(_t.a,{item:!0,xs:12,sm:4},o.a.createElement(wa.a,{className:t.mainPaper,variant:"outlined",onScroll:e=>{if(!u||i)return;const{scrollTop:a,scrollHeight:t,clientHeight:n}=e.currentTarget;t-(a+100)<n&&l(e=>e+1)}},o.a.createElement("div",null,o.a.createElement(Ce.a,{id:"outlined-full-width",label:"Per\xedodo de teste",defaultValue:`Seu per\xedodo de teste termina em ${Yp(null===r||void 0===r||null===(e=r.company)||void 0===e?void 0:e.trialExpiration)} dias!`,fullWidth:!0,margin:"normal",InputLabelProps:{shrink:!0},InputProps:{readOnly:!0},variant:"outlined"})),o.a.createElement("div",null,o.a.createElement(Ce.a,{id:"outlined-full-width",label:"Email de cobran\xe7a",defaultValue:null===r||void 0===r||null===(a=r.company)||void 0===a?void 0:a.email,fullWidth:!0,margin:"normal",InputLabelProps:{shrink:!0},InputProps:{readOnly:!0},variant:"outlined"})),o.a.createElement("div",null,o.a.createElement(b.a,{variant:"contained",color:"primary",onClick:()=>{c(null),m(!0)},fullWidth:!0},"Assine Agora!")))))},$p=t(303),Jp=t.n($p),Zp=t(736),eg=t.n(Zp),ag=t(734),tg=t.n(ag),ng=t(735),og=t.n(ng),rg=t(403),ig=t.n(rg);const lg=Object(Y.a)(e=>({root:{display:"flex",flexDirection:"column",height:"100%"},container:{paddingTop:e.spacing(4),paddingBottom:e.spacing(4),paddingLeft:e.spacing(4),paddingRight:e.spacing(4),[e.breakpoints.down("sm")]:{paddingLeft:e.spacing(1),paddingRight:e.spacing(1)}},mainContainer:{padding:e.spacing(2),overflowY:"auto",flex:1,marginTop:e.spacing(4)},inputContainer:{display:"flex",width:"100%",marginBottom:e.spacing(3),alignItems:"flex-start",gap:e.spacing(1),[e.breakpoints.down("xs")]:{flexDirection:"column"}},input:{flexGrow:1,"& .MuiOutlinedInput-root":{borderRadius:10},[e.breakpoints.down("xs")]:{marginBottom:e.spacing(1),width:"100%"}},addButton:{backgroundColor:"#5D3FD3",color:"white",height:56,borderRadius:10,padding:e.spacing(0,3),"&:hover":{backgroundColor:"#4930A8"},[e.breakpoints.down("xs")]:{width:"100%"}},tasksList:{backgroundColor:"#f8f8f8",borderRadius:10,marginTop:e.spacing(2),overflow:"hidden",transition:"all 0.3s ease"},pageTitle:{color:"#5D3FD3",fontWeight:600,fontSize:"1.5rem",marginBottom:e.spacing(2),position:"relative",display:"inline-block","&::after":{content:'""',position:"absolute",width:"40%",height:3,bottom:-5,left:0,backgroundColor:"#5D3FD3",borderRadius:2}},taskItem:{borderLeft:"3px solid #5D3FD3",margin:e.spacing(1),borderRadius:8,transition:"all 0.2s ease",backgroundColor:"white",boxShadow:"0 2px 5px rgba(0,0,0,0.05)","&:hover":{boxShadow:"0 5px 15px rgba(0,0,0,0.1)",transform:"translateY(-2px)"}},taskItemCompleted:{borderLeft:"3px solid #9e9e9e",backgroundColor:"rgba(0, 0, 0, 0.03)","& .MuiTypography-root":{textDecoration:"line-through",color:"rgba(0, 0, 0, 0.5)"}},taskText:{fontWeight:500},taskDate:{fontSize:"0.75rem",color:"rgba(0, 0, 0, 0.54)",display:"flex",alignItems:"center",gap:4},checkbox:{color:"#5D3FD3","&.Mui-checked":{color:"#5D3FD3"}},taskActions:{display:"flex"},actionButton:{padding:e.spacing(1),transition:"all 0.2s ease","&:hover":{backgroundColor:"rgba(93, 63, 211, 0.1)"}},editButton:{color:"#5D3FD3"},deleteButton:{color:"#f44336"},categoryChip:{marginRight:e.spacing(1),marginBottom:e.spacing(.5),height:24,fontSize:"0.7rem"},taskHeader:{display:"flex",justifyContent:"space-between",alignItems:"center",padding:e.spacing(2)},filterBar:{display:"flex",justifyContent:"space-between",alignItems:"center",padding:e.spacing(1,2),marginBottom:e.spacing(1),borderRadius:10,backgroundColor:"white",boxShadow:"0 2px 5px rgba(0,0,0,0.05)"},filterButton:{color:"#5D3FD3",marginLeft:e.spacing(1),transition:"all 0.2s ease","&:hover":{backgroundColor:"rgba(93, 63, 211, 0.08)",transform:"scale(1.1)"}},filterMenu:{"& .MuiPaper-root":{borderRadius:10,boxShadow:"0 4px 20px rgba(0, 0, 0, 0.15)",overflow:"visible",marginTop:10,"&:before":{content:'""',display:"block",position:"absolute",top:-10,right:14,width:20,height:20,backgroundColor:"white",transform:"rotate(45deg)",zIndex:0}}},filterMenuItem:{padding:e.spacing(1.5,2),transition:"all 0.2s",position:"relative","&:hover":{backgroundColor:"rgba(93, 63, 211, 0.08)"},"&.Mui-selected":{backgroundColor:"rgba(93, 63, 211, 0.12)","&:hover":{backgroundColor:"rgba(93, 63, 211, 0.16)"},"&:before":{content:'""',position:"absolute",left:0,top:0,bottom:0,width:4,backgroundColor:"#5D3FD3",borderRadius:"0 4px 4px 0"}}},menuDivider:{margin:e.spacing(1,0)},filterIcon:{marginRight:e.spacing(1.5),fontSize:"1.1rem",color:"#5D3FD3"},filterHeader:{padding:e.spacing(1.5,2),color:"#5D3FD3",fontWeight:600,fontSize:"0.9rem",textTransform:"uppercase",letterSpacing:"0.5px",borderBottom:"1px solid rgba(0, 0, 0, 0.08)"},noTasksContainer:{display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",padding:e.spacing(8),backgroundColor:"white",borderRadius:10,textAlign:"center"},noTasksIcon:{fontSize:80,color:"rgba(93, 63, 211, 0.2)",marginBottom:e.spacing(2)},noTasksText:{color:"rgba(0, 0, 0, 0.7)",maxWidth:400},categoriesSection:{display:"flex",flexWrap:"wrap",gap:e.spacing(1),marginTop:e.spacing(2)},titleContainer:{marginTop:e.spacing(4),display:"flex",alignItems:"center"},categoryMenu:{"& .MuiPaper-root":{borderRadius:10,boxShadow:"0 4px 20px rgba(0, 0, 0, 0.15)",overflow:"visible",marginTop:10,"&:before":{content:'""',display:"block",position:"absolute",top:-10,right:14,width:20,height:20,backgroundColor:"white",transform:"rotate(45deg)",zIndex:0}}},categoryMenuItem:{padding:e.spacing(1.5,2),transition:"all 0.2s",position:"relative","&:hover":{backgroundColor:"rgba(93, 63, 211, 0.08)"},"&.Mui-selected":{backgroundColor:"rgba(93, 63, 211, 0.12)","&:hover":{backgroundColor:"rgba(93, 63, 211, 0.16)"},"&:before":{content:'""',position:"absolute",left:0,top:0,bottom:0,width:4,backgroundColor:"#5D3FD3",borderRadius:"0 4px 4px 0"}}},categoryHeader:{padding:e.spacing(1.5,2),color:"#5D3FD3",fontWeight:600,fontSize:"0.9rem",textTransform:"uppercase",letterSpacing:"0.5px",borderBottom:"1px solid rgba(0, 0, 0, 0.08)"},categoryIcon:{marginRight:e.spacing(1.5),display:"flex",alignItems:"center"},categoryColorDot:{width:16,height:16,borderRadius:"50%",marginRight:e.spacing(1.5),boxShadow:"0 1px 3px rgba(0,0,0,0.12)",border:"2px solid white"},taskMenu:{"& .MuiPaper-root":{borderRadius:10,boxShadow:"0 4px 20px rgba(0, 0, 0, 0.15)",overflow:"visible",marginTop:10,"&:before":{content:'""',display:"block",position:"absolute",top:-10,right:14,width:20,height:20,backgroundColor:"white",transform:"rotate(45deg)",zIndex:0}}},taskMenuItem:{padding:e.spacing(1.5,2),transition:"all 0.2s","&:hover":{backgroundColor:"rgba(93, 63, 211, 0.08)"}},taskMenuIconContainer:{marginRight:e.spacing(1.5),display:"flex",minWidth:24},completeIcon:{color:"#5D3FD3"},editIcon:{color:"#5D3FD3"},deleteIcon:{color:"#F44336"},taskMenuHeader:{padding:e.spacing(1.5,2),color:"#5D3FD3",fontWeight:600,fontSize:"0.9rem",textTransform:"uppercase",letterSpacing:"0.5px",borderBottom:"1px solid rgba(0, 0, 0, 0.08)"}}));var sg=()=>{var e;const a=lg(),t=[{id:"leads",label:(r=z.a).t("toDoList.categories.leads"),color:"#5D3FD3"},{id:"clients",label:r.t("toDoList.categories.clients"),color:"#5D3FD3"},{id:"meetings",label:r.t("toDoList.categories.meetings"),color:"#FF5733"},{id:"followup",label:r.t("toDoList.categories.followup"),color:"#1E88E5"},{id:"sales",label:r.t("toDoList.categories.sales"),color:"#FFC107"},{id:"support",label:r.t("toDoList.categories.support"),color:"#607D8B"}];var r;const[i,l]=Object(n.useState)(""),[s,c]=Object(n.useState)([]),[d,m]=Object(n.useState)(-1),[u,p]=Object(n.useState)("all"),[E,h]=Object(n.useState)("createdAt"),[x,y]=Object(n.useState)(null),[v,C]=Object(n.useState)(null),[k,S]=Object(n.useState)(null),[N,w]=Object(n.useState)(null);Object(n.useEffect)(()=>{const e=localStorage.getItem("tasks");if(e)try{const a=JSON.parse(e).map(e=>({...e,createdAt:new Date(e.createdAt),updatedAt:new Date(e.updatedAt)}));c(a)}catch(a){console.error("Erro ao carregar tarefas:",a),c([])}},[]),Object(n.useEffect)(()=>{localStorage.setItem("tasks",JSON.stringify(s))},[s]);const I=e=>{l(s[e].text),m(e),w(s[e].category)},A=e=>{const a=[...s];a.splice(e,1),c(a)},T=e=>{const a=[...s];a[e]={...a[e],completed:!a[e].completed,updatedAt:new Date},c(a)},D=()=>{y(null),S(null)},O=()=>{C(null)},j=e=>{p(e)},R=e=>{h(e)},F=(()=>{let e=[...s];return"completed"===u?e=e.filter(e=>e.completed):"pending"===u&&(e=e.filter(e=>!e.completed)),e.sort((e,a)=>"createdAt"===E?a.createdAt-e.createdAt:a.updatedAt-e.updatedAt),e})(),M=e=>{const a=new Date,t=new Date(e);if(t.toDateString()===a.toDateString())return`${z.a.t("toDoList.today")}, ${t.toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})}`;const n=new Date(a);return n.setDate(a.getDate()-1),t.toDateString()===n.toDateString()?`${z.a.t("toDoList.yesterday")}, ${t.toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})}`:t.toLocaleDateString("pt-BR",{day:"2-digit",month:"2-digit",year:"numeric",hour:"2-digit",minute:"2-digit"})},P=e=>{const a=t.find(a=>a.id===e)||t[5];return{label:a.label,color:a.color}};return o.a.createElement(Zn.a,{maxWidth:"xl",className:a.container},o.a.createElement(no,null,o.a.createElement("div",{className:a.titleContainer},o.a.createElement(f.a,{className:a.pageTitle},z.a.t("toDoList.title"))),o.a.createElement(ro,null,o.a.createElement("div",null,o.a.createElement(Sa.a,{title:z.a.t("toDoList.filterTitle"),arrow:!0},o.a.createElement(J.a,{className:a.filterButton,onClick:e=>y(e.currentTarget)},o.a.createElement(tg.a,null))),o.a.createElement(ne.a,{anchorEl:x,open:Boolean(x)&&null===k,onClose:()=>y(null),className:a.filterMenu,elevation:3,getContentAnchorEl:null,anchorOrigin:{vertical:"bottom",horizontal:"right"},transformOrigin:{vertical:"top",horizontal:"right"}},o.a.createElement(f.a,{className:a.filterHeader},z.a.t("toDoList.filterTitle")),o.a.createElement(oe.a,{onClick:()=>{j("all"),y(null)},selected:"all"===u,className:a.filterMenuItem},o.a.createElement(og.a,{className:a.filterIcon}),z.a.t("toDoList.all")),o.a.createElement(oe.a,{onClick:()=>{j("pending"),y(null)},selected:"pending"===u,className:a.filterMenuItem},o.a.createElement(Jp.a,{className:a.filterIcon,style:{opacity:.5}}),z.a.t("toDoList.pending")),o.a.createElement(oe.a,{onClick:()=>{j("completed"),y(null)},selected:"completed"===u,className:a.filterMenuItem},o.a.createElement(Jp.a,{className:a.filterIcon}),z.a.t("toDoList.completed")),o.a.createElement(Z.a,{className:a.menuDivider}),o.a.createElement(f.a,{className:a.filterHeader},z.a.t("toDoList.filterByCreationDate").split(" ")[0]),o.a.createElement(oe.a,{onClick:()=>{R("createdAt"),y(null)},selected:"createdAt"===E,className:a.filterMenuItem},o.a.createElement(ig.a,{className:a.filterIcon}),z.a.t("toDoList.filterByCreationDate")),o.a.createElement(oe.a,{onClick:()=>{R("updatedAt"),y(null)},selected:"updatedAt"===E,className:a.filterMenuItem},o.a.createElement(ig.a,{className:a.filterIcon}),z.a.t("toDoList.filterByUpdateDate")))))),o.a.createElement(wa.a,{className:a.mainContainer},o.a.createElement("div",{className:a.inputContainer},o.a.createElement(Ce.a,{className:a.input,label:z.a.t("toDoList.newTask"),value:i,onChange:e=>{l(e.target.value)},variant:"outlined",placeholder:z.a.t("toDoList.taskPlaceholder"),fullWidth:!0,InputProps:{endAdornment:N&&o.a.createElement(Do.a,{position:"end"},o.a.createElement(Fe.a,{size:"small",label:P(N).label,style:{backgroundColor:P(N).color,color:"white"},onDelete:()=>w(null)}))}}),o.a.createElement(Sa.a,{title:z.a.t("toDoList.selectCategory"),arrow:!0},o.a.createElement(J.a,{onClick:e=>{C(e.currentTarget)},className:a.actionButton,style:{color:"#5D3FD3"}},o.a.createElement(_s.a,null))),o.a.createElement(b.a,{variant:"contained",className:a.addButton,startIcon:d>=0?o.a.createElement(Po.a,null):o.a.createElement(vr.a,null),onClick:()=>{if(!i.trim())return;const e=new Date;if(d>=0){const a=[...s];a[d]={...a[d],text:i,updatedAt:e,category:N||a[d].category||t[5].id},c(a),l(""),m(-1),w(null)}else c([...s,{text:i,createdAt:e,updatedAt:e,completed:!1,category:N||t[5].id}]),l(""),w(null)}},d>=0?z.a.t("toDoList.save"):z.a.t("toDoList.add")),o.a.createElement(ne.a,{anchorEl:v,open:Boolean(v),onClose:O,className:a.categoryMenu,elevation:3,getContentAnchorEl:null,anchorOrigin:{vertical:"bottom",horizontal:"right"},transformOrigin:{vertical:"top",horizontal:"right"}},o.a.createElement(f.a,{className:a.categoryHeader},z.a.t("toDoList.selectCategory")),t.map(e=>o.a.createElement(oe.a,{key:e.id,onClick:()=>{return a=e.id,w(a),void O();var a},selected:N===e.id,className:a.categoryMenuItem},o.a.createElement(g.a,{display:"flex",alignItems:"center",width:"100%"},o.a.createElement("div",{className:a.categoryColorDot,style:{backgroundColor:e.color}}),o.a.createElement(f.a,{variant:"body2"},e.label)))))),0===F.length?o.a.createElement("div",{className:a.noTasksContainer},o.a.createElement(Jp.a,{className:a.noTasksIcon}),o.a.createElement(f.a,{variant:"h6",className:a.noTasksText},"all"===u?z.a.t("toDoList.noTasks"):"completed"===u?z.a.t("toDoList.noCompletedTasks"):z.a.t("toDoList.noPendingTasks"))):o.a.createElement(wa.a,{className:a.tasksList},o.a.createElement("div",{className:a.taskHeader},o.a.createElement(f.a,{variant:"subtitle1",style:{fontWeight:500}},"all"===u?z.a.t("toDoList.all"):"completed"===u?z.a.t("toDoList.completed"):z.a.t("toDoList.pending"),o.a.createElement("span",{style:{marginLeft:8,fontSize:"0.8rem",color:"rgba(0,0,0,0.6)"}},"(",F.length,")")),o.a.createElement("div",null,o.a.createElement(Sa.a,{title:"createdAt"===E?z.a.t("toDoList.filterByCreationDate"):z.a.t("toDoList.filterByUpdateDate"),arrow:!0},o.a.createElement(J.a,{size:"small"},o.a.createElement(ig.a,{fontSize:"small",style:{color:"#5D3FD3"}}))))),o.a.createElement(ee.a,null,F.map((e,t)=>o.a.createElement(Na.a,{in:!0,key:t,timeout:300,style:{transitionDelay:50*t+"ms"}},o.a.createElement(Ue.a,{className:`${a.taskItem} ${e.completed?a.taskItemCompleted:""}`,button:!0},o.a.createElement(Ve.a,{onClick:()=>T(s.indexOf(e))},o.a.createElement(_r.a,{edge:"start",checked:e.completed,className:a.checkbox})),o.a.createElement(Ge.a,{primary:o.a.createElement(f.a,{className:a.taskText},e.text),secondary:o.a.createElement("div",null,o.a.createElement(Fe.a,{size:"small",className:a.categoryChip,label:P(e.category).label,style:{backgroundColor:P(e.category).color+"20",color:P(e.category).color,borderColor:P(e.category).color+"40",borderWidth:1,borderStyle:"solid"}}),o.a.createElement(f.a,{className:a.taskDate},o.a.createElement(eg.a,{fontSize:"inherit",style:{marginRight:4}}),M(e.updatedAt)))}),o.a.createElement(qa.a,{className:a.taskActions},o.a.createElement(Sa.a,{title:z.a.t("toDoList.edit"),arrow:!0},o.a.createElement(J.a,{edge:"end",onClick:()=>I(s.indexOf(e)),className:`${a.actionButton} ${a.editButton}`},o.a.createElement(Po.a,{fontSize:"small"}))),o.a.createElement(Sa.a,{title:z.a.t("toDoList.delete"),arrow:!0},o.a.createElement(J.a,{edge:"end",onClick:()=>A(s.indexOf(e)),className:`${a.actionButton} ${a.deleteButton}`},o.a.createElement(oc.a,{fontSize:"small"}))),o.a.createElement(J.a,{edge:"end",onClick:a=>((e,a)=>{y(e.currentTarget),S(a)})(a,s.indexOf(e)),className:a.actionButton},o.a.createElement(Tr.a,{fontSize:"small"})))))))),o.a.createElement(ne.a,{anchorEl:x,open:Boolean(x)&&null!==k,onClose:D,className:a.taskMenu,elevation:3,getContentAnchorEl:null,anchorOrigin:{vertical:"bottom",horizontal:"right"},transformOrigin:{vertical:"top",horizontal:"right"}},o.a.createElement(f.a,{className:a.taskMenuHeader},z.a.t("toDoList.title")),o.a.createElement(oe.a,{onClick:()=>{T(k),D()},className:a.taskMenuItem},o.a.createElement("div",{className:a.taskMenuIconContainer},o.a.createElement(Jp.a,{fontSize:"small",className:a.completeIcon})),(null===(e=s[k])||void 0===e?void 0:e.completed)?z.a.t("toDoList.markAsPending"):z.a.t("toDoList.markAsCompleted")),o.a.createElement(oe.a,{onClick:()=>{I(k),D()},className:a.taskMenuItem},o.a.createElement("div",{className:a.taskMenuIconContainer},o.a.createElement(Po.a,{fontSize:"small",className:a.editIcon})),z.a.t("toDoList.edit")),o.a.createElement(oe.a,{onClick:()=>{A(k),D()},className:a.taskMenuItem},o.a.createElement("div",{className:a.taskMenuIconContainer},o.a.createElement(oc.a,{fontSize:"small",className:a.deleteIcon})),z.a.t("toDoList.delete")))))};var cg=e=>{let{component:a,isPrivate:t=!1,...r}=e;const{isAuth:i,loading:l}=Object(n.useContext)(H);return!i&&t?o.a.createElement(o.a.Fragment,null,l&&o.a.createElement(he,null),o.a.createElement(S.Redirect,{to:{pathname:"/login",state:{from:r.location}}})):i&&!t?o.a.createElement(o.a.Fragment,null,l&&o.a.createElement(he,null),o.a.createElement(S.Redirect,{to:{pathname:"/",state:{from:r.location}}}),";"):o.a.createElement(o.a.Fragment,null,l&&o.a.createElement(he,null),o.a.createElement(S.Route,Object.assign({},r,{component:a})))};var dg=()=>{const[e,a]=Object(n.useState)(!1);return Object(n.useEffect)(()=>{void 0!==localStorage.getItem("cshow")&&a(!0)},[]),o.a.createElement(p.a,null,o.a.createElement(U,null,o.a.createElement(Ka,null,o.a.createElement(S.Switch,null,o.a.createElement(cg,{exact:!0,path:"/login",component:pl}),o.a.createElement(cg,{exact:!0,path:"/signup",component:Vs}),o.a.createElement(cg,{exact:!0,path:"/forgetpsw",component:tu}),o.a.createElement(K,null,o.a.createElement(_n,null,o.a.createElement(cg,{exact:!0,path:"/",component:Ki,isPrivate:!0}),o.a.createElement(cg,{exact:!0,path:"/tickets/:ticketId?",component:Ld,isPrivate:!0}),o.a.createElement(cg,{exact:!0,path:"/connections",component:To,isPrivate:!0}),o.a.createElement(cg,{exact:!0,path:"/quick-messages",component:Qu,isPrivate:!0}),o.a.createElement(cg,{exact:!0,path:"/todolist",component:sg,isPrivate:!0}),o.a.createElement(cg,{exact:!0,path:"/schedules",component:np,isPrivate:!0}),o.a.createElement(cg,{exact:!0,path:"/tags",component:Ys,isPrivate:!0}),o.a.createElement(cg,{exact:!0,path:"/contacts",component:ri,isPrivate:!0}),o.a.createElement(cg,{exact:!0,path:"/helps",component:rl,isPrivate:!0}),o.a.createElement(cg,{exact:!0,path:"/users",component:Ud,isPrivate:!0}),o.a.createElement(cg,{exact:!0,path:"/files",component:Ym,isPrivate:!0}),o.a.createElement(cg,{exact:!0,path:"/prompts",component:Nu,isPrivate:!0}),o.a.createElement(cg,{exact:!0,path:"/queue-integration",component:Wu,isPrivate:!0}),o.a.createElement(cg,{exact:!0,path:"/messages-api",component:yl,isPrivate:!0}),o.a.createElement(cg,{exact:!0,path:"/settings",component:Fs,isPrivate:!0}),o.a.createElement(cg,{exact:!0,path:"/kanban",component:lu,isPrivate:!0}),o.a.createElement(cg,{exact:!0,path:"/financeiro",component:al,isPrivate:!0}),o.a.createElement(cg,{exact:!0,path:"/queues",component:Xl,isPrivate:!0}),o.a.createElement(cg,{exact:!0,path:"/announcements",component:am,isPrivate:!0}),o.a.createElement(cg,{exact:!0,path:"/subscription",component:Xp,isPrivate:!0}),o.a.createElement(cg,{exact:!0,path:"/chats/:id?",component:Hm,isPrivate:!0}),e&&o.a.createElement(o.a.Fragment,null,o.a.createElement(cg,{exact:!0,path:"/contact-lists",component:br,isPrivate:!0}),o.a.createElement(cg,{exact:!0,path:"/contact-lists/:contactListId/contacts",component:rr,isPrivate:!0}),o.a.createElement(cg,{exact:!0,path:"/campaigns",component:Am,isPrivate:!0}),o.a.createElement(cg,{exact:!0,path:"/campaign/:campaignId/report",component:gm,isPrivate:!0}),o.a.createElement(cg,{exact:!0,path:"/campaigns-config",component:Rm,isPrivate:!0}))))))))};const mg=new u.QueryClient;var ug=()=>{const[e,a]=Object(n.useState)(),t=Object(s.a)("(prefers-color-scheme: dark)"),r=window.localStorage.getItem("preferredTheme"),[i,g]=Object(n.useState)(r||(t?"dark":"light")),f=o.a.useMemo(()=>({toggleColorMode:()=>{g(e=>"light"===e?"dark":"light")}}),[]),b=Object(d.a)({scrollbarStyles:{"&::-webkit-scrollbar":{width:"8px",height:"8px"},"&::-webkit-scrollbar-thumb":{boxShadow:"inset 0 0 6px rgba(0, 0, 0, 0.3)",backgroundColor:"#5D3FD3",borderRadius:"2px"},"&::-webkit-scrollbar-track":{backgroundColor:"rgba(93, 63, 211, 0.05)"}},scrollbarStylesSoft:{"&::-webkit-scrollbar":{width:"4px"},"&::-webkit-scrollbar-thumb":{backgroundColor:"#5D3FD3",borderRadius:"2px",opacity:.7},"&::-webkit-scrollbar-track":{backgroundColor:"rgba(93, 63, 211, 0.05)"}},palette:{type:i,primary:{main:"light"===i?"#5D3FD3":"#FFFFFF"},textPrimary:"light"===i?"#5D3FD3":"#FFFFFF",borderPrimary:"light"===i?"#5D3FD3":"#FFFFFF",dark:{main:"light"===i?"#333333":"#F3F3F3"},light:{main:"light"===i?"#F3F3F3":"#333333"},tabHeaderBackground:"light"===i?"#EEE":"#666",optionsBackground:"light"===i?"#fafafa":"#333",options:"light"===i?"#fafafa":"#666",fontecor:"light"===i?"#5D3FD3":"#fff",fancyBackground:"light"===i?"#fafafa":"#333",bordabox:"light"===i?"#eee":"#333",newmessagebox:"light"===i?"#eee":"#333",inputdigita:"light"===i?"#fff":"#666",contactdrawer:"light"===i?"#fff":"#666",announcements:"light"===i?"#ededed":"#333",login:"light"===i?"#fff":"#1C1C1C",announcementspopover:"light"===i?"#fff":"#666",chatlist:"light"===i?"#eee":"#666",boxlist:"light"===i?"#ededed":"#666",boxchatlist:"light"===i?"#ededed":"#333",total:"light"===i?"#fff":"#222",messageIcons:"light"===i?"grey":"#F3F3F3",inputBackground:"light"===i?"#FFFFFF":"#333",barraSuperior:"light"===i?"linear-gradient(to right, #5D3FD3, #5D3FD3 , #5D3FD3)":"#666",boxticket:"light"===i?"#EEE":"#666",campaigntab:"light"===i?"#ededed":"#666",mediainput:"light"===i?"#ededed":"#1c1c1c"}},e);return Object(n.useEffect)(()=>{const e=localStorage.getItem("i18nextLng");"ptBR"===e.substring(0,2)+e.substring(3,5)&&a(c.ptBR)},[]),Object(n.useEffect)(()=>{window.localStorage.setItem("preferredTheme",i)},[i]),o.a.createElement(x,null,o.a.createElement(Q.Provider,{value:{colorMode:f}},o.a.createElement(m.a,{theme:b},o.a.createElement(l.a,null),o.a.createElement(u.QueryClientProvider,{client:mg},o.a.createElement(R,null,o.a.createElement(U,null,o.a.createElement(K,null,o.a.createElement(j.Provider,{value:O},o.a.createElement(p.a,null,o.a.createElement(dg,null)))))),o.a.createElement(C,null)))))};i.a.render(o.a.createElement(l.a,null,o.a.createElement(ug,null)),document.getElementById("root"))},371:function(e,a,t){e.exports=t.p+"static/media/planilha.549edeba.xlsx"},380:function(e,a,t){e.exports=t.p+"static/media/logo_full.6937b13c.png"},645:function(e,a,t){e.exports=t.p+"static/media/sound.7a3389aa.mp3"},647:function(e,a,t){e.exports=t.p+"static/media/wa-background-dark.8244f042.png"},648:function(e,a,t){e.exports=t.p+"static/media/wa-background.2675a051.png"},658:function(e,a,t){e.exports=t.p+"static/media/chat_notify.2529c259.mp3"},692:function(e,a,t){e.exports=t.p+"static/media/logo.b6501746.png"},713:function(e,a){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAfQAAADICAMAAAApx+PaAAABrVBMVEUAAAB2dnZ1dXV2dnZ2dnZ2dnZ1dXWYmJh2dnZ7e3t1dXV2dnaHh4d2dnZ2dnb/8fF2dnZ1dXV9fX11dXV3d3d1dXV2dnZ4eHh1dXWFhYV1dXV1dXXvbxB8fHx9fX12dnZ1dXV1dXV2dnZ1dXV3d3d1dXV3d3d3d3d3d3d1dXV9fX12dnZ2dnZ2dnZ4eHh4eHh1dXV1dXV2dnZ7e3t2dnZ1dXV3d3eEhIT0lxp3d3fyjRd2dnZ1dXV2dnZ3d3d2dnZ2dnb/jiD0kxl2dnZ2dnZ2dnZ2dnZ3d3d2dnbtbw52dnZ2dnb0lhp1dXV4eHh3d3d2dnZ2dnZ3d3d4eHj1jBv1hRvEmHj1lxr0lRp4eHh8fHzsbg7zlhn0lxryhxbxgxX0lxrtbg/1lxp3d3fucBDvdA/tcA7wehLtbg7tbg70lhrtbg7vcxDxgRPvdxHtbg/tbQ7zlxv0lhr0lxvubg/tbw/zmBv2mBz2mRzwcA94eHjsbg7zlxvtbg7tbg7tbg72lxrubg/ubg7scBDwfRLzlxrtbQ/1lhv0mBr0lxz2lxz1lhzsbQ51dXXzlhptsIrZAAAAjHRSTlMAy7fZp62fA6Af9qYGzvwB0t4R0GqJcRs/C/qVPhQP/e7qm+KOYzE7NuYY88JUKiXxxoEi1btQCPtH3KqleXZgDQretLCSfFxL/oRY6r9AJ+xtNC4dEgT25DMh9vLv49rQhGxBM/v58u7Tua/x6+jgv6yfh1RGQTUoJCDm2cmhk5JzaV/gxZp6YVlRSVahGaQAAAzRSURBVHja7NcxCoJgGADQ72rdodShQLyBCrq4OojwnbkhgggbW37fu8ULAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAP6u6pauCs5kajOznYLTuPb50l+DU7iMdb7V4yUo39bkp2YLCjev+W2dg4Ldhjwy3IJCVd0jj931rVD7kr8te1CcJ3tn2pTIEQbgV10dZREWEBAobrkVwQN0PeOxGm9jLjebc3NU5fqQfMhVSaUqqUoqNa+/OUw3dM9MDwuzUM6oPJ8WxIbh6e73mN7dn7++eTVf/wwD7hVv/Lhy04mVQfl2n3D/e3LTDSf/umHA/eCnT2665ZNB+XYvePuHGzP8MOjM3nne+OfFjTle/DMI7Xeb/3ZuzLPzHwy4s7Qv0wbl2z3lnT9Xbl6XlT8Hndk7yLufndz0wsmgM3vnIEdjemBwsObOQY7G9MDgYM3d48/3bvrDytfQG04JBtwO3+30SfrJ92DI0bCKvZQ/cFAGA1bTiENX0JmAMk4K+s+0f9aTKDwZP5YAYDPSIAP3FPnNj97vg/L3PpZlMGQYBQrjB9ugJR/HBhdF6MgYNhiBfnM2hE0moQF5NAr3FFmWv3j6Ya9b+9M35W6kcxIbIVCzjAS/VdI34thi6kFIl+WvdlZ6cf7+t7JsQjolGZCAk0TCsEXSA8gobT8Q6bLcQ2j/8G9ZNiGds7sNDB8Sxq2R/lYcGSl4MNIbof3k9Xb2RjDvLH1phhJ5tOxzYYuleWixiYRVC6Sz4OKaeRl8Pnf+gKQrof01qrenX8qdpOtX8PbhzAVSEsy6tIaI8QWwRHqQ7utZIDwo6UpoN12mybIJ6YzQZhIJIzFesx09uwZrpGdQ4RIepHRZNlW+vSA7uxnpnOgyEvbcoMIi6X5UiD1U6fKbXZdvK09lhnnpIM0gYdMG0lOkeQAPVnrX5dvOt7J56eJXjYmY9dLXSU/mIUvvqnz7kATz3qQ7q6iwMJB+68gCpHzr2HPtXTpMhDstdcn7vOjsUnrseQxehXOivA3GPO5e+v049y0L0PLtRacyrXfpkOJtTzjPNvgVVOQik2RWXOwFiq+WHqqlPA5EDHvG5gzFus8iaWxQmc2Q7u9irsG5MhOyCsNkyDyl2E56MDPqK7gcnqHIYZ1PJa+CdmKSp0LaT0ieA7sgCwihXey59kn6oot/tZPY4LFKuQ85jlSwvfT6ZgI5lWch0HNdVQ21IAFEsMEjZbNBgSlj6eVd5JT8MaC8hQrPNFeFCmlQM4sNfGAXZDWdy7cXtOfau3T+XSQkUbr7CLVc1NpJz6VRS+ElEPhYcVQzNG9eej0VRw3JA6CQd68CgzUX88CJuejUsAuyCC/fTgx6rv2UvkC/HkG6e7yNDFH6sQP1hLdAhSSMVQialR6tosARDe+k8oxHgTMk3jA8RoUy2AVZpF1ndmXnA7m/0s9oK0yQPsNXVCGMlHjNSHqG79sFBxeny9IopSRSnqyZk170oAFjoDCNCgfqni7FA5xx+pltgywglm+859pn6V5etPlU0l82NY7nQgDOs8cuWtF7RelvNUWPTC0CuINTPiSEc9BiCinDc14AZ27GgRQqPbikUCHv5qMcC9KlUyS41o5/DcWuAkOIfLJKSTqWeJf2CgjsNX6wDXIH6MEaWqb1Xbqb6IzopQ9Rkee6sO0XpMc8dHZMSa0BM1RqIQqUK/o4nWMLcY9Lb/GILP+2JZsfCbPz0GSuoJpaKZaXUGbZ/g8t8qjwFtgGuQPkYA05GtNn6fzsxJp+e8+OORA9MWAskteVnFy6OidIqL/O66QmotKcezIKDCliUvo83Wj2JWAEn9CUEBqsosI0NCnGEZGEpCVt6pIG+yB3wVdPaZnWf+kj2OBUzN6jG+k5EDKhM530WIIE+1VQkwuTxU81Z2nqPwEq3MPmpI8h/zNTS9f6IQA4K5q9e4o8crDEjQ22D/ZBNkFfpfOCZ9eoTpe0ccBDNkyd9IDhubpntHRWCZsDDdGSGelBF1mn20Yp6Cxr4rLfXia6d9UlWrG5F9gHa6WXSBosSBdJkVG4dD50KQpathO8dC6QF7tBy4wZ6VsspxcvyxVTIjwqTAAh6iKfbqvVjGEjJO10qt9S6XW+VEXp+c3RJ+mKp7q2P+ekYXFYK93poFNGzz7zUUaFAOgom5H+mKUTGg5RoQYAIYdqVmToBXnJ9rAIhFF69M5GWCp9HhU2DaRLU0vIuZhJsdXLpedZiaylRhMAtkqzQtGQNCGdRSAtIZI6zDCpu+xqSZ6+3LwwFvRXwUZYKj1DQ64oPe9DA4a4dL7YztsceTtudUTjEuhZNiE9bNBBZTXmOjQ4IJljnaSWyqvT7mY+N8S7DhUn2AhLpa8TKV5Bes2BHaTzKRNtEzQuWxX2BQisdS89xkK60XUtM9N4yPzvtyo3DLIMYh3shJXSnQWqUi/9pQspyeHxyNjokkuUzpN3cQnxxRmh/VCBVPfSn7NtQ8ca/+zDrMW0xyrLKssmRmjwtxNWSedL9UgvPeRBwl4OKKEDn5H0rXYrnS3OI9K76Wmle1Eh0+a6Tvl1eFo5XVJiM3K2NWtKdbATFkqXRmiepZd+iULSLa23jell0DNBMwW2F4gx/bRL6axTvAECQ3wMupeXm9Vbin+IeBHg0oYHr6ySzpTsgl56Fdl2ydjXSecHGLZAAyucc6yRlxey90SX0lmpvyaGphIN37zfvtncQQ5VI0w1r/8YbIV10s9oqL7WS5doleYUj1sMGdXp62LEZtn0r2i4TLNoQjoJ00k3cMRbqgG61ddLqjx9gyR6dMcPx8BWWCb9PEkDN+ilF1FcW8G4gXTYJXaLoMVbYnk1eEi0lUBLxIz0KdaFEQsPLKoCiitWU1cg5+S56CHtKtkLq6TXKjQ/DwrSacdmX1i8ovRLFgfU+FUZwb5RBAg6zEinH2dS0k1ZF3kW1J9+blzT6F8iGSCZYHb7Jy2skR6dQUJ4GgTpXhQWRw0NpYeSBvdTVuMkZd9WHb2szIMKadbcXbY9g9s6dZ+2G7hBBkwgoiOkuaE6nCbrHeyFFdKf+x3CuSYqnadZrhwwDh2idP5do2MVOLkEu8nGd+GRCc2ZOXPSr8UjWPVROqyk6eazcEW5whanYDNuR/roIqU8XcukPNgkvgEE3ckZaqWSB0p9IY5tpIdo0efacALFGQhTHaHW/KJRpHAITRaX0Yx0PnFwfxuazE8ioaY9GKAPJew6L8Fm3Ip0YyqHYCg9h5S91SCEss/Shm1YStmBBM9CNgTO7IYHCY6yqn6jnG4FJfCuphxoWnpoCQmFDSVMOKdTLvG86xFSXF5NckEJgs2wTvpSGQTpXAIljBSPX5ROnbqwBdfpmtPldZR4a7TTlCnpMJ9g7zGSZm+zLAHnuvUkcPJIqYLdsEq6Z4t9Z0LvPTaJWirlgCidslpBPaVVULMgzLZYxJx0OPegwCMnqPGIkd9dQMIm2A1LpLuqGa5cXOkQnUU16RwI0hlXPtTiuwItmRKq2YsCkb7evXSInqKW8ILb6DQOFrVtRMI82I3bll4Zqe7XtkGDeD9dCiT5rvzYC6J0jnTgQU6a7SCc4CP1DtNKFSNdSOfUllDFmiBy2mAnP0M6sO34Q+4Xf4Ah0QkVRSe0oaj8OAqMemY0iegqVDeCZMcnv83GC4IaKb8w6ymhwzN7lJfAiInAaTqMF77xl27WylsAgvGQ2ekGZc2bTPufkHieWA4w5eofK8wbPHcO9uPz3+V+8Pvn0HekmATd44RX4+YvGHndQmp7MWirIzCvjfuv3+Re+e2vu/S39Ytou1Nrt88bn34g98KXn9r5P23KThne0w2H4IHzyzc9OP/mF7AtzuMq4jVoqP/f3h20RBWFYQC+kdEiMVpEmy8wsigUgqBFBBG4CLdKbdxK6MpZOJugRBeu7v3PgiPIMIIz9x7xfPo8f+GDmft+973nfJy0WhgftP0cjJt67by5mO/ytaee0Pw+3W8Xt39S9Z09zyctnM3lmc+e3t6PB7LBfh1vtYvZOqv9dq73k5c1G9vNpb/fuq7GV9x3Z2/ULmK011RvrZvY/Pnh9audd0uX+/dnmdLGbTs6bOd1eNQkcNGjnbHhx71PfNutOqZNHzQ0Y+lHw5TxXDEtzzVsT1+udFPW/Z/PiDliWjSZbH/prqx+rufkxnrEjTHtNN1T0KfvTx6vrqy/eLT29cEv4voM/c9x7TGN0kMfVbxzpbdIH9MoOPTdkyQxjWJD/58nplFm6P8S7FzpK/JXY1hUZKvGMFykqsZQRGSqxlBGZKrGUEakqsZQROSqxlBC2Lk+PJGsGkMBka0aw3CRrxrDUJGxGsMwoRoDAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAQue6vJdUy+5+yQAAAABJRU5ErkJggg=="},714:function(e,a,t){e.exports=t.p+"static/media/n8n.5c788b8d.png"},715:function(e,a){e.exports="data:image/jpeg;base64,/9j/4AAQSkZJRgABAQEAYABgAAD/4QCYRXhpZgAASUkqAAgAAAAFABoBBQABAAAASgAAABsBBQABAAAAUgAAACgBAwABAAAAAgAAADEBAgALAAAAWgAAAGmHBAABAAAAZgAAAAAAAABgAAAAAQAAAGAAAAABAAAAUGhvdG9TY2FwZQAAAwABoAMAAQAAAAEAAAACoAQAAQAAAAMBAAADoAQAAQAAAFcAAAAAAAAA/9sAQwACAQEBAQECAQEBAgICAgIEAwICAgIFBAQDBAYFBgYGBQYGBgcJCAYHCQcGBggLCAkKCgoKCgYICwwLCgwJCgoK/9sAQwECAgICAgIFAwMFCgcGBwoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoK/8AAEQgAVwEDAwEiAAIRAQMRAf/EAB8AAAEFAQEBAQEBAAAAAAAAAAABAgMEBQYHCAkKC//EALUQAAIBAwMCBAMFBQQEAAABfQECAwAEEQUSITFBBhNRYQcicRQygZGhCCNCscEVUtHwJDNicoIJChYXGBkaJSYnKCkqNDU2Nzg5OkNERUZHSElKU1RVVldYWVpjZGVmZ2hpanN0dXZ3eHl6g4SFhoeIiYqSk5SVlpeYmZqio6Slpqeoqaqys7S1tre4ubrCw8TFxsfIycrS09TV1tfY2drh4uPk5ebn6Onq8fLz9PX29/j5+v/EAB8BAAMBAQEBAQEBAQEAAAAAAAABAgMEBQYHCAkKC//EALURAAIBAgQEAwQHBQQEAAECdwABAgMRBAUhMQYSQVEHYXETIjKBCBRCkaGxwQkjM1LwFWJy0QoWJDThJfEXGBkaJicoKSo1Njc4OTpDREVGR0hJSlNUVVZXWFlaY2RlZmdoaWpzdHV2d3h5eoKDhIWGh4iJipKTlJWWl5iZmqKjpKWmp6ipqrKztLW2t7i5usLDxMXGx8jJytLT1NXW19jZ2uLj5OXm5+jp6vLz9PX29/j5+v/aAAwDAQACEQMRAD8A/HOrei+H9e8SXo07w7ol3f3BGRBZWzSuf+AqCaqV/Vp/wQH/AGfPhx8F/wDgl18KtY8J+ErC21Txb4eXXNf1OG1UT31xcu8gaWTG59sZSMZPCxgCv9kvHDxfh4PcO0MesL9YqVqns4x5uRL3XJyb5ZPS1rJat7o/Pcty95hVceaySufy5f8AClPjJ/0SbxL/AOCK4/8AiKT/AIUp8ZP+iTeJv/BFcf8AxFf2v+RH/do8iL+7X8tf8Tw5t/0JIf8Ag+X/AMqPb/1ap/8APx/d/wAE/ig/4Up8ZP8Aok3ib/wRXH/xFH/ClPjJ/wBEm8Tf+CK4/wDiK/tf8iL+7R5EX92j/ieHNv8AoSQ/8Hy/+VB/q1T/AOfj+7/gn8UH/ClPjJ/0SbxN/wCCK4/+Io/4Up8ZP+iTeJv/AARXH/xFf2v+RF/do8iL+7R/xPDm3/Qkh/4Pl/8AKg/1ap/8/H93/BP4oP8AhSnxk/6JN4m/8EVx/wDEVS1z4c/ELwxafb/EngTWdPg/57X2mSxJ+bKBX9tnkRf3ap+IPDmg+JNIuNC8Q6Na39ldwtFdWd5brLFNGwwVdGBDAjggjmqh9OLMlNc+SQ5etq7vby/dCfDULaVPw/4J/ENRXu//AAU/+DvhD4Af8FC/jF8H/h/pkdjoeiePb+PSLCEYS1tnkMkcKjsqK4QeyivCK/vjIs2o59kuGzKimoV6cKiT3SnFSSfnZny1Wm6VRwfR2CiiivVICiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAr+vH/gjZ/yiu+An/ZM9M/9FCv5Dq/rx/4I2f8AKK74Cf8AZM9M/wDRQr+I/puf8kllX/X+f/ps+l4b/jz9P1PpeimtIqnBNBlUDPav837n146im+anrR50f94fnSugHUU3zo/7w/Ojzo/7w/OjmQ7MdSP0/GjzFxnNNZg3AouI/ke/4LZ/8pX/AI6/9j3cf+gR18t19Sf8Fs/+Ur/x1/7Hu4/9Ajrif2G/+Cev7TP/AAUT8d6x8OP2YPDenanquhaSNS1GLUtXis1S3Mqxbg0hAY7nUYHPNf7acG5zlXD/AIVZZmGY1o0aFPC4dynN2jFOnBat7atL5n5viKc6uOnCCu3J/meI0V+h0f8Awa8f8Fbn+98MvCS/73ja1/oaJP8Ag14/4K3J934Z+Em/3fG1r/U1y/8AEb/CK/8AyPMN/wCDY/5lf2Zj/wDn0/uPzxor339uz/gml+1d/wAE4tV8OaL+1L4W0zTLjxXb3M2jLputQ3gkSBo1kLGInbgypjPXPtXgVffZLnmUcR5bDMMsrxrUJ35ZwalF2bTs1o7NNeqOSpTqUZuE1ZroFFFFeqQFFFFABRRRQAUUV+gf/BGb/giBpH/BVzwB4y+IOs/tF3PgqLwjrVvYGytfDC3zXfmwmXfva4j8vGMY2tn1r5bjLjLh/gLIp5xnVV08PBxTkoyk7ydlpFN6t9vU3w+Gq4qr7Omrs/PyitDxZoieGvFWp+HEmMg0/UJrYSMuC3luVzjt0rPr6ShWhiKMakNpJNejMWmnYKKKK1EFFFaPhbwj4r8c61H4c8FeGNR1jUZlZorDS7KS4mcKCzEJGCxAAJPHAFZ1a1KhTdSrJRitW27JLu2xpNuyM6itHxT4Q8WeB9XbQPGvhfUdHv0RWey1Sykt5lUjIJSQBgD2OKzqKValiKaqUpKUXqmndP0aBpp2YUUUVoIK/rx/4I25/wCHVvwEx/0TPTf/AEUK/kOr+vH/AII2f8orvgJ/2TPTP/RQr+I/puf8kllX/X+f/ps+l4b/AI8/T9TqP2pdB+LOra5p0vg231KfTltcPFphYlZ9xyzKvP3duCeBg9O/pPwytPFFj8OtMtPFzu+ppaf6SZm3Pu5wGPOWAwCeeQaj+KXxs+EHwU0yPXPjB8UNA8L2crFYbnX9WhtFkYdVUyMNx9hk1503/BSX9gZCVP7YHw749PFNsf8A2ev82cu4TzKrj6uYYanWqKpZWUZSgrdrLf8AI+4xvEWE+oUsDWdOHs23e6UnfvdnkvjDSvi+3iC5Pimx1uS681tzyJKynk/cIG0r6bePSsgeHPGB+7oGpH1/0WT/AAr3D/h5L+wJnj9sD4eD/uaLf/4qgf8ABSP9gZun7YPw8/8ACptv/i6+WxHg3nNarKp/tOrvrCT/AEPqMP4qYChSjBQoaK2kkjxIeFPG2P8AkWtWx6/Y5P8ACmN4Y8Yr18PaoPUm0k/wr3RP+Cjv7A7/AHP2w/h1+Piy1/8Ai67j4UftCfAv46Rzz/Bn4weGvFK2pH2r+wNagujDnpvEbEr+NcNfwfzHCUnVr1K8Yrq4NL73oddLxTw9eXLTpUpPspJv8D5bttM+JEc6jT7DXBKRhPJhm3H2GBmvqj4IR+MIvhnpqeOmnOo7H8z7USZQm9tgfPO7bjOefXmrPxI+Mnwm+D9raX3xX+JmgeGoL+4EFjNr+rw2i3Ev9xDKyhmxzgc1u6fqNjq1lFqWmXkVxbzxrJBPBIHSRCMhlYcEEc5FetkXCM+Hn9Y9rUnGasub4dGr26Nr8Dx884pWewVF0YQcXd8vxbdfI/kl/wCC2f8Aylf+Ov8A2Pdx/wCgR1xH7Dv/AAUH/aZ/4J3eO9Y+I/7MHibT9L1XXdJGm6jLqOkRXivbiVZdoWUEKdyKcjniu3/4LZ/8pX/jr/2Pdx/6BHXy3X+7fBmT5Xn/AIV5ZgMxoxrUamFw6lCaTjJKnBq6ej1SZ+J4ipOljpzg7NSf5n7hf8ERP+C5X/BQb9uD/goP4a/Z3/aC8d6Df+GdT0fVLi7t7Dwxb2srSQWjyx4kjAI+ZRkd66L/AIL7/wDBan9u/wDYL/bds/gJ+zZ4z0LStAPgix1WVb7w5BdzPcTTXKPl5QcLiJMAAd/Wvh//AINiDj/grz4L/wCxc1z/ANN8tdX/AMHXT+Z/wVKgHZfhlpAH/f68NfzHivDbgOP0n6OSRy2isI8E6jpci5HPmkubl2vtqe1HGYr+xXV53zc1r31toeka1+xp/wAFE/8Ag4P/AGSvD/7a3i79qX4e6xdeDYNYsbDwjB4cksbu2uEZHltXaBGRpJFjgdCeMSrnGTX5EyI8TmORSrKcMCMEGv19/wCDST9sUeAv2hvGX7GHifVdun+O9M/tnw3DI/yjU7RMTIo/vSWxLH2tBXx1/wAFk/2KNc/ZW/4KdeNvgl4S8OStp/irXU1nwTaW8R/f2uoyF44Yh32TtLbgesVfpPhvxFjuEfE/N+AcfyU8LSgsRg1GEKcVRlJynFcqSfK5at63hNtnHjKMMRgqeKjdyektb69P68zov2B/+CJPxX/bi/ZQ8Xftl3Xxp8PeAvBXhGa9W4vNfsp5WuY7S2We5mQR8CNA23OeWVhjitb9lj/ggn8fP2uP2B779u74YfFDSJra3tdWksfBcek3M2p38tk8ieRF5YKmSVo8KPVgK/QX/gr9q2j/APBKb/ghL4B/YB8EX8UHiPxrZ2+iao9u2GmVcXmsXA9VkncRH/Zusdq9v/4N1PHmhfC7/giBpHxN8T7v7N8O3XifU9QKAFhDBd3ErkZ77UNfkfEfjf4nQ4GxPF+W10qFbMVQwsHTg70IxqXu3G7dSSir3unFqLR30ctwX1mOHmtVC8nfrp+R+dPwW/4NMf29fiH4Eg8V/Ev4peBPA+oXUIkj8PX1zcXlzDkZ2zNBGYkb2R5MfpXyh/wUK/4JC/tof8E1723vvjz4Mtb3wzf3P2fTvGfhu4a502aUgkRMzIjwyEAkLKi7sHbu2nHSftJ/8F1f+Ck3x7+O978YNA/af8W+C7Aag0uheFvCutSWlhp9uGzHC0UeFuSFwGeUOXOc8EAfs7/wTd/aCb/gvB/wSQ8Z/DD9qLTrK48SKbrwt4i1CC1WNZrtII57PU0jA2xyAyROQuF8yFioVSFH1Wfcc+PvhXTwnEnFdTD4jL6s4RrUqUeWVDn/AJZWTk47XcppvTqpGFLC5XjuajQTU0tG+p/OR8E/gf8AFr9o74naV8G/gf4E1DxJ4m1q48nTdJ02HfJI3UsScBEUZZnYhVUEsQATX6dfD7/g0U/ba8Q+CU1zx58f/h54d1iWAOmhg3d35TEfclmSMKrDuUEg9Ca+k/8Ag1R/ZP0T4Wfs5/FD9r/WPBran4zufEt34b0+CBEM8dpYxRSywQs5AVpriTackA+RHkjBr5z/AGnfhH/wdD/tDfH6++N3/CAfFPwsn9pNPoHh3wr48tbSw0mAN+7hSKG8VJCFwGdwWcgls5xVcV+MvFXEfH2NyHhzNsJlmHwVlKtiXDmrVHvGEZ3XLF3TaV1a7eqQUMuoUcLGrWpym5dF0XmfC/7fP/BMX9rj/gm94ytvDP7SHgaOLT9Sdl0TxTo85uNM1IqMssc21SrgcmORUfHO3GCf1z/4M78H9nP4zg/9Dpp//pG9e+eIfgl+03+3z/wRC8XfC/8A4KS/B59C+K2jeH9Rmtp7tbbfcX9hE09jqSC3ZkiaTCxyBSM5mACq4FeB/wDBneQv7Ovxm9B410//ANJGr894/wDFHMfETwCzjC5p7N4zA4mjTqTovmpVE6i5KkGm1aXLLZ20urXsurCYKGEzSnKF+WSbV91psz5T+E3/AAa8ft7ftKanrfxR8beI/C/w203VNZu7jS9P8TPPLqMsLTOUke3hjIhDAg7XcOM8oK8F/wCChX/BCP8Abn/4J2eE5Pil8QNF0nxV4JhlVLrxX4PuZJ4bIswVPtMUkaSQgsQu/aY8kDfkgHt/+Cnn/Bd79uH49/tV+JYfgV+0J4o8A+BPDmt3Fh4V0rwhq8mntcQQylBdXMkJV5pJdu/axKIGCqOCW/TH/g3x/wCCi/jP/gqJ+zZ8Qv2W/wBss2/i3WfDFlFa32oX9sgOuaNepLHsuFUBXkQxujPgFlkjJywZj9pmnGP0iPDrhrDcX5zLD1cB+79rhYRtOlTnZR9+1+bVJvnklJ7NXtzww+U4us8PTup62l0bP55Php8MviD8ZPHml/C/4V+D7/X/ABDrd2trpWj6XbNLPcyt0VVXnpkk9AASSACa/Tj4Rf8ABpN+3l428HQ+IviX8XvAHg3ULmESJoU9zc3s8BIzsmeGPylYd9jyD3r63/4N1P8Agmz4M/Zy/aJ/aM+MPiOzivrzwB8SdR+H3hHULobntre2ImuJxno8sUtoNw5ADjOGOfzf/wCCgX/BeL9u/wDaR/aW17xT8H/2jPFvgTwTp2szReD9A8J6xJp6paRuVjluDCVaeVwA7eYWUFiqgKBX0mYeJXiT4ncb4jIfD2tSw+HwtOnOriKseduVSKlGEYtSS3a+G94yfMkknjDB4PBYZVcWm3JuyXkcJ/wUP/4Iwfttf8E2rWLxX8ZfClhrPhC4uRBB408K3D3Ngsrfdjm3oklux6DzECseFZjX3H/wbGf8Euvixf8AxM8Gf8FP28d6DH4Us5Nc0seH5Fn+3ySG3ltPMU7PL273J+9nCmvrP/gh7+27qP8AwWR/YX+In7Nv7bFjZ+J9Y8Pxx6N4jvXt0jOr6bexSeRPIqAKlwjQyjegHMcbjDZNfDf/AAQO8W/tF/s/f8FkJf2BLn43+J5fBHhbWfFtjfeFBrEw0y4uLSK5j+0fZt3lhi8SvkDOcGvhOJvEDxJ4o8PeJOFs2nSoZllsW8RKMbwxGGlCXNyKz5ZyvF81krNaRd0dVHC4Oji6Nemm4T27qXn5H1X/AMFjf+DfP9ob/goP+2LrP7VHw3+NngvQ9KuPDlja/wBm60l39pD20JVj+6iZcHjHNfz5yoY5GjIwVODX6zf8HIf7b/7ZPwQ/4KV6x8Mvg3+1R8QfCnh1PCGlSronh3xdd2VqHkhYyN5cMirlj1OOa/Jh3eRzJIxLMcknua/ZPo04DjfDeH+Fr5xi6dXCVKNL6tCMOWVKK5rqcrLmb92zu9n3POziWGeKkqcWpJu77+glFFFf0YeQFf14/wDBG0Z/4JW/AQf9Uz0z/wBFCv5Dq/rx/wCCNn/KK74Cf9kz0z/0UK/iP6bn/JJZV/1/n/6bPpeG/wCPP0/U8E/4LM/8Erv2gv22viRoHxl+BOt6LcTaP4dGl3Ph/VbtreSTE8solikIKHPm4KsUxsByeg+FG/4IN/8ABSlf+aP6S3PbxbY//Ha/fwqCckUFQTX8jcK+O/HPCGSUsqwfspUqd1Hng20m27XUo31b31OPOPDvh/OsfPGVnNTlvyyVr7dUz+f9v+CEX/BSxenwV00/Txdp/wD8epP+HE//AAUr/wCiKad/4V2n/wDx6v6Adq+lIY1Pavo/+JnvEb/n3h//AAXP/wCWHl/8Qm4Z/nqf+BL/AORP5/8A/hxN/wAFLT934J6d/wCFdp//AMer7Q/4I3/8Eof2ov2QPjxf/Hb48alpuj28nh2fTbfQdM1UXMty8skTZnKAxhF8vIAYktt6AHP6YeUnpShVHQV4PE3j5x1xVklbK8VGjGlVVpckGm1ppeUpJbdr9mejlPhxw/k+Phi6Lm5Qd1eStf5JH5t/8FtP+Ca/7U/7Y/xZ8HfEn9n+yttas9O0F9NvtIu9XitfscgnaUTr5zKrCQOFbHI8leCMY+w/2DPgT44/Zn/ZG8D/AAN+I/iGLU9a8P6QYb64t2LRozSvIIUY8ssauIwcDIQHA6V7CUUnJFI6gDIFfBZnxxnebcKYTh6vyfV8NJyhaNpXd/ilfW3M9kvO7R9FhOH8Bgs4rZnT5vaVUk7vTpsvkv0P5Hf+C2f/AClf+Ov/AGPdx/6BHXy3X1J/wWz/AOUr/wAdf+x7uP8A0COvluv9l/DX/k3mUf8AYLh//TUD4/Gf73U/xP8AM/QP/g2K/wCUu/gv/sXNc/8ASCWup/4Ot/8AlKcn/ZM9I/8ARt3XyL/wTp/bj8T/APBOz9qbSP2pPCHgSw8SX2kafe2selaldPDDILiBoWYsgJGAxI9xWn/wU0/4KD+LP+CmH7Sa/tJeM/h1p3he9Xw7a6SdN0y8kniKQNKwk3SAHJ80gj2r81xHBHEkvpF0+KVRX1GOD9k580b+05pO3Lfm2a1tbzO2OJo/2Q6F/e5r28jzr9lT9oLxR+yn+0j4J/aN8Gsx1Dwd4jttSjiV9vnxxuPNgJ/uyRl4z7Oa/qE+On7CnwV/4KGftE/s0/8ABQzR9QtLrTvA5OuREpk6vYT2wutP5wf9Td+VKAezyDqa/lv079nD9oTWfh5b/F3RvgV4xvPCd3LJFbeJ7TwzdSafLIjbHRbhYzGWVgQRuyDwa/o1/Yy+NPxJ/wCCaf8Awb06L8Y/2l4JLXxD4U8EX11oek6plJg1zdTf2RZyK3zBiJrZduMopwR8pr8f+lZh4VsZlObcP4mP9oSnUwXLCSc5RrQlFxaV2uVuUXfZ1OjsehkbtGpTqr3LKWu2n9fgfk7/AMHKv7Ya/tP/APBSDWfAHh3VfP8ADnwqtB4a09Y3yjXqt5l9Jjs3nkwn1Fstfqx/wbyfDrSPi/8A8EMNP+FGvyvHY+J5PFOk3skY+ZYri6uYXI99rmv5rfEniHWfF3iLUPFniPUJbvUdUvZbu/u5my880jl3dj3JZiT7mv6Mv+CHnijxB4I/4N3tV8aeFNUlsdU0fQ/Gt7pt7DjfBcRPdvHIuQRlWUEZ9KX0h+EqfBvgXkeQ4JpOjiaEFLvP2dXmn85tyfqGU4j6xmdSrLqn+aPxF/aT/wCCWn7c37Mvxxv/AIG+Kv2cPF+p3cWotb6PqeheHbm7tNZj3YjmtpIkZZFcFTtzuUnawVgRX7s/8EfP2bdU/wCCM3/BKLxj8Yv2sPL0fW7wXnjHxJpcs677CNLZI7axJBwZ2Ea/KM/vJwnJHPxp8DP+DwL4w+FPANtoPx9/ZC0jxfrttbiNtf0PxW2krdsBgPJbtbThWbgsUYLnOEAwB8hf8FP/APguf+1d/wAFNdLh+HPiXT9P8F+ALe6W5XwfoE8kgu5VJKPdzvhrgrnKqFSMEBtm4Ajs4l4Z8fvF2hhOF+I8BRweCp1ISr14VIy9sofyRUnJX1aTives20lYVGtleAcq9GTlJrRW2P01/wCDU/8AaZ034t/st/Fb9m658TjTvF2n+NLvxDC0O3zVtNRhiTz41fIby7iGQnIIHmRgj5ufk79sb9vX/g5J/Yt+NGo/CP4k/FrxTcwR6k9voHiLTvhvps1jrcW4+VLbypZFWLLgmPO9ScMARX5x/s0ftP8Axx/ZA+L2mfHP9nvx5deH/EelOfKurfDJNE2N8E0bfLLE4ADIwIOAeoBH6y/C/wD4PE/iLpXhSGx+Mn7EOj65rUUQEup+H/GcmnQTsB18iW1uDHnrxI30qeLPCHijhTxBxue5LkWGzjB420pUa3s1OjUS1cJVNFGTu3a972aXKmLD5hRr4SNKpVdOUeqvqvkeQftGftnf8HL3wY/Zhtv2g/2i/G3ibw/4C8SztpTy6n4U0WGdRNGQontxbefbpINyq0irkjHG5d31l/wZ2gN+zn8Z1I4PjXTsj/tzavz5/wCCnP8AwX+/aw/4KQeEJfg4/h7TPAHw9nmSW88MaJcPcTaiyMHQXV04UyqrKGCIka5ALBiARlf8Erf+C2vxS/4JWfDrxf4A+HXwT0HxT/wlurwX813rWoTxfZ2iiMYVViHzA5zkkV28SeFnG3EPgnjMuhkuEweY4itTl7LDclOPs4TTiqkrqLnFOW0mrbWbaFRx2GpZlGbqSlBJ6u71t0M3/gqD/wAEkP2r/wBkH9rHxT4e0P4IeJde8Gaxr1zeeC/EOg6NNe29zZzSs8ULvCrCOdAwjZGwSV3AFWUn9XP+DZr/AIJ6/FL9hr4EfED9qT9qTw7P4P1HxrDbCz0jXF+zz6dpFmssjXFwrYMJkaRjsfDKkIYgbq+Vv2U/+DuD49/C/wADQeC/2mv2dLD4h3Vonl2/iTTfEB0u7lQfd+0IYJkmfGBvXy84yQSST4r/AMFKf+Djn9q39vjwBffBDwT4Qsvhj4G1RDHrOm6TqL3d/qkR6wz3bJH+5PeOONN3KsWUkV5nEPD/ANIvxC4co8D5rgKOHw16ca2LVSMlUhTaaagpcybcVJrlV5L7CbKpVcowlZ4mnJt9I22ufpF/wbz/ALffw8/ai+Ln7T3w4XUYorzxL8XtT8eeH7Kc7ZLrS73y7ZioPJ8sW9vu9PPFfjz/AMFAv+CSn7X/AOxx+0vrnwwT4H+Kdf8AD9zq8zeDPEeh6HPeW+q2bOTDhoVYLMEKh4jhlYHgqVY+BfAL4/8Axf8A2X/i1o/xx+BXjm88PeJtDufOsNSsnwRkYaN1PyyRupKtGwKspIIINfrZ8JP+Dw74paF4Nh0r42fsV6P4i1uGELJq/h/xjJpkNw4GNxt5LW4KE9SRIRnoBXu4nw/8TPCLjjE51wLgoY7CYunThUoTmqc4TpRUYyUpOKa3el/iknFWTM1isHj8MqeJlyyi3Z2vufS//Bu/+xH4w/4Jkfsa/Ef9qX9sSybwXe+K44dU1HTtY/dy6Ro2nwzOklwvWORjNOxjPzKoQEBiVH57/wDBDn4+2/xj/wCDg22+NN/CbVviHrni/UIYHxmNrq1vbtYz9FGPwrz7/gpp/wAF+f2uP+Cj/hOT4QXWk6d4C+H00ySXnhfQLh5pdRKMGQXdy4UzKrAMEVY0yASrFVI+O/gt8Y/iL+z38WNA+N3wl8QyaV4k8M6nFf6RfxqG8qZDkZUghlIyrKeGViDkE118L+DvGub5NxNm/E7hTzPOKUqahF3hRjyNQi2r315U7OVoxWrbZNbMMNTqUadG7hTd79z9Kf8Ag6H/AGcfjnr/APwU7sPFvhf4TeINWsPF3g7Tbfw/c6VpUtyt9cwCRJYI/LU7pV+UlPvbWU4wQa/LXUdOv9I1CfSdVspba6tZmiubeeMo8UikhkZTyCCCCDyCK/Z/wb/weJ+PrLwBDYfEL9hrSdU8URW4WXVdM8bvZ2c0uMeZ9ne0leMd9vmt6ZFfkR8fPizc/Hn43+Lvjde+GNP0Wfxd4jvNYuNK0lXFtayXMzSukYdmYKGc4ya+18B4eJmTZHT4d4lyqOGo4OkoU6qqwn7VqTXwxbcVy216vtey5s0+p1KjrUZ3cndq2xyNFFFf0AeUFf14/wDBGtlP/BK/4CBTnHwz03/0UK/kOr96f+CLv/Bwd+wj8EP2JPBX7Mn7WHjzV/CHiLwRYyacupTeHbq9sr63E8jwGNrNJXUrEyIwdFGUJBINfyN9L7hLiPijg3AyyjCzxEqNZuUacXOSjKDXNyxTbSaSdlpdHv5BiKNDESVSVrrr6n7P0V8Rzf8ABxj/AMEbIHKN+2NCSOpTwTrjD8xZVG//AAcd/wDBGhOv7Yq/h4E14/8AtjX+eX/ENPEb/oTYr/wnrf8AyB9Z9cwf/PyP3o+4KK+HD/wchf8ABGVev7YZ/DwBr5/9sKaP+Dkb/gjGen7YL/8AhvfEH/yBT/4hn4j/APQmxf8A4T1v/kA+uYP/AJ+R+9H3LRXw4P8Ag5C/4Iyt0/bDP4+ANfH/ALYU9f8Ag47/AOCM7dP2xV/HwJrw/wDbGl/xDTxG/wChNi//AAnrf/IB9cwn/PyP3o+4KR+n418Sx/8ABxj/AMEbJWwv7ZEA928E64P52VYXxI/4OWP+CQvgrQJtT0X9onUfE13GhaLStA8F6n50xxkANcQRRD0+Zx1q6Xhh4k1qipwybFXf/UPVX4uFhPG4NLWpH70fgn/wWz/5Sv8Ax1/7Hu4/9Ajr5br0n9sb9oO6/av/AGqfiD+0jdaSbD/hNPFl7qsNgz7mtYZZSYoiw+8Uj2KT3IzXm1f7N8EZdiso4Ny7A4mPLUpUKMJLtKNOMWvk0fneJnGpiJyjs2/zCjOOaKK+nauYn6o/8E1f+DmfXf2Gv2atA/Zc8d/slaX4l0bwtbPBoupaBrx0ydkeR5WNxG8MyyyF3YmRSmc5Kk5J8H/4Ky/8Fu/j3/wVJOmeCNQ8I2vgjwBot4buy8KafqD3T3VztKrPdTlUErKpYIFRFXe3BJyPiaivyjLPBDwyyji2XEuGwCWMcnPmcpySnK7lKMJScVJtt3S0e1junmWMqYdUXL3dg6Cvv79kb/gvb8Qv2TP+Ce+o/wDBP7R/2ddG1nTdR0zWrKTxJc69LDOi6j529hEsZX5PNOBnnb2r4Bor67izgrhrjjA0sHnVD21OnONSKcpRtOKaUrxcXom9HprsYYfE1sLJypuzasFFFFfUpWRgFFFFMAooooAKKKKACiiigAooooAKKKKACiiigAooopMAAxRgdcUUUWQXYUUUU7IAoooosguwwPSiiilZAFFFFMAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKAP/Z"},716:function(e,a,t){e.exports=t.p+"static/media/webhook.e5374d73.png"},783:function(e,a,t){e.exports=t(1095)}},[[783,1,2]]]);